(function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=237)})([function(t,e,n){var i=n(3),r=n(32),o=n(21),s=n(22),a=n(27),u="prototype",h=function(t,e,n){var c,l,f,p,d=t&h.F,y=t&h.G,v=t&h.S,g=t&h.P,_=t&h.B,m=y?i:v?i[e]||(i[e]={}):(i[e]||{})[u],x=y?r:r[e]||(r[e]={}),w=x[u]||(x[u]={});y&&(n=e);for(c in n)f=((l=!d&&m&&void 0!==m[c])?m:n)[c],p=_&&l?a(f,i):g&&"function"==typeof f?a(Function.call,f):f,m&&s(m,c,f,t&h.U),x[c]!=f&&o(x,c,p),g&&w[c]!=f&&(w[c]=f)};i.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(238);n.n(i);const r=window.Crafty;delete window.Crafty,e.default=r},function(t,e,n){var i=n(6);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){(function(e,n){t.exports=n()})(0,function(){var t=t||function(t,e){var n=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),i={},r=i.lib={},o=r.Base={extend:function(t){var e=n(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;e[i+o>>>2]|=s<<24-(i+o)%4*8}else for(o=0;o<r;o+=4)e[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,i=[],r=function(e){e=e;var n=987654321,i=4294967295;return function(){var r=((n=36969*(65535&n)+(n>>16)&i)<<16)+(e=18e3*(65535&e)+(e>>16)&i)&i;return r/=4294967296,(r+=.5)*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var a=r(4294967296*(n||t.random()));n=987654071*a(),i.push(4294967296*a()|0)}return new s.init(i,e)}}),a=i.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new s.init(n,e/2)}},h=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var o=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new s.init(n,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(h.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return h.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,i=n.words,r=n.sigBytes,o=this.blockSize,a=r/(4*o),u=(a=e?t.ceil(a):t.max((0|a)-this._minBufferSize,0))*o,h=t.min(4*u,r);if(u){for(var c=0;c<u;c+=o)this._doProcessBlock(i,c);var l=i.splice(0,u);n.sigBytes-=h}return new s.init(l,h)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(r.Hasher=l.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);return this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),i.algo={});return i}(Math);return t})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){(function(e){var i,r,o,s;i=n(151),o=n(9),s=n(163),r={paused:!1,togglePause:function(){return this.paused=!this.paused,this.paused?(this.setGameSpeed(0),e("Delay").each(function(){return this.pauseDelays()}),e("Tween").each(function(){return this.pauseTweens()}),e("Particles").each(function(){return this.pauseParticles()}),e("SpriteAnimation").each(function(){return this.pauseAnimation()}),e("PlayerControlledShip").each(function(){if(!this.disableControls)return this.disabledThroughPause=!0,this.disableControl()}),e.trigger("GamePause",this.paused)):(this.setGameSpeed(1),e("Delay").each(function(){return this.resumeDelays()}),e("Tween").each(function(){return this.resumeTweens()}),e("Particles").each(function(){return this.resumeParticles()}),e("SpriteAnimation").each(function(){return this.resumeAnimation()}),e("PlayerControlledShip").each(function(){if(this.disabledThroughPause)return this.disabledThroughPause=null,this.enableControl()}),e.trigger("GamePause",this.paused))},setGameSpeed:function(t){return this.gameSpeed=t,e("SpriteAnimation").each(function(){if(!this.has("TimeManager"))return this.animationSpeed=t}),e("Delay").each(function(){if(!this.has("TimeManager"))return this.delaySpeed=t}),e("Tween").each(function(){if(!this.has("TimeManager"))return this.tweenSpeed=t})},start:function(){var t;return this.resetCredits(),!1===this.settings().sound&&e.audio.mute(),this.gameTime=0,this.setGameSpeed(1),e.bind("NewEntity",function(t){return function(n){var i;if(!(i=e(n.id)).has("TimeManager"))return i.has("SpriteAnimation")&&(i.animationSpeed=t.gameSpeed),i.has("Delay")&&(i.delaySpeed=t.gameSpeed),i.has("Tween")?i.tweenSpeed=t.gameSpeed:void 0}}(this)),e.bind("UpdateFrame",function(t){return function(n){return r.paused||(t.gameTime+=n.dt),n.dt=n.dt*t.gameSpeed,n.inGameTime=t.gameTime,e.trigger("GameLoop",n)}}(this)),e.paths({audio:"/",images:"/"}),t=document.getElementById("cr-stage"),e.init(1024,576,t),e.background("#000000"),e.timer.FPS(62.5),e.e("Player, Color").attr({name:"Player 1",z:0,playerNumber:1}).setName("Player 1").color("#FF0000"),e.e("Player, Color").attr({name:"Player 2",z:10,playerNumber:2}).setName("Player 2").color("#00FF00"),e.e("KeyboardControls, PlayerAssignable").controls({fire:e.keys.SPACE,switchWeapon:e.keys.PERIOD,super:e.keys.ENTER,up:e.keys.UP_ARROW,down:e.keys.DOWN_ARROW,left:e.keys.LEFT_ARROW,right:e.keys.RIGHT_ARROW,pause:e.keys.P}),e.e("KeyboardControls, PlayerAssignable").controls({fire:e.keys.G,switchWeapon:e.keys.H,up:e.keys.W,down:e.keys.S,left:e.keys.A,right:e.keys.D,pause:e.keys.Q}),e.e("GamepadControls, PlayerAssignable").controls({gamepadIndex:0,fire:0,switchWeapon:2,super:4,pause:9,up:12,down:13,left:14,right:15}),e.e("GamepadControls, PlayerAssignable").controls({gamepadIndex:1,fire:0,switchWeapon:2,super:4,pause:9,up:12,down:13,left:14,right:15}),e.enterScene("Intro")},resetCredits:function(){return this.credits=2},highscores:function(){var t,e,n,r;return n=function(){var t,e,n,r,o;return(e=localStorage.getItem("SPDLZR"))?(n=e.slice(0,20),t=e.slice(20),r=i.AES.decrypt(t,n),(o=r.toString(i.enc.Utf8)).length>1?JSON.parse(o):[]):[]},r=n(),t="SPL",e=[{initials:t,score:3e4},{initials:t,score:2e4},{initials:t,score:1e4},{initials:t,score:5e3},{initials:t,score:2500},{initials:t,score:1500},{initials:t,score:1e3},{initials:t,score:5e3},{initials:t,score:2e3},{initials:t,score:1500}].concat(r),s(e,"score").reverse()},settings:function(){var t,e;return t=localStorage.getItem("SPDLZRS"),e={},t&&(e=JSON.parse(t)),o(e,{sound:!0})},changeSettings:function(t){var e,n;return null==t&&(t={}),e=o(t,this.settings()),n=JSON.stringify(e),localStorage.setItem("SPDLZRS",n)}},t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){var i=n(88)("wks"),r=n(46),o=n(3).Symbol,s="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(154),r=n(262),o=n(69),s=n(281),a=o(function(t){return t.push(void 0,s),i(r,void 0,t)});t.exports=a},function(t,e,n){t.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var i=n(2),r=n(181),o=n(33),s=Object.defineProperty;e.f=n(10)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return s(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var i=n(35),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){var i=n(34);t.exports=function(t){return Object(i(t))}},function(t,e,n){(function(e,i){var r,o,s,a,u,h,c,l,f,p,d,y=function(t,e){return function(){return t.apply(e,arguments)}},v=[].slice,g={}.hasOwnProperty;f=n(66),d=n(31),p=n(229),o=n(692).default,h=n(693).default,s=n(699).default,r=n(700).default,c=n(701).default,l=n(234).default,f((u=function(){function t(t){this.level=t,this._endScriptOnGameOver=y(this._endScriptOnGameOver,this)}return t.prototype.run=function(){var t,n,i;return t=1<=arguments.length?v.call(arguments,0):[],this.currentSequence=Math.random(),this.options=null!=(i=t[0])?i:{},this.startAtCheckpoint=this.options.startAtCheckpoint,this.currentCheckpoint=0,n=e(!0),null!=this.assets&&(n=this.assets(this.options)(this.currentSequence)),n.then(function(e){return function(){return e.initialize.apply(e,t)}}(this))},t.prototype.end=function(){return this.currentSequence=null},t.prototype.initialize=function(){var t;return t=1<=arguments.length?v.call(arguments,0):[],i.bind("PlayerDied",this._endScriptOnGameOver),e(this.execute.apply(this,t)(this.currentSequence)).finally(function(t){return function(){return i.unbind("PlayerDied",t._endScriptOnGameOver)}}(this))},t.prototype.execute=function(){},t.prototype._endScriptOnGameOver=function(){var t;if(t=!1,i("Player ControlScheme").each(function(){if(this.lives>0)return t=!0}),!t)return this.currentSequence=null},t}()).prototype,o,h,r,c),f((a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)g.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,u),n.prototype.initialize=function(){var t,r,o,s;return t=1<=arguments.length?v.call(arguments,0):[],this.boundEvents=[],p(t)&&t.push({}),this.entity=this.spawn.apply(this,t),this.options.attach&&(o=i(this.options.attach).get(this.options.index),this.entity.has("ViewportFixed")&&this.entity.removeComponent("ViewportFixed"),o.attach(this.entity),this.entity.attr({x:o.x,y:o.y,z:o.z})),d(t[0])&&null!=t[0].identifier&&(r=t[0].identifier,this.entity.addComponent(r)),this.synchronizer=null!=(s=this.options.synchronizer)?s:new l,this.synchronizer.registerEntity(this),null==this.entity?(this.synchronizer.unregisterEntity(this),e({alive:!1,killedAt:new Date,location:null})):(this.entity.has("PlayerControlledShip")||this.entity.attr({x:this.entity.x,y:this.entity.y}),this.entity.bind("Destroyed",function(t){return function(){return t.currentSequence=null,t.synchronizer.unregisterEntity(t),t.enemy.location.x=t.entity.x,t.enemy.location.y=t.entity.y,t.enemy.alive=!1,t.enemy.killedAt=new Date}}(this)),this.enemy={moveState:"air",alive:!0,location:{}},n.__super__.initialize.apply(this,arguments).catch(function(t){return function(e){if("sequence mismatch"!==e.message)throw e;if(t.enemy.alive)return t.alternatePath}}(this)).finally(function(t){return function(){if(t.enemy.alive&&!t.entity.has("KeepAlive"))return t.entity.destroy()}}(this)).then(function(t){return function(){return t.enemy}}(this)))},n.prototype.spawn=function(){},n}()).prototype,s),t.exports={LazerScript:u,EntityScript:a}}).call(e,n(18).default,n(1).default)},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(42))})(0,function(t){t.lib.Cipher||function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=i.BufferedBlockAlgorithm,a=n.enc,u=(a.Utf8,a.Base64),h=n.algo.EvpKDF,c=i.Cipher=s.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){t&&this._append(t);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?m:g}return function(e){return{encrypt:function(n,i,r){return t(i).encrypt(e,n,i,r)},decrypt:function(n,i,r){return t(i).decrypt(e,n,i,r)}}}}()}),l=(i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),n.mode={}),f=i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),p=l.CBC=function(){function t(t,n,i){var r=this._iv;if(r){var o=r;this._iv=e}else o=this._prevBlock;for(var s=0;s<i;s++)t[n+s]^=o[s]}var n=f.extend();return n.Encryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize;t.call(this,e,n,r),i.encryptBlock(e,n),this._prevBlock=e.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(e,n){var i=this._cipher,r=i.blockSize,o=e.slice(n,n+r);i.decryptBlock(e,n),t.call(this,e,n,r),this._prevBlock=o}}),n}(),d=(n.pad={}).Pkcs7={pad:function(t,e){for(var n=4*e,i=n-t.sigBytes%n,r=i<<24|i<<16|i<<8|i,s=[],a=0;a<i;a+=4)s.push(r);var u=o.create(s,i);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},y=(i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:p,padding:d}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,n=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=n.createEncryptor;else{i=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==i?this._mode.init(this,e&&e.words):(this._mode=i.call(n,this,e&&e.words),this._mode.__creator=i)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{e=this._process(!0);t.unpad(e)}return e},blockSize:4}),i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),v=(n.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext,n=t.salt;if(n)var i=o.create([1398893684,1701076831]).concat(n).concat(e);else i=e;return i.toString(u)},parse:function(t){var e=u.parse(t),n=e.words;if(1398893684==n[0]&&1701076831==n[1]){var i=o.create(n.slice(2,4));n.splice(0,4),e.sigBytes-=16}return y.create({ciphertext:e,salt:i})}},g=i.SerializableCipher=r.extend({cfg:r.extend({format:v}),encrypt:function(t,e,n,i){i=this.cfg.extend(i);var r=t.createEncryptor(n,i),o=r.finalize(e),s=r.cfg;return y.create({ciphertext:o,key:n,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:i.format})},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);return t.createDecryptor(n,i).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),_=(n.kdf={}).OpenSSL={execute:function(t,e,n,i){i||(i=o.random(8));var r=h.create({keySize:e+n}).compute(t,i),s=o.create(r.words.slice(e),4*n);return r.sigBytes=4*e,y.create({key:r,iv:s,salt:i})}},m=i.PasswordBasedCipher=g.extend({cfg:g.cfg.extend({kdf:_}),encrypt:function(t,e,n,i){var r=(i=this.cfg.extend(i)).kdf.execute(n,t.keySize,t.ivSize);i.iv=r.iv;var o=g.encrypt.call(this,t,e,r.key,i);return o.mixIn(r),o},decrypt:function(t,e,n,i){i=this.cfg.extend(i),e=this._parse(e,i.format);var r=i.kdf.execute(n,t.keySize,t.ivSize,e.salt);i.iv=r.iv;return g.decrypt.call(this,t,e,r.key,i)}})}()})},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(573),r=n.n(i),o=n(588),s=n.n(o),a=n(589),u=n.n(a);r.a.parallel=u.a,r.a.sequence=s.a,e.default=r.a},function(t,e){var n=Array.isArray;t.exports=n},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(11),r=n(45);t.exports=n(10)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var i=n(3),r=n(21),o=n(20),s=n(46)("src"),a="toString",u=Function[a],h=(""+u).split(a);n(32).inspectSource=function(t){return u.call(t)},(t.exports=function(t,e,n,a){var u="function"==typeof n;u&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(u&&(o(n,s)||r(n,s,t[e]?""+t[e]:h.join(String(e)))),t===i?t[e]=n:a?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||u.call(this)})},function(t,e,n){var i=n(0),r=n(5),o=n(34),s=/"/g,a=function(t,e,n,i){var r=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(a),i(i.P+i.F*r(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){var i=n(70),r=n(34);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(71),r=n(45),o=n(24),s=n(33),a=n(20),u=n(181),h=Object.getOwnPropertyDescriptor;e.f=n(10)?h:function(t,e){if(t=o(t),e=s(e,!0),u)try{return h(t,e)}catch(t){}if(a(t,e))return r(!i.f.call(t,e),t[e])}},function(t,e,n){var i=n(20),r=n(14),o=n(121)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},function(t,e,n){var i=n(17);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var i=n(5);t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){var i=n(158),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(0),r=n(32),o=n(5);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}},function(t,e,n){var i=n(27),r=n(70),o=n(14),s=n(12),a=n(138);t.exports=function(t,e){var n=1==t,u=2==t,h=3==t,c=4==t,l=6==t,f=5==t||l,p=e||a;return function(e,a,d){for(var y,v,g=o(e),_=r(g),m=i(a,d,3),x=s(_.length),w=0,b=n?p(e,x):u?p(e,0):void 0;x>w;w++)if((f||w in _)&&(y=_[w],v=m(y,w,g),t))if(n)b[w]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return w;case 2:b.push(y)}else if(c)return!1;return l?-1:h||c?c:b}}},function(t,e,n){"use strict";if(n(10)){var i=n(47),r=n(3),o=n(5),s=n(0),a=n(98),u=n(144),h=n(27),c=n(53),l=n(45),f=n(21),p=n(55),d=n(35),y=n(12),v=n(207),g=n(49),_=n(33),m=n(20),x=n(72),w=n(6),b=n(14),S=n(135),C=n(50),k=n(26),P=n(51).f,M=n(137),D=n(46),T=n(8),E=n(37),O=n(89),A=n(96),j=n(140),F=n(64),B=n(93),L=n(52),z=n(139),R=n(197),I=n(11),H=n(25),W=I.f,q=H.f,G=r.RangeError,N=r.TypeError,U=r.Uint8Array,X="ArrayBuffer",V="Shared"+X,Y="BYTES_PER_ELEMENT",K="prototype",Q=Array[K],J=u.ArrayBuffer,Z=u.DataView,$=E(0),tt=E(2),et=E(3),nt=E(4),it=E(5),rt=E(6),ot=O(!0),st=O(!1),at=j.values,ut=j.keys,ht=j.entries,ct=Q.lastIndexOf,lt=Q.reduce,ft=Q.reduceRight,pt=Q.join,dt=Q.sort,yt=Q.slice,vt=Q.toString,gt=Q.toLocaleString,_t=T("iterator"),mt=T("toStringTag"),xt=D("typed_constructor"),wt=D("def_constructor"),bt=a.CONSTR,St=a.TYPED,Ct=a.VIEW,kt="Wrong length!",Pt=E(1,function(t,e){return Ot(A(t,t[wt]),e)}),Mt=o(function(){return 1===new U(new Uint16Array([1]).buffer)[0]}),Dt=!!U&&!!U[K].set&&o(function(){new U(1).set({})}),Tt=function(t,e){var n=d(t);if(n<0||n%e)throw G("Wrong offset!");return n},Et=function(t){if(w(t)&&St in t)return t;throw N(t+" is not a typed array!")},Ot=function(t,e){if(!(w(t)&&xt in t))throw N("It is not a typed array constructor!");return new t(e)},At=function(t,e){return jt(A(t,t[wt]),e)},jt=function(t,e){for(var n=0,i=e.length,r=Ot(t,i);i>n;)r[n]=e[n++];return r},Ft=function(t,e,n){W(t,e,{get:function(){return this._d[n]}})},Bt=function(t){var e,n,i,r,o,s,a=b(t),u=arguments.length,c=u>1?arguments[1]:void 0,l=void 0!==c,f=M(a);if(void 0!=f&&!S(f)){for(s=f.call(a),i=[],e=0;!(o=s.next()).done;e++)i.push(o.value);a=i}for(l&&u>2&&(c=h(c,arguments[2],2)),e=0,n=y(a.length),r=Ot(this,n);n>e;e++)r[e]=l?c(a[e],e):a[e];return r},Lt=function(){for(var t=0,e=arguments.length,n=Ot(this,e);e>t;)n[t]=arguments[t++];return n},zt=!!U&&o(function(){gt.call(new U(1))}),Rt=function(){return gt.apply(zt?yt.call(Et(this)):Et(this),arguments)},It={copyWithin:function(t,e){return R.call(Et(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Et(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return z.apply(Et(this),arguments)},filter:function(t){return At(this,tt(Et(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return it(Et(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return rt(Et(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){$(Et(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return st(Et(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Et(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Et(this),arguments)},lastIndexOf:function(t){return ct.apply(Et(this),arguments)},map:function(t){return Pt(Et(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Et(this),arguments)},reduceRight:function(t){return ft.apply(Et(this),arguments)},reverse:function(){for(var t,e=Et(this).length,n=Math.floor(e/2),i=0;i<n;)t=this[i],this[i++]=this[--e],this[e]=t;return this},some:function(t){return et(Et(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Et(this),t)},subarray:function(t,e){var n=Et(this),i=n.length,r=g(t,i);return new(A(n,n[wt]))(n.buffer,n.byteOffset+r*n.BYTES_PER_ELEMENT,y((void 0===e?i:g(e,i))-r))}},Ht=function(t,e){return At(this,yt.call(Et(this),t,e))},Wt=function(t){Et(this);var e=Tt(arguments[1],1),n=this.length,i=b(t),r=y(i.length),o=0;if(r+e>n)throw G(kt);for(;o<r;)this[e+o]=i[o++]},qt={entries:function(){return ht.call(Et(this))},keys:function(){return ut.call(Et(this))},values:function(){return at.call(Et(this))}},Gt=function(t,e){return w(t)&&t[St]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Nt=function(t,e){return Gt(t,e=_(e,!0))?l(2,t[e]):q(t,e)},Ut=function(t,e,n){return!(Gt(t,e=_(e,!0))&&w(n)&&m(n,"value"))||m(n,"get")||m(n,"set")||n.configurable||m(n,"writable")&&!n.writable||m(n,"enumerable")&&!n.enumerable?W(t,e,n):(t[e]=n.value,t)};bt||(H.f=Nt,I.f=Ut),s(s.S+s.F*!bt,"Object",{getOwnPropertyDescriptor:Nt,defineProperty:Ut}),o(function(){vt.call({})})&&(vt=gt=function(){return pt.call(this)});var Xt=p({},It);p(Xt,qt),f(Xt,_t,qt.values),p(Xt,{slice:Ht,set:Wt,constructor:function(){},toString:vt,toLocaleString:Rt}),Ft(Xt,"buffer","b"),Ft(Xt,"byteOffset","o"),Ft(Xt,"byteLength","l"),Ft(Xt,"length","e"),W(Xt,mt,{get:function(){return this[St]}}),t.exports=function(t,e,n,u){var h=t+((u=!!u)?"Clamped":"")+"Array",l="get"+t,p="set"+t,d=r[h],g=d||{},_=d&&k(d),m=!d||!a.ABV,b={},S=d&&d[K],M=function(t,n){W(t,n,{get:function(){return function(t,n){var i=t._d;return i.v[l](n*e+i.o,Mt)}(this,n)},set:function(t){return function(t,n,i){var r=t._d;u&&(i=(i=Math.round(i))<0?0:i>255?255:255&i),r.v[p](n*e+r.o,i,Mt)}(this,n,t)},enumerable:!0})};m?(d=n(function(t,n,i,r){c(t,d,h,"_d");var o,s,a,u,l=0,p=0;if(w(n)){if(!(n instanceof J||(u=x(n))==X||u==V))return St in n?jt(d,n):Bt.call(d,n);o=n,p=Tt(i,e);var g=n.byteLength;if(void 0===r){if(g%e)throw G(kt);if((s=g-p)<0)throw G(kt)}else if((s=y(r)*e)+p>g)throw G(kt);a=s/e}else a=v(n),o=new J(s=a*e);for(f(t,"_d",{b:o,o:p,l:s,e:a,v:new Z(o)});l<a;)M(t,l++)}),S=d[K]=C(Xt),f(S,"constructor",d)):o(function(){d(1)})&&o(function(){new d(-1)})&&B(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,i,r){c(t,d,h);var o;return w(n)?n instanceof J||(o=x(n))==X||o==V?void 0!==r?new g(n,Tt(i,e),r):void 0!==i?new g(n,Tt(i,e)):new g(n):St in n?jt(d,n):Bt.call(d,n):new g(v(n))}),$(_!==Function.prototype?P(g).concat(P(_)):P(g),function(t){t in d||f(d,t,g[t])}),d[K]=S,i||(S.constructor=d));var D=S[_t],T=!!D&&("values"==D.name||void 0==D.name),E=qt.values;f(d,xt,!0),f(S,St,h),f(S,Ct,!0),f(S,wt,d),(u?new d(1)[mt]==h:mt in S)||W(S,mt,{get:function(){return h}}),b[h]=d,s(s.G+s.W+s.F*(d!=g),b),s(s.S,h,{BYTES_PER_ELEMENT:e}),s(s.S+s.F*o(function(){g.of.call(d,1)}),h,{from:Bt,of:Lt}),Y in S||f(S,Y,e),s(s.P,h,It),L(h),s(s.P+s.F*Dt,h,{set:Wt}),s(s.P+s.F*!T,h,qt),i||S.toString==vt||(S.toString=vt),s(s.P+s.F*o(function(){new d(1).slice()}),h,{slice:Ht}),s(s.P+s.F*(o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){S.toLocaleString.call([1,2])})),h,{toLocaleString:Rt}),F[h]=T?D:E,i||T||f(S,_t,E)}}else t.exports=function(){}},function(t,e,n){var i=n(202),r=n(0),o=n(88)("metadata"),s=o.store||(o.store=new(n(205))),a=function(t,e,n){var r=s.get(t);if(!r){if(!n)return;s.set(t,r=new i)}var o=r.get(e);if(!o){if(!n)return;r.set(e,o=new i)}return o};t.exports={store:s,map:a,has:function(t,e,n){var i=a(e,n,!1);return void 0!==i&&i.has(t)},get:function(t,e,n){var i=a(e,n,!1);return void 0===i?void 0:i.get(t)},set:function(t,e,n,i){a(n,i,!0).set(t,e)},keys:function(t,e){var n=a(t,e,!1),i=[];return n&&n.forEach(function(t,e){i.push(e)}),i},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){r(r.S,"Reflect",t)}}},function(t,e,n){var i=n(46)("meta"),r=n(6),o=n(20),s=n(11).f,a=0,u=Object.isExtensible||function(){return!0},h=!n(5)(function(){return u(Object.preventExtensions({}))}),c=function(t){s(t,i,{value:{i:"O"+ ++a,w:{}}})},l=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[i].i},getWeak:function(t,e){if(!o(t,i)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[i].w},onFreeze:function(t){return h&&l.NEED&&u(t)&&!o(t,i)&&c(t),t}}},function(t,e,n){var i=n(8)("unscopables"),r=Array.prototype;void 0==r[i]&&n(21)(r,i,{}),t.exports=function(t){r[i][t]=!0}},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(104),n(105))})(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=n.hasher.create(),o=r.create(),s=o.words,a=n.keySize,u=n.iterations;s.length<a;){h&&i.update(h);var h=i.update(t).finalize(e);i.reset();for(var c=1;c<u;c++)h=i.finalize(h),i.reset();o.concat(h)}return o.sigBytes=4*a,o}});e.EvpKDF=function(t,e,n){return a.create(n).compute(t,e)}}(),t.EvpKDF})},function(t,e,n){var i=n(263),r=n(268);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},function(t,e,n){var i=n(75),r=n(107);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e){t.exports=!1},function(t,e,n){var i=n(183),r=n(122);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(35),r=Math.max,o=Math.min;t.exports=function(t,e){return(t=i(t))<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(2),r=n(184),o=n(122),s=n(121)("IE_PROTO"),a=function(){},u=function(){var t,e=n(119)("iframe"),i=o.length;for(e.style.display="none",n(123).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;i--;)delete u.prototype[o[i]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=i(t),n=new a,a.prototype=null,n[s]=t):n=u(),void 0===e?n:r(n,e)}},function(t,e,n){var i=n(183),r=n(122).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},function(t,e,n){"use strict";var i=n(3),r=n(11),o=n(10),s=n(8)("species");t.exports=function(t){var e=i[t];o&&e&&!e[s]&&r.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(27),r=n(195),o=n(135),s=n(2),a=n(12),u=n(137),h={},c={};(e=t.exports=function(t,e,n,l,f){var p,d,y,v,g=f?function(){return t}:u(t),_=i(n,l,e?2:1),m=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=a(t.length);p>m;m++)if((v=e?_(s(d=t[m])[0],d[1]):_(t[m]))===h||v===c)return v}else for(y=g.call(t);!(d=y.next()).done;)if((v=r(y,_,d.value,e))===h||v===c)return v}).BREAK=h,e.RETURN=c},function(t,e,n){var i=n(22);t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(){var e=t,n=e.lib.WordArray;e.enc.Base64={stringify:function(t){var e=t.words,n=t.sigBytes,i=this._map;t.clamp();for(var r=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a++)r.push(i.charAt(s>>>6*(3-a)&63));var u=i.charAt(64);if(u)for(;r.length%4;)r.push(u);return r.join("")},parse:function(t){var e=t.length,i=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<i.length;o++)r[i.charCodeAt(o)]=o}var s=i.charAt(64);if(s){var a=t.indexOf(s);-1!==a&&(e=a)}return function(t,e,i){for(var r=[],o=0,s=0;s<e;s++)if(s%4){var a=i[t.charCodeAt(s-1)]<<s%4*2,u=i[t.charCodeAt(s)]>>>6-s%4*2;r[o>>>2]|=(a|u)<<24-o%4*8,o++}return n.create(r,o)}(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),t.enc.Base64})},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(e){function n(t,e,n,i,r,o,s){var a=t+(e&n|~e&i)+r+s;return(a<<o|a>>>32-o)+e}function i(t,e,n,i,r,o,s){var a=t+(e&i|n&~i)+r+s;return(a<<o|a>>>32-o)+e}function r(t,e,n,i,r,o,s){var a=t+(e^n^i)+r+s;return(a<<o|a>>>32-o)+e}function o(t,e,n,i,r,o,s){var a=t+(n^(e|~i))+r+s;return(a<<o|a>>>32-o)+e}var s=t,a=s.lib,u=a.WordArray,h=a.Hasher,c=s.algo,l=[];(function(){for(var t=0;t<64;t++)l[t]=4294967296*e.abs(e.sin(t+1))|0})();var f=c.MD5=h.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;s<16;s++){var a=e+s,u=t[a];t[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var h=this._hash.words,c=t[e+0],f=t[e+1],p=t[e+2],d=t[e+3],y=t[e+4],v=t[e+5],g=t[e+6],_=t[e+7],m=t[e+8],x=t[e+9],w=t[e+10],b=t[e+11],S=t[e+12],C=t[e+13],k=t[e+14],P=t[e+15],M=h[0],D=h[1],T=h[2],E=h[3];D=o(D=o(D=o(D=o(D=r(D=r(D=r(D=r(D=i(D=i(D=i(D=i(D=n(D=n(D=n(D=n(D,T=n(T,E=n(E,M=n(M,D,T,E,c,7,l[0]),D,T,f,12,l[1]),M,D,p,17,l[2]),E,M,d,22,l[3]),T=n(T,E=n(E,M=n(M,D,T,E,y,7,l[4]),D,T,v,12,l[5]),M,D,g,17,l[6]),E,M,_,22,l[7]),T=n(T,E=n(E,M=n(M,D,T,E,m,7,l[8]),D,T,x,12,l[9]),M,D,w,17,l[10]),E,M,b,22,l[11]),T=n(T,E=n(E,M=n(M,D,T,E,S,7,l[12]),D,T,C,12,l[13]),M,D,k,17,l[14]),E,M,P,22,l[15]),T=i(T,E=i(E,M=i(M,D,T,E,f,5,l[16]),D,T,g,9,l[17]),M,D,b,14,l[18]),E,M,c,20,l[19]),T=i(T,E=i(E,M=i(M,D,T,E,v,5,l[20]),D,T,w,9,l[21]),M,D,P,14,l[22]),E,M,y,20,l[23]),T=i(T,E=i(E,M=i(M,D,T,E,x,5,l[24]),D,T,k,9,l[25]),M,D,d,14,l[26]),E,M,m,20,l[27]),T=i(T,E=i(E,M=i(M,D,T,E,C,5,l[28]),D,T,p,9,l[29]),M,D,_,14,l[30]),E,M,S,20,l[31]),T=r(T,E=r(E,M=r(M,D,T,E,v,4,l[32]),D,T,m,11,l[33]),M,D,b,16,l[34]),E,M,k,23,l[35]),T=r(T,E=r(E,M=r(M,D,T,E,f,4,l[36]),D,T,y,11,l[37]),M,D,_,16,l[38]),E,M,w,23,l[39]),T=r(T,E=r(E,M=r(M,D,T,E,C,4,l[40]),D,T,c,11,l[41]),M,D,d,16,l[42]),E,M,g,23,l[43]),T=r(T,E=r(E,M=r(M,D,T,E,x,4,l[44]),D,T,S,11,l[45]),M,D,P,16,l[46]),E,M,p,23,l[47]),T=o(T,E=o(E,M=o(M,D,T,E,c,6,l[48]),D,T,_,10,l[49]),M,D,k,15,l[50]),E,M,v,21,l[51]),T=o(T,E=o(E,M=o(M,D,T,E,S,6,l[52]),D,T,d,10,l[53]),M,D,w,15,l[54]),E,M,f,21,l[55]),T=o(T,E=o(E,M=o(M,D,T,E,m,6,l[56]),D,T,P,10,l[57]),M,D,g,15,l[58]),E,M,C,21,l[59]),T=o(T,E=o(E,M=o(M,D,T,E,y,6,l[60]),D,T,b,10,l[61]),M,D,p,15,l[62]),E,M,x,21,l[63]),h[0]=h[0]+M|0,h[1]=h[1]+D|0,h[2]=h[2]+T|0,h[3]=h[3]+E|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,u=a.words,h=0;h<4;h++){var c=u[h];u[h]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}return a},clone:function(){var t=h.clone.call(this);return t._hash=this._hash.clone(),t}});s.MD5=h._createHelper(f),s.HmacMD5=h._createHmacHelper(f)}(Math),t.MD5})},function(t,e,n){var i=n(155),r=n(156);t.exports=function(t,e,n,o){var s=!n;n||(n={});for(var a=-1,u=e.length;++a<u;){var h=e[a],c=o?o(n[h],t[h],h,n,t):void 0;void 0===c&&(c=t[h]),s?r(n,h,c):i(n,h,c)}return n}},function(t,e,n){var i=n(30).Symbol;t.exports=i},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){var i=n(162),r=n(175),o=n(44);t.exports=function(t){return o(t)?i(t):r(t)}},function(t,e,n){var i=n(11).f,r=n(20),o=n(8)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(0),r=n(34),o=n(5),s=n(125),a="["+s+"]",u=RegExp("^"+a+a+"*"),h=RegExp(a+a+"*$"),c=function(t,e,n){var r={},a=o(function(){return!!s[t]()||"​"!="​"[t]()}),u=r[t]=a?e(l):s[t];n&&(r[n]=u),i(i.P+i.F*a,"String",r)},l=c.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(h,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,n){var i=n(6);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){t.exports=n(622)},function(t,e,n){var i=n(59),r=n(264),o=n(265),s="[object Null]",a="[object Undefined]",u=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?a:s:u&&u in Object(t)?r(t):o(t)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(76),r=n(269),o=n(270);t.exports=function(t,e){return o(r(t,e,i),t+"")}},function(t,e,n){var i=n(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(28),r=n(8)("toStringTag"),o="Arguments"==i(function(){return arguments}());t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var i=n(602),r=4;t.exports=function(t){return i(t,r)}},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(e){var n=t,i=n.lib,r=i.Base,o=i.WordArray,s=n.x64={};s.Word=r.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=r.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:8*t.length},toX32:function(){for(var t=this.words,e=t.length,n=[],i=0;i<e;i++){var r=t[i];n.push(r.high),n.push(r.low)}return o.create(n,this.sigBytes)},clone:function(){for(var t=r.clone.call(this),e=t.words=this.words.slice(0),n=e.length,i=0;i<n;i++)e[i]=e[i].clone();return t}})}(),t})},function(t,e,n){var i=n(67),r=n(31),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!r(t))return!1;var e=i(t);return e==s||e==a||e==o||e==u}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(162),r=n(279),o=n(44);t.exports=function(t){return o(t)?i(t,!0):r(t)}},function(t,e,n){var i=n(275),r=n(60),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(t){return r(t)&&s.call(t,"callee")&&!a.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var i=n(30),r=n(276),o="object"==typeof e&&e&&!e.nodeType&&e,s=o&&"object"==typeof t&&t&&!t.nodeType&&t,a=s&&s.exports===o?i.Buffer:void 0,u=(a?a.isBuffer:void 0)||r;t.exports=u}).call(e,n(109)(t))},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(287),o=n(288),s=n(289),a=n(290),u=n(291);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=u,t.exports=i},function(t,e,n){var i=n(68);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){var i=n(43)(Object,"create");t.exports=i},function(t,e,n){var i=n(305);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(67),r=n(60),o="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||r(t)&&i(t)==o}},function(t,e,n){var i=n(86),r=1/0;t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}},function(t,e,n){var i=n(3),r="__core-js_shared__",o=i[r]||(i[r]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var i=n(24),r=n(12),o=n(49);t.exports=function(t){return function(e,n,s){var a,u=i(e),h=r(u.length),c=o(s,h);if(t&&n!=n){for(;h>c;)if((a=u[c++])!=a)return!0}else for(;h>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(28);t.exports=Array.isArray||function(t){return"Array"==i(t)}},function(t,e,n){var i=n(6),r=n(28),o=n(8)("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},function(t,e,n){var i=n(8)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var i=n(2);t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var i=n(21),r=n(22),o=n(5),s=n(34),a=n(8);t.exports=function(t,e,n){var u=a(t),h=n(s,u,""[t]),c=h[0],l=h[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(r(String.prototype,t,c),i(RegExp.prototype,u,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},function(t,e,n){var i=n(2),r=n(17),o=n(8)("species");t.exports=function(t,e){var n,s=i(t).constructor;return void 0===s||void 0==(n=i(s)[o])?e:r(n)}},function(t,e,n){"use strict";var i=n(3),r=n(0),o=n(22),s=n(55),a=n(40),u=n(54),h=n(53),c=n(6),l=n(5),f=n(93),p=n(62),d=n(126);t.exports=function(t,e,n,y,v,g){var _=i[t],m=_,x=v?"set":"add",w=m&&m.prototype,b={},S=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof m&&(g||w.forEach&&!l(function(){(new m).entries().next()}))){var C=new m,k=C[x](g?{}:-0,1)!=C,P=l(function(){C.has(1)}),M=f(function(t){new m(t)}),D=!g&&l(function(){for(var t=new m,e=5;e--;)t[x](e,e);return!t.has(-0)});M||((m=e(function(e,n){h(e,m,t);var i=d(new _,e,m);return void 0!=n&&u(n,v,i[x],i),i})).prototype=w,w.constructor=m),(P||D)&&(S("delete"),S("has"),v&&S("get")),(D||k)&&S(x),g&&w.clear&&delete w.clear}else m=y.getConstructor(e,t,v,x),s(m.prototype,n),a.NEED=!0;return p(m,t),b[t]=m,r(r.G+r.W+r.F*(m!=_),b),g||y.setStrong(m,t,v),m}},function(t,e,n){for(var i,r=n(3),o=n(21),s=n(46),a=s("typed_array"),u=s("view"),h=!(!r.ArrayBuffer||!r.DataView),c=h,l=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(i=r[f[l++]])?(o(i.prototype,a,!0),o(i.prototype,u,!0)):c=!1;t.exports={ABV:h,CONSTR:c,TYPED:a,VIEW:u}},function(t,e,n){"use strict";t.exports=n(47)||!n(5)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(3)[t]})},function(t,e,n){"use strict";var i=n(0);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var i=n(0),r=n(17),o=n(27),s=n(54);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,a,u=arguments[1];return r(this),(e=void 0!==u)&&r(u),void 0==t?new this:(n=[],e?(i=0,a=o(u,arguments[2],2),s(t,!1,function(t){n.push(a(t,i++))})):s(t,!1,n.push,n),new this(n))}})}},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l=function(t,e){function n(){this.constructor=t}for(var i in e)f.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=n(15).EntityScript,i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,o),e.prototype.assets=function(){return this.loadAssets("drone")},e.prototype.onKilled=function(){return this.sequence(this.deathDecoy(),this.smallExplosion({juice:this.juice,offsetX:20,offsetY:20}),this.rotate(30,60),this.smokePrint(),this.moveTo({y:1e3,speed:600,easing:"easeInQuad"}),this.endDecoy())},e}(),a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(t){var n,i;return n=e.e("Drone").drone({x:.15*e.viewport.width,y:.9*e.viewport.height,defaultSpeed:null!=(i=t.speed)?i:300,juice:t.juice}),this.juice=t.juice,t.shootOnSight&&n.addComponent("ShootOnSight").shootOnSight({cooldown:1e3+8e3*Math.random(),sightAngle:250,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:10,h:10,damage:1}).shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.movePath([[.15,.21],[.156,.5],[.5,.833],[.86,.52],[.5,.21],[.156,.5],[.5,.833],[.86,.52],[-20,.21]],{rotate:!1})},n}(),c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(t){var n,i;return n=e.e("Drone").drone({x:e.viewport.width+40,y:e.viewport.height/2,defaultSpeed:null!=(i=t.speed)?i:400,juice:t.juice}),this.juice=t.juice,t.shootOnSight&&n.addComponent("ShootOnSight").shootOnSight({cooldown:2e3+8e3*Math.random(),sightAngle:250,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:10,h:10,damage:1,speed:500}).shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.movePath([[.5,.21],[.156,.5],[.5,.833],[.86,.52],[.5,.21],[.156,.5],[.5,.833],[.86,.52],[.5,.21],[.156,.5],[.5,.833],[.86,.52],[-20,.21]],{rotate:!1})},n}(),h=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(){return e.e("Drone").drone({health:100,x:e.viewport.width+40,y:.83*e.viewport.height,defaultSpeed:600,pointsOnHit:125})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.pickTarget("PlayerControlledShip"),this.moveTo({x:1.1,y:1.01}),this.repeat(5,this.sequence(this.moveTo(this.targetLocation(),{y:1.01,speed:400,easing:"easeInOutQuad"}),this.wait(100))),this.moveTo({y:.7,speed:200,easing:"easeOutQuad"}),this.wait(100),this.moveTo({y:.73,speed:100,easing:"easeInOutQuad"}),this.wait(100),this.moveTo({y:.7,speed:100,easing:"easeInOutQuad"}),this.moveTo({y:-50,easing:"easeInQuad"}))},n}(),s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(){return e.e("Drone, ShootOnSight, Horizon").drone({x:-50,y:.7*e.viewport.height,defaultSpeed:300}).shootOnSight({cooldown:5e3+8e3*Math.random(),sightAngle:250,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:10,h:10}).shoot(t,n,i)}})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.sendToBackground(.5,-400),this.parallel(this.movePath([[.6,.7],[.8,.3],[.5,.1],[.2,.25],[.5,.7],[.8,.4],[.5,.21],[.156,.5],[.5,.833],[.86,.52],[-.1,.4]]),this.sequence(this.wait(2e3),this.scale(1,{duration:2e3}),this.reveal())))},n}(),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(t){var n,i;return n=e.e("Drone").drone({x:t.x?t.x:e.viewport.width+40,y:t.y?t.y:.71*e.viewport.height,defaultSpeed:null!=(i=t.speed)?i:400,juice:t.juice}),this.juice=t.juice,t.shootOnSight&&n.addComponent("ShootOnSight").shootOnSight({cooldown:2e3+8e3*Math.random(),sightAngle:250,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:10,h:10,damage:1,speed:500}).shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.movePath([[.5,.625],[.2,.5],[.53,.21],[.9,.54],[.5,.625],[.2,.5],[.53,.21],[.9,.54],[-20,.625]])},n}(),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return l(n,i),n.prototype.spawn=function(){return e.e("Drone, ShootOnSight, Horizon").drone({x:e.viewport.width+40,y:.23*e.viewport.height,defaultSpeed:350}).shootOnSight({targetType:"CameraCrew",shootWhenHidden:!0,projectile:function(t,n,i){return e.e("Projectile, Color, BackgroundBullet, Horizon").attr({w:3,h:3,z:-200,speed:400,topDesaturation:.5,bottomDesaturation:.5}).color("#FFFF00").shoot(t,n,i)}})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.sendToBackground(.5,-200),this.parallel(this.movePath([[.96,.64],[.3,.35],[.65,.23],[.93,.43],[.33,.63],[-.33,.23]]),this.sequence(this.wait(1500),this.scale(1,{duration:4e3}),this.reveal(),this.shootPlayer())))},n.prototype.shootPlayer=function(){return function(t){return function(){return t.entity.shootOnSight({cooldown:1e3+8e3*Math.random(),sightAngle:360,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").attr({w:10,h:10,damage:1,speed:500}).blink().shoot(t,n,i)}})}}(this)},n}(),t.exports={Swirler:c,Shooter:u,CrewShooters:r,Stalker:h,ScraperFlyer:s,ShipDrone:a}}).call(e,n(1).default)},function(t,e,n){(function(e,i){var r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w=function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},b={}.hasOwnProperty;x=n(9),o=n(15).EntityScript,s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return w(e,o),e.prototype.assets=function(){return this.loadAssets("largeDrone")},e.prototype.rocketStrikeDance=function(){return this.parallel(this.movePath([[.7,.4],[.8,.3],[.9,.5],[.7,.6],[.8,.7],[.9,.4],[.7,.1],[.6,.2]],{speed:250}),this.repeat(2,this.sequence(this.fireRockets(4),this.wait(500),this.fireRockets(4),this.wait(400),this.fireRockets(2),this.wait(200))))},e.prototype.rocketStrikeDanceHoming=function(){return this.parallel(this.movePath([[.7,.4],[.8,.3],[.9,.5],[.7,.6],[.8,.7],[.9,.4],[.7,.1],[.6,.2]]),this.repeat(2,this.sequence(this.fireRockets(2,!0),this.wait(600),this.fireRockets(2,!0),this.wait(600),this.fireRockets(2,!0),this.wait(900),this.fireRockets(4),this.wait(300))))},e.prototype.fireRockets=function(t,e){var n;return n=g,e&&(n=a),this.sequence(this.async(this.placeSquad(n,{options:{z:5,offsetX:0,offsetY:50,pointsOnHit:0,pointsOnDestroy:0,location:this.location()}})),this.animate("emptyWing",0,"wing"),this.async(this.placeSquad(n,{options:{z:-5,offsetX:0,offsetY:-50,pointsOnHit:0,pointsOnDestroy:0,location:this.location()}})),this.if(function(){return t>2},this.async(this.placeSquad(n,{options:{z:-5,offsetX:30,offsetY:-100,location:this.location(),pointsOnHit:0,pointsOnDestroy:0}}))),this.if(function(){return t>3},this.async(this.placeSquad(n,{options:{z:-5,offsetX:30,offsetY:100,location:this.location(),pointsOnHit:0,pointsOnDestroy:0}}))),this.wait(500),this.animate("reload",0,"wing"))},e.prototype.smoke=function(t){var e;return null==t&&(t="heavy"),e={heavy:{alpha:.8,wait:40},medium:{alpha:.6,wait:80},light:{alpha:.4,wait:140}}[t],this.sequence(this.blast(this.location(),function(t){return function(){return{radius:10,duration:480,z:t.entity.z-3,alpha:e.alpha,lightness:1}}}(this),function(){return this.attr({rotation:this.rotation+1,alpha:Math.max(0,this.alpha-.003),lightness:function(){return Math.max(.2,this.lightness-.05)}}),{y:this.y-2*Math.random()}}),this.wait(function(){return e.wait+50*Math.random()}))},e}(),m=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,s),n.prototype.spawn=function(){return e.e("LargeDrone, Horizon").drone({x:e.viewport.width+40,y:.35*e.viewport.height,defaultSpeed:100,health:3e4,pointsOnHit:10})},n.prototype.execute=function(){return this.bindSequence("Hit",this.fase2,function(t){return function(){return t.entity.healthBelow(.7)}}(this)),this.sequence(this.invincible(!0),this.animate("slow",-1,"eye"),this.disableWeapons(),this.parallel(this.moveTo({x:.75,y:.41}),this.say("Drone Commander","We have control over the AI now! You will suffer!\nEarths defences are in our hands!")),this.laugh(),this.invincible(!1),this.enableWeapons(),this.async(this.placeSquad(g,{options:{location:this.location(),pointsOnDestroy:0,pointsOnHit:0}})),this.animate("emptyWing",0,"wing"),this.animate("reload",0,"wing"),this.moveTo({y:.43,speed:5}),this.repeat(this.sequence(this.choose(this.homingMissileStrike(),this.rocketStrikeDance()),this.movePath([[.9,.4],[.7,.5]],{speed:150}),this.choose(this.mineStomp(),this.searchMines(),this.minePatterns()),this.movePath([[.7,.5],[.9,.4]],{speed:150}))))},n.prototype.fase2=function(){return this.bindSequence("Hit",this.fase3,function(t){return function(){return t.entity.healthBelow(.4)}}(this)),this.sequence(this.mineFieldStrike("BridgeDamage"),this.cancelBullets("Mine"),this.cancelBullets("shadow"),this.repeat(this.sequence(this.movePath([[.7,.5],[.9,.4]],{speed:300}),this.withDebrisFalling(this.choose(this.homingMissileStrike(),this.rocketStrikeDance(),this.debrisFalling())),this.movePath([[.9,.4],[.7,.5]],{speed:300}),this.withDebrisFalling(this.choose(this.mineStomp(),this.searchMines(),this.minePatterns())))))},n.prototype.withDebrisFalling=function(t){return this.parallel(t,this.placeSquad(r,{amount:2,delay:2e3}))},n.prototype.debrisFalling=function(){return this.sequence(this.moveTo({x:1.2,speed:300,easing:"easeInQuad"}),this.placeSquad(r,{amount:5,delay:700}))},n.prototype.fase3=function(){return this.bindSequence("Hit",this.endOfFight,function(t){return function(){return t.entity.healthBelow(.2)}}(this)),this.sequence(this.withDebrisFalling(this.mineFieldStrike("BridgeCollapse")),this.wait(500),this.rocketStrikeDance(),this.setSpeed(200),this.repeat(this.sequence(this.bombRaid(!0),this.repeat(2,this.while(this.rocketStrikeDanceHoming(),this.sequence(this.async(this.runScript(l,this.location())),this.wait(1500)))),this.wait(1e3))))},n.prototype.minePatterns=function(){return this.while(this.sequence(this.placeSquad(p,{amount:5,delay:50,options:{ringStartAngle:0,location:this.location(),gridConfig:{initial:[{x:.2,y:.25},{x:.8,y:.25},{x:.5,y:.5},{x:.2,y:.75},{x:.8,y:.75}]}}}),this.placeSquad(p,{amount:5,delay:50,options:{ringStartAngle:.5,location:this.location(),gridConfig:{initial:[{x:.2,y:.25},{x:.8,y:.25},{x:.5,y:.5},{x:.2,y:.75},{x:.8,y:.75}]}}})),this.movePath([[.95,.4],[.95,.6],[.85,.5]],{speed:100}))},n.prototype.mineStomp=function(){return this.sequence(this.animate("fast",-1,"eye"),this.while(this.repeat(2,this.sequence(this.async(this.placeSquad(d,{amount:8,delay:50,options:{location:this.location(),gridConfig:{x:{start:function(){var t;return t=Math.random(),.15*(1+Math.floor(5*t))},steps:1,stepSize:.15},y:{start:.125,steps:8,stepSize:.1}}}})),this.wait(2e3))),this.movePath([[.7,.3],[.9,.4],[.9,.2]],{speed:200})),this.animate("slow",-1,"eye"))},n.prototype.searchMines=function(){return this.while(this.repeat(5,this.sequence(this.async(this.runScript(l,this.location())),this.wait(1500))),this.movePath([[.7,.6],[.9,.7],[.9,.5]],{speed:200}))},n.prototype.homingMissileStrike=function(){return this.while(this.repeat(5,this.sequence(this.fireRockets(4,!0),this.wait(500))),this.movePath([[.9,.2],[.8,.4],[.9,.7]],{speed:150}))},n.prototype.mineFieldStrike=function(t){return this.sequence(this.movePath([[.7,.6],[.9,.7],[.9,.5]],{speed:100}),this.parallel(this.sequence(this.moveTo({x:-.2,y:.8,speed:600,easing:"easeInQuad"}),this.turnAround(),this.movePath([[.2,.2],[.9,.6],[1.2,.4]],{speed:600}),this.turnAround(),this.movePath([[.8,.2],[.5,.5],[1.2,.6]],{speed:600})),this.placeSquad(f,{amount:30,delay:200,options:{location:this.location(),event:t,gridConfig:{x:{start:.1,steps:6,stepSize:.15,avoid:function(){var t;return t=Math.random(),[1+Math.floor(4*t)]}},y:{start:.125,steps:8,stepSize:.1}}}})),this.movePath([[.7,.4]],{speed:300},"easeOutQuad"))},n.prototype.bombRaid=function(t){return null==t&&(t=!1),this.sequence(this.while(this.moveTo({x:.8,speed:200,easing:"easeInOutQuad"}),this.sequence(this.bigExplosion(),this.wait(200))),this.moveTo({y:.1,speed:200,easing:"easeInOutQuad"}),this.while(this.moveTo({x:-100,speed:400}),this.sequence(this.async(this.placeSquad(u,{options:{location:this.location(),armed:!1}})),this.wait(300))),this.turnAround(),this.while(this.moveTo({x:1,speed:400}),this.sequence(this.async(this.placeSquad(u,{options:{location:this.location(),armed:t}})),this.smoke("light"),this.wait(300))),this.moveTo({x:1.2,speed:400}),this.turnAround(),this.moveTo({x:.85,y:.41,speed:400}))},n.prototype.laugh=function(){return this.sequence(function(){return e.audio.play("laugh")},function(t){return function(){return t.entity.invincible=!0}}(this),this.repeat(5,this.sequence(this.rotate(10,200),this.rotate(-10,200))),this.rotate(0,200),function(t){return function(){return t.entity.invincible=!1}}(this))},n.prototype.endOfFight=function(){return this.sequence(this.cancelBullets("Mine"),this.cancelBullets("shadow"),this.invincible(!0),this.while(this.moveTo({x:.6,y:.9,speed:100,easing:"easeInOutQuad"}),this.sequence(this.smallExplosion(),this.while(this.wait(300),this.smoke()))),this.moveTo({y:1.1,x:.4,speed:200,easing:"easeInOutQuad"}),this.moveTo({y:.6,x:.4,speed:350,easing:"easeOutQuad"}),this.sendToBackground(.9,-100),this.parallel(this.while(this.moveTo({x:-.15,speed:300,easing:"easeInQuad"}),this.smoke("medium")),this.scale(.8,{duration:3e3})),this.leaveAnimation(this.sequence(this.turnAround(),this.sendToBackground(.7,-150),this.while(this.moveTo({x:1.1,speed:500,easing:"easeInQuad"}),this.smoke("medium")))))},n}(),l=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){return e.e("Mine, BulletCircle").mine({health:100,x:t().x,y:t().y+10,z:-4,defaultSpeed:400,pointsOnHit:0,pointsOnDestroy:0}).bulletCircle({burstAmount:4,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:14,h:14,speed:400,damage:1}).shoot(t,n,i)}})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.pickTarget("PlayerControlledShip"),this.moveTo({y:1.1,easing:"easeInQuad"}),function(t){return function(){return t.entity.attr({z:0})}}(this),this.moveTo(this.targetLocation(),{y:1.01,easing:"easeInOutQuad"}),this.moveTo(this.targetLocation({x:null})),this.animate("open"),this.wait(200),this.animate("blink",-1),this.wait(1e3),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),function(t){return function(){return t.entity.shootRing()}}(this),this.endSequence())},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),_=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.spawn=function(t){var n;return t=x(t,{pointsOHit:125,pointsOnDestroy:50}),n=t.grid.getLocation(),e.e("Rocket").rocket({health:250,x:n.x*e.viewport.width,y:n.y*e.viewport.height,z:5,defaultSpeed:600,pointsOnHit:t.pointsOnHit,pointsOnDestroy:t.pointsOnDestroy})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.while(this.moveTo({x:-205,easing:"easeInQuad"}),this.sequence(this.blast(this.location(),function(){return{radius:5,duration:135,z:1,alpha:.8,lightness:1,gravity:.2*Math.random(),vertical:0}},function(){return{vertical:this.vertical+Math.random()*this.gravity,rotation:this.rotation+3*Math.random(),alpha:Math.max(.1,this.alpha-.03*Math.random()),lightness:Math.max(.4,this.lightness-.05),y:this.y-this.vertical}}),this.wait(20)))},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),g=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.spawn=function(t){var n;return null==(t=x(t,{pointsOnHit:125,pointsOnDestroy:50,offsetY:0,offsetX:0,scale:1,health:250})).location?null:(n="function"==typeof t.location?t.location():void 0)?(this.offsetY=t.offsetY,this.offsetX=t.offsetX,e.e("Rocket").rocket({health:t.health,x:n.x-30,y:n.y-8+Math.round(15*Math.random()),z:5,scale:t.scale,defaultSpeed:600,pointsOnHit:t.pointsOnHit,pointsOnDestroy:t.pointsOnDestroy})):null},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.while(this.sequence(this.moveTo(this.location({offsetY:this.offsetY,offsetX:this.offsetX})),this.if(function(){return 0!==this.offsetX||0!==this.offsetY},this.wait(500)),this.moveTo({x:-205,easing:"easeInQuad"})),this.sequence(this.blast(this.location(),function(){return{radius:5,duration:135,z:-1,alpha:.9,lightness:1,gravity:.2*Math.random(),vertical:0}},function(t,e){var n;return n=e.dt/1e3,this.attr({vertical:this.vertical+Math.random()*this.gravity*50*n,rotation:this.rotation+150*Math.random()*n,alpha:Math.max(.1,this.alpha-Math.random()*n),lightness:Math.max(.2,this.lightness-2.5*n)}),{y:this.y-this.vertical*n}}),this.wait(20)))},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),a=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.spawn=function(t){var n,i;return null==(t=x(t,{pointsOHit:125,pointsOnDestroy:50,z:5,scale:1,offsetY:0})).location?null:(n="function"==typeof t.location?t.location():void 0)?(this.offsetY=t.offsetY,this.cooldown=null!=(i=t.cooldown)?i:500,e.e("Rocket").rocket({health:250,x:n.x-30,y:n.y-8+Math.round(15*Math.random()),z:t.z,defaultSpeed:500,scale:t.scale,pointsOnHit:t.pointsOnHit,pointsOnDestroy:t.pointsOnDestroy}).colorOverride("#eeffee")):null},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.pickTarget("PlayerControlledShip"),this.moveTo(this.location({offsetY:this.offsetY})),this.wait(this.cooldown),this.while(this.moveThrough(this.targetLocation()),this.sequence(this.blast(this.location(),function(){return{radius:5,duration:135,z:1,alpha:.8,lightness:1,gravity:.2*Math.random(),vertical:0}},function(){return{vertical:this.vertical+Math.random()*this.gravity,rotation:this.rotation+3*Math.random(),alpha:Math.max(.1,this.alpha-.03*Math.random()),lightness:Math.max(.4,this.lightness-.05),y:this.y-this.vertical}}),this.wait(20))))},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}w(n,o),n.prototype.spawn=function(t){var n,i;return null==(t=x(t,{pointsOHit:125,pointsOnDestroy:50,z:5,scale:1,offsetY:0})).location?null:(n="function"==typeof t.location?t.location():void 0)?(this.offsetY=t.offsetY,this.cooldown=null!=(i=t.cooldown)?i:500,e.e("Rocket").rocket({health:250,x:n.x-30,y:n.y-8+Math.round(15*Math.random()),z:t.z,defaultSpeed:500,scale:t.scale,pointsOnHit:t.pointsOnHit,pointsOnDestroy:t.pointsOnDestroy})):null},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.pickTarget("PlayerControlledShip"),this.moveTo(this.location({offsetY:this.offsetY})),this.wait(this.cooldown),this.while(this.movePath([this.targetLocation(),[-160,.5]]),this.sequence(this.blast(this.location(),function(){return{radius:5,duration:135,z:1,alpha:.8,lightness:1,gravity:.2*Math.random(),vertical:0}},function(){return{vertical:this.vertical+Math.random()*this.gravity,rotation:this.rotation+3*Math.random(),alpha:Math.max(.1,this.alpha-.03*Math.random()),lightness:Math.max(.4,this.lightness-.05),y:this.y-this.vertical}}),this.wait(20))))},n.prototype.onKilled=function(){return this.bigExplosion()}}(),y=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,s),n.prototype.spawn=function(){return e.e("LargeDrone, Horizon").drone({maxHealth:6e4,health:17e3,x:e.viewport.width+40,y:.5*e.viewport.height,defaultSpeed:150})},n.prototype.execute=function(){return this.bindSequence("Hit",this.leaveScreen,function(t){return function(){return t.entity.healthBelow(.1)}}(this)),this.sequence(this.animate("slow",-1,"eye"),this.moveTo({x:.9,y:.45}),this.while(this.repeat(this.rocketStrikeDance()),this.smoke("light")))},n.prototype.leaveScreen=function(){return this.sequence(this.invincible(!0),this.moveTo({y:.5,x:.95,speed:200,easing:"easeInOutQuad"}),this.async(this.placeSquad(v,{amount:20,delay:50,options:{location:this.location(),gridConfig:{x:{start:.1,steps:12,stepSize:.075},y:{start:.1,steps:5,stepSize:.075}}}})),this.async(this.placeSquad(v,{amount:20,delay:50,options:{location:this.location(),gridConfig:{x:{start:.1,steps:12,stepSize:.075},y:{start:.7,steps:5,stepSize:.075}}}})),this.wait(3e3),this.drop({item:"pool",location:this.location()}),this.while(this.moveTo({x:-.15,speed:500,easing:"easeInOutQuad"}),this.sequence(this.smallExplosion(),this.while(this.wait(300),this.smoke()))),this.leaveAnimation(this.sequence(this.turnAround(),this.sendToBackground(.7,-150),this.while(this.moveTo({x:1.1,speed:300}),this.smoke("light")))))},n}(),c=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,s),n.prototype.spawn=function(){return e.e("LargeDrone, Horizon").drone({maxHealth:18e4,health:36e3,x:e.viewport.width+40,y:.5*e.viewport.height,defaultSpeed:150})},n.prototype.execute=function(){return this.entity.colorDesaturation(i.backgroundColor),this.bindSequence("Hit",this.leaveScreen,function(t){return function(){return t.entity.healthBelow(.1)}}(this)),this.sequence(this.animate("slow",-1,"eye"),this.shortRocketStrikeDance(),this.laugh(),this.leaveScreen())},n.prototype.shortRocketStrikeDance=function(t){return null==t&&(t=!1),this.parallel(this.movePath([[.7,.4],[.8,.3],[.9,.5],[.7,.6],[.8,.7],[.9,.4],[.7,.1],[.6,.2]]),this.repeat(2,this.sequence(this.fireRockets(4,t),this.wait(1500),this.fireRockets(4,t),this.wait(1e3),this.fireRockets(2,t),this.wait(300),this.fireRockets(2),this.wait(300),this.fireRockets(2,t),this.wait(300))))},n.prototype.laugh=function(){return this.sequence(function(){return e.audio.play("laugh")},this.invincible(!0),this.repeat(5,this.sequence(this.rotate(10,200),this.rotate(-10,200))),this.rotate(0,200),this.invincible(!1))},n.prototype.leaveScreen=function(){return this.leaveAnimation(this.sequence(this.animate("emptyWing",0,"wing"),this.sendToBackground(.9,-100),this.parallel(this.while(this.moveTo({x:-.15,y:.4,speed:400}),this.smoke()),this.scale(.5,{duration:3e3})),function(t){return function(){return t.entity.flipX()}}(this),this.sendToBackground(.5,-550),this.parallel(this.while(this.moveTo("MiliBase",{speed:150,offsetY:-160,offsetX:-40}),this.smoke("light")),this.scale(.2,{duration:4e3}))))},n.prototype.attackCycle=function(){return this.repeat(4,this.sequence(this.async(this.placeSquad(g,{options:{location:this.location(),pointsOnDestroy:0,pointsOnHit:0}})),this.animate("emptyWing",0,"wing"),this.parallel(this.while(this.moveTo(this.targetLocation({offsetY:-20}),{x:.845}),this.smoke("medium")),this.sequence(this.animate("reload",0,"wing"),this.wait(1e3)))))},n}(),u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i;return n=t.location(),this.armed=t.armed,e.e("Mine").mine({health:200,x:n.x,y:n.y+10,z:-4,defaultSpeed:400,pointsOnHit:10,pointsOnDestroy:20,scale:null!=(i=t.scale)?i:1})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.armed?this.sequence(this.animate("blink",-1),this.moveTo({y:.3+.6*Math.random(),easing:"easeInOutQuad"}),this.wait(200),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this)):this.sequence(this.moveTo({y:1.2,easing:"easeInQuad"}))},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),h=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("drone")},n.prototype.spawn=function(t){var n;return n=e.e("Drone").drone({health:200,x:e.viewport.width+40,y:.1*e.viewport.height,defaultSpeed:500}),t.shootOnSight&&n.addComponent("ShootOnSight").shootOnSight({cooldown:1e3,sightAngle:8,projectile:function(t,n,i){return e.e("Projectile, Color, Hostile").attr({w:6,h:6,speed:650,damage:1}).color("#FFFF00").shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.pickTarget("PlayerControlledShip"),this.movePath([this.targetLocation({offsetX:-20,offsetY:30}),[-160,.5]]))},n.prototype.onKilled=function(){return this.smallExplosion()},n}(),f=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i;return n=t.location(),this.target=t.grid.getLocation(),this.event=t.event,e.e("Mine").mine({x:n.x,y:n.y+36,health:300,defaultSpeed:null!=(i=t.speed)?i:250,pointsOnHit:t.points?10:0,pointsOnDestroy:t.points?50:0})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({y:1.05,speed:400}),this.moveTo({x:this.target.x,speed:400,easing:"easeOutQuad"}),this.synchronizeOn("dropped"),this.moveTo({y:this.target.y,easing:"easeOutQuad",speed:400}),this.sequence(this.animate("blink",-1),this.wait(1e3),this.squadOnce("bridge",function(t){return function(){return e.trigger(t.event,t.level)}}(this)),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),this.endSequence()))},n.prototype.onKilled=function(){return this.bigExplosion({juice:this.juice})},n}(),d=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i;return n=t.location(),this.gridPos=t.grid.getLocation(),e.e("Mine").mine({x:n.x,y:n.y+36,health:300,defaultSpeed:null!=(i=t.speed)?i:250,pointsOnHit:t.points?10:0,pointsOnDestroy:t.points?50:0})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({y:1.05,speed:400}),this.moveTo({x:this.gridPos.x,speed:400,easing:"easeOutQuad"}),this.synchronizeOn("dropped"),this.pickTarget("PlayerControlledShip"),this.lockTarget(),this.moveTo({y:this.gridPos.y,easing:"easeOutQuad",speed:400}),this.sequence(this.parallel(this.moveThrough(this.targetLocation({y:this.gridPos.y}),{speed:400}),this.sequence(this.wait(500),this.animate("blink",-1),this.wait(300),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),this.endSequence()))))},n.prototype.onKilled=function(){return this.bigExplosion({juice:this.juice})},n}(),p=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i;return n=t.location(),this.gridPos=t.grid.getLocation(),e.e("Mine, BulletCircle").mine({x:n.x,y:n.y+36,health:300,defaultSpeed:null!=(i=t.speed)?i:250,pointsOnHit:t.points?10:0,pointsOnDestroy:t.points?50:0}).bulletCircle({angle:t.ringStartAngle,burstAmount:4,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:14,h:14,speed:400,damage:1}).shoot(t,n,i)}})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({y:1.05,speed:400}),this.moveTo({x:this.gridPos.x,speed:400,easing:"easeOutQuad"}),this.synchronizeOn("dropped"),this.moveTo({y:this.gridPos.y,easing:"easeOutQuad",speed:400}),this.synchronizeOn("splode"),this.animate("blink",-1),this.wait(300),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),function(t){return function(){return t.entity.shootRing()}}(this),this.endSequence())},n.prototype.onKilled=function(){return this.bigExplosion({juice:this.juice})},n}(),v=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i;return n=t.location(),this.target=t.grid.getLocation(),this.index=t.index,e.e("Mine").mine({health:700,x:n.x,y:n.y+10,z:-4,defaultSpeed:null!=(i=t.speed)?i:300,pointsOnHit:t.points?10:0,pointsOnDestroy:t.points?50:0})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({x:this.target.x,y:this.target.y,easing:"easeOutQuad"}),this.synchronizeOn("placed"),this.sequence(this.wait(1e3*(1-this.target.x)),this.animate("blink",-1),this.wait(1e3),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),function(t){return function(){if(0===t.index)return e("RiggedExplosion").trigger("BigExplosion")}}(this),this.endSequence()))},n.prototype.onKilled=function(){return this.bigExplosion({juice:this.juice})},n}(),r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return w(n,o),n.prototype.spawn=function(t){var n;return e.e("Debris").debris({health:700,x:.8*Math.random()+.1,y:-.1,z:-4,defaultSpeed:null!=(n=t.speed)?n:400,pointsOnHit:0,pointsOnDestroy:0})},n.prototype.execute=function(){var t;return t=.8*Math.random()+.1,this.sequence(this.setLocation({x:t,y:-.1}),this.addMajorScreenshake(),this.wait(300),this.while(this.moveTo({y:1.1,easing:"easeInQuad"}),this.sequence(this.blast(this.location(),function(){return{radius:50,duration:235,z:1,alpha:.3,lightness:.3,gravity:.3*Math.random(),vertical:0}},function(){return{vertical:this.vertical+Math.random()*this.gravity,rotation:this.rotation+3*Math.random(),alpha:Math.max(.1,this.alpha-.03*Math.random()),y:this.y-this.vertical}}),this.wait(40))))},n}(),t.exports={Stage1BossAimedRocket:a,Stage1BossBombRaid:u,Stage1BossDroneRaid:h,Stage1BossLeaving:c,Stage1BossMine:l,Stage1BossPopup:y,Stage1BossRocket:g,Stage1BossRocketStrike:_,Stage1BossStage1:m}}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(){var e=t,n=e.lib,i=n.WordArray,r=n.Hasher,o=[],s=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],s=n[2],a=n[3],u=n[4],h=0;h<80;h++){if(h<16)o[h]=0|t[e+h];else{var c=o[h-3]^o[h-8]^o[h-14]^o[h-16];o[h]=c<<1|c>>>31}var l=(i<<5|i>>>27)+u+o[h];l+=h<20?1518500249+(r&s|~r&a):h<40?1859775393+(r^s^a):h<60?(r&s|r&a|s&a)-1894007588:(r^s^a)-899497514,u=a,a=s,s=r<<30|r>>>2,r=i,i=l}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=Math.floor(n/4294967296),e[15+(i+64>>>9<<4)]=n,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=r.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=r._createHelper(s),e.HmacSHA1=r._createHmacHelper(s)}(),t.SHA1})},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){(function(){var e=t,n=e.lib.Base,i=e.enc.Utf8;e.algo.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=i.parse(e));var n=t.blockSize,r=4*n;e.sigBytes>r&&(e=t.finalize(e)),e.clamp();for(var o=this._oKey=e.clone(),s=this._iKey=e.clone(),a=o.words,u=s.words,h=0;h<n;h++)a[h]^=1549556828,u[h]^=909522486;o.sigBytes=s.sigBytes=r,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,n=e.finalize(t);e.reset();return e.finalize(this._oKey.clone().concat(n))}})})()})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e){var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?n:e)&&("number"==typeof t||i.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var i=n(277),r=n(111),o=n(278),s=o&&o.isTypedArray,a=s?r(s):i;t.exports=a},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},function(t,e,n){function i(t){var e=this.__data__=new r(t);this.size=e.size}var r=n(82),o=n(292),s=n(293),a=n(294),u=n(295),h=n(296);i.prototype.clear=o,i.prototype.delete=s,i.prototype.get=a,i.prototype.has=u,i.prototype.set=h,t.exports=i},function(t,e,n){var i=n(43)(n(30),"Map");t.exports=i},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(297),o=n(304),s=n(306),a=n(307),u=n(308);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=u,t.exports=i},function(t,e,n){var i=n(315),r=n(174),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(t){return null==t?[]:(t=Object(t),i(s(t),function(e){return o.call(t,e)}))}:r;t.exports=a},function(t,e,n){var i=n(317),r=n(114),o=n(318),s=n(319),a=n(320),u=n(67),h=n(159),c="[object Promise]",l="[object WeakMap]",f="[object DataView]",p=h(i),d=h(r),y=h(o),v=h(s),g=h(a),_=u;(i&&_(new i(new ArrayBuffer(1)))!=f||r&&"[object Map]"!=_(new r)||o&&_(o.resolve())!=c||s&&"[object Set]"!=_(new s)||a&&_(new a)!=l)&&(_=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,i=n?h(n):"";if(i)switch(i){case p:return f;case d:return"[object Map]";case y:return c;case v:return"[object Set]";case g:return l}return e}),t.exports=_},function(t,e,n){var i=n(19),r=n(86),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||s.test(t)||!o.test(t)||null!=e&&t in Object(e)}},function(t,e,n){var i=n(6),r=n(3).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){var i=n(3),r=n(32),o=n(47),s=n(182),a=n(11).f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},function(t,e,n){var i=n(88)("keys"),r=n(46);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(3).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(6),r=n(2),o=function(t,e){if(r(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{(i=n(27)(Function.call,n(25).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var i=n(6),r=n(124).set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&r&&r(t,o),t}},function(t,e,n){"use strict";var i=n(35),r=n(34);t.exports=function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var i=n(35),r=n(34);t.exports=function(t){return function(e,n){var o,s,a=String(r(e)),u=i(n),h=a.length;return u<0||u>=h?t?"":void 0:(o=a.charCodeAt(u))<55296||o>56319||u+1===h||(s=a.charCodeAt(u+1))<56320||s>57343?t?a.charAt(u):o:t?a.slice(u,u+2):s-56320+(o-55296<<10)+65536}}},function(t,e,n){"use strict";var i=n(47),r=n(0),o=n(22),s=n(21),a=n(20),u=n(64),h=n(132),c=n(62),l=n(26),f=n(8)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};t.exports=function(t,e,n,y,v,g,_){h(n,e,y);var m,x,w,b=function(t){if(!p&&t in P)return P[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",C="values"==v,k=!1,P=t.prototype,M=P[f]||P["@@iterator"]||v&&P[v],D=!p&&M||b(v),T=v?C?b("entries"):D:void 0,E="Array"==e?P.entries||M:M;if(E&&(w=l(E.call(new t)))!==Object.prototype&&w.next&&(c(w,S,!0),i||a(w,f)||s(w,f,d)),C&&M&&"values"!==M.name&&(k=!0,D=function(){return M.call(this)}),i&&!_||!p&&!k&&P[f]||s(P,f,D),u[e]=D,u[S]=d,v)if(m={values:C?D:b("values"),keys:g?D:b("keys"),entries:T},_)for(x in m)x in P||o(P,x,m[x]);else r(r.P+r.F*(p||k),e,m);return m}},function(t,e,n){"use strict";var i=n(50),r=n(45),o=n(62),s={};n(21)(s,n(8)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(s,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(92),r=n(34);t.exports=function(t,e,n){if(i(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},function(t,e,n){var i=n(8)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[i]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var i=n(64),r=n(8)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){"use strict";var i=n(11),r=n(45);t.exports=function(t,e,n){e in t?i.f(t,e,r(0,n)):t[e]=n}},function(t,e,n){var i=n(72),r=n(8)("iterator"),o=n(64);t.exports=n(32).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){var i=n(436);t.exports=function(t,e){return new(i(t))(e)}},function(t,e,n){"use strict";var i=n(14),r=n(49),o=n(12);t.exports=function(t){for(var e=i(this),n=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,n),u=s>2?arguments[2]:void 0,h=void 0===u?n:r(u,n);h>a;)e[a++]=t;return e}},function(t,e,n){"use strict";var i=n(41),r=n(198),o=n(64),s=n(24);t.exports=n(131)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i,r,o,s=n(27),a=n(188),u=n(123),h=n(119),c=n(3),l=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,y=c.Dispatch,v=0,g={},_="onreadystatechange",m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){m.call(t.data)};f&&p||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){a("function"==typeof t?t:Function(t),e)},i(v),v},p=function(t){delete g[t]},"process"==n(28)(l)?i=function(t){l.nextTick(s(m,t,1))}:y&&y.now?i=function(t){y.now(s(m,t,1))}:d?(o=(r=new d).port2,r.port1.onmessage=x,i=s(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(i=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):i=_ in h("script")?function(t){u.appendChild(h("script"))[_]=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(s(m,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,n){var i=n(3),r=n(141).set,o=i.MutationObserver||i.WebKitMutationObserver,s=i.process,a=i.Promise,u="process"==n(28)(s);t.exports=function(){var t,e,n,h=function(){var i,r;for(u&&(i=s.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(u)n=function(){s.nextTick(h)};else if(!o||i.navigator&&i.navigator.standalone)if(a&&a.resolve){var c=a.resolve();n=function(){c.then(h)}}else n=function(){r.call(i,h)};else{var l=!0,f=document.createTextNode("");new o(h).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){"use strict";var i=n(17);t.exports.f=function(t){return new function(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}(t)}},function(t,e,n){"use strict";function i(t,e,n){var i,r,o,s=new Array(n),a=8*n-e-1,u=(1<<a)-1,h=u>>1,c=23===e?H(2,-24)-H(2,-77):0,l=0,f=t<0||0===t&&1/t<0?1:0;for((t=I(t))!=t||t===z?(r=t!=t?1:0,i=u):(i=W(q(t)/G),t*(o=H(2,-i))<1&&(i--,o*=2),(t+=i+h>=1?c/o:c*H(2,1-h))*o>=2&&(i++,o/=2),i+h>=u?(r=0,i=u):i+h>=1?(r=(t*o-1)*H(2,e),i+=h):(r=t*H(2,h-1)*H(2,e),i=0));e>=8;s[l++]=255&r,r/=256,e-=8);for(i=i<<e|r,a+=e;a>0;s[l++]=255&i,i/=256,a-=8);return s[--l]|=128*f,s}function r(t,e,n){var i,r=8*n-e-1,o=(1<<r)-1,s=o>>1,a=r-7,u=n-1,h=t[u--],c=127&h;for(h>>=7;a>0;c=256*c+t[u],u--,a-=8);for(i=c&(1<<-a)-1,c>>=-a,a+=e;a>0;i=256*i+t[u],u--,a-=8);if(0===c)c=1-s;else{if(c===o)return i?NaN:h?-z:z;i+=H(2,e),c-=s}return(h?-1:1)*i*H(2,c-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function s(t){return[255&t]}function a(t){return[255&t,t>>8&255]}function u(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function h(t){return i(t,52,8)}function c(t){return i(t,23,4)}function l(t,e,n){P(t[O],e,{get:function(){return this[n]}})}function f(t,e,n,i){var r=C(+n);if(r+e>t[X])throw L(A);var o=t[U]._b,s=r+t[V],a=o.slice(s,s+e);return i?a:a.reverse()}function p(t,e,n,i,r,o){var s=C(+n);if(s+e>t[X])throw L(A);for(var a=t[U]._b,u=s+t[V],h=i(+r),c=0;c<e;c++)a[u+c]=h[o?c:e-c-1]}var d=n(3),y=n(10),v=n(47),g=n(98),_=n(21),m=n(55),x=n(5),w=n(53),b=n(35),S=n(12),C=n(207),k=n(51).f,P=n(11).f,M=n(139),D=n(62),T="ArrayBuffer",E="DataView",O="prototype",A="Wrong index!",j=d[T],F=d[E],B=d.Math,L=d.RangeError,z=d.Infinity,R=j,I=B.abs,H=B.pow,W=B.floor,q=B.log,G=B.LN2,N="byteLength",U=y?"_b":"buffer",X=y?"_l":N,V=y?"_o":"byteOffset";if(g.ABV){if(!x(function(){j(1)})||!x(function(){new j(-1)})||x(function(){return new j,new j(1.5),new j(NaN),j.name!=T})){for(var Y,K=(j=function(t){return w(this,j),new R(C(t))})[O]=R[O],Q=k(R),J=0;Q.length>J;)(Y=Q[J++])in j||_(j,Y,R[Y]);v||(K.constructor=j)}var Z=new F(new j(2)),$=F[O].setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||m(F[O],{setInt8:function(t,e){$.call(this,t,e<<24>>24)},setUint8:function(t,e){$.call(this,t,e<<24>>24)}},!0)}else j=function(t){w(this,j,T);var e=C(t);this._b=M.call(new Array(e),0),this[X]=e},F=function(t,e,n){w(this,F,E),w(t,j,E);var i=t[X],r=b(e);if(r<0||r>i)throw L("Wrong offset!");if(n=void 0===n?i-r:S(n),r+n>i)throw L("Wrong length!");this[U]=t,this[V]=r,this[X]=n},y&&(l(j,N,"_l"),l(F,"buffer","_b"),l(F,N,"_l"),l(F,"byteOffset","_o")),m(F[O],{getInt8:function(t){return f(this,1,t)[0]<<24>>24},getUint8:function(t){return f(this,1,t)[0]},getInt16:function(t){var e=f(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=f(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return o(f(this,4,t,arguments[1]))},getUint32:function(t){return o(f(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return r(f(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return r(f(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){p(this,1,t,s,e)},setUint8:function(t,e){p(this,1,t,s,e)},setInt16:function(t,e){p(this,2,t,a,e,arguments[2])},setUint16:function(t,e){p(this,2,t,a,e,arguments[2])},setInt32:function(t,e){p(this,4,t,u,e,arguments[2])},setUint32:function(t,e){p(this,4,t,u,e,arguments[2])},setFloat32:function(t,e){p(this,4,t,c,e,arguments[2])},setFloat64:function(t,e){p(this,8,t,h,e,arguments[2])}});D(j,T),D(F,E),_(F[O],g.VIEW,!0),e[T]=j,e[E]=F},function(t,e,n){var i=n(3).navigator;t.exports=i&&i.userAgent||""},function(t,e,n){(function(i){var r;(function(o){"use strict";void 0===(r=function(t){var e,r="undefined"!=typeof setTimeout&&setTimeout,o=function(t,e){return setTimeout(t,e)},s=function(t){return clearTimeout(t)},a=function(t){return r(t,0)};if(void 0!==i&&"[object process]"===Object.prototype.toString.call(i))a=function(t){return i.nextTick(t)};else if(e="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)a=function(t){var e,n=document.createTextNode("");new t(function(){var t=e;e=void 0,t()}).observe(n,{characterData:!0});var i=0;return function(t){e=t,n.data=i^=1}}(e);else if(!r){var u=n(575);o=function(t,e){return u.setTimer(e,t)},s=u.cancelTimer,a=u.runOnLoop||u.runOnContext}return{setTimer:o,clearTimer:s,asap:a}}.call(e,n,e,t))||(t.exports=r)})(n(13))}).call(e,n(147))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function o(){d&&f&&(d=!1,f.length?p=f.concat(p):y=-1,p.length&&s())}function s(){if(!d){var t=r(o);d=!0;for(var e=p.length;e;){for(f=p,p=[];++y<e;)f&&f[y].run();y=-1,e=p.length}f=null,d=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===i||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function u(){}var h,c,l=t.exports={};(function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{c="function"==typeof clearTimeout?clearTimeout:i}catch(t){c=i}})();var f,p=[],d=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new a(t,e)),1!==p.length||d||r(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){var i=n(169);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},function(t,e,n){(function(e,i){var r,o,s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};r=n(670).default,o=new(function(){function t(){this.buildingBlocks={},this.elements={},this.assets={}}return t.prototype.defineBlock=function(t){return this.buildingBlocks[t.prototype.name]=t},t.prototype.defineElement=function(t,e){return this.elements[t]=e},t.prototype.defineAssets=function(t,e){return this.assets[t]=e},t.prototype.loadAssets=function(t){var n,i;return i=function(){var e,i,r;for(r=[],e=0,i=t.length;e<i;e++)n=t[e],r.push(this._loadAssetMap(n));return r}.call(this),e.all(i)},t.prototype._loadAssetMap=function(t){var n,r,o,a,u,h,c,l,f,p,d;null==this.entityAssets&&(this.entityAssets={}),n=null,o=null,p=this.assets;for(r in p)l=p[r],s.call(l.contents,t)>=0&&(n=r,o=l);if(!n)throw new Error("no asset map defined for "+t);return this.entityAssets[n]?this.entityAssets[n].promise:(a=e.defer(),this.entityAssets[n]={assets:o,promise:a.promise},d=o.spriteMap,f=function(){var t,e;t=o.sprites,e=[];for(h in t)u=t[h],(c={sprites:{}}).sprites[d]=u,e.push(c);return e}(),f[0].audio=o.audio,i.load(f.pop(),function(){for(var t,e;f.length>0;)t=f.pop().sprites[d],e=i.paths().images+d,i.sprite(t.tile,t.tileh,e,t.map,t.paddingX,t.paddingY,t.paddingAroundBorder);return a.resolve()}),a.promise)},t.prototype.createLevel=function(t){return null==t&&(t={namespace:"City"}),new r(this,t)},t}()),t.exports={default:o}}).call(e,n(18).default,n(1).default)},function(t,e,n){(function(e){var i,r,o,s,a,u,h=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=n(15).EntityScript,u=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,r),n.prototype.spawn=function(t){var n,i,r;return e("Sky").get(0)||e.e("2D, StaticBackground, Gradient, Sky, ColorFade").attr({w:e.viewport.width,h:.7*e.viewport.height}).attr({x:0,y:0,z:0}),(r=e("Sun")).length>0?r.attr({defaultSpeed:null!=(n=t.speed)?n:1}):e.e("Sun, KeepAlive").sun({x:.97*e.viewport.width,y:.74*e.viewport.height,defaultSpeed:null!=(i=t.speed)?i:1})},n}(),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,u),e.prototype.execute=function(){var t,e,n,i;return i=null!=(n=this.options.speed)?n:1,null==(t=this.options).skipTo&&(t.skipTo=0),e=2e4/i,this.sequence(this.setLocation({x:.97,y:.74}),this.backgroundColorFade({duration:e,skip:this.options.skipTo},["#000000","#000020","#000020","#7e261b"],["#000000","#000000","#000020","#222c50"]))},e}(),function(t){function e(){return e.__super__.constructor.apply(this,arguments)}h(e,u),e.prototype.execute=function(){var t,e,n,i,r;return r=null!=(i=this.options.speed)?i:1,null==(t=this.options).skipTo&&(t.skipTo=0),n=8e4/r,e=6e5/r,this.sequence(this.setLocation({x:.97,y:.74}),this.backgroundColorFade({duration:n,skip:this.options.skipTo},["#000000","#000020","#000020","#7e261b"],["#000000","#000000","#000020","#222c50"]),this.parallel(this.backgroundColorFade({duration:e,skip:this.options.skipTo-n},["#7e261b","#d39915","#f7e459","#d6d5d5","#d6d5d5"],["#222c50","#7a86a2","#366eab"]),this.movePath([[.75,.31],[.5,.11]],{rotate:!1,skip:this.options.skipTo-n})))}}(),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,u),e.prototype.execute=function(){var t,e,n,i;return i=null!=(n=this.options.speed)?n:1,null==(t=this.options).skipTo&&(t.skipTo=0),e=45e3/i,this.sequence(this.setLocation({x:.97,y:.74}),this.parallel(this.backgroundColorFade({duration:e,skip:this.options.skipTo},["#7e261b","#d39915","#e8b32c"],["#222c50","#7a86a2","#606aa5"]),this.movePath([[.75,.61]],{rotate:!1,skip:this.options.skipTo,speed:10*i})))},e}(),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,u),e.prototype.execute=function(){var t,e,n,i;return i=null!=(n=this.options.speed)?n:1,null==(t=this.options).skipTo&&(t.skipTo=0),e=12e4/i,this.sequence(this.setLocation({x:.75,y:.61}),this.parallel(this.backgroundColorFade({duration:e,skip:this.options.skipTo},["#e8b32c","#f0b722"],["#606aa5","#c099cc"]),this.movePath([[.71,.45]],{rotate:!1,skip:this.options.skipTo,speed:2*i})))},e}(),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,u),e.prototype.execute=function(){var t,e,n,i;return i=null!=(n=this.options.speed)?n:1,null==(t=this.options).skipTo&&(t.skipTo=0),e=8e4/i,this.parallel(this.setLocation({x:.71,y:.45}),this.backgroundColorFade({duration:e,skip:this.options.skipTo},["#f0b722","#f7e459","#d6d5d5","#d6d5d5"],["#c099cc","#366eab","#366eab"]),this.movePath([[.4,.1]],{rotate:!1,skip:this.options.skipTo,speed:3*i}))},e}(),t.exports={StartOfDawn:a,DayBreak:i,Morning:o,Noon:s}}).call(e,n(1).default)},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(74),n(239),n(240),n(56),n(57),n(104),n(152),n(241),n(153),n(242),n(243),n(244),n(105),n(245),n(42),n(16),n(246),n(247),n(248),n(249),n(250),n(251),n(252),n(253),n(254),n(255),n(256),n(257),n(258),n(259),n(260),n(261))})(0,function(t){return t})},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.algo,a=[],u=[];(function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;r<64;)t(i)&&(r<8&&(a[r]=n(e.pow(i,.5))),u[r]=n(e.pow(i,1/3)),r++),i++})();var h=[],c=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],l=n[6],f=n[7],p=0;p<64;p++){if(p<16)h[p]=0|t[e+p];else{var d=h[p-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,v=h[p-2],g=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;h[p]=y+h[p-7]+g+h[p-16]}var _=i&r^i&o^r&o,m=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),x=f+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&c^~a&l)+u[p]+h[p];f=l,l=c,c=a,a=s+x|0,s=o,o=r,r=i,i=x+(m+_)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(c),n.HmacSHA256=o._createHmacHelper(c)}(Math),t.SHA256})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(74))})(0,function(t){return function(){function e(){return o.create.apply(o,arguments)}var n=t,i=n.lib.Hasher,r=n.x64,o=r.Word,s=r.WordArray,a=n.algo,u=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],h=[];(function(){for(var t=0;t<80;t++)h[t]=e()})();var c=a.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],c=n[5],l=n[6],f=n[7],p=i.high,d=i.low,y=r.high,v=r.low,g=o.high,_=o.low,m=s.high,x=s.low,w=a.high,b=a.low,S=c.high,C=c.low,k=l.high,P=l.low,M=f.high,D=f.low,T=p,E=d,O=y,A=v,j=g,F=_,B=m,L=x,z=w,R=b,I=S,H=C,W=k,q=P,G=M,N=D,U=0;U<80;U++){var X=h[U];if(U<16)var V=X.high=0|t[e+2*U],Y=X.low=0|t[e+2*U+1];else{var K=h[U-15],Q=K.high,J=K.low,Z=(Q>>>1|J<<31)^(Q>>>8|J<<24)^Q>>>7,$=(J>>>1|Q<<31)^(J>>>8|Q<<24)^(J>>>7|Q<<25),tt=h[U-2],et=tt.high,nt=tt.low,it=(et>>>19|nt<<13)^(et<<3|nt>>>29)^et>>>6,rt=(nt>>>19|et<<13)^(nt<<3|et>>>29)^(nt>>>6|et<<26),ot=h[U-7],st=ot.high,at=ot.low,ut=h[U-16],ht=ut.high,ct=ut.low;V=(V=(V=Z+st+((Y=$+at)>>>0<$>>>0?1:0))+it+((Y=Y+rt)>>>0<rt>>>0?1:0))+ht+((Y=Y+ct)>>>0<ct>>>0?1:0);X.high=V,X.low=Y}var lt,ft=z&I^~z&W,pt=R&H^~R&q,dt=T&O^T&j^O&j,yt=E&A^E&F^A&F,vt=(T>>>28|E<<4)^(T<<30|E>>>2)^(T<<25|E>>>7),gt=(E>>>28|T<<4)^(E<<30|T>>>2)^(E<<25|T>>>7),_t=(z>>>14|R<<18)^(z>>>18|R<<14)^(z<<23|R>>>9),mt=(R>>>14|z<<18)^(R>>>18|z<<14)^(R<<23|z>>>9),xt=u[U],wt=xt.high,bt=xt.low,St=G+_t+((lt=N+mt)>>>0<N>>>0?1:0),Ct=gt+yt;G=W,N=q,W=I,q=H,I=z,H=R,z=B+(St=(St=(St=St+ft+((lt=lt+pt)>>>0<pt>>>0?1:0))+wt+((lt=lt+bt)>>>0<bt>>>0?1:0))+V+((lt=lt+Y)>>>0<Y>>>0?1:0))+((R=L+lt|0)>>>0<L>>>0?1:0)|0,B=j,L=F,j=O,F=A,O=T,A=E,T=St+(vt+dt+(Ct>>>0<gt>>>0?1:0))+((E=lt+Ct|0)>>>0<lt>>>0?1:0)|0}d=i.low=d+E,i.high=p+T+(d>>>0<E>>>0?1:0),v=r.low=v+A,r.high=y+O+(v>>>0<A>>>0?1:0),_=o.low=_+F,o.high=g+j+(_>>>0<F>>>0?1:0),x=s.low=x+L,s.high=m+B+(x>>>0<L>>>0?1:0),b=a.low=b+R,a.high=w+z+(b>>>0<R>>>0?1:0),C=c.low=C+H,c.high=S+I+(C>>>0<H>>>0?1:0),P=l.low=P+q,l.high=k+W+(P>>>0<q>>>0?1:0),D=f.low=D+N,f.high=M+G+(D>>>0<N>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[30+(i+128>>>10<<5)]=Math.floor(n/4294967296),e[31+(i+128>>>10<<5)]=n,t.sigBytes=4*e.length,this._process();return this._hash.toX32()},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});n.SHA512=i._createHelper(c),n.HmacSHA512=i._createHmacHelper(c)}(),t.SHA512})},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var i=n(156),r=n(68),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var s=t[e];o.call(t,e)&&r(s,n)&&(void 0!==n||e in t)||i(t,e,n)}},function(t,e,n){var i=n(157);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var i=n(43),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(106))},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(69),r=n(161);t.exports=function(t){return i(function(e,n){var i=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(o--,s):void 0,a&&r(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),e=Object(e);++i<o;){var u=n[i];u&&t(e,u,i,s)}return e})}},function(t,e,n){var i=n(68),r=n(44),o=n(108),s=n(31);t.exports=function(t,e,n){if(!s(n))return!1;var a=typeof e;return!!("number"==a?r(n)&&o(e,n.length):"string"==a&&e in n)&&i(n[e],t)}},function(t,e,n){var i=n(274),r=n(78),o=n(19),s=n(79),a=n(108),u=n(110),h=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&r(t),l=!n&&!c&&s(t),f=!n&&!c&&!l&&u(t),p=n||c||l||f,d=p?i(t.length,String):[],y=d.length;for(var v in t)!e&&!h.call(t,v)||p&&("length"==v||l&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||a(v,y))||d.push(v);return d}},function(t,e,n){var i=n(164),r=n(283),o=n(69),s=n(161),a=o(function(t,e){if(null==t)return[];var n=e.length;return n>1&&s(t,e[0],e[1])?e=[]:n>2&&s(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])});t.exports=a},function(t,e,n){function i(t,e,n,s,a){var u=-1,h=t.length;for(n||(n=o),a||(a=[]);++u<h;){var c=t[u];e>0&&n(c)?e>1?i(c,e-1,n,s,a):r(a,c):s||(a[a.length]=c)}return a}var r=n(112),o=n(282);t.exports=i},function(t,e,n){function i(t,e,n,s,a){return t===e||(null==t||null==e||!o(t)&&!o(e)?t!=t&&e!=e:r(t,e,n,s,i,a))}var r=n(309),o=n(60);t.exports=i},function(t,e,n){var i=n(167),r=n(312),o=n(168),s=1,a=2;t.exports=function(t,e,n,u,h,c){var l=n&s,f=t.length,p=e.length;if(f!=p&&!(l&&p>f))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var y=-1,v=!0,g=n&a?new i:void 0;for(c.set(t,e),c.set(e,t);++y<f;){var _=t[y],m=e[y];if(u)var x=l?u(m,_,y,e,t,c):u(_,m,y,t,e,c);if(void 0!==x){if(x)continue;v=!1;break}if(g){if(!r(e,function(t,e){if(!o(g,e)&&(_===t||h(_,t,n,u,c)))return g.push(e)})){v=!1;break}}else if(_!==m&&!h(_,m,n,u,c)){v=!1;break}}return c.delete(t),c.delete(e),v}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}var r=n(115),o=n(310),s=n(311);i.prototype.add=i.prototype.push=o,i.prototype.has=s,t.exports=i},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(30).Uint8Array;t.exports=i},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var i=n(173),r=n(116),o=n(61);t.exports=function(t){return i(t,o,r)}},function(t,e,n){var i=n(112),r=n(19);t.exports=function(t,e,n){var o=e(t);return r(t)?o:i(o,n(t))}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(80),r=n(316),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(31);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var i=n(180),r=n(87);t.exports=function(t,e){for(var n=0,o=(e=i(e,t)).length;null!=t&&n<o;)t=t[r(e[n++])];return n&&n==o?t:void 0}},function(t,e,n){var i=n(19),r=n(118),o=n(324),s=n(327);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:o(s(t))}},function(t,e,n){t.exports=!n(10)&&!n(5)(function(){return 7!=Object.defineProperty(n(119)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(8)},function(t,e,n){var i=n(20),r=n(24),o=n(89)(!1),s=n(121)("IE_PROTO");t.exports=function(t,e){var n,a=r(t),u=0,h=[];for(n in a)n!=s&&i(a,n)&&h.push(n);for(;e.length>u;)i(a,n=e[u++])&&(~o(h,n)||h.push(n));return h}},function(t,e,n){var i=n(11),r=n(2),o=n(48);t.exports=n(10)?Object.defineProperties:function(t,e){r(t);for(var n,s=o(e),a=s.length,u=0;a>u;)i.f(t,n=s[u++],e[n]);return t}},function(t,e,n){var i=n(24),r=n(51).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?function(t){try{return r(t)}catch(t){return s.slice()}}(t):r(i(t))}},function(t,e,n){"use strict";var i=n(48),r=n(90),o=n(71),s=n(14),a=n(70),u=Object.assign;t.exports=!u||n(5)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=i})?function(t,e){for(var n=s(t),u=arguments.length,h=1,c=r.f,l=o.f;u>h;)for(var f,p=a(arguments[h++]),d=c?i(p).concat(c(p)):i(p),y=d.length,v=0;y>v;)l.call(p,f=d[v++])&&(n[f]=p[f]);return n}:u},function(t,e,n){"use strict";var i=n(17),r=n(6),o=n(188),s=[].slice,a={};t.exports=Function.bind||function(t){var e=i(this),n=s.call(arguments,1),u=function(){var i=n.concat(s.call(arguments));return this instanceof u?function(t,e,n){if(!(e in a)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";a[e]=Function("F,a","return new F("+i.join(",")+")")}return a[e](t,n)}(e,i.length,i):o(e,i,t)};return r(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(3).parseInt,r=n(63).trim,o=n(125),s=/^[-+]?0[xX]/;t.exports=8!==i(o+"08")||22!==i(o+"0x16")?function(t,e){var n=r(String(t),3);return i(n,e>>>0||(s.test(n)?16:10))}:i},function(t,e,n){var i=n(3).parseFloat,r=n(63).trim;t.exports=1/i(n(125)+"-0")!=-1/0?function(t){var e=r(String(t),3),n=i(e);return 0===n&&"-"==e.charAt(0)?-0:n}:i},function(t,e,n){var i=n(28);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=i(t))throw TypeError(e);return+t}},function(t,e,n){var i=n(6),r=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&r(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var i=n(128),r=Math.pow,o=r(2,-52),s=r(2,-23),a=r(2,127)*(2-s),u=r(2,-126);t.exports=Math.fround||function(t){var e,n,r=Math.abs(t),h=i(t);return r<u?h*function(t){return t+1/o-1/o}(r/u/s)*u*s:(e=(1+s/o)*r,(n=e-(e-r))>a||n!=n?h*(1/0):h*n)}},function(t,e,n){var i=n(2);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){var i=n(17),r=n(14),o=n(70),s=n(12);t.exports=function(t,e,n,a,u){i(e);var h=r(t),c=o(h),l=s(h.length),f=u?l-1:0,p=u?-1:1;if(n<2)for(;;){if(f in c){a=c[f],f+=p;break}if(f+=p,u?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:l>f;f+=p)f in c&&(a=e(a,c[f],f,h));return a}},function(t,e,n){"use strict";var i=n(14),r=n(49),o=n(12);t.exports=[].copyWithin||function(t,e){var n=i(this),s=o(n.length),a=r(t,s),u=r(e,s),h=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===h?s:r(h,s))-u,s-a),l=1;for(u<a&&a<u+c&&(l=-1,u+=c-1,a+=c-1);c-- >0;)u in n?n[a]=n[u]:delete n[a],a+=l,u+=l;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(10)&&"g"!=/./g.flags&&n(11).f(RegExp.prototype,"flags",{configurable:!0,get:n(94)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(2),r=n(6),o=n(143);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var i=n(203),r=n(65);t.exports=n(97)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=i.getEntry(r(this,"Map"),t);return e&&e.v},set:function(t,e){return i.def(r(this,"Map"),0===t?0:t,e)}},i,!0)},function(t,e,n){"use strict";var i=n(11).f,r=n(50),o=n(55),s=n(27),a=n(53),u=n(54),h=n(131),c=n(198),l=n(52),f=n(10),p=n(40).fastKey,d=n(65),y=f?"_s":"size",v=function(t,e){var n,i=p(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,h){var c=t(function(t,i){a(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=i&&u(i,n,t[h],t)});return o(c.prototype,{clear:function(){for(var t=d(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=d(this,e),i=v(n,t);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[y]--}return!!i},forEach:function(t){d(this,e);for(var n,i=s(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!v(d(this,e),t)}}),f&&i(c.prototype,"size",{get:function(){return d(this,e)[y]}}),c},def:function(t,e,n){var i,r,o=v(t,e);return o?o.v=n:(t._l=o={i:r=p(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[y]++,"F"!==r&&(t._i[r]=o)),t},getEntry:v,setStrong:function(t,e,n){h(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){"use strict";var i=n(203),r=n(65);t.exports=n(97)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},function(t,e,n){"use strict";var i,r=n(37)(0),o=n(22),s=n(40),a=n(186),u=n(206),h=n(6),c=n(5),l=n(65),f=s.getWeak,p=Object.isExtensible,d=u.ufstore,y={},v=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(h(t)){var e=f(t);return!0===e?d(l(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(l(this,"WeakMap"),t,e)}},_=t.exports=n(97)("WeakMap",v,g,u,!0,!0);c(function(){return 7!=(new _).set((Object.freeze||Object)(y),7).get(y)})&&(a((i=u.getConstructor(v,"WeakMap")).prototype,g),s.NEED=!0,r(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];o(e,t,function(e,r){if(h(e)&&!p(e)){this._f||(this._f=new i);var o=this._f[t](e,r);return"set"==t?this:o}return n.call(this,e,r)})}))},function(t,e,n){"use strict";var i=n(55),r=n(40).getWeak,o=n(2),s=n(6),a=n(53),u=n(54),h=n(37),c=n(20),l=n(65),f=h(5),p=h(6),d=0,y=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},g=function(t,e){return f(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var h=t(function(t,i){a(t,h,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=i&&u(i,n,t[o],t)});return i(h.prototype,{delete:function(t){if(!s(t))return!1;var n=r(t);return!0===n?y(l(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!s(t))return!1;var n=r(t);return!0===n?y(l(this,e)).has(t):n&&c(n,this._i)}}),h},def:function(t,e,n){var i=r(o(e),!0);return!0===i?y(t).set(e,n):i[t._i]=n,t},ufstore:y}},function(t,e,n){var i=n(35),r=n(12);t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var i=n(51),r=n(90),o=n(2),s=n(3).Reflect;t.exports=s&&s.ownKeys||function(t){var e=i.f(o(t)),n=r.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";function i(t,e,n,h,c,l,f,p){for(var d,y,v=c,g=0,_=!!f&&a(f,p,3);g<h;){if(g in n){if(d=_?_(n[g],g,e):n[g],y=!1,o(d)&&(y=void 0!==(y=d[u])?!!y:r(d)),y&&l>0)v=i(t,e,d,s(d.length),v,l-1)-1;else{if(v>=9007199254740991)throw TypeError();t[v]=d}v++}g++}return v}var r=n(91),o=n(6),s=n(12),a=n(27),u=n(8)("isConcatSpreadable");t.exports=i},function(t,e,n){var i=n(12),r=n(127),o=n(34);t.exports=function(t,e,n,s){var a=String(o(t)),u=a.length,h=void 0===n?" ":String(n),c=i(e);if(c<=u||""==h)return a;var l=c-u,f=r.call(h,Math.ceil(l/h.length));return f.length>l&&(f=f.slice(0,l)),s?f+a:a+f}},function(t,e,n){var i=n(48),r=n(24),o=n(71).f;t.exports=function(t){return function(e){for(var n,s=r(e),a=i(s),u=a.length,h=0,c=[];u>h;)o.call(s,n=a[h++])&&c.push(t?[n,s[n]]:s[n]);return c}}},function(t,e,n){var i=n(72),r=n(213);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},function(t,e,n){var i=n(54);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,i,r){return 0===arguments.length||t!=t||e!=e||n!=n||i!=i||r!=r?NaN:t===1/0||t===-1/0?t:(t-e)*(r-i)/(n-e)+i}},function(t,e){function n(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(i),o=i.sources.map(function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"});return[n].concat(o).concat([r]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var s=t[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=l[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(h(i.parts[o],e))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(h(i.parts[o],e));l[i.id]={id:i.id,refs:1,parts:s}}}}function r(t,e){for(var n=[],i={},r=0;r<t.length;r++){var o=t[r],s=e.base?o[0]+e.base:o[0],a={css:o[1],media:o[2],sourceMap:o[3]};i[s]?i[s].parts.push(a):n.push(i[s]={id:s,parts:[a]})}return n}function o(t,e){var n=p(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=v[v.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),v.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=p(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,r)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=v.indexOf(t);e>=0&&v.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",u(e,t.attrs),o(t,e),e}function u(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function h(t,e){var n,i,r,h;if(e.transform&&t.css){if(!(h=e.transform(t.css)))return function(){};t.css=h}if(e.singleton){var l=y++;n=d||(d=a(e)),i=c.bind(null,n,l,!1),r=c.bind(null,n,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",u(e,t.attrs),o(t,e),e}(e),i=function(t,e,n){var i=n.css,r=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||o)&&(i=g(i));r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([i],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),r=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),i=function(t,e){var n=e.css,i=e.media;i&&t.setAttribute("media",i);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),r=function(){s(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function c(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=_(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}var l={},f=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),p=function(t){var e={};return function(t){if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),d=null,y=0,v=[],g=n(548);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=f()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=r(t,e);return i(n,e),function(t){for(var o=[],s=0;s<n.length;s++){var a=n[s];(u=l[a.id]).refs--,o.push(u)}if(t){i(r(t,e),e)}for(s=0;s<o.length;s++){var u;if(0===(u=o[s]).refs){for(var h=0;h<u.parts.length;h++)u.parts[h]();delete l[u.id]}}}};var _=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var i=n(218),r=n(556),o=n(19);t.exports=function(t){return(o(t)?i:r)(t)}},function(t,e,n){var i=n(219);t.exports=function(t){var e=t.length;return e?t[i(0,e-1)]:void 0}},function(t,e){var n=Math.floor,i=Math.random;t.exports=function(t,e){return t+n(i()*(e-t+1))}},function(t,e,n){var i=n(557),r=n(61);t.exports=function(t){return null==t?[]:i(t,r(t))}},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}return{pending:t,fulfilled:n,rejected:e,inspect:function(t){var i=t.state();return 0===i?{state:"pending"}:i>0?n(t.value):e(t.value)}}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(t,n){function i(e,i){if(e.i<0)return n(e.f,e.thisArg,e.params,i);t._handler(e.args[e.i]).fold(r,e,void 0,i)}function r(t,e,n){t.params[t.i]=e,t.i-=1,i(t,n)}return arguments.length<2&&(n=e),function(e,r,o){var s=t._defer(),a=o.length;return i({f:e,thisArg:r,args:o,params:new Array(a),i:a-1,call:n},s._handler),s}}function e(t,e,n,i){try{i.resolve(t.apply(e,n))}catch(t){i.reject(t)}}return t.tryCatchResolve=e,t}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){(function(e){var n;!function(e){t.exports=e()}(function(){var t;return function t(e,i,r){function o(a,u){if(!i[a]){if(!e[a]){if(!u&&("function"==typeof n&&n))return n(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+a+"'")}var h=i[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return o(n||t)},h,h.exports,t,e,i,r)}return i[a].exports}for(var s="function"==typeof n&&n,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(t,e,n){var i=e.exports=t("../when");i.callbacks=t("../callbacks"),i.cancelable=t("../cancelable"),i.delay=t("../delay"),i.fn=t("../function"),i.guard=t("../guard"),i.keys=t("../keys"),i.nodefn=i.node=t("../node"),i.parallel=t("../parallel"),i.pipeline=t("../pipeline"),i.poll=t("../poll"),i.sequence=t("../sequence"),i.timeout=t("../timeout")},{"../callbacks":2,"../cancelable":3,"../delay":4,"../function":5,"../guard":6,"../keys":7,"../node":26,"../parallel":27,"../pipeline":28,"../poll":29,"../sequence":30,"../timeout":31,"../when":32}],2:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t){var e=arguments.length>1?a.call(arguments,1):[];return function(){return u(t,this,e.concat(a.call(arguments)))}}function n(t,e){return e<0?t.length+e+2:e}function i(t,e,n,i){"number"==typeof e&&t.splice(e,0,r(n,i))}function r(t,e){return function(){arguments.length>1?t.call(e,a.call(arguments)):t.apply(e,arguments)}}var o=t("./when").Promise,s=t("./lib/liftAll"),a=Array.prototype.slice,u=t("./lib/apply")(o,function(t,e,n,i){n.push(r(i.resolve,i),r(i.reject,i)),function(t,e,n,i){try{t.apply(e,n)}catch(t){i.reject(t)}}(t,e,n,i)});return{lift:e,liftAll:function(t,n,i){return s(e,n,i,t)},apply:function(t,e){return u(t,this,e||[])},call:function(t){return u(t,this,a.call(arguments,1))},promisify:function(t,e){return function(){var r=this;return o.all(arguments).then(function(s){var a,u,h=o._defer();return"number"==typeof e.callback&&(a=n(s,e.callback)),"number"==typeof e.errback&&(u=n(s,e.errback)),u<a?(i(s,u,h._handler.reject,h._handler),i(s,a,h._handler.resolve,h._handler)):(i(s,a,h._handler.resolve,h._handler),i(s,u,h._handler.reject,h._handler)),t.apply(r,s),h})}}}})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],3:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){return function(t,e){return t.cancel=function(){try{t.reject(e(t))}catch(e){t.reject(e)}return t.promise},t}})},{}],4:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when");return function(t,n){return e(n).delay(t)}})},{"./when":32}],5:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t){var e=arguments.length>1?s.call(arguments,1):[];return function(){return o(t,this,e.concat(s.call(arguments)))}}var n=t("./when"),i=n.try,r=t("./lib/liftAll"),o=t("./lib/apply")(n.Promise),s=Array.prototype.slice;return{lift:e,liftAll:function(t,n,i){return r(e,n,i,t)},call:i,apply:function(t,e){return o(t,this,null==e?[]:s.call(e))},compose:function(t){var e=s.call(arguments,1);return function(){var r=this,o=s.call(arguments),a=i.apply(r,[t].concat(o));return n.reduce(e,function(t,e){return e.call(r,t)},a)}}}})},{"./lib/apply":11,"./lib/liftAll":23,"./when":32}],6:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t,e){return function(){var r=i.call(arguments);return n(t()).withThis(this).then(function(t){return n(e.apply(this,r)).finally(t)})}}var n=t("./when"),i=Array.prototype.slice;return e.n=function(t){function e(){i=Math.max(i-1,0),r.length>0&&r.shift()(e)}var i=0,r=[];return function(){return n.promise(function(n){i<t?n(e):r.push(n),i+=1})}},e})},{"./when":32}],7:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t){function e(t,e,n){this[t]=e,0==--u&&n.resolve(s)}for(var n,r=i._defer(),o=i._handler(r),s={},a=Object.keys(t),u=a.length,h=0;h<a.length;++h)n=a[h],i._handler(t[n]).fold(e,n,s,o);return 0===u&&o.resolve(s),r}var n=t("./when"),i=n.Promise,r=n.resolve;return{all:n.lift(e),map:function(t,n){function i(t,e){return n(e,t)}return r(t).then(function(t){return e(Object.keys(t).reduce(function(e,n){return e[n]=r(t[n]).fold(i,n),e},{}))})},settle:function(t){var e=Object.keys(t),o={};if(0===e.length)return r(o);var s=i._defer(),a=i._handler(s),u=e.map(function(e){return t[e]});return n.settle(u).then(function(t){(function(t,e,n,i){for(var r=0;r<t.length;r++)n[t[r]]=e[r];i.resolve(n)})(e,t,o,a)}),s}}})})()},{"./when":32}],8:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){return t("./makePromise")({scheduler:new(t("./Scheduler"))(t("./env").asap)})})})()},{"./Scheduler":9,"./env":21,"./makePromise":24}],9:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t})})()},{}],10:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(e){Error.call(this),this.message=e,this.name=t.name,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t})})()},{}],11:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(t,n){function i(e,i){if(e.i<0)return n(e.f,e.thisArg,e.params,i);t._handler(e.args[e.i]).fold(r,e,void 0,i)}function r(t,e,n){t.params[t.i]=e,t.i-=1,i(t,n)}return arguments.length<2&&(n=e),function(e,r,o){var s=t._defer(),a=o.length;return i({f:e,thisArg:r,args:o,params:new Array(a),i:a-1,call:n},s._handler),s}}function e(t,e,n,i){try{i.resolve(t.apply(e,n))}catch(t){i.reject(t)}}return t.tryCatchResolve=e,t})})()},{}],12:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("../state"),n=t("../apply");return function(t){function i(n){var i;return n instanceof t&&(i=n._handler.join()),i&&0===i.state()||!i?s(n).then(e.fulfilled,e.rejected):(i._unreport(),e.inspect(i))}function r(t){return function(e,n,i){return o(t,void 0,[e,n,i])}}var o=n(t),s=t.resolve,a=t.all,u=Array.prototype.reduce,h=Array.prototype.reduceRight,c=Array.prototype.slice;return t.any=function(e){function n(t){c=null,this.resolve(t)}function i(t){this.resolved||(c.push(t),0==--h&&this.reject(c))}for(var r,o,s=t._defer(),a=s._handler,u=e.length>>>0,h=u,c=[],l=0;l<u;++l)if(void 0!==(o=e[l])||l in e){if((r=t._handler(o)).state()>0){a.become(r),t._visitRemaining(e,l,r);break}r.visit(a,n,i)}else--h;return 0===h&&a.reject(new RangeError("any(): array must not be empty")),s},t.some=function(e,n){function i(t){this.resolved||(c.push(t),0==--p&&(l=null,this.resolve(c)))}function r(t){this.resolved||(l.push(t),0==--o&&(c=null,this.reject(l)))}var o,s,a,u=t._defer(),h=u._handler,c=[],l=[],f=e.length>>>0,p=0;for(a=0;a<f;++a)(void 0!==(s=e[a])||a in e)&&++p;for(n=Math.max(n,0),o=p-n+1,n>(p=Math.min(n,p))?h.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&h.resolve(c),a=0;a<f;++a)(void 0!==(s=e[a])||a in e)&&t._handler(s).visit(h,i,r,h.notify);return u},t.settle=function(t){return a(t.map(i))},t.map=function(e,n){return t._traverse(n,e)},t.filter=function(e,n){var i=c.call(e);return t._traverse(n,i).then(function(e){return function(e,n){for(var i=n.length,r=new Array(i),o=0,s=0;o<i;++o)n[o]&&(r[s++]=t._handler(e[o]).value);return r.length=s,r}(i,e)})},t.reduce=function(t,e){return arguments.length>2?u.call(t,r(e),arguments[2]):u.call(t,r(e))},t.reduceRight=function(t,e){return arguments.length>2?h.call(t,r(e),arguments[2]):h.call(t,r(e))},t.prototype.spread=function(t){return this.then(a).then(function(e){return t.apply(this,e)})},t}})})()},{"../apply":11,"../state":25}],13:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return function(t){return t===Error||null!=t&&t.prototype instanceof Error}(e)?t instanceof e:e(t)}function n(t){return t}return function(i){function r(t,e,n,i){var r=t.call(e);return function(t){return("object"==typeof t||"function"==typeof t)&&null!==t}(r)?function(t,e,n){return o(t).then(function(){return e(n)})}(r,n,i):n(i)}var o=i.resolve,s=i.reject,a=i.prototype.catch;return i.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},i.prototype.catch=i.prototype.otherwise=function(n){return arguments.length<2?a.call(this,n):"function"!=typeof n?this.ensure(t):a.call(this,function(t,n){return function(i){return e(i,n)?t.call(this,i):s(i)}}(arguments[1],n))},i.prototype.finally=i.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return r(t,this,n,e)},function(e){return r(t,this,s,e)})},i.prototype.else=i.prototype.orElse=function(t){return this.then(void 0,function(){return t})},i.prototype.yield=function(t){return this.then(function(){return t})},i.prototype.tap=function(t){return this.then(t).yield(this)},i}})})()},{}],14:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){return function(t){return t.prototype.fold=function(e,n){var i=this._beget();return this._handler.fold(function(n,i,r){t._handler(n).fold(function(t,n,i){i.resolve(e.call(this,n,t))},i,this,r)},n,i._handler.receiver,i._handler),i},t}})})()},{}],15:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("../state").inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}})})()},{"../state":25}],16:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){return function(t){function e(t,i,r,o){function s(o,s){return n(r(o)).then(function(){return e(t,i,r,s)})}return n(o).then(function(e){return n(i(e)).then(function(i){return i?e:n(t(e)).spread(s)})})}var n=t.resolve;return t.iterate=function(t,n,i,r){return e(function(e){return[e,t(e)]},n,i,r)},t.unfold=e,t}})})()},{}],17:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}})})()},{}],18:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t,e,i,r){return n.setTimer(function(){t(i,r,e)},e)}var n=t("../env"),i=t("../TimeoutError");return function(t){function r(t,n,i){e(o,t,n,i)}function o(t,e){e.resolve(t)}function s(t,e,n){var r=void 0===t?new i("timed out after "+n+"ms"):t;e.reject(r)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(r,t,void 0,e._handler),e},t.prototype.timeout=function(t,i){var r=this._beget(),o=r._handler,a=e(s,t,i,r._handler);return this._handler.visit(o,function(t){n.clearTimer(a),this.resolve(t)},function(t){n.clearTimer(a),this.reject(t)},o.notify),r},t}})})()},{"../TimeoutError":10,"../env":21}],19:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t){throw t}function n(){}var i=t("../env").setTimer,r=t("../format");return function(t){function o(t){t.handled||(p.push(t),c("Potentially unhandled rejection ["+t.id+"] "+r.formatError(t.value)))}function s(t){var e=p.indexOf(t);e>=0&&(p.splice(e,1),l("Handled previous rejection ["+t.id+"] "+r.formatObject(t.value)))}function a(t,e){f.push(t,e),null===d&&(d=i(u,0))}function u(){for(d=null;f.length>0;)f.shift()(f.shift())}var h,c=n,l=n;"undefined"!=typeof console&&(h=console,c=void 0!==h.error?function(t){h.error(t)}:function(t){h.log(t)},l=void 0!==h.info?function(t){h.info(t)}:function(t){h.log(t)}),t.onPotentiallyUnhandledRejection=function(t){a(o,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){a(s,t)},t.onFatalRejection=function(t){a(e,t.value)};var f=[],p=[],d=null;return t}})})()},{"../env":21,"../format":22}],20:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}})})()},{}],21:[function(n,i,r){(function(r){"use strict";(typeof t==="function"&&t.amd?t:function(t){i.exports=t(n)})(function(t){var n,i="undefined"!=typeof setTimeout&&setTimeout,r=function(t,e){return setTimeout(t,e)},o=function(t){return clearTimeout(t)},s=function(t){return i(t,0)};if(void 0!==e&&"[object process]"===Object.prototype.toString.call(e))s=function(t){return e.nextTick(t)};else if(n="undefined"!=typeof MutationObserver&&MutationObserver||"undefined"!=typeof WebKitMutationObserver&&WebKitMutationObserver)s=function(t){var e,n=document.createTextNode("");new t(function(){var t=e;e=void 0,t()}).observe(n,{characterData:!0});var i=0;return function(t){e=t,n.data=i^=1}}(n);else if(!i){var a=t("vertx");r=function(t,e){return a.setTimer(e,t)},o=a.cancelTimer,s=a.runOnLoop||a.runOnContext}return{setTimer:r,clearTimer:o,asap:s}})})()},{}],22:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(t){var n=String(t);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=e(t,n)),n}function e(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:function(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"},formatObject:t,tryStringify:e}})})()},{}],23:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(t,e,n){return t[n]=e,t}return function(e,n,i,r){return void 0===n&&(n=t),Object.keys(r).reduce(function(t,i){var o=r[i];return"function"==typeof o?n(t,e(o),i):t},void 0===i?function(t){return"function"==typeof t?t.bind():Object.create(t)}(r):i)}})})()},{}],24:[function(n,i,r){(function(n){"use strict";(typeof t==="function"&&t.amd?t:function(t){i.exports=t()})(function(){return function(t){function n(t,e){this._handler=t===l?e:function(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function i(t){r.notify(t)}var r=new p;try{t(e,n,i)}catch(t){n(t)}return r}(t)}function i(t){return C(t)?t:new n(l,new d(h(t)))}function r(t){return new n(l,new d(new g(t)))}function o(){return z}function s(t,e,i){function r(t,e,n){c[t]=e,0==--h&&n.become(new v(c))}for(var o,s="function"==typeof e?function(n,o,s){s.resolved||a(i,r,n,t(e,o,n),s)}:r,u=new p,h=i.length>>>0,c=new Array(h),f=0;f<i.length&&!u.resolved;++f)void 0!==(o=i[f])||f in i?a(i,s,f,o,u):--h;return 0===h&&u.become(new v(c)),new n(l,u)}function a(t,e,n,i,r){if(k(i)){var o=function(t){return C(t)?t._handler.join():c(t)}(i),s=o.state();0===s?o.fold(e,n,void 0,r):s>0?e(n,o.value,r):(r.become(o),u(t,n+1,o))}else e(n,i,r)}function u(t,e,n){for(var i=e;i<t.length;++i)(function(t,e){if(t===e)return;var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()})(h(t[i]),n)}function h(t){return C(t)?t._handler.join():k(t)?c(t):new v(t)}function c(t){try{var e=t.then;return"function"==typeof e?new y(e,t):new v(t)}catch(t){return new g(t)}}function l(){}function f(){}function p(t,e){n.createContext(this,e),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function d(t){this.handler=t}function y(t,e){p.call(this),A.enqueue(new b(t,e,this))}function v(t){n.createContext(this),this.value=t}function g(t){n.createContext(this),this.id=++L,this.value=t,this.handled=!1,this.reported=!1,this._report()}function _(t,e){this.rejection=t,this.context=e}function m(t){this.rejection=t}function x(t,e){this.continuation=t,this.handler=e}function w(t,e){this.handler=e,this.value=t}function b(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function S(t,e,n,i){this.f=t,this.z=e,this.c=n,this.to=i,this.resolver=B,this.receiver=this}function C(t){return t instanceof n}function k(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function P(t,e,i,r){if("function"!=typeof t)return r.become(e);n.enterContext(e),function(t,e,n,i){try{i.become(h(t.call(n,e)))}catch(t){i.become(new g(t))}}(t,e.value,i,r),n.exitContext()}function M(t,e,i,r,o){if("function"!=typeof t)return o.become(i);n.enterContext(i),function(t,e,n,i,r){try{t.call(i,e,n,r)}catch(t){r.become(new g(t))}}(t,e,i.value,r,o),n.exitContext()}function D(t,e,n){try{return t(e,n)}catch(t){return r(t)}}function T(t,e){e.prototype=F(t.prototype),e.prototype.constructor=e}function E(t,e){return e}function O(){}var A=t.scheduler,j=void 0!==e&&null!==e&&"function"==typeof e.emit?function(t,n){return"unhandledRejection"===t?e.emit(t,n.value,n):e.emit(t,n)}:"undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(t){}return!1}()?function(t,e){return function(n,i){var r=new e(n,{detail:{reason:i.value,key:i},bubbles:!1,cancelable:!0});return!t.dispatchEvent(r)}}(self,CustomEvent):"undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}()?function(t,e){return function(n,i){var r=e.createEvent("CustomEvent");return r.initCustomEvent(n,!1,!0,{reason:i.value,key:i}),!t.dispatchEvent(r)}}(self,document):O,F=Object.create||function(t){function e(){}return e.prototype=t,new e};n.resolve=i,n.reject=r,n.never=o,n._defer=function(){return new n(l,new p)},n._handler=h,n.prototype.then=function(t,e,n){var i=this._handler,r=i.join().state();if("function"!=typeof t&&r>0||"function"!=typeof e&&r<0)return new this.constructor(l,i);var o=this._beget(),s=o._handler;return i.chain(s,i.receiver,t,e,n),o},n.prototype.catch=function(t){return this.then(void 0,t)},n.prototype._beget=function(){return function(t,e){return new e(l,new p(t.receiver,t.join().context))}(this._handler,this.constructor)},n.all=function(t){return s(E,null,t)},n.race=function(t){return"object"!=typeof t||null===t?r(new TypeError("non-iterable passed to race()")):0===t.length?o():1===t.length?i(t[0]):function(t){var e,i,r,o=new p;for(e=0;e<t.length;++e)if(void 0!==(i=t[e])||e in t){if(0!==(r=h(i)).state()){o.become(r),u(t,e+1,r);break}r.visit(o,o.resolve,o.reject)}return new n(l,o)}(t)},n._traverse=function(t,e){return s(D,t,e)},n._visitRemaining=u,l.prototype.when=l.prototype.become=l.prototype.notify=l.prototype.fail=l.prototype._unreport=l.prototype._report=O,l.prototype._state=0,l.prototype.state=function(){return this._state},l.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},l.prototype.chain=function(t,e,n,i,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:i,progress:r})},l.prototype.visit=function(t,e,n,i){this.chain(B,t,e,n,i)},l.prototype.fold=function(t,e,n,i){this.when(new S(t,e,n,i))},T(l,f),f.prototype.become=function(t){t.fail()};var B=new f;T(l,p),p.prototype._state=0,p.prototype.resolve=function(t){this.become(h(t))},p.prototype.reject=function(t){this.resolved||this.become(new g(t))},p.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=new g(new TypeError("Promise cycle"));return t},p.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},p.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&A.enqueue(this),void 0!==this.context&&t._report(this.context))},p.prototype.when=function(t){this.resolved?A.enqueue(new x(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},p.prototype.notify=function(t){this.resolved||A.enqueue(new w(t,this))},p.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},p.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},p.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},T(l,d),d.prototype.when=function(t){A.enqueue(new x(t,this))},d.prototype._report=function(t){this.join()._report(t)},d.prototype._unreport=function(){this.join()._unreport()},T(p,y),T(l,v),v.prototype._state=1,v.prototype.fold=function(t,e,n,i){M(t,e,this,n,i)},v.prototype.when=function(t){P(t.fulfilled,this,t.receiver,t.resolver)};var L=0;T(l,g),g.prototype._state=-1,g.prototype.fold=function(t,e,n,i){i.become(this)},g.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),P(t.rejected,this,t.receiver,t.resolver)},g.prototype._report=function(t){A.afterQueue(new _(this,t))},g.prototype._unreport=function(){this.handled||(this.handled=!0,A.afterQueue(new m(this)))},g.prototype.fail=function(t){this.reported=!0,j("unhandledRejection",this),n.onFatalRejection(this,void 0===t?this.context:t)},_.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,j("unhandledRejection",this.rejection)||n.onPotentiallyUnhandledRejection(this.rejection,this.context))},m.prototype.run=function(){this.rejection.reported&&(j("rejectionHandled",this.rejection)||n.onPotentiallyUnhandledRejectionHandled(this.rejection))},n.createContext=n.enterContext=n.exitContext=n.onPotentiallyUnhandledRejection=n.onPotentiallyUnhandledRejectionHandled=n.onFatalRejection=O;var z=new n(l,new l);return x.prototype.run=function(){this.handler.join().when(this.continuation)},w.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var e,i=0;i<t.length;++i)(function(t,e,i,r,o){if("function"!=typeof t)return o.notify(e);n.enterContext(i),function(t,e,n,i){try{i.notify(t.call(n,e))}catch(t){i.notify(t)}}(t,e,r,o),n.exitContext()})((e=t[i]).progress,this.value,this.handler,e.receiver,e.resolver)},b.prototype.run=function(){var t=this.resolver;(function(t,e,n,i,r){try{t.call(e,n,i,r)}catch(t){i(t)}})(this._then,this.thenable,function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.notify(e)})},S.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},S.prototype.rejected=function(t){this.to.reject(t)},S.prototype.progress=function(t){this.to.notify(t)},n}})})()},{}],25:[function(e,n,i){(function(e){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t()})(function(){function t(){return{state:"pending"}}function e(t){return{state:"rejected",reason:t}}function n(t){return{state:"fulfilled",value:t}}return{pending:t,fulfilled:n,rejected:e,inspect:function(t){var i=t.state();return 0===i?{state:"pending"}:i>0?n(t.value):e(t.value)}}})})()},{}],26:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t){var e=arguments.length>1?a.call(arguments,1):[];return function(){var n,i=e.length,r=arguments.length,o=new Array(r+i);for(n=0;n<i;++n)o[n]=e[n];for(n=0;n<r;++n)o[n+i]=arguments[n];return u(t,this,o)}}function n(t){return function(e,n){e?t.reject(e):arguments.length>2?t.resolve(a.call(arguments,1)):t.resolve(n)}}function i(t,e){function n(t){i(null,t)}function i(t,n){s(function(){e(t,n)},0)}return t=r(t),e&&t.then(n,i),t}var r=t("./when"),o=t("./lib/liftAll"),s=t("./lib/env").setTimer,a=Array.prototype.slice,u=t("./lib/apply")(r.Promise,function(t,e,i,r){var o=n(r);try{switch(i.length){case 2:t.call(e,i[0],i[1],o);break;case 1:t.call(e,i[0],o);break;case 0:t.call(e,o);break;default:i.push(o),t.apply(e,i)}}catch(t){r.reject(t)}});return{lift:e,liftAll:function(t,n,i){return o(e,n,i,t)},apply:function(t,e){return u(t,this,e||[])},call:function(t){return u(t,this,a.call(arguments,1))},createCallback:n,bindCallback:i,liftCallback:function(t){return function(e){return i(e,t)}}}})},{"./lib/apply":11,"./lib/env":21,"./lib/liftAll":23,"./when":32}],27:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when"),n=e.Promise.all,i=Array.prototype.slice;return function(t){return n(i.call(arguments,1)).then(function(n){return e.map(t,function(t){return t.apply(void 0,n)})})}})},{"./when":32}],28:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when"),n=e.Promise.all,i=Array.prototype.slice;return function(t){var r=function(t,e){return r=function(t,e){return e(t)},e.apply(null,t)};return n(i.call(arguments,1)).then(function(n){return e.reduce(t,function(t,e){return r(t,e)},n)})}})},{"./when":32}],29:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when"),n=e.try,i=t("./cancelable");return function(t,r,o,s){function a(t){n(r).then(u,l),void 0!==t&&h.notify(t)}function u(){c||e(t(),function(t){e(o(t),function(e){return e?function(t){h.resolve(t)}(t):a(t)},function(){a(t)})},l)}var h,c,l;return c=!1,h=i(e.defer(),function(){c=!0}),l=h.reject,o=o||function(){return!1},"function"!=typeof r&&(r=function(t){return function(){return e().delay(t)}}(r)),s?a():u(),h.promise=Object.create(h.promise),h.promise.cancel=h.cancel,h.promise}})})()},{"./cancelable":3,"./when":32}],30:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when"),n=e.Promise.all,i=Array.prototype.slice;return function(t){function r(t){return o.push(t),o}var o=[];return n(i.call(arguments,1)).then(function(n){return e.reduce(t,function(t,i){return e(i.apply(void 0,n),r)},o)})}})},{"./when":32}],31:[function(e,n,i){(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){var e=t("./when");return function(t,n){return e(n).timeout(t)}})},{"./when":32}],32:[function(e,n,i){(function(i){"use strict";(typeof t==="function"&&t.amd?t:function(t){n.exports=t(e)})(function(t){function e(t,e,n,i){var r=d.resolve(t);return arguments.length<2?r:r.then(e,n,i)}function n(t){return function(){for(var e=0,n=arguments.length,i=new Array(n);e<n;++e)i[e]=arguments[e];return y(t,this,i)}}function i(t){for(var e=0,n=arguments.length-1,i=new Array(n);e<n;++e)i[e]=arguments[e+1];return y(t,this,i)}var r=t("./lib/decorators/timed"),o=t("./lib/decorators/array"),s=t("./lib/decorators/flow"),a=t("./lib/decorators/fold"),u=t("./lib/decorators/inspect"),h=t("./lib/decorators/iterate"),c=t("./lib/decorators/progress"),l=t("./lib/decorators/with"),f=t("./lib/decorators/unhandledRejection"),p=t("./lib/TimeoutError"),d=[o,s,a,h,c,u,l,r,f].reduce(function(t,e){return e(t)},t("./lib/Promise")),y=t("./lib/apply")(d);return e.promise=function(t){return new d(t)},e.resolve=d.resolve,e.reject=d.reject,e.lift=n,e.try=i,e.attempt=i,e.iterate=d.iterate,e.unfold=d.unfold,e.join=function(){return d.all(arguments)},e.all=function(t){return e(t,d.all)},e.settle=function(t){return e(t,d.settle)},e.any=n(d.any),e.some=n(d.some),e.race=n(d.race),e.map=function(t,n){return e(t,function(t){return d.map(t,n)})},e.filter=function(t,n){return e(t,function(t){return d.filter(t,n)})},e.reduce=n(d.reduce),e.reduceRight=n(d.reduceRight),e.isPromiseLike=function(t){return t&&"function"==typeof t.then},e.Promise=d,e.defer=function(){return new function(){function t(t){i._handler.resolve(t)}function e(t){i._handler.reject(t)}function n(t){i._handler.notify(t)}var i=d._defer();this.promise=i,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}},e.TimeoutError=p,e})})()},{"./lib/Promise":8,"./lib/TimeoutError":10,"./lib/apply":11,"./lib/decorators/array":12,"./lib/decorators/flow":13,"./lib/decorators/fold":14,"./lib/decorators/inspect":15,"./lib/decorators/iterate":16,"./lib/decorators/progress":17,"./lib/decorators/timed":18,"./lib/decorators/unhandledRejection":19,"./lib/decorators/with":20}]},{},[1])(1)})}).call(e,n(147))},function(t,e){t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},function(t,e,n){var i=n(112),r=n(227),o=n(116),s=n(174),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)i(e,o(t)),t=r(t);return e}:s;t.exports=a},function(t,e,n){var i=n(176)(Object.getPrototypeOf,Object);t.exports=i},function(t,e){t.exports=function(t,e,n,i){var r=-1,o=null==t?0:t.length;for(i&&o&&(n=t[++r]);++r<o;)n=e(n,t[r],r,t);return n}},function(t,e,n){var i=n(175),r=n(117),o=n(78),s=n(19),a=n(44),u=n(79),h=n(80),c=n(110),l="[object Map]",f="[object Set]",p=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(a(t)&&(s(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||c(t)||o(t)))return!t.length;var e=r(t);if(e==l||e==f)return!t.size;if(h(t))return!i(t).length;for(var n in t)if(p.call(t,n))return!1;return!0}},function(t,e,n){var i=n(167),r=n(674),o=n(679),s=n(81),a=n(111),u=n(168),h=200;t.exports=function(t,e,n,c){var l=-1,f=r,p=!0,d=t.length,y=[],v=e.length;if(!d)return y;n&&(e=s(e,a(n))),c?(f=o,p=!1):e.length>=h&&(f=u,p=!1,e=new i(e));t:for(;++l<d;){var g=t[l],_=null==n?g:n(g);if(g=c||0!==g?g:0,p&&_==_){for(var m=v;m--;)if(e[m]===_)continue t;y.push(g)}else f(e,_,c)||y.push(g)}return y}},function(t,e,n){var i=n(44),r=n(60);t.exports=function(t){return r(t)&&i(t)}},function(t,e,n){var i=n(694),r=n(695),o=n(19);t.exports=function(t){return(o(t)?i:r)(t)}},function(t,e,n){var i=n(219);t.exports=function(t,e){var n=-1,r=t.length,o=r-1;for(e=void 0===e?r:e;++n<e;){var s=i(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var i=n(696),r=n.n(i);e.default=class{constructor(){this.entities=[],this.synchronizations={},this.onceTriggers=[]}registerEntity(t){return this.entities.includes(t)||this.entities.push(t),t}unregisterEntity(t){const e=this.entities.indexOf(t);return 0<=e&&this.entities.splice(e,1),this.verifyActiveSynchronisations(),t}synchronizeOn(e,n){const i=this.synchronizations[e]||{defer:t.defer(),registered:[]};return this.synchronizations[e]=i,i.registered.includes(n)||i.registered.push(n),0===r()(this.entities,i.registered).length&&i.defer.resolve(),i.defer.promise}allowOnce(t){return!(-1!==this.onceTriggers.indexOf(t)||(this.onceTriggers.push(t),0))}verifyActiveSynchronisations(){for(let t in this.synchronizations){const e=this.synchronizations[t];0===r()(this.entities,e.registered).length&&e.defer.resolve()}}}}.call(e,n(18).default)},function(t,e,n){(function(e){var i,r,o={}.hasOwnProperty;i=n(15).EntityScript,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.assets=function(){return this.loadAssets("mine")},n.prototype.spawn=function(t){var n,i,r;return r="right"===t.direction?e.viewport.width+180:-180,this.target=t.grid.getLocation(),this.juice=null==(n=t.juice)||n,e.e("Mine, BulletCircle").mine({x:r,y:440,health:300,defaultSpeed:null!=(i=t.speed)?i:400,pointsOnHit:t.points?10:0,pointsOnDestroy:t.points?50:0}).bulletCircle({burstAmount:4,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").blink().attr({w:14,h:14,speed:400,damage:1}).shoot(t,n,i)}})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({y:1.05,speed:400}),this.moveTo({x:this.target.x,easing:this.juice?"easeOutQuad":"linear"}),this.moveTo({y:this.target.y,easing:this.juice?"easeOutQuad":"linear"}),this.parallel(this.sequence(this.synchronizeOn("placed"),this.animate("open"),this.wait(200),this.moveTo({x:-50,speed:35})),this.sequence(this.wait(1e3),this.animate("blink",-1),this.wait(1e3),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),function(t){return function(){return t.entity.shootRing()}}(this),this.endSequence())))},n.prototype.onKilled=function(){return this.bigExplosion({juice:this.juice})},n}(),t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){(function(e){var i,r,o,s={}.hasOwnProperty;i=n(15).EntityScript,o=n(103).Stage1BossRocket,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.assets=function(){return this.loadAssets("helicopter")},n.prototype.spawn=function(t){var n,i,r,o,s;return this.dir=null!=(i=t.from)?i:"top",this.ground=null!=(r=t.ground)?r:660,this.corpseKeep=null!=(o=t.corpseKeep)?o:1e4,(n=e.e("Helicopter").attr({x:e.viewport.width+40,y:.6*e.viewport.height,defaultSpeed:null!=(s=t.speed)?s:40,weaponOrigin:[0,25]}).helicopter({pointsOnHit:25,pointsOnDestroy:200})).addComponent("BurstShot").burstShot({burstCooldown:2500,burstAmount:4,angle:-15,angleDeviation:10,aim:45,cooldown:50,projectile:function(t,n,i){return e.e("Projectile, sphere1, Hostile").crop(6,21,18,7).flip().attr({w:20,h:8,speed:350,damage:1}).shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.while(this.flightPath(),this.sequence(this.fireRockets(),this.wait(5e3)))},n.prototype.flightPath=function(){return"top"===this.dir?this.movePath([[.9,.4],[.7,.25],[.65,.2],[.4,.6],[.6,.7],[.8,.5],[.4,.8],[.2,.3],[-.2,.5]]):this.movePath([[.9,.6],[.7,.75],[.65,.8],[.4,.4],[.6,.3],[.8,.5],[.4,.2],[.2,.7],[-.2,.5]])},n.prototype.onKilled=function(){return this.leaveAnimation(this.sequence(this.deathDecoy(),this.bigExplosion(),this.while(this.moveTo({x:.6,y:this.ground,speed:250,easing:"easeInQuad",positionType:"absoluteY"}),this.sequence(this.blast(this.location(),{radius:10,duration:480,z:-1,lightness:.2,alpha:.5}),this.blast(this.location({offsetX:10,offsetY:5}),{radius:5,duration:180,z:-1}),this.wait(100))),this.moveTo({x:.6,y:this.ground-20,speed:50,easing:"easeInOutQuad",positionType:"absoluteY"}),this.moveTo({x:.6,y:this.ground,speed:50,easing:"easeInOutQuad",positionType:"absoluteY"}),this.bigExplosion(),function(t){return function(){return t.entity.removeComponent("ViewportFixed"),t.entity.attr({lightness:.3})}}(this),this.wait(this.corpseKeep),this.endDecoy()))},n.prototype.fireRockets=function(t){var e;return e=o,this.sequence(this.async(this.placeSquad(e,{options:{z:5,offsetX:0,offsetY:50,scale:.75,health:100,location:this.location()}})),this.async(this.placeSquad(e,{options:{z:-5,offsetX:0,offsetY:-50,scale:.75,health:100,location:this.location()}})),this.wait(500))},n}(),t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n(344),i=(n.n(e),n(546)),r=(n.n(i),n(549)),o=(n.n(r),n(551),n(666),n(668),n(689),n(718)),s=(n.n(o),n(719)),a=n.n(s);window.ga("create","UA-71899181-1","auto"),window.ga("send","pageview"),t.start(!1);const u=()=>{const t=document.getElementById("cr-stage"),e=t.clientHeight,n=t.clientWidth,i=window.innerHeight-60,r=window.innerWidth,o=Math.min(i/e,r/n);t.style.transform=`scale(${o})`;const s=Math.max(0,.5*(r-n*o));t.style.left=`${s}px`,document.getElementsByTagName("footer")[0].style.top=`${576*o}px`};window.addEventListener("resize",u),document.addEventListener("click",t=>{if(t.target.matches("#cr-stage,#cr-stage *")){const t=document.getElementById("theater");a.a.request(t),document.body.classList.add("fullscreen"),u(),document.addEventListener(a.a.raw.fullscreenchange,()=>{a.a.isFullscreen||(document.body.classList.remove("fullscreen"),u())})}}),setTimeout(u,0)}.call(e,n(7).default)},function(t,e,n){var i,r;(function t(e,n,i){function o(a,u){if(!n[a]){if(!e[a]){if(!u&&("function"==typeof r&&r))return r(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n||t)},c,c.exports,t,e,n,i)}return n[a].exports}for(var s="function"==typeof r&&r,a=0;a<i.length;a++)o(i[a]);return o})({1:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===i||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(){y&&p&&(y=!1,p.length?d=p.concat(d):v=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,y=!1,function(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function h(){}var c,l,f=e.exports={};(function(){try{c="function"==typeof setTimeout?setTimeout:i}catch(t){c=i}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}})();var p,d=[],y=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||y||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=h,f.addListener=h,f.once=h,f.off=h,f.removeListener=h,f.removeAllListeners=h,f.emit=h,f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],2:[function(t,e,n){function i(t,e,n,i){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,get:function(){return n[i]},set:function(t){n[i]=t}})}e.exports={defineAliases:function(t){i(t,"image_whitelist",t,"imageWhitelist"),i(t,"mouseDispatch",t.s("Mouse"),"processEvent"),i(t,"mouseButtonsDown",t.s("Mouse"),"_buttonDown"),i(t,"lastEvent",t.s("Mouse"),"lastMouseEvent"),i(t,"mouseObjs",t.s("Mouse"),"mouseObjs"),i(t,"keyboardDispatch",t.s("Keyboard"),"processEvent"),i(t,"keydown",t.s("Keyboard"),"_keyDown"),i(t,"resetKeyDown",t.s("Keyboard"),"resetKeyDown"),i(t,"touchDispatch",t,"_touchDispatch"),i(t,"touchObjs",t.s("Touch"),"touchObjs"),t.touchHandler={},i(t.touchHandler,"fingers",t.s("Touch"),"touchPoints")}}},{}],3:[function(t,e,n){function i(t){this.button=t}function r(t){this.key=t}function o(t){this.inputs=t}var s=t("../core/core.js");i.prototype={isDown:function(){var t=this.mouseSystem;return t||(this.mouseSystem=t=s.s("Mouse")),t.isButtonDown(this.button)}},r.prototype={isDown:function(){var t=this.keyboardSystem;return t||(this.keyboardSystem=t=s.s("Keyboard")),t.isKeyDown(this.key)}},o.prototype={timeDown:null,isActive:function(){for(var t in this.inputs){if(this.inputs[t].isDown())return this.timeDown||(this.timeDown=Date.now()),!0}return delete this.timeDown,!1},destroy:function(){for(var t in this.inputs)"function"==typeof this.inputs[t].destroy&&this.inputs[t].destroy()}},s.s("Controls",{init:function(){this._dpads={},this._triggers={},s.s("Mouse").bind("MouseDown",this.updateTriggers.bind(this)),s.s("Mouse").bind("MouseUp",this.updateTriggers.bind(this)),s.s("Mouse").bind("DoubleClick",this.updateTriggers.bind(this)),s.s("Mouse").bind("Click",this.updateTriggers.bind(this))},events:{EnterFrame:"runEvents",KeyDown:"updateTriggers",KeyUp:"updateTriggers"},updateTriggers:function(t){for(var e in this._triggers){var n=this._triggers[e];this.updateTriggerInput(n)}},runEvents:function(){for(var t in this._dpads){var e=this._dpads[t];e.oldX=e.x,e.oldY=e.y,this.updateDpadInput(e,e.multipleDirectionBehavior),this.updateActiveDirection(e,e.normalize),e.event.x=e.x,e.event.y=e.y,e.x===e.oldX&&e.y===e.oldY||s.trigger("DirectionalInput",e.event)}},getDpad:function(t){return this._dpads[t]},isTriggerDown:function(t){return this._triggers[t].active},defineTriggerGroup:function(t,e){var n;if(Array.isArray(e))n=e;else{if(n=[],e.mouseButtons)for(var a in e.mouseButtons)n.push(new i(e.mouseButtons[a]));if(e.keys)for(var u in e.keys)n.push(new r(e.keys[u]))}this.destroyTriggerGroup(t),this._triggers[t]={name:t,input:new o(n),downFor:0,active:!1},s.trigger("ControlDefined",{type:"TriggerGroup",name:t})},destroyTriggerGroup:function(t){this._triggers[t]&&(this._triggers[t].input.destroy(),delete this._triggers[t],s.trigger("ControlDestroyed",{type:"TriggerGroup",name:t}))},defineDpad:function(t,e,n){var i={};for(var a in e){var u=e[a],h=s.keys[a]||a;i[u]||(i[u]=[]),i[u].push(new r(h))}var c={};for(var l in i)c[l]={input:new o(i[l]),active:!1,n:this.parseDirection(l)};void 0===n&&(n={}),void 0===n.normalize&&(n.normalize=!1),void 0===n.multipleDirectionBehavior&&(n.multipleDirectionBehavior="all"),this.destroyDpad(t),this._dpads[t]={name:t,directions:c,x:0,y:0,oldX:0,oldY:0,event:{x:0,y:0,name:t},normalize:n.normalize,multipleDirectionBehavior:n.multipleDirectionBehavior},s.trigger("ControlDefined",{type:"Dpad",name:t})},destroyDpad:function(t){if(this._dpads[t]){for(var e in this._dpads[t].parsedDefinition)this._dpads[t].parsedDefinition[e].input.destroy();delete this._dpads[t],s.trigger("ControlDestroyed",{type:"Dpad",name:t})}},parseDirection:function(t){return{x:Math.round(1e3*Math.cos(t*(Math.PI/180)))/1e3,y:Math.round(1e3*Math.sin(t*(Math.PI/180)))/1e3}},updateActiveDirection:function(t,e){var n=0,i=0;for(var r in t.directions){var o=t.directions[r];o.active&&(n+=o.n.x,i+=o.n.y)}if(n=-1e-10<n&&n<1e-10?0:n,i=-1e-10<i&&i<1e-10?0:i,e){var s=Math.sqrt(n*n+i*i);s>0&&(n/=s,i/=s)}t.x=n,t.y=i},updateTriggerInput:function(t){t.active?t.input.isActive()||(t.active=!1,s.trigger("TriggerInputUp",t),t.downFor=0):t.input.isActive()&&(t.downFor=Date.now()-t.input.timeDown,t.active=!0,s.trigger("TriggerInputDown",t))},updateDpadInput:function(t,e){var n,i,r;for(n in t.directions)(i=t.directions[n]).active=!1,i.input.isActive()&&("all"===e?i.active=!0:r?("first"===e&&r.input.timeDown>i.input.timeDown&&(r=i),"last"===e&&r.input.timeDown<i.input.timeDown&&(r=i)):r=i);r&&(r.active=!0)}})},{"../core/core.js":10}],4:[function(t,e,n){var i=t("../core/core.js");i.c("Draggable",{_origX:null,_origY:null,_oldX:null,_oldY:null,_dir:null,required:"MouseDrag",events:{StartDrag:"_startDrag",Dragging:"_drag"},enableDrag:function(){return this.uniqueBind("Dragging",this._drag),this},disableDrag:function(){return this.unbind("Dragging",this._drag),this},dragDirection:function(t){if(void 0===t)this._dir=null;else if(+t===t)this._dir={x:Math.cos(t/180*Math.PI),y:Math.sin(t/180*Math.PI)};else if(0===t.x&&0===t.y)this._dir={x:0,y:0};else{var e=Math.sqrt(t.x*t.x+t.y*t.y);this._dir={x:t.x/e,y:t.y/e}}return this},_startDrag:function(t){this._origX=t.realX,this._origY=t.realY,this._oldX=this._x,this._oldY=this._y},_drag:function(t){if(this._dir){if(0!==this._dir.x||0!==this._dir.y){var e=(t.realX-this._origX)*this._dir.x+(t.realY-this._origY)*this._dir.y;this.x=this._oldX+e*this._dir.x,this.y=this._oldY+e*this._dir.y}}else this.x=this._oldX+(t.realX-this._origX),this.y=this._oldY+(t.realY-this._origY)}}),i.c("Controllable",{init:function(){this._inputBindings={DirectionalInput:{},TriggerInputDown:{},TriggerInputUp:{}}},events:{DirectionalInput:function(t){this._inputBindings.DirectionalInput[t.name]&&this._inputBindings.DirectionalInput[t.name].call(this,t)},TriggerInputDown:function(t){this._inputBindings.TriggerInputDown[t.name]&&this._inputBindings.TriggerInputDown[t.name].call(this,t)},TriggerInputUp:function(t){this._inputBindings.TriggerInputUp[t.name]&&this._inputBindings.TriggerInputUp[t.name].call(this,t)}},linkInput:function(t,e,n){return this._inputBindings[t][e]=n,this},unlinkInput:function(t,e){return delete this._inputBindings[t][e],this},disableControls:!1,enableControl:function(){return this.disableControls=!1,this},disableControl:function(){return this.disableControls=!0,this}}),i.c("Multiway",{_speed:null,init:function(){this.requires("Motion, Controllable"),this._dpadName="MultiwayDpad"+this[0],this._speed={x:150,y:150},this._direction={x:0,y:0}},remove:function(){this.disableControls||(this.vx=this.vy=0),this.unlinkInput("DirectionalInput",this._dpadName),i.s("Controls").destroyDpad(this._dpadName)},events:{UpdateFrame:function(){this.disableControls||(void 0!==this._speed.x&&null!==this._speed.x&&(this.vx=this._speed.x*this._direction.x),void 0!==this._speed.y&&null!==this._speed.y&&(this.vy=this._speed.y*this._direction.y))}},_updateDirection:function(t){this._direction.x=t.x,this._direction.y=t.y},multiway:function(t,e,n){var r=i.s("Controls");return e?this.speed(t):e=t,r.defineDpad(this._dpadName,e,n),this.linkInput("DirectionalInput",this._dpadName,this._updateDirection),this},speed:function(t){return"object"==typeof t?(this._speed.x=t.x,this._speed.y=t.y):(this._speed.x=t,this._speed.y=t),this}}),i.c("Jumper",{_jumpSpeed:300,canJump:!0,init:function(){this.requires("Supportable, Motion, Controllable")},remove:function(){this.unlinkInput("TriggerInputDown",this._jumpTriggerName),i.s("Controls").destroyTriggerGroup(this._jumpTriggerName)},_keydown_jumper:function(t){this.disableControls||this.jump()},jump:function(){var t=this.ground;return this.canJump=!!t,this.trigger("CheckJumping",t),this.canJump&&(this.vy=-this._jumpSpeed),this},jumper:function(t,e){if(e?this._jumpSpeed=t:e=t,this._jumpTriggerName="JumpTrigger"+this[0],Array.isArray(e)){for(var n=[],r=0;r<e.length;++r){var o=e[r],s=i.keys[o]||o;n.push(s)}i.s("Controls").defineTriggerGroup(this._jumpTriggerName,{keys:n})}else i.s("Controls").defineTriggerGroup(this._jumpTriggerName,e);return this.linkInput("TriggerInputDown",this._jumpTriggerName,this._keydown_jumper),this},jumpSpeed:function(t){return this._jumpSpeed=t,this}}),i.c("Fourway",{init:function(){this.requires("Multiway")},fourway:function(t,e){return this.multiway(t||this._speed,{UP_ARROW:-90,DOWN_ARROW:90,RIGHT_ARROW:0,LEFT_ARROW:180,W:-90,S:90,D:0,A:180,Z:-90,Q:180},e),this}}),i.c("Twoway",{init:function(){this.requires("Multiway, Jumper")},twoway:function(t,e){var n=t||this._speed;return this.multiway({x:n},{RIGHT_ARROW:0,LEFT_ARROW:180,D:0,A:180,Q:180}),this.jumper(e||2*t||this._jumpSpeed,[i.keys.UP_ARROW,i.keys.W,i.keys.Z]),this}})},{"../core/core.js":10}],5:[function(t,e,n){var i=t("../core/core.js");i.__keyboardStateTemplate={_keyDown:null,init:function(){this._keyDown={},this.triggerKeyEvent=this.triggerKeyEvent||this.trigger},isKeyDown:function(t){return"string"==typeof t&&(t=i.keys[t]),!!this._keyDown[t]},resetKeyDown:function(){var t={key:-1,eventName:"KeyUp"},e=this._keyDown;for(var n in e)!0===e[n]&&(t.key=+n,this.triggerKey("KeyUp",t));return this},triggerKey:function(t,e){var n=e.key;return"KeyDown"===t?!0!==this._keyDown[n]&&(this._keyDown[n]=!0,this.triggerKeyEvent(t,e)):"KeyUp"===t?!0===this._keyDown[n]&&(this._keyDown[n]=!1,this.triggerKeyEvent(t,e)):this.triggerKeyEvent(t,e),this}},i.c("KeyboardState",i.__keyboardStateTemplate),i.s("Keyboard",i.extend.call({triggerKeyEvent:function(t,e){i.trigger(t,e)}},i.__keyboardStateTemplate),{},!1)},{"../core/core.js":10}],6:[function(t,e,n){t("../core/core.js").extend({keys:{BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,PULT_UP:29460,PULT_DOWN:29461,PULT_LEFT:4,PULT_RIGHT:5},mouseButtons:{LEFT:0,MIDDLE:1,RIGHT:2}})},{"../core/core.js":10}],7:[function(t,e,n){var i=t("../core/core.js");i.__mouseStateTemplate={_buttonDown:null,lastMouseEvent:null,init:function(){this._buttonDown={},this.triggerMouseEvent=this.triggerMouseEvent||this.trigger,this.lastMouseEvent={eventName:"",mouseButton:-1,target:null,realX:0,realY:0,clientX:0,clientY:0,originalEvent:null}},isButtonDown:function(t){return"string"==typeof t&&(t=i.mouseButtons[t]),!!this._buttonDown[t]},resetButtonDown:function(){var t=this.lastMouseEvent,e=this._buttonDown;for(var n in e)!0===e[n]&&(t.mouseButton=+n,t.eventName="MouseUp",this.triggerMouse("MouseUp",t));return this},triggerMouse:function(t,e){var n=this.lastMouseEvent;n.eventName=t,n.mouseButton=e.mouseButton,n.target=e.target,n.realX=e.realX,n.realY=e.realY,n.clientX=e.clientX,n.clientY=e.clientY,n.originalEvent=e.originalEvent;var i=e.mouseButton;return"MouseDown"===t?!0!==this._buttonDown[i]&&(this._buttonDown[i]=!0,this.triggerMouseEvent(t,e)):"MouseUp"===t?!0===this._buttonDown[i]&&(this._buttonDown[i]=!1,this.triggerMouseEvent(t,e)):this.triggerMouseEvent(t,e),this}},i.c("MouseState",i.__mouseStateTemplate),i.s("Mouse",i.extend.call({triggerMouseEvent:function(t,e){i.trigger(t,e)}},i.__mouseStateTemplate),{},!1)},{"../core/core.js":10}],8:[function(t,e,n){var i=t("../core/core.js");i.__touchStateTemplate={touchPoints:null,_touchPointsPool:null,init:function(){this.touchPoints=[],this._touchPointsPool=[],this.triggerTouchEvent=this.triggerTouchEvent||this.trigger},resetTouchPoints:function(){for(var t,e=this.touchPoints,n=e.length;n--;)(t=e[n]).eventName="TouchCancel",this.triggerTouch("TouchCancel",t);return this},triggerTouch:function(t,e){switch(t){case"TouchStart":this._handleStart(e);break;case"TouchMove":this._handleMove(e);break;case"TouchCancel":case"TouchEnd":this._handleEnd(e);break;default:this.triggerTouchEvent(t,e)}return this},_indexOfTouchPoint:function(t){for(var e=this.touchPoints,n=0,i=e.length;n<i;n++)if(e[n].identifier===t)return n;return-1},_setTouchPoint:function(t,e){t.eventName=e.eventName,t.identifier=e.identifier,t.target=e.target,t.entity=e.entity,t.realX=e.realX,t.realY=e.realY,t.originalEvent=e.originalEvent},_handleStart:function(t){var e=this._indexOfTouchPoint(t.identifier);if(!(e>=0?this.touchPoints[e]:null)){var n=this._touchPointsPool.pop()||{};this._setTouchPoint(n,t),this.touchPoints.push(n),this.triggerTouchEvent(n.eventName,n)}},_handleMove:function(t){var e=this._indexOfTouchPoint(t.identifier),n=e>=0?this.touchPoints[e]:null;n&&(this._setTouchPoint(n,t),this.triggerTouchEvent(n.eventName,n))},_handleEnd:function(t){var e=this._indexOfTouchPoint(t.identifier),n=e>=0?this.touchPoints[e]:null;n&&(this._setTouchPoint(n,t),this.triggerTouchEvent(n.eventName,n),this.touchPoints.splice(e,1),n.target=null,n.entity=null,n.originalEvent=null,this._touchPointsPool.push(n))}},i.c("TouchState",i.__touchStateTemplate),i.s("Touch",i.extend.call({triggerTouchEvent:function(t,e){i.trigger(t,e)}},i.__touchStateTemplate),{},!1)},{"../core/core.js":10}],9:[function(t,e,n){var i=t("../core/core.js"),r=function(t,e){this.timePerFrame=1e3/i.timer.FPS(),this.duration=t,"function"==typeof e?this.easing_function=e:"string"==typeof e&&this.standardEasingFunctions[e]?this.easing_function=this.standardEasingFunctions[e]:this.easing_function=this.standardEasingFunctions.linear,this.reset()};r.prototype={duration:0,clock:0,steps:null,complete:!1,paused:!1,reset:function(){this.loops=1,this.clock=0,this.complete=!1,this.paused=!1},repeat:function(t){this.loops=t},setProgress:function(t,e){this.clock=this.duration*t,void 0!==e&&(this.loops=e)},pause:function(){this.paused=!0},resume:function(){this.paused=!1,this.complete=!1},tick:function(t){if(!this.paused&&!this.complete)for(this.clock+=t,this.frames=Math.floor(this.clock/this.timePerFrame);this.clock>=this.duration&&!1===this.complete;)this.loops--,this.loops>0?this.clock-=this.duration:this.complete=!0},time:function(){return Math.min(this.clock/this.duration,1)},value:function(){return this.easing_function(this.time())},standardEasingFunctions:{linear:function(t){return t},smoothStep:function(t){return(3-2*t)*t*t},smootherStep:function(t){return(6*t*t-15*t+10)*t*t*t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1}}},e.exports=r},{"../core/core.js":10}],10:[function(t,e,n){function r(){var t=s++;return t in h?r():t}function o(t){if(null===t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)e[n]=o(t[n]);return e}var s,a,u,h,c,l,f,p,d,y=t("./version"),v=function(t){return new v.fn.init(t)};u={},f=Array.prototype.slice,p=/\s*,\s*/,d=/\s+/;var g=function(){s=1,a=0,h={},l={},c={},[]};g(),v.fn=v.prototype={init:function(t){if("string"!=typeof t)return t||(t=0)in h||(h[t]=this),t in h?(this[0]=t,this.length=1,this.__c||(this.__c={}),this._callbacks||v._addCallbackMethods(this),h[t]||(h[t]=this),h[t]):(this.length=0,this);var e,n,i,r,o,s,a,u,c,f=0,y=!1,g=!1;if("*"===t){u=0;for(e in h)this[u]=+e,u++;return this.length=u,1===u?h[this[0]]:this}if(-1!==t.indexOf(",")?(g=!0,n=p):-1!==t.indexOf(" ")&&(y=!0,n=d),g){for(r={},u=0,c=(i=t.split(n)).length;u<c;u++){o=l[i[u]];for(a in o)r[a]=+a}for(a in r)this[f++]=r[a]}else if(y){i=t.split(n),r={},o=l[i[0]],s=l[i[1]];for(a in o)void 0!==s[a]&&(r[a]=+a);for(u=2,c=i.length;u<c;u++){o=l[i[u]];for(a in r)void 0===o[a]&&(r[a]=-1)}for(a in r)(u=r[a])>=0&&(this[f++]=u)}else{o=l[t];for(a in o)this[f++]=+a}return this.length=f,1===f?h[this[f-1]]:(v._addCallbackMethods(this),this)},setName:function(t){var e=String(t);return this._entityName=e,this.trigger("NewEntityName",e),this},getName:function(t){return this._entityName},addComponent:function(t){var e,n,i,r=0;for(e=1===arguments.length&&-1!==t.indexOf(",")?t.split(p):arguments;r<e.length;r++)if(n=e[r],!0!==this.__c[n]){if(this.__c[n]=!0,(l[n]=l[n]||{})[this[0]]=this,i=u[n],this.extend(i),i&&"required"in i&&this.requires(i.required),i&&"properties"in i){var o=i.properties;for(var s in o)Object.defineProperty(this,s,o[s])}if(i&&"events"in i){var a=i.events;for(var h in a){var c="function"==typeof a[h]?a[h]:i[a[h]];this.bind(h,c)}}i&&"init"in i&&i.init.call(this)}return this.trigger("NewComponent",e),this},toggleComponent:function(t){var e,n,i=0;if(arguments.length>1)for(e=arguments.length;i<e;i++)this.has(arguments[i])?this.removeComponent(arguments[i]):this.addComponent(arguments[i]);else if(-1!==t.indexOf(","))for(e=(n=t.split(p)).length;i<e;i++)this.has(n[i])?this.removeComponent(n[i]):this.addComponent(n[i]);else this.has(t)?this.removeComponent(t):this.addComponent(t);return this},requires:function(){return this.addComponent.apply(this,arguments)},removeComponent:function(t,e){var n=u[t];if(this.trigger("RemoveComponent",t),n&&"events"in n){var i=n.events;for(var r in i){var o="function"==typeof i[r]?i[r]:n[i[r]];this.unbind(r,o)}}if(n&&"remove"in n&&n.remove.call(this,!1),!1===e&&n)for(var s in n)delete this[s];return delete this.__c[t],l[t]&&delete l[t][this[0]],this},getId:function(){return this[0]},has:function(t){return!!this.__c[t]},attr:function(t,e,n,i){return 1===arguments.length&&"string"==typeof arguments[0]?this._attr_get(t):this._attr_set(t,e,n,i)},_attr_get:function(t,e){var n,i;return void 0!==e&&null!==e||(e=this),t.indexOf(".")>-1?(i=t.split("."),n=i.shift(),i.join("."),this._attr_get(i.join("."),e[n])):e[t]},_attr_set:function(){var t,e,n;return"string"==typeof arguments[0]?(t=this._set_create_object(arguments[0],arguments[1]),e=!!arguments[2],n=arguments[3]||arguments[0].indexOf(".")>-1):(t=arguments[0],e=!!arguments[1],n=!!arguments[2]),e||this.trigger("Change",t),n?this._recursive_extend(t,this):this.extend.call(this,t),this},_set_create_object:function(t,e){var n,i,r,o={};return t.indexOf(".")>-1?(i=(n=t.split(".")).shift(),r=n.join("."),o[i]=this._set_create_object(r,e)):o[t]=e,o},_recursive_extend:function(t,e){var n;for(n in t)t[n].constructor===Object?e[n]=this._recursive_extend(t[n],e[n]):e[n]=t[n];return e},toArray:function(){return f.call(this,0)},timeout:function(t,e){return this.each(function(){var n=this;setTimeout(function(){t.call(n)},e)}),this},bind:function(t,e){if(1===this.length)this._bindCallback(t,e);else for(var n=0;n<this.length;n++){var i=h[this[n]];i&&i._bindCallback(t,e)}return this},uniqueBind:function(t,e){this.unbind(t,e),this.bind(t,e)},one:function(t,e){var n=this,i=function(r){e.call(n,r),n.unbind(t,i)};return n.bind(t,i)},unbind:function(t,e){var n,i;for(n=0;n<this.length;n++)(i=h[this[n]])&&i._unbindCallbacks(t,e);return this},trigger:function(t,e){if(1===this.length)this._runCallbacks(t,e);else for(var n=0;n<this.length;n++){var i=h[this[n]];i&&i._runCallbacks(t,e)}return this},each:function(t){for(var e=0,n=this.length;e<n;e++)h[this[e]]&&t.call(h[this[e]],e);return this},get:function(t){var e=this.length;if(void 0!==t){if(t>=e||t+e<0)return;return t>=0?h[this[t]]:h[this[t+e]]}for(var n=0,i=[];n<e;n++)h[this[n]]&&i.push(h[this[n]]);return i},clone:function(){var t,e,n=this.__c,i=v.e();for(t in n)i.addComponent(t);for(e in this)"0"!==e&&"_global"!==e&&"_changed"!==e&&"function"!=typeof this[e]&&"object"!=typeof this[e]&&(i[e]=this[e]);return i},setter:function(t,e){return this.defineField(t,function(){},e)},defineField:function(t,e,n){return v.defineField(this,t,e,n),this},destroy:function(){this.each(function(){var t;this.trigger("Remove");for(var e in this.__c)(t=u[e])&&"remove"in t&&t.remove.call(this,!0),delete l[e][this[0]];this._unbindAll(),delete h[this[0]]})},freeze:function(){if(1!==this.length||this.__frozen)for(var t=0;t<this.length;t++){var e=h[this[t]];e&&!e.__frozen&&(e.trigger("Freeze",e),e._freezeCallbacks(),e.__frozen=!0)}else this.trigger("Freeze",this),this._freezeCallbacks(),this.__frozen=!0;return this},unfreeze:function(){if(1===this.length&&this.__frozen)this.__frozen=!1,this._unfreezeCallbacks(),this.trigger("Unfreeze",this);else for(var t=0;t<this.length;t++){var e=h[this[t]];e&&e.__frozen&&(e.__frozen=!1,e._unfreezeCallbacks(),e.trigger("Unfreeze",e))}return this}},v.fn.init.prototype=v.fn,v.extend=v.fn.extend=function(t){var e;if(!t)return this;for(e in t)this!==t[e]&&(this[e]=t[e]);return this},v._callbackMethods={_bindCallback:function(t,e){var n=this._callbacks[t];n||((n=this._callbacks[t]=(c[t]||(c[t]={}))[this[0]]=[]).context=this,n.depth=0),n.push(e)},_runCallbacks:function(t,e){if(this._callbacks[t]&&!this.__callbacksFrozen){var n,i=this._callbacks[t],r=i.length;for(i.depth++,n=0;n<r;n++)void 0===i[n]?i.depth<=1&&(i.splice(n,1),n--,r--,0===i.length&&(delete this._callbacks[t],delete c[t][this[0]])):i[n].call(this,e);i.depth--}},_unbindCallbacks:function(t,e){if(this._callbacks[t])for(var n=this._callbacks[t],i=0;i<n.length;i++)e&&n[i]!==e||delete n[i]},_unbindAll:function(){if(this._callbacks){this.__callbacksFrozen=!1;for(var t in this._callbacks)this._callbacks[t]&&(this._unbindCallbacks(t),delete c[t][this[0]])}},_freezeCallbacks:function(){if(this._callbacks){for(var t in this._callbacks)this._callbacks[t]&&delete c[t][this[0]];this.__callbacksFrozen=!0}},_unfreezeCallbacks:function(){if(this._callbacks){this.__callbacksFrozen=!1;for(var t in this._callbacks)this._callbacks[t]&&(c[t][this[0]]=this._callbacks[t])}}},v._addCallbackMethods=function(t){t.extend(v._callbackMethods),t._callbacks={}},v._addCallbackMethods(v),v.extend({0:"global",init:function(t,e,n){if(!this._preBindDone)for(var i=0;i<this._bindOnInit.length;i++){var r=this._bindOnInit[i];v.bind(r.event,r.handler)}return v.viewport.init(t,e,n),this.trigger("Load"),this.timer.init(),this},_bindOnInit:[],_preBindDone:!1,_preBind:function(t,e){this._bindOnInit.push({event:t,handler:e})},getVersion:function(){return y},stop:function(t){if(v.trigger("CraftyStop",t),this.timer.stop(),t){v.audio.remove();for(var e in v._systems)v._systems[e].destroy();if(v.stage&&v.stage.elem.parentNode){var n=document.createElement("div");n.id=v.stage.elem.id,v.stage.elem.parentNode.replaceChild(n,v.stage.elem)}v._unbindAll(),v._addCallbackMethods(v),this._preBindDone=!1,g()}return this},pause:function(t){return(1===arguments.length?t:!this._paused)?(this.trigger("Pause"),this._paused=!0,setTimeout(function(){v.timer.stop()},0)):(this.trigger("Unpause"),this._paused=!1,setTimeout(function(){v.timer.init()},0)),this},isPaused:function(){return this._paused},timer:function(){var t,e,n,i="fixed",r=5,o=40,s=0,u=0,h=50,c=1e3/h;return{init:function(){void 0===n&&(n=Date.now()-c);var i="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null);i?(t=function(){v.timer.step(),null!==t&&(e=i(t))})():t=setInterval(function(){v.timer.step()},1e3/h)},stop:function(){v.trigger("CraftyStopTimer"),"function"!=typeof t&&clearInterval(t);var n="undefined"!=typeof window&&(window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||null);n&&n(e),t=null},steptype:function(t,e){if("variable"===t||"semifixed"===t)i=t,e&&(o=e),v.trigger("NewSteptype",{mode:i,maxTimeStep:o});else{if("fixed"!==t){if(void 0!==t)throw"Invalid step type specified";return{mode:i,maxTimeStep:"variable"===i||"semifixed"===i?o:r}}i="fixed",e&&(r=e),v.trigger("NewSteptype",{mode:i,maxTimeStep:r})}},step:function(){var t,e,h,l=0,f=Date.now();if(s>0&&v.trigger("MeasureWaitTime",f-s),n+u>=f)s=f;else{var p=f-(n+u);p>20*c&&(u+=p-c,p=c),"fixed"===i?(l=Math.ceil(p/c),l=Math.min(l,r),e=c):"variable"===i?(l=1,e=p,e=Math.min(e,o)):"semifixed"===i&&(e=p/(l=Math.ceil(p/o)));for(var d=0;d<l;d++){h=f;var y={frame:a++,dt:e,gameTime:n};v.trigger("EnterFrame",y),v.trigger("UpdateFrame",y),v.trigger("ExitFrame",y),n+=e,f=Date.now(),v.trigger("MeasureFrameTime",f-h)}l>0&&(t=f,v.trigger("PreRender"),v.trigger("RenderScene"),v.trigger("PostRender"),f=Date.now(),v.trigger("MeasureRenderTime",f-t)),s=f}},FPS:function(t){if(void 0===t)return h;c=1e3/(h=t),v.trigger("FPSChange",t)},simulateFrames:function(t,e){for(e=e||c;t-- >0;){var n={frame:a++,dt:e};v.trigger("EnterFrame",n),v.trigger("UpdateFrame",n),v.trigger("ExitFrame",n)}v.trigger("PreRender"),v.trigger("RenderScene"),v.trigger("PostRender")}}}(),e:function(){var t=r();return h[t]=null,h[t]=v(t),arguments.length>0&&h[t].addComponent.apply(h[t],arguments),h[t].setName("Entity #"+t),h[t].addComponent("obj"),v.trigger("NewEntity",{id:t}),h[t]},c:function(t,e){u[t]=e},trigger:function(t,e){var n,i,r=c[t]||(c[t]={});for(n in r)r.hasOwnProperty(n)&&(i=r[n])&&0!==i.length&&i.context._runCallbacks(t,e)},bind:function(t,e){return this._bindCallback(t,e),e},uniqueBind:function(t,e){return this.unbind(t,e),this.bind(t,e)},one:function(t,e){var n=this,i=function(r){e.call(n,r),n.unbind(t,i)};return n.bind(t,i)},unbind:function(t,e){this._unbindCallbacks(t,e)},frame:function(){return a},entities:function(){return h},components:function(){return u},isComp:function(t){return t in u},debug:function(t){return"handlers"===t?c:h},settings:function(){var t={},e={};return{register:function(t,n){e[t]=n},modify:function(n,i){e[n]&&(e[n].call(t[n],i),t[n]=i)},get:function(e){return t[e]}}}(),defineField:function(t,e,n,i){Object.defineProperty(t,e,{get:n,set:i,configurable:!1,enumerable:!0})},clone:o}),void 0===(i=function(){return v}.apply(n,[]))||(e.exports=i),e.exports=v},{"./version":19}],11:[function(t,e,n){(function(e){var n=t("../core/core.js"),i="undefined"!=typeof window&&window.document;(function(){var t=n.support={},r="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase()||void 0!==e&&e.version,o=/(webkit)[ \/]([\w.]+)/.exec(r)||/(o)pera(?:.*version)?[ \/]([\w.]+)/.exec(r)||/(ms)ie ([\w.]+)/.exec(r)||/(moz)illa(?:.*? rv:([\w.]+))?/.exec(r)||/(v)\d+\.(\d+)/.exec(r)||[],s=/iPad|iPod|iPhone|Android|webOS|IEMobile/i.exec(r);if(s&&(n.mobile=s[0]),t.defineProperty=function(){if(!("defineProperty"in Object))return!1;try{Object.defineProperty({},"x",{})}catch(t){return!1}return!0}(),t.audio="undefined"!=typeof window&&"canPlayType"in i.createElement("audio"),t.prefix=o[1]||o[0],"moz"===t.prefix&&(t.prefix="Moz"),"o"===t.prefix&&(t.prefix="O"),"v"===t.prefix&&(t.prefix="node"),o[2]&&(t.versionName=o[2],t.version=+o[2].split(".")[0]),t.canvas="undefined"!=typeof window&&"getContext"in i.createElement("canvas"),t.canvas){var a;try{var u=i.createElement("canvas");(a=u.getContext("webgl")||u.getContext("experimental-webgl")).viewportWidth=t.canvas.width,a.viewportHeight=t.canvas.height}catch(t){}t.webgl=!!a}else t.webgl=!1;t.css3dtransform="undefined"!=typeof window&&(void 0!==i.createElement("div").style.Perspective||void 0!==i.createElement("div").style[t.prefix+"Perspective"]),t.deviceorientation="undefined"!=typeof window&&(void 0!==window.DeviceOrientationEvent||void 0!==window.OrientationEvent),t.devicemotion="undefined"!=typeof window&&void 0!==window.DeviceMotionEvent})()}).call(this,t("_process"))},{"../core/core.js":10,_process:1}],12:[function(t,e,n){var i=t("../core/core.js");e.exports={assets:{},__paths:{audio:"",images:""},paths:function(t){if(void 0===t)return this.__paths;t.audio&&(this.__paths.audio=t.audio),t.images&&(this.__paths.images=t.images)},asset:function(t,e){return 1===arguments.length?i.assets[t]:i.assets[t]?void 0:(i.assets[t]=e,this.trigger("NewAsset",{key:t,value:e}),e)},imageWhitelist:["jpg","jpeg","gif","png","svg"],load:function(t,e,n,r){function o(){var t=this.src;this.removeEventListener&&this.removeEventListener("canplaythrough",o,!1),f++,n&&n({loaded:f,total:p,percent:f/p*100,src:t}),f===p&&e&&e()}function s(){var t=this.src;r&&r({loaded:f,total:p,percent:f/p*100,src:t}),++f===p&&e&&e()}if(Array.isArray(t))i.log("Calling Crafty.load with an array of assets no longer works; see the docs for more details.");else{var a,u,h,c,l,f=0,p=((t="string"==typeof t?JSON.parse(t):t).audio?Object.keys(t.audio).length:0)+(t.images?Object.keys(t.images).length:0)+(t.sprites?Object.keys(t.sprites).length:0),d=i.paths(),y=function(t){return t.substr(t.lastIndexOf(".")+1).toLowerCase()},v=function(t,e){return-1===e.search("://")?"audio"===t?d.audio+e:d.images+e:e},g=function(t){return i.asset(t)||null},_=function(t){return i.support.audio&&i.audio.supports(y(t))},m=function(t){return-1!==i.imageWhitelist.indexOf(y(t))},x=function(t,e){t.onload=o,"webkit"===i.support.prefix&&(t.src=""),t.src=e};for(c in t)for(l in t[c])if(t[c].hasOwnProperty(l)){if(a=t[c][l],h=null,"audio"===c){if("object"==typeof a){var w=[];for(var b in a)g(u=v(c,a[b]))||!_(a[b])||i.audio.sounds[l]||w.push(u);w.length>0&&(h=i.audio.add(l,w))}else"string"==typeof a&&(g(u=v(c,a))||!_(a)||i.audio.sounds[l]||(h=i.audio.add(l,u)));h&&(h=h.obj),h&&h.addEventListener&&h.addEventListener("canplaythrough",o,!1)}else!g(u=v(c,l="sprites"===c?l:a))&&m(l)&&(h=new Image,"sprites"===c&&i.sprite(a.tile,a.tileh,u,a.map,a.paddingX,a.paddingY,a.paddingAroundBorder),i.asset(u,h),x(h,u));h?h.onerror=s:s.call({src:u})}0===p&&e&&e()}},removeAssets:function(t){t="string"==typeof t?JSON.parse(t):t;var e,n,r,o,s=i.paths(),a=function(t,e){return-1===e.search("://")?"audio"===t?s.audio+e:s.images+e:e};for(r in t)for(o in t[r])if(t[r].hasOwnProperty(o))if(e=t[r][o],"audio"===r)if("object"==typeof e)for(var u in e)n=a(r,e[u]),i.asset(n)&&i.audio.remove(o);else"string"==typeof e&&(n=a(r,e),i.asset(n)&&i.audio.remove(o));else if(o="sprites"===r?o:e,n=a(r,o),i.asset(n)){if("sprites"===r)for(var h in e.map)delete i.components()[h];delete i.assets[n]}}}},{"../core/core.js":10}],13:[function(t,e,n){var i=t("../core/core.js");e.exports={init:function(){this.changed=[],this.bind("Change",this._changed_attributes),this.bind("Change",this._changed_triggers)},_changed_triggers:function(t,e){var n;e=i.extend.call({pre:""},e);for(n in t)this.trigger("Change["+e.pre+n+"]",t[n]),t[n].constructor===Object&&this._changed_triggers(t[n],{pre:e.pre+n+"."})},_changed_attributes:function(t){var e;for(e in t)this.changed.push(e);return this},is_dirty:function(t){return 0===arguments.length?!!this.changed.length:this.changed.indexOf(t)>-1}}},{"../core/core.js":10}],14:[function(t,e,n){var i=t("../core/core.js");e.exports={_scenes:{},_current:null,scene:function(t,e,n){1!==arguments.length&&"function"==typeof arguments[1]?i.defineScene(t,e,n):i.enterScene(t,arguments[1])},defineScene:function(t,e,n){if("function"!=typeof e)throw"Init function is the wrong type.";this._scenes[t]={},this._scenes[t].initialize=e,void 0!==n&&(this._scenes[t].uninitialize=n)},enterScene:function(t,e){if("function"==typeof e)throw"Scene data cannot be a function";i.trigger("SceneDestroy",{newScene:t}),i.viewport.reset(),i("2D").each(function(){this.has("Persist")||this.destroy()}),null!==this._current&&"uninitialize"in this._scenes[this._current]&&this._scenes[this._current].uninitialize.call(this);var n=this._current;this._current=t,i.trigger("SceneChange",{oldScene:n,newScene:t}),this._scenes.hasOwnProperty(t)?this._scenes[t].initialize.call(this,e):i.error('The scene "'+t+'" does not exist')}}},{"../core/core.js":10}],15:[function(t,e,n){var i=t("../core/core.js");try{var r="undefined"!=typeof window&&window.localStorage||new t("node-localstorage").LocalStorage("./localStorage")}catch(t){r=null}var o=function(t,e){var n=e;if(!r)return i.error("Local storage is not accessible.  (Perhaps you are including crafty.js cross-domain?)"),!1;if(1===arguments.length)try{return JSON.parse(r.getItem(t))}catch(e){return r.getItem(t)}else"object"==typeof e&&(n=JSON.stringify(e)),r.setItem(t,n)};o.remove=function(t){r?r.removeItem(t):i.error("Local storage is not accessible.  (Perhaps you are including crafty.js cross-domain?)")},e.exports=o},{"../core/core.js":10}],16:[function(t,e,n){var i=t("../core/core.js");i._systems={},i.s=function(t,e,n,r){if(!e)return i._systems[t];"boolean"==typeof n&&(r=n,n=null),!1===r?(i._systems[t]=new i.CraftySystem(t,e,n),i.trigger("SystemLoaded",t)):i._registerLazySystem(t,e,n)},i._registerLazySystem=function(t,e,n){Object.defineProperty(i._systems,t,{get:function(){return Object.defineProperty(i._systems,t,{value:new i.CraftySystem(t,e,n),writable:!0,enumerable:!0,configurable:!0}),i.trigger("SystemLoaded",t),i._systems[t]},configurable:!0})},i.CraftySystem=function(){var t=1;return function(e,n,r){if(this.name=e,!n)return this;if(this._systemTemplate=n,this.extend(n),this.options=function(t,e){var n={};for(var i in e)n[i]=e[i];for(i in t)i in e||(n[i]=t[i]);return n}(this.options,r),i._addCallbackMethods(this),this[0]="system"+t++,"properties"in n){var o=n.properties;for(var s in o)Object.defineProperty(this,s,o[s])}if("events"in n){var a=n.events;for(var u in a){var h="function"==typeof a[u]?a[u]:n[a[u]];this.bind(u,h)}}"function"==typeof this.init&&this.init(e)}}(),i.CraftySystem.prototype={extend:function(t){for(var e in t)void 0===this[e]&&(this[e]=t[e])},bind:function(t,e){return this._bindCallback(t,e),this},trigger:function(t,e){return this._runCallbacks(t,e),this},unbind:function(t,e){return this._unbindCallbacks(t,e),this},one:function(t,e){var n=this,i=function(r){e.call(n,r),n.unbind(t,i)};return n.bind(t,i)},uniqueBind:function(t,e){return this.unbind(t,e),this.bind(t,e)},destroy:function(){i.trigger("SystemDestroyed",this),"function"==typeof this.remove&&this.remove(),this._unbindAll(),delete i._systems[this.name]}}},{"../core/core.js":10}],17:[function(t,e,n){e.exports={delaySpeed:1,init:function(){this._delays=[],this._delaysPaused=!1,this.bind("UpdateFrame",function(t){if(!this._delaysPaused)for(var e=this._delays.length;--e>=0;){var n=this._delays[e];if(!1===n)this._delays.splice(e,1);else{for(n.accumulator+=t.dt*this.delaySpeed;n.accumulator>=n.delay&&n.repeat>=0;)n.accumulator-=n.delay,n.repeat--,n.callback.call(this);n.repeat<0&&(this._delays.splice(e,1),"function"==typeof n.callbackOff&&n.callbackOff.call(this))}}})},delay:function(t,e,n,i){return this._delays.push({accumulator:0,callback:t,callbackOff:i,delay:e,repeat:(n<0?1/0:n)||0}),this},cancelDelay:function(t){for(var e=this._delays.length;--e>=0;){var n=this._delays[e];n&&n.callback===t&&(this._delays[e]=!1)}return this},pauseDelays:function(){this._delaysPaused=!0},resumeDelays:function(){this._delaysPaused=!1}}},{}],18:[function(t,e,n){var i=t("../core/core.js");e.exports={tweenSpeed:1,init:function(){this.tweenGroup={},this.tweenStart={},this.tweens=[],this.uniqueBind("UpdateFrame",this._tweenTick)},_tweenTick:function(t){var e,n,i;for(i=this.tweens.length-1;i>=0;i--)(e=this.tweens[i]).easing.tick(t.dt*this.tweenSpeed),n=e.easing.value(),this._doTween(e.props,n),e.easing.complete&&(this.tweens.splice(i,1),this._endTween(e.props))},_doTween:function(t,e){for(var n in t)this[n]=(1-e)*this.tweenStart[n]+e*t[n]},tween:function(t,e,n){var r={props:t,easing:new i.easing(e,n)};for(var o in t)void 0!==this.tweenGroup[o]&&this.cancelTween(o),this.tweenStart[o]=this[o],this.tweenGroup[o]=t;return this.tweens.push(r),this},cancelTween:function(t){if("string"==typeof t)"object"==typeof this.tweenGroup[t]&&delete this.tweenGroup[t][t];else if("object"==typeof t)for(var e in t)this.cancelTween(e);return this},pauseTweens:function(){this.tweens.map(function(t){t.easing.pause()})},resumeTweens:function(){this.tweens.map(function(t){t.easing.resume()})},_endTween:function(t){var e=!1;for(var n in t)e=!0,delete this.tweenGroup[n];e&&this.trigger("TweenEnd",t)}}},{"../core/core.js":10}],19:[function(t,e,n){e.exports="0.8.0"},{}],20:[function(t,e,n){e.exports=function(e){e&&(t=e);var n=t("./core/core");t("./core/extensions"),n.easing=t("./core/animation"),n.c("Model",t("./core/model")),n.extend(t("./core/scenes")),n.storage=t("./core/storage"),n.c("Delay",t("./core/time")),n.c("Tween",t("./core/tween"));var i=t("./spatial/spatial-grid");return n.HashMap=i,n.map=new i,t("./core/systems"),t("./spatial/2d"),t("./spatial/motion"),t("./spatial/platform"),t("./spatial/collision"),t("./spatial/rect-manager"),t("./spatial/math"),t("./controls/controls-system"),t("./controls/controls"),t("./controls/keyboard"),t("./controls/keycodes"),t("./controls/mouse"),t("./controls/touch"),t("./debug/logging"),n}},{"./controls/controls":4,"./controls/controls-system":3,"./controls/keyboard":5,"./controls/keycodes":6,"./controls/mouse":7,"./controls/touch":8,"./core/animation":9,"./core/core":10,"./core/extensions":11,"./core/model":13,"./core/scenes":14,"./core/storage":15,"./core/systems":16,"./core/time":17,"./core/tween":18,"./debug/logging":23,"./spatial/2d":54,"./spatial/collision":55,"./spatial/math":56,"./spatial/motion":57,"./spatial/platform":58,"./spatial/rect-manager":59,"./spatial/spatial-grid":60}],21:[function(t,e,n){var i=t("./crafty-common.js")();i.extend(t("./core/loader")),i.extend(t("./inputs/dom-events")),t("./graphics/layers"),t("./graphics/canvas"),t("./graphics/canvas-layer"),t("./graphics/webgl"),t("./graphics/webgl-layer"),t("./graphics/color"),t("./graphics/dom"),t("./graphics/dom-helper"),t("./graphics/dom-layer"),t("./graphics/drawing"),t("./graphics/gl-textures"),t("./graphics/renderable"),t("./graphics/html"),t("./graphics/image"),t("./graphics/particles"),t("./graphics/sprite-animation"),t("./graphics/sprite"),t("./graphics/text"),t("./graphics/viewport"),t("./isometric/diamond-iso"),t("./isometric/isometric"),t("./inputs/util"),t("./inputs/device"),t("./inputs/keyboard"),t("./inputs/lifecycle"),t("./inputs/mouse"),t("./inputs/pointer"),t("./inputs/touch"),t("./sound/sound"),t("./debug/debug-layer"),t("./aliases").defineAliases(i),window&&(window.Crafty=i),e.exports=i},{"./aliases":2,"./core/loader":12,"./crafty-common.js":20,"./debug/debug-layer":22,"./graphics/canvas":25,"./graphics/canvas-layer":24,"./graphics/color":26,"./graphics/dom":29,"./graphics/dom-helper":27,"./graphics/dom-layer":28,"./graphics/drawing":30,"./graphics/gl-textures":31,"./graphics/html":32,"./graphics/image":33,"./graphics/layers":34,"./graphics/particles":35,"./graphics/renderable":36,"./graphics/sprite":38,"./graphics/sprite-animation":37,"./graphics/text":39,"./graphics/viewport":40,"./graphics/webgl":42,"./graphics/webgl-layer":41,"./inputs/device":43,"./inputs/dom-events":44,"./inputs/keyboard":45,"./inputs/lifecycle":46,"./inputs/mouse":47,"./inputs/pointer":48,"./inputs/touch":49,"./inputs/util":50,"./isometric/diamond-iso":51,"./isometric/isometric":52,"./sound/sound":53}],22:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.c("DebugCanvas",{init:function(){this.requires("2D"),i.DebugCanvas.context||i.DebugCanvas.init(),i.DebugCanvas.add(this),this._debug={alpha:1,lineWidth:1},this.bind("RemoveComponent",this.onDebugRemove),this.bind("Remove",this.onDebugDestroy)},onDebugRemove:function(t){"DebugCanvas"===t&&i.DebugCanvas.remove(this)},onDebugDestroy:function(t){i.DebugCanvas.remove(this)},debugAlpha:function(t){return this._debug.alpha=t,this},debugFill:function(t){return void 0===t&&(t="red"),this._debug.fillStyle=t,this},debugStroke:function(t){return void 0===t&&(t="red"),this._debug.strokeStyle=t,this},debugDraw:function(t){var e=t.globalAlpha,n=this._debug;n.alpha&&(t.globalAlpha=this._debug.alpha),n.strokeStyle&&(t.strokeStyle=n.strokeStyle),n.lineWidth&&(t.lineWidth=n.lineWidth),n.fillStyle&&(t.fillStyle=n.fillStyle),this.trigger("DebugDraw",t),t.globalAlpha=e}}),i.c("DebugRectangle",{init:function(){this.requires("2D, DebugCanvas")},debugRectangle:function(t){return this.debugRect=t,this.unbind("DebugDraw",this.drawDebugRect),this.bind("DebugDraw",this.drawDebugRect),this},drawDebugRect:function(t){var e=this.debugRect;null!==e&&void 0!==e&&e._h&&e._w&&(this._debug.fillStyle&&t.fillRect(e._x,e._y,e._w,e._h),this._debug.strokeStyle&&t.strokeRect(e._x,e._y,e._w,e._h))}}),i.c("WiredMBR",{init:function(){this.requires("DebugRectangle").debugStroke("purple")},events:{PreRender:function(){this.debugRectangle(this._mbr||this)}}});var o={init:function(){this.requires("DebugRectangle").debugFill("pink")},events:{PreRender:function(){this.debugRectangle(this._mbr||this)}}};i.c("SolidMBR",o),i.c("VisibleMBR",o),i.c("DebugPolygon",{init:function(){this.requires("2D, DebugCanvas")},debugPolygon:function(t){return this.polygon=t,this.unbind("DebugDraw",this.drawDebugPolygon),this.bind("DebugDraw",this.drawDebugPolygon),this},drawDebugPolygon:function(t){if(void 0!==this.polygon){t.beginPath();for(var e=this.polygon.points,n=e.length,i=0;i<n;i+=2)t.lineTo(e[i],e[i+1]);t.closePath(),this._debug.fillStyle&&t.fill(),this._debug.strokeStyle&&t.stroke()}}}),i.c("WiredHitBox",{init:function(){this.requires("DebugPolygon").debugStroke("red").matchHitBox(),this.bind("NewHitbox",this.matchHitBox)},matchHitBox:function(){this.debugPolygon(this.map)}}),i.c("SolidHitBox",{init:function(){this.requires("Collision, DebugPolygon").debugFill("orange").debugAlpha(.7).matchHitBox(),this.bind("NewHitbox",this.matchHitBox)},matchHitBox:function(){this.debugPolygon(this.map)}}),i.c("WiredAreaMap",{init:function(){this.requires("DebugPolygon").debugStroke("green").matchAreaMap(),this.bind("NewAreaMap",this.matchAreaMap)},matchAreaMap:function(){this.debugPolygon(this.mapArea)}}),i.c("SolidAreaMap",{init:function(){this.requires("DebugPolygon").debugFill("lime").debugAlpha(.7).matchAreaMap(),this.bind("NewAreaMap",this.matchAreaMap)},matchAreaMap:function(){this.debugPolygon(this.mapArea)}}),i.DebugCanvas={context:null,entities:[],onetimeEntities:[],add:function(t){this.entities.push(t)},remove:function(t){for(var e=this.entities,n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},init:function(){if(!i.DebugCanvas.context){if(!i.support.canvas)return i.trigger("NoCanvas"),void i.stop();var t;(t=r.createElement("canvas")).width=i.viewport.width,t.height=i.viewport.height,t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.id="debug-canvas",t.style.zIndex=1e5,i.stage.elem.appendChild(t),i.DebugCanvas.context=t.getContext("2d"),i.DebugCanvas._canvas=t}i.unbind("RenderScene",i.DebugCanvas.renderScene),i.bind("RenderScene",i.DebugCanvas.renderScene)},renderScene:function(t){t=t||i.viewport.rect();var e,n=i.DebugCanvas.entities,r=0,o=n.length,s=i.DebugCanvas.context,a=i.viewport;s.setTransform(a._scale,0,0,a._scale,Math.round(a._x*a._scale),Math.round(a._y*a._scale)),s.clearRect(t._x,t._y,t._w,t._h);for(var u=null;r<o;r++)u!==(e=n[r])._drawLayer&&(e._drawLayer?(a=e._drawLayer._viewportRect(),s.setTransform(a._scale,0,0,a._scale,Math.round(-a._x*a._scale),Math.round(-a._y*a._scale))):(a=i.viewport,s.setTransform(a._scale,0,0,a._scale,Math.round(a._x*a._scale),Math.round(a._y*a._scale))),u=e._drawLayer),e.debugDraw(s)}}},{"../core/core.js":10}],23:[function(t,e,n){var i=t("../core/core.js");i.extend({loggingEnabled:!0,log:function(){i.loggingEnabled&&("undefined"!=typeof window?window.console:console)&&console.log&&console.log.apply(console,arguments)},error:function(){i.loggingEnabled&&("undefined"!=typeof window?window.console:console)&&console.error&&console.error.apply(console,arguments)}})},{"../core/core.js":10}],24:[function(t,e,n){var i=t("../core/core.js");i._registerLayerTemplate("Canvas",{type:"Canvas",layerCount:0,_changedObjs:null,_dirtyRects:null,_dirtyCells:null,_viewKeys:null,__tempRect:null,__tempSearchRect:null,__tempScreenRect:null,dirty:function(t){this._changedObjs.push(t)},attach:function(t){t._drawContext=this.context,this.layerCount++},detach:function(t){this.dirty(t),t._drawContext=null,this.layerCount--},context:null,_canvas:null,events:{LayerInit:"layerInit",LayerRemove:"layerRemove",RenderScene:"_render",PixelartSet:"_setPixelart",ViewportResize:"_resize"},layerInit:function(){if(!i.support.canvas)return i.trigger("NoCanvas"),void i.stop();this._changedObjs=[],this._dirtyRects=[],this._dirtyCells={},this._viewKeys={x1:0,y1:0,x2:0,y2:0},this.__tempRect={_x:0,_y:0,_w:0,_h:0},this.__tempSearchRect={_x:0,_y:0,_w:0,_h:0},this.__tempScreenRect={_x:0,_y:0,_w:0,_h:0};var t;(t=document.createElement("canvas")).width=i.viewport.width,t.height=i.viewport.height,t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.zIndex=this.options.z,i.stage.elem.appendChild(t),this.context=t.getContext("2d"),this._canvas=t;var e=i.viewport._scale;1!==e&&this.context.scale(e,e)},layerRemove:function(){this._canvas.parentNode.removeChild(this._canvas)},_render:function(){var t=this._dirtyViewport,e=this._changedObjs.length,n=this.context;if(e||t){var i=this.options;if(t&&i){var r=this._viewportRect(),o=r._scale,s=-r._x*o,a=-r._y*o;n.setTransform(o,0,0,o,Math.round(s),Math.round(a))}e/this.layerCount>.6||t?this._drawAll():this._drawDirtyCells(),this._clean()}},_drawDirtyCells:function(t){var e,n,r=this._viewportRect(),o=this.__tempRect,s=this._dirtyRects,a=i.rectManager.integerBounds,u=this.context;for(t=a(t||r),this._createDirtyCells(t),this._createDirtyRects(),e=0,n=s.length;e<n;e+=4)o._x=s[e+0],o._y=s[e+1],o._w=s[e+2],o._h=s[e+3],this._drawRect(o);if(!0===this.debugDirty){var h=i.frame(),c=(6*h+0)%255,l=(6*h+85)%255,f=(6*h+170)%255;for(u.strokeStyle="rgb("+c+", "+l+", "+f+")",e=0,n=s.length;e<n;e+=4)u.strokeRect(s[e+0],s[e+1],s[e+2],s[e+3])}},_drawAll:function(t){var e=this._viewportRect();this._drawRect(t||e)},_drawRect:function(t){var e,n,r,o,s,a=i.rectManager.integerBounds,u=this.context,h=this.__tempSearchRect,c=this.__tempScreenRect;for(c=a(c=this._viewTransformRect(t,c,!0)),t=a(t),h._x=t._x,h._y=t._y,h._w=t._w-1,h._h=t._h-1,(r=i.map.search(h)).sort(this._sort),u.save(),u.save(),u.setTransform(1,0,0,1,0,0),u.beginPath(),u.rect(c._x,c._y,c._w,c._h),u.clearRect(c._x,c._y,c._w,c._h),u.restore(),u.clip(),s=-1/0,e=0,n=r.length;e<n;++e)(o=r[e])._globalZ>s&&o._visible&&o._drawLayer===this&&(o.draw(u),o._changed=!1,s=o._globalZ);u.restore()},debug:function(){i.log(this._changedObjs)},_clean:function(){var t,e,n,i,r,o=this._changedObjs;for(i=0,r=o.length;i<r;i++)t=(n=o[i])._entry.keys,void 0===(e=n.staleKeys)&&(n.staleKeys=e={x1:0,y1:0,x2:0,y2:0}),e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,n._changed=!1;o.length=0,this._dirtyCells={},this._dirtyRects.length=0,this._dirtyViewport=!1},_createDirtyCells:function(t){var e,n,r,o,s,a,u=this._changedObjs,h=this._dirtyCells,c=i.HashMap.key(t,this._viewKeys);for(e=0,n=u.length;e<n;e++){if(s=u[e],a=s.staleKeys)for(r=a.x1;r<=a.x2;r++)for(o=a.y1;o<=a.y2;o++)c.x1<=r&&r<=c.x2&&c.y1<=o&&o<=c.y2&&(h[r<<16^o]=!0);for(r=(a=s._entry.keys).x1;r<=a.x2;r++)for(o=a.y1;o<=a.y2;o++)c.x1<=r&&r<=c.x2&&c.y1<=o&&o<=c.y2&&(h[r<<16^o]=!0)}},_createDirtyRects:function(){var t,e,n,r=i.HashMap.cellsize(),o=this._dirtyCells,s=this._dirtyRects;for(var a in o)e=(n=(t=+a)<<16>>16)<0?~(t>>16):t>>16,s.push(e*r,n*r,r,r)},_resize:function(){var t=this._canvas;t.width=i.viewport.width,t.height=i.viewport.height},_setPixelart:function(t){var e=this.context;e.imageSmoothingEnabled=!t,e.mozImageSmoothingEnabled=!t,e.webkitImageSmoothingEnabled=!t,e.oImageSmoothingEnabled=!t,e.msImageSmoothingEnabled=!t}})},{"../core/core.js":10}],25:[function(t,e,n){var i=t("../core/core.js");i.c("Canvas",{init:function(){this.requires("Renderable"),this.currentRect={},this._customLayer||this._attachToLayer(i.s("DefaultCanvasLayer"))},remove:function(){this._detachFromLayer()},drawVars:{type:"canvas",pos:{},ctx:null,coord:[0,0,0,0],co:{x:0,y:0,w:0,h:0}},draw:function(t,e,n,i,r){if(this.ready){var o=this.drawVars.pos;o._x=this._x+(e||0),o._y=this._y+(n||0),o._w=i||this._w,o._h=r||this._h;var s=t||this._drawContext,a=this.__coord||[0,0,0,0],u=this.drawVars.co;u.x=a[0]+(e||0),u.y=a[1]+(n||0),u.w=i||a[2],u.h=r||a[3],(this._flipX||this._flipY||this._rotation)&&s.save(),0!==this._rotation&&(s.translate(this._origin.x+this._x,this._origin.y+this._y),o._x=-this._origin.x,o._y=-this._origin.y,s.rotate(this._rotation%360*(Math.PI/180))),(this._flipX||this._flipY)&&(s.scale(this._flipX?-1:1,this._flipY?-1:1),this._flipX&&(o._x=-(o._x+o._w)),this._flipY&&(o._y=-(o._y+o._h)));var h;return this._alpha<1&&(h=s.globalAlpha,s.globalAlpha=this._alpha),this.drawVars.ctx=s,this.trigger("Draw",this.drawVars),(0!==this._rotation||this._flipX||this._flipY)&&s.restore(),h&&(s.globalAlpha=h),this}}})},{"../core/core.js":10}],26:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.extend({assignColor:function(){function t(t){return t._red=t._blue=t._green=0,t}function e(t){var e=t.toString(16);return 1===e.length&&(e="0"+e),e}function n(e,n){var i,r,o,s=e.length;if(7===s)i=e.substr(1,2),r=e.substr(3,2),o=e.substr(5,2);else{if(4!==s)return t(n);i=e.substr(1,1),i+=i,r=e.substr(2,1),r+=r,o=e.substr(3,1),o+=o}return n._red=parseInt(i,16),n._green=parseInt(r,16),n._blue=parseInt(o,16),n}function i(e,n){var i=h.exec(e);return null===i||4!==i.length&&5!==i.length?t(n):(n._red=Math.round(parseFloat(i[1])),n._green=Math.round(parseFloat(i[2])),n._blue=Math.round(parseFloat(i[3])),i[4]&&(n._strength=parseFloat(i[4])),n)}function o(t,r){if(void 0===u[t]){!1===a&&(window.document.body.appendChild(s),a=!0),s.style.color=t;i(window.getComputedStyle(s).color,r),u[t]=function(t,n,i){return"#"+e(t)+e(n)+e(i)}(r._red,r._green,r._blue)}else n(u[t],r);return r}var s=r.createElement("div");s.style.display="none";var a=!1,u={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#00ff00",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},h=/rgba?\s*\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,?\s*([0-9.]+)?\)/;return function(t,e){e=e||{};"#"===(t=t.trim().toLowerCase())[0]?n(t,e):"r"===t[0]&&"g"===t[1]&&"b"===t[2]?i(t,e):o(t,e),e._strength=e._strength||1,e._color=function(t){return"rgba("+t._red+", "+t._green+", "+t._blue+", "+t._strength+")"}(e)}}()}),i.defaultShader("Color",new i.WebGLShader("attribute vec2 aPosition;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec4 aColor;\n\nvarying lowp vec4 vColor;\n\nuniform  vec4 uViewport;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n  vColor = vec4(aColor.rgb*aColor.a*aLayer.y, aColor.a*aLayer.y);\n}","precision mediump float;\nvarying lowp vec4 vColor;\nvoid main(void) {\n\tgl_FragColor = vColor;\n}",[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aColor",width:4}],function(t,e){t.program.writeVector("aColor",e._red/255,e._green/255,e._blue/255,e._strength)})),i.c("Color",{_red:0,_green:0,_blue:0,_strength:1,_color:"",ready:!0,init:function(){this.__coord=this.__coord||[0,0,0,0],this.bind("Draw",this._drawColor),this._drawLayer&&this._setupColor(this._drawLayer),this.trigger("Invalidate")},events:{LayerAttached:"_setupColor"},remove:function(){this.unbind("Draw",this._drawColor),this.has("DOM")&&(this._element.style.backgroundColor="transparent"),this.trigger("Invalidate")},_setupColor:function(t){"WebGL"===t.type&&this._establishShader("Color",i.defaultShader("Color"))},_drawColor:function(t){this._color&&("DOM"===t.type?(t.style.backgroundColor=this._color,t.style.lineHeight=0):"canvas"===t.type?(t.ctx.fillStyle=this._color,t.ctx.fillRect(t.pos._x,t.pos._y,t.pos._w,t.pos._h)):"webgl"===t.type&&t.program.draw(t,this))},color:function(t){return 0===arguments.length?this._color:(arguments.length>=3?(this._red=arguments[0],this._green=arguments[1],this._blue=arguments[2],"number"==typeof arguments[3]&&(this._strength=arguments[3])):(i.assignColor(t,this),"number"==typeof arguments[1]&&(this._strength=arguments[1])),this._color="rgba("+this._red+", "+this._green+", "+this._blue+", "+this._strength+")",this.trigger("Invalidate"),this)}})},{"../core/core.js":10}],27:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.extend({domHelper:{innerPosition:function(t,e){e=e||{};var n=t.getBoundingClientRect(),i=n.left+(window.pageXOffset?window.pageXOffset:r.body.scrollLeft),o=n.top+(window.pageYOffset?window.pageYOffset:r.body.scrollTop),s=parseInt(this.getStyle(t,"border-left-width")||0,10)||parseInt(this.getStyle(t,"borderLeftWidth")||0,10)||0,a=parseInt(this.getStyle(t,"border-top-width")||0,10)||parseInt(this.getStyle(t,"borderTopWidth")||0,10)||0;return e.x=i+s,e.y=o+a,e},getStyle:function(t,e){var n;return t.currentStyle?n=t.currentStyle[this.camelize(e)]:window.getComputedStyle&&(n=r.defaultView.getComputedStyle(t,null).getPropertyValue(this.csselize(e))),n},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},csselize:function(t){return t.replace(/[A-Z]/g,function(t){return t?"-"+t.toLowerCase():""})},translate:function(t,e,n,o){o=o||{};var s,a=r.documentElement,u=r.body;return n?(s=n._viewportRect(),o.x=(t-i.stage.x+(a&&a.scrollLeft||u&&u.scrollLeft||0))/s._scale+s._x,o.y=(e-i.stage.y+(a&&a.scrollTop||u&&u.scrollTop||0))/s._scale+s._y):(s=i.viewport,o.x=(t-i.stage.x+(a&&a.scrollLeft||u&&u.scrollLeft||0))/s._scale-s._x,o.y=(e-i.stage.y+(a&&a.scrollTop||u&&u.scrollTop||0))/s._scale-s._y),o}}})},{"../core/core.js":10}],28:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i._registerLayerTemplate("DOM",{type:"DOM",_changedObjs:[],_div:null,events:{LayerInit:"layerInit",LayerRemove:"layerRemove",RenderScene:"_render",PixelartSet:"_setPixelart"},layerInit:function(){this._changedObjs=[];var t=this._div=r.createElement("div");i.stage.elem.appendChild(t),t.style.position="absolute",t.style.zIndex=this.options.z,t.style.transformStyle="preserve-3d"},layerRemove:function(){this._div.parentNode.removeChild(this._div)},_setPixelArt:function(t){var e=this._div.style,n=i.domHelper.camelize;t?(e[n("image-rendering")]="optimizeSpeed",e[n("image-rendering")]="-moz-crisp-edges",e[n("image-rendering")]="-o-crisp-edges",e[n("image-rendering")]="-webkit-optimize-contrast",e[n("-ms-interpolation-mode")]="nearest-neighbor",e[n("image-rendering")]="optimize-contrast",e[n("image-rendering")]="pixelated",e[n("image-rendering")]="crisp-edges"):(e[n("image-rendering")]="optimizeQuality",e[n("-ms-interpolation-mode")]="bicubic",e[n("image-rendering")]="auto")},debug:function(){i.log(this._changedObjs)},_render:function(){var t=this._changedObjs;if(this._dirtyViewport&&(this._setViewport(),this._dirtyViewport=!1),t.length){for(var e=0,n=t.length;e<n;++e)t[e].draw()._changed=!1;t.length=0}},dirty:function(t){this._changedObjs.push(t)},attach:function(t){t._drawContext=this.context,this._div.appendChild(t._element),t._element.style.position="absolute",t._element.id="ent"+t[0]},detach:function(t){this._div.removeChild(t._element)},_setViewport:function(){var t=this._div.style,e=this._viewportRect(),n=e._scale,r=-e._x*n,o=-e._y*n;t.transform=t[i.support.prefix+"Transform"]="scale("+n+", "+n+")",t.left=Math.round(r)+"px",t.top=Math.round(o)+"px",t.zIndex=this.options.z}})},{"../core/core.js":10}],29:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.c("DOM",{_element:null,_cssStyles:null,avoidCss3dTransforms:!1,init:function(){this.requires("Renderable"),this._cssStyles={visibility:"",left:"",top:"",width:"",height:"",zIndex:"",opacity:"",transformOrigin:"",transform:""},this._element=r.createElement("div"),this._customLayer||this._attachToLayer(i.s("DefaultDOMLayer")),this.bind("NewComponent",this._updateClass),this.bind("RemoveComponent",this._removeClass)},remove:function(){this._detachFromLayer(),this.unbind("NewComponent",this._updateClass),this.unbind("RemoveComponent",this._removeClass)},getDomId:function(){return this._element.id},_removeClass:function(t){var e,n=this.__c,i="";for(e in n)e!==t&&(i+=" "+e);i=i.substr(1),this._element.className=i},_updateClass:function(){var t,e=this.__c,n="";for(t in e)n+=" "+t;n=n.substr(1),this._element.className=n},DOM:function(t){if(t&&t.nodeType){var e=this._drawLayer;this._detachFromLayer(),this._element=t,this._attachToLayer(e)}return this},draw:function(){var t=this._element.style,e=this.__coord||[0,0,0,0],n={x:e[0],y:e[1],w:e[2],h:e[3]},r=i.support.prefix,o=[];if(this._cssStyles.visibility!==this._visible&&(this._cssStyles.visibility=this._visible,this._visible?t.visibility="visible":t.visibility="hidden"),i.support.css3dtransform&&!this.avoidCss3dTransforms?o.push("translate3d("+~~this._x+"px,"+~~this._y+"px,0)"):(this._cssStyles.left!==this._x&&(this._cssStyles.left=this._x,t.left=~~this._x+"px"),this._cssStyles.top!==this._y&&(this._cssStyles.top=this._y,t.top=~~this._y+"px")),this._cssStyles.width!==this._w&&(this._cssStyles.width=this._w,t.width=~~this._w+"px"),this._cssStyles.height!==this._h&&(this._cssStyles.height=this._h,t.height=~~this._h+"px"),this._cssStyles.zIndex!==this._z&&(this._cssStyles.zIndex=this._z,t.zIndex=this._z),this._cssStyles.opacity!==this._alpha&&(this._cssStyles.opacity=this._alpha,t.opacity=this._alpha,t[r+"Opacity"]=this._alpha),this._mbr){var s=this._origin.x+"px "+this._origin.y+"px";t.transformOrigin=s,t[r+"TransformOrigin"]=s,i.support.css3dtransform?o.push("rotateZ("+this._rotation+"deg)"):o.push("rotate("+this._rotation+"deg)")}return this._flipX&&o.push("scaleX(-1)"),this._flipY&&o.push("scaleY(-1)"),this._cssStyles.transform!==o.join(" ")&&(this._cssStyles.transform=o.join(" "),t.transform=this._cssStyles.transform,t[r+"Transform"]=this._cssStyles.transform),this.trigger("Draw",{style:t,type:"DOM",co:n}),this},_setCssProperty:function(t,e,n){e=i.domHelper.camelize(e),"number"==typeof n&&(n+="px"),t[e]=n,this.trigger("SetStyle",e)},css:function(t,e){var n,r,o=this._element,s=o.style;if("object"==typeof t)for(n in t)t.hasOwnProperty(n)&&(r=t[n],this._setCssProperty(s,n,r));else{if(!e)return i.domHelper.getStyle(o,t);this._setCssProperty(s,t,e)}return this.trigger("Invalidate"),this}})},{"../core/core.js":10}],30:[function(t,e,n){var i=t("../core/core.js");i.extend({background:function(t){i.stage.elem.style.background=t},_pixelartEnabled:!1,pixelart:function(t){i._pixelartEnabled=t,i.trigger("PixelartSet",t)}})},{"../core/core.js":10}],31:[function(t,e,n){function i(t,e){this.gl=t,this.webgl=e,this.max_units=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.bound_textures=[],this.registered_textures={},this.active=null}function r(t,e){this.manager=t,this.gl=t.gl,this.glTexture=this.gl.createTexture(),this.id=e,this.active=!1,this.unit=null,this.powerOfTwo=!1}var o=t("../core/core.js");o.TextureManager=i,i.prototype={reset:function(){for(var t=0;t<this.bound_textures.length;t++)this.bound_textures[t].unbind();this.bound_textures=[],this.active=null},makeTexture:function(t,e,n){var i=this.webgl,o="texture-(r:"+n+")-"+t;if(void 0!==this.registered_textures[o])return this.registered_textures[o];var s=new r(this,o);return this.registered_textures[o]=s,this.bindTexture(s),s.setImage(e),s.setFilter(i.texture_filter),s.setRepeat(n),s},smallest:function(){for(var t=1/0,e=null,n=0;n<this.bound_textures.length;n++){var i=this.bound_textures[n];i.size<t&&(t=i.size,e=n)}return e},getAvailableUnit:function(){return this.bound_textures.length<this.max_units?this.bound_textures.length:this.smallest()},bindTexture:function(t){if(null===t.unit){var e=this.getAvailableUnit();this.bound_textures[e]&&this.unbindTexture(this.bound_textures[e]),this.bound_textures[e]=t,t.bind(e)}},unbindTexture:function(t){t.unbind()},setActiveTexture:function(t){this.active!==t.id&&(this.gl.activeTexture(this.gl[t.name]),this.active=t.unit)}},o.TextureWrapper=r,r.prototype={bind:function(t){var e=this.gl;this.unit=t,this.name="TEXTURE"+t,this.manager.setActiveTexture(this),e.bindTexture(e.TEXTURE_2D,this.glTexture)},isActive:function(){return this.manager.active===this.unit},unbind:function(){this.unit=null,this.name=null,this.isActive()&&(this.manager.active=null)},setImage:function(t){if(!this.isActive())throw"Trying to set image of texture that isn't active";this.width=t.width,this.height=t.height,this.size=t.width*t.height,this.powerOfTwo=!(Math.log(t.width)/Math.LN2!==Math.floor(Math.log(t.width)/Math.LN2)||Math.log(t.height)/Math.LN2!==Math.floor(Math.log(t.height)/Math.LN2));var e=this.gl;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t)},setFilter:function(t){if(!this.isActive())throw"Trying to set filter of texture that isn't active";var e=this.gl;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t)},setRepeat:function(t){if(!this.isActive())throw"Trying to set repeat property of texture that isn't active";if(t&&!this.powerOfTwo)throw"Can't create a repeating image whose dimensions aren't a power of 2 in WebGL contexts";var e=this.gl;this.repeatMode=t?e.REPEAT:e.CLAMP_TO_EDGE,e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.repeatMode),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.repeatMode)},setToProgram:function(t,e,n){if(null===this.unit)throw"Trying to use texture not set to a texture unit.";var i=this.gl;i.useProgram(t),i.uniform1i(i.getUniformLocation(t,e),this.unit),i.uniform2f(i.getUniformLocation(t,n),this.width,this.height)}}},{"../core/core.js":10}],32:[function(t,e,n){t("../core/core.js").c("HTML",{inner:"",init:function(){this.requires("2D, DOM")},replace:function(t){return this.inner=t,this._element.innerHTML=t,this},append:function(t){return this.inner+=t,this._element.innerHTML+=t,this},prepend:function(t){return this.inner=t+this.inner,this._element.innerHTML=t+this.inner,this}})},{"../core/core.js":10}],33:[function(t,e,n){var i=t("../core/core.js");i.defaultShader("Image",new i.WebGLShader("attribute vec2 aPosition;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec2 aTextureCoord;\n\nvarying mediump vec3 vTextureCoord;\n\nuniform vec4 uViewport;\nuniform mediump vec2 uTextureDimensions;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n  \n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n  vTextureCoord = vec3(aTextureCoord, aLayer.y);\n}","varying mediump vec3 vTextureCoord;\n  \nuniform sampler2D uSampler;\nuniform mediump vec2 uTextureDimensions;\n\nvoid main(void) {\n  highp vec2 coord =   vTextureCoord.xy / uTextureDimensions;\n  mediump vec4 base_color = texture2D(uSampler, coord);\n  gl_FragColor = vec4(base_color.rgb*base_color.a*vTextureCoord.z, base_color.a*vTextureCoord.z);\n}",[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aTextureCoord",width:2}],function(t,e){var n=t.pos;t.program.writeVector("aTextureCoord",0,0,0,n._h,n._w,0,n._w,n._h)})),i.c("Image",{_repeat:"repeat",ready:!1,init:function(){this.bind("Draw",this._drawImage),this.bind("LayerAttached",this._setupImage)},remove:function(){this.unbind("LayerAttached",this._setupImage),this.unbind("Draw",this._drawImage)},image:function(t,e){if(this.__image=t,this._repeat=e||"no-repeat",this.img=i.asset(t),this.img)this._setupImage(this._drawLayer);else{this.img=new Image,i.asset(t,this.img),this.img.src=t;var n=this;this.img.onload=function(){n._setupImage(n._drawLayer)}}return this.trigger("Invalidate"),this},_setupImage:function(t){this.img&&t&&("Canvas"===t.type?this._pattern=this._drawContext.createPattern(this.img,this._repeat):"WebGL"===t.type&&(this._establishShader("image:"+this.__image,i.defaultShader("Image")),this.program.setTexture(this._drawLayer.makeTexture(this.__image,this.img,"no-repeat"!==this._repeat))),"no-repeat"===this._repeat&&(this.w=this.w||this.img.width,this.h=this.h||this.img.height),this.ready=!0,this.trigger("Invalidate"))},_drawImage:function(t){if("canvas"===t.type){if(!this.ready||!this._pattern)return;var e=t.ctx;e.fillStyle=this._pattern,e.save(),e.translate(t.pos._x,t.pos._y),e.fillRect(0,0,t.pos._w,t.pos._h),e.restore()}else"DOM"===t.type?this.__image&&(t.style.backgroundImage="url("+this.__image+")",t.style.backgroundRepeat=this._repeat):"webgl"===t.type&&t.program.draw(t,this)}})},{"../core/core.js":10}],34:[function(t,e,n){var i=t("../core/core.js");i.extend({_drawLayerTemplates:{},_drawLayers:[],_addDrawLayerInstance:function(t){i._drawLayers.push(t),this._drawLayers.sort(function(t,e){return t.options.z-e.options.z})},_removeDrawLayerInstance:function(t){var e=this._drawLayers.indexOf(t);e>=0&&this._drawLayers.splice(e,1),this._drawLayers.sort(function(t,e){return t.options.z-e.options.z})},_registerLayerTemplate:function(t,e){this._drawLayerTemplates[t]=e;var n=this._commonLayerProperties;for(var i in n)e[i]||(e[i]=n[i])},_commonLayerProperties:{options:{xResponse:1,yResponse:1,scaleResponse:1,z:0},_pointerEntities:0,_dirtyViewport:!1,_cachedViewportRect:null,init:function(){this._cachedViewportRect={},this.trigger("LayerInit"),this.uniqueBind("InvalidateViewport",function(){this._dirtyViewport=!0}),this.trigger("PixelartSet",i._pixelartEnabled),i._addDrawLayerInstance(this)},remove:function(){this.trigger("LayerRemove"),i._removeDrawLayerInstance(this)},_sort:function(t,e){return t._globalZ-e._globalZ},_viewportRect:function(t){var e=this._cachedViewportRect;if(t)return e;var n=i.viewport,r=this.options,o=Math.pow(n._scale,r.scaleResponse);return e._scale=o,e._w=n._width/o,e._h=n._height/o,e._x=r.xResponse*-n._x-.5*(r.xResponse-1)*(1-1/o)*n._width,e._y=r.yResponse*-n._y-.5*(r.yResponse-1)*(1-1/o)*n._height,e},_viewTransformRect:function(t,e,n){var i=this._viewportRect(n),r=i._scale;return e=e||{},e._x=t._x*r+Math.round(-i._x*r),e._y=t._y*r+Math.round(-i._y*r),e._w=t._w*r,e._h=t._h*r,e}},createLayer:function(t,e,n){var r=this._drawLayerTemplates[e];i.s(t,r,n),i.c(t,{init:function(){this.requires("Renderable"),this._customLayer=!0,this.requires(r.type),this._attachToLayer(i.s(t))},remove:function(){this._detachFromLayer()}})}})},{"../core/core.js":10}],35:[function(t,e,n){var i=t("../core/core.js");i.c("Particles",{required:"Renderable",ready:!0,_particlesPaused:!1,init:function(){this._Particles=i.clone(this._Particles),this._Particles.init(),this._Particles.parentEntity=this},events:{UpdateFrame:function(){!this._particlesPaused&&this._Particles.active&&(this._Particles.update(),this.trigger("Invalidate"))},Draw:function(t){this._Particles.active&&"canvas"===t.type&&this._Particles.render(t)}},particles:function(t){return this._Particles.config(t),this._Particles.start(),this},_Particles:{presets:{maxParticles:150,size:18,sizeRandom:4,speed:1,speedRandom:1.2,lifeSpan:29,lifeSpanRandom:7,angle:65,angleRandom:34,startColour:[255,131,0,1],startColourRandom:[48,50,45,0],endColour:[245,35,0,0],endColourRandom:[60,60,60,0],sharpness:20,sharpnessRandom:10,spread:10,duration:-1,fastMode:!1,gravity:{x:0,y:.1},jitter:0,originOffset:{x:0,y:0}},emissionRate:0,elapsedFrames:0,emitCounter:0,active:!0,particles:[],init:function(){for(var t in this.presets)this[t]=this.presets[t]},config:function(t){t=t||{};for(var e in t)this[e]=t[e];if(this.emissionRate=this.maxParticles/this.lifeSpan,this.particles.length!==this.maxParticles){this.particles.length=0;for(var n=0,i=this.maxParticles;n<i;++n)this.particles.push(new this.Particle)}},start:function(){this.active=!0,this.elapsedFrames=0,this.emitCounter=0;for(var t=this.particles,e=0,n=t.length;e<n;++e)t[e].timeToLive=0;this.parentEntity.trigger("ParticleStart")},stop:function(){this.active=!1,this.parentEntity.trigger("ParticleEnd")},initParticle:function(t){var e,n,i,r,o,s,a,u,h,c,l,f,p,d;t.timeToLive=r=this.lifeSpan+this.lifeSpanRandom*this.RANDM1TO1(),t.positionX=this.originOffset.x+this.spread*this.RANDM1TO1(),t.positionY=this.originOffset.y+this.spread*this.RANDM1TO1(),e=(this.angle+this.angleRandom*this.RANDM1TO1())*(Math.PI/180),n=this.speed+this.speedRandom*this.RANDM1TO1(),t.directionX=Math.sin(e)*n,t.directionY=-Math.cos(e)*n,i=this.size+this.sizeRandom*this.RANDM1TO1(),t.size=i=i<0?0:~~i,o=this.sharpness+this.sharpnessRandom*this.RANDM1TO1(),t.sharpness=o=o>100?100:o<0?0:o,t.sizeSmall=~~(i/200*o),s=a=this.startColour[0]+this.startColourRandom[0]*this.RANDM1TO1(),t.colourR=s>255?255:s<0?0:~~s,s=u=this.startColour[1]+this.startColourRandom[1]*this.RANDM1TO1(),t.colourG=s>255?255:s<0?0:~~s,s=h=this.startColour[2]+this.startColourRandom[2]*this.RANDM1TO1(),t.colourB=s>255?255:s<0?0:~~s,s=c=this.startColour[3]+this.startColourRandom[3]*this.RANDM1TO1(),t.colourA=s>1?1:s<0?0:~~(100*s)/100,l=this.endColour[0]+this.endColourRandom[0]*this.RANDM1TO1(),f=this.endColour[1]+this.endColourRandom[1]*this.RANDM1TO1(),p=this.endColour[2]+this.endColourRandom[2]*this.RANDM1TO1(),d=this.endColour[3]+this.endColourRandom[3]*this.RANDM1TO1(),t.deltaColourR=(l-a)/r,t.deltaColourG=(f-u)/r,t.deltaColourB=(p-h)/r,t.deltaColourA=(d-c)/r},update:function(){var t=this.RANDM1TO1,e=this.gravity.x,n=this.gravity.y,i=this.jitter;this.elapsedFrames++,this.duration>=0&&this.duration<this.elapsedFrames&&this.stop();var r=this.emissionRate>0?1/this.emissionRate:1/0;this.emitCounter++;for(var o,s,a=this.particles,u=0,h=a.length;u<h;++u)(s=a[u]).timeToLive>0?(s.directionX+=e,s.directionY+=n,s.positionX+=s.directionX,s.positionY+=s.directionY,i&&(s.positionX+=i*t(),s.positionY+=i*t()),o=s.colourR+s.deltaColourR,s.colourR=o>255?255:o<0?0:~~o,o=s.colourG+s.deltaColourG,s.colourG=o>255?255:o<0?0:~~o,o=s.colourB+s.deltaColourB,s.colourB=o>255?255:o<0?0:~~o,o=s.colourA+s.deltaColourA,s.colourA=o>1?1:o<0?0:~~(100*o)/100,s.timeToLive--):this.emitCounter>r&&(this.initParticle(s),this.emitCounter-=r)},render:function(t){for(var e,n=t.ctx,i=this.particles,r=0,o=i.length;r<o;r++){var s=(e=i[r]).size,a=s>>1;if(!(e.positionX<0||e.positionX+s>t.pos._w||e.positionY<0||e.positionY+s>t.pos._h)){var u=~~(t.pos._x+e.positionX),h=~~(t.pos._y+e.positionY),c=e.colourR,l=e.colourG,f=e.colourB,p="rgba("+c+","+l+","+f+","+e.colourA+")";if(this.fastMode)n.fillStyle=p;else{var d="rgba("+c+","+l+","+f+",0)",y=n.createRadialGradient(u+a,h+a,e.sizeSmall,u+a,h+a,a);y.addColorStop(0,p),y.addColorStop(.9,d),n.fillStyle=y}n.fillRect(u,h,s,s)}}},Particle:function(){this.positionX=0,this.positionY=0,this.directionX=0,this.directionY=0,this.size=0,this.sizeSmall=0,this.timeToLive=0,this.colourR=0,this.colourG=0,this.colourB=0,this.colourA=0,this.deltaColourR=0,this.deltaColourG=0,this.deltaColourB=0,this.deltaColourA=0,this.sharpness=0},RANDM1TO1:function(){return 2*Math.random()-1}},pauseParticles:function(){this._particlesPaused=!0},resumeParticles:function(){this._particlesPaused=!1}})},{"../core/core.js":10}],36:[function(t,e,n){t("../core/core.js").c("Renderable",{_changed:!1,_alpha:1,_visible:!0,_setterRenderable:function(t,e){this[t]!==e&&(this[t]=e,this.trigger("Invalidate"))},properties:{alpha:{set:function(t){this._setterRenderable("_alpha",t)},get:function(){return this._alpha},configurable:!0,enumerable:!0},_alpha:{enumerable:!1},visible:{set:function(t){this._setterRenderable("_visible",t)},get:function(){return this._visible},configurable:!0,enumerable:!0},_visible:{enumerable:!1}},init:function(){},_hideOnUnfreeze:!1,events:{Freeze:function(){this._hideOnUnfreeze=!this._visible,this._visible=!1,this.trigger("Invalidate")},Unfreeze:function(){this._visible=!this._hideOnUnfreeze,this.trigger("Invalidate")}},_invalidateRenderable:function(){!1===this._changed&&(this._changed=!0,this._drawLayer.dirty(this))},_attachToLayer:function(t){this._drawLayer&&this._detachFromLayer(),this._drawLayer=t,t.attach(this),this.bind("Invalidate",this._invalidateRenderable),this.trigger("LayerAttached",t),this.trigger("Invalidate")},_detachFromLayer:function(){this._drawLayer&&(this._drawLayer.detach(this),this.unbind("Invalidate",this._invalidateRenderable),this.trigger("LayerDetached",this._drawLayer),delete this._drawLayer)},flip:function(t){return t=t||"X",this["_flip"+t]||(this["_flip"+t]=!0,this.trigger("Invalidate")),this},unflip:function(t){return t=t||"X",this["_flip"+t]&&(this["_flip"+t]=!1,this.trigger("Invalidate")),this}})},{"../core/core.js":10}],37:[function(t,e,n){var i=t("../core/core.js");i.c("SpriteAnimation",{_reels:null,_currentReelId:null,_currentReel:null,_isPlaying:!1,animationSpeed:1,init:function(){this._reels={}},reel:function(t,e,n,r,o,s){if(0===arguments.length)return this._currentReelId;if(1===arguments.length&&"string"==typeof t){if(void 0===this._reels[t])throw"The specified reel "+t+" is undefined.";return this.pauseAnimation(),this._currentReelId!==t&&(this._currentReelId=t,this._currentReel=this._reels[t],this._updateSprite(),this.trigger("ReelChange",this._currentReel)),this}var a,u;if(a={id:t,frames:[],currentFrame:0,easing:new i.easing(e),defaultLoops:1},a.duration=a.easing.duration,"number"==typeof n)if(s=s||1/0,o>=0)for(u=0;u<o;++u)a.frames.push([n,r]),++n>=s&&(n=0,r++);else for(u=0;u>o;--u)a.frames.push([n,r]),--n<0&&(n=s-1,r--);else{if(3!==arguments.length||"object"!=typeof n)throw"Unrecognized arguments. Please see the documentation for 'reel(...)'.";a.frames=n}return this._reels[t]=a,this},animate:function(t,e){"string"==typeof t&&this.reel(t);var n=this._currentReel;if(void 0===n||null===n)throw"No reel is specified, and there is no currently active reel.";return this.pauseAnimation(),void 0===e&&(e="number"==typeof t?t:1),n.easing.reset(),this.loops(e),this._setFrame(0),this.bind("UpdateFrame",this._animationTick),this._isPlaying=!0,this.trigger("StartAnimation",n),this},resumeAnimation:function(){return!1===this._isPlaying&&null!==this._currentReel&&(this.bind("UpdateFrame",this._animationTick),this._isPlaying=!0,this._currentReel.easing.resume(),this.trigger("StartAnimation",this._currentReel)),this},pauseAnimation:function(){return!0===this._isPlaying&&(this.unbind("UpdateFrame",this._animationTick),this._isPlaying=!1,this._reels[this._currentReelId].easing.pause()),this},resetAnimation:function(){var t=this._currentReel;if(null===t)throw"No active reel to reset.";return this.reelPosition(0),t.easing.repeat(t.defaultLoops),this},loops:function(t){return 0===arguments.length?null!==this._currentReel?this._currentReel.easing.loops:0:(null!==this._currentReel&&(t<0&&(t=1/0),this._currentReel.easing.repeat(t),this._currentReel.defaultLoops=t),this)},reelPosition:function(t){if(null===this._currentReel)throw"No active reel.";if(0===arguments.length)return this._currentReel.currentFrame;var e,n=this._currentReel.frames.length;if("end"===t&&(t=n-1),t<1&&t>0)e=t,t=Math.floor(n*e);else{if(t!==Math.floor(t))throw"Position "+t+" is invalid.";t<0&&(t=n-1+t),e=t/n}return t=Math.min(t,n-1),t=Math.max(t,0),this._setProgress(e),this._setFrame(t),this},reelFrame:function(t){if(null===this._currentReel)throw"No active reel.";var e=this._currentReel.frames.indexOf(t);if(-1===e)throw"Frame name "+t+" is invalid.";return this.reelPosition(e),this},_animationTick:function(t){var e=this._reels[this._currentReelId];e.easing.tick(t.dt*this.animationSpeed);var n=e.easing.value(),i=Math.min(Math.floor(e.frames.length*n),e.frames.length-1);this._setFrame(i),!0===e.easing.complete&&(this.pauseAnimation(),this.trigger("AnimationEnd",this._currentReel))},_setFrame:function(t){var e=this._currentReel;t!==e.currentFrame&&(e.currentFrame=t,this._updateSprite(),this.trigger("FrameChange",e))},_updateSprite:function(){var t=this._currentReel,e=t.frames[t.currentFrame];"string"==typeof e?this.sprite(e):this.sprite(e[0],e[1])},_setProgress:function(t,e){this._currentReel.easing.setProgress(t,e)},isPlaying:function(t){return!!this._isPlaying&&(t?this._currentReelId===t:!!this._currentReelId)},getReel:function(t){if(0===arguments.length){if(!this._currentReelId)return null;t=this._currentReelId}return this._reels[t]}})},{"../core/core.js":10}],38:[function(t,e,n){var i=t("../core/core.js");i.defaultShader("Sprite",new i.WebGLShader("attribute vec2 aPosition;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec2 aTextureCoord;\n\nvarying mediump vec3 vTextureCoord;\n\nuniform vec4 uViewport;\nuniform mediump vec2 uTextureDimensions;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n  \n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n  vTextureCoord = vec3(aTextureCoord, aLayer.y);\n}","varying mediump vec3 vTextureCoord;\n  \nuniform sampler2D uSampler;\nuniform mediump vec2 uTextureDimensions;\n\nvoid main(void) {\n  highp vec2 coord =   vTextureCoord.xy / uTextureDimensions;\n  mediump vec4 base_color = texture2D(uSampler, coord);\n  gl_FragColor = vec4(base_color.rgb*base_color.a*vTextureCoord.z, base_color.a*vTextureCoord.z);\n}",[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aTextureCoord",width:2}],function(t,e){var n=t.co;t.program.writeVector("aTextureCoord",n.x,n.y,n.x,n.y+n.h,n.x+n.w,n.y,n.x+n.w,n.y+n.h)})),i.extend({sprite:function(t,e,n,r,o,s,a){var u,h,c;"string"==typeof t&&(s=o,o=r,r=e,n=t,t=1,e=1),"string"==typeof e&&(s=o,o=r,r=n,n=e,e=t),!s&&o&&(s=o),o=parseInt(o||0,10),s=parseInt(s||0,10);var l=function(){this.ready=!0,this.trigger("Invalidate")};(c=i.asset(n))||((c=new Image).src=n,i.asset(n,c),c.onload=function(){for(var t in r)i(t).each(l)});var f=function(){this.requires("2D, Sprite"),this.__trim=[0,0,0,0],this.__image=n,this.__map=r,this.__coord=[this.__coord[0],this.__coord[1],this.__coord[2],this.__coord[3]],this.__tile=t,this.__tileh=e,this.__padding=[o,s],this.__padBorder=a,this.sprite(this.__coord[0],this.__coord[1],this.__coord[2],this.__coord[3]),this.img=c,this.img.complete&&this.img.width>0&&(this.ready=!0,this.trigger("Invalidate")),this.w=this.__coord[2],this.h=this.__coord[3],this._setupSpriteImage(this._drawLayer)};for(u in r)r.hasOwnProperty(u)&&(h=r[u],i.c(u,{ready:!1,__coord:[h[0],h[1],h[2]||1,h[3]||1],init:f}));return this}}),i.c("Sprite",{__image:"",__tile:0,__tileh:0,__padding:null,__trim:null,img:null,ready:!1,init:function(){this.__trim=[0,0,0,0],this.bind("Draw",this._drawSprite),this.bind("LayerAttached",this._setupSpriteImage)},remove:function(){this.unbind("Draw",this._drawSprite),this.unbind("LayerAttached",this._setupSpriteImage)},_setupSpriteImage:function(t){this.__image&&this.img&&t&&"WebGL"===t.type&&(this._establishShader(this.__image,i.defaultShader("Sprite")),this.program.setTexture(t.makeTexture(this.__image,this.img,!1)))},_drawSprite:function(t){var e=t.co,n=t.pos,i=t.ctx;if("canvas"===t.type)i.drawImage(this.img,e.x,e.y,e.w,e.h,n._x,n._y,n._w,n._h);else if("DOM"===t.type){var r=this._h/e.h,o=this._w/e.w,s=this._element.style,a=s.backgroundColor;"initial"===a&&(a="");var u=a+" url('"+this.__image+"') no-repeat";u!==s.background&&(s.background=u),s.backgroundPosition="-"+e.x*o+"px -"+e.y*r+"px",1===r&&1===o||(s.backgroundSize=this.img.width*o+"px "+this.img.height*r+"px")}else"webgl"===t.type&&t.program.draw(t,this)},sprite:function(t,e,n,i){if("string"==typeof t){var r=this.__map[t];if(!r)return this;t=r[0],e=r[1],n=r[2]||1,i=r[3]||1}return this.__coord=this.__coord||[0,0,0,0],this.__coord[0]=t*(this.__tile+this.__padding[0])+(this.__padBorder?this.__padding[0]:0)+this.__trim[0],this.__coord[1]=e*(this.__tileh+this.__padding[1])+(this.__padBorder?this.__padding[1]:0)+this.__trim[1],void 0!==n&&void 0!==i&&(this.__coord[2]=this.__trim[2]||n*this.__tile||this.__tile,this.__coord[3]=this.__trim[3]||i*this.__tileh||this.__tileh),this.trigger("Invalidate"),this},crop:function(t,e,n,i){var r=this._mbr||this.pos();return this.__trim=[],this.__trim[0]=t,this.__trim[1]=e,this.__trim[2]=n,this.__trim[3]=i,this.__coord[0]+=t,this.__coord[1]+=e,this.__coord[2]=n,this.__coord[3]=i,this._w=n,this._h=i,this.trigger("Invalidate",r),this}})},{"../core/core.js":10}],39:[function(t,e,n){var i=t("../core/core.js");i.c("Text",{_text:"",defaultSize:"10px",defaultFamily:"sans-serif",defaultVariant:"normal",defaultLineHeight:"normal",defaultTextAlign:"left",ready:!0,init:function(){this.requires("2D"),this._textFont={type:"",weight:"",size:this.defaultSize,lineHeight:this.defaultLineHeight,family:this.defaultFamily,variant:this.defaultVariant},this._textAlign=this.defaultTextAlign},events:{Draw:function(t){var e=this._fontString();if("DOM"===t.type){var n=this._element,i=n.style;i.color=this._textColor,i.font=e,i.textAlign=this._textAlign,n.innerHTML=this._text}else if("canvas"===t.type){var r=t.ctx;r.save(),r.textBaseline="top",r.fillStyle=this._textColor||"rgb(0,0,0)",r.font=e,r.textAlign=this._textAlign,r.fillText(this._text,t.pos._x,t.pos._y),r.restore()}},SetStyle:function(t){switch(t){case"textAlign":this._textAlign=this._element.style.textAlign;break;case"color":this.textColor(this._element.style.color);break;case"fontType":this._textFont.type=this._element.style.fontType;break;case"fontWeight":this._textFont.weight=this._element.style.fontWeight;break;case"fontSize":this._textFont.size=this._element.style.fontSize;break;case"fontFamily":this._textFont.family=this._element.style.fontFamily;break;case"fontVariant":this._textFont.variant=this._element.style.fontVariant;break;case"lineHeight":this._textFont.lineHeight=this._element.style.lineHeight}}},remove:function(){this.unbind(this._textUpdateEvent,this._dynamicTextUpdate)},_getFontHeight:function(){var t=/([a-zA-Z]+)\b/,e={px:1,pt:4/3,pc:16,cm:96/2.54,mm:96/25.4,in:96,em:void 0,ex:void 0};return function(n){var i=parseFloat(n),r=t.exec(n),o=r?r[1]:"px";return void 0!==e[o]?Math.ceil(i*e[o]):Math.ceil(i)}}(),_textGenerator:null,text:function(t,e){return void 0===t||null===t?this._text:("function"==typeof t?(this._text=t.call(this,e),this._textGenerator=t):(this._text=t,this._textGenerator=null),this.has("Canvas")&&this._resizeForCanvas(),this.trigger("Invalidate"),this)},_dynamicTextOn:!1,_textUpdateEvent:null,_dynamicTextUpdate:function(t){this._textGenerator&&this.text(this._textGenerator,t)},dynamicTextGeneration:function(t,e){return this.unbind(this._textUpdateEvent,this._dynamicTextUpdate),t&&(this._textUpdateEvent=e||"UpdateFrame",this.bind(this._textUpdateEvent,this._dynamicTextUpdate)),this},_resizeForCanvas:function(){var t=this._drawContext;t.font=this._fontString(),this.w=t.measureText(this._text).width;var e=this._textFont.size||this.defaultSize;this.h=1.1*this._getFontHeight(e),"left"===this._textAlign||"start"===this._textAlign?this.offsetBoundary(0,0,0,0):"center"===this._textAlign?this.offsetBoundary(this.w/2,0,-this.w/2,0):"end"!==this._textAlign&&"right"!==this._textAlign||this.offsetBoundary(this.w,0,-this.w,0)},_fontString:function(){return this._textFont.type+" "+this._textFont.variant+" "+this._textFont.weight+" "+this._textFont.size+" / "+this._textFont.lineHeight+" "+this._textFont.family},textColor:function(t){return i.assignColor(t,this),this._textColor="rgba("+this._red+", "+this._green+", "+this._blue+", "+this._strength+")",this.trigger("Invalidate"),this},textAlign:function(t){return this._textAlign=t,this.has("Canvas")&&this._resizeForCanvas(),this.trigger("Invalidate"),this},textFont:function(t,e){if(1===arguments.length){if("string"==typeof t)return this._textFont[t];if("object"==typeof t)for(var n in t)this._textFont[n]="family"===n?"'"+t[n]+"'":t[n]}else this._textFont[t]=e;return this.has("Canvas")&&this._resizeForCanvas(),this.trigger("Invalidate"),this},unselectable:function(){return this.has("DOM")&&(this.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:"default"}),this.trigger("Invalidate")),this}})},{"../core/core.js":10}],40:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.extend({viewport:{clampToEntities:!0,_width:0,_height:0,_x:0,_y:0,_scale:1,bounds:null,scroll:function(t,e){this[t]=e,i.trigger("ViewportScroll"),i.trigger("InvalidateViewport")},rect_object:{_x:0,_y:0,_w:0,_h:0},rect:function(t){return t=t||this.rect_object,t._x=-this._x,t._y=-this._y,t._w=this._width/this._scale,t._h=this._height/this._scale,t},pan:function(){function t(t){a.tick(t.dt);var u=a.value();i.viewport.x=(1-u)*o+u*n,i.viewport.y=(1-u)*s+u*r,i.viewport._clamp(),a.complete&&(e(),i.trigger("CameraAnimationDone"))}function e(){i.unbind("UpdateFrame",t)}var n,r,o,s,a;return i._preBind("StopCamera",e),function(e,u,h,c){i.trigger("StopCamera"),"reset"!==e&&(o=i.viewport._x,s=i.viewport._y,n=o-e,r=s-u,a=new i.easing(h,c),i.uniqueBind("UpdateFrame",t))}}(),follow:function(){function t(){var t=i.viewport._scale;i.viewport.scroll("_x",-(this.x+this.w/2-i.viewport.width/2/t-n*t)),i.viewport.scroll("_y",-(this.y+this.h/2-i.viewport.height/2/t-r*t)),i.viewport._clamp()}var e,n,r;return i._preBind("StopCamera",function(){e&&(e.unbind("Move",t),e.unbind("ViewportScale",t),e.unbind("ViewportResize",t))}),function(o,s,a){o&&o.has("2D")&&(i.trigger("StopCamera"),e=o,n=void 0!==s?s:0,r=void 0!==a?a:0,o.bind("Move",t),o.bind("ViewportScale",t),o.bind("ViewportResize",t),t.call(o))}}(),centerOn:function(t,e){var n=t.x+i.viewport.x,r=t.y+i.viewport.y,o=t.w/2,s=t.h/2,a=n+o-i.viewport.width/2/i.viewport._scale,u=r+s-i.viewport.height/2/i.viewport._scale;i.viewport.pan(a,u,e)},zoom:function(){function t(){i.unbind("UpdateFrame",e)}function e(e){var r,l;c.tick(e.dt),r=Math.pow(o,c.value()),l=1===o?c.value():(1/r-1)/(1/o-1),i.viewport.scale(r*n),i.viewport.scroll("_x",s*(1-l)+a*l),i.viewport.scroll("_y",u*(1-l)+h*l),i.viewport._clamp(),c.complete&&(t(),i.trigger("CameraAnimationDone"))}i._preBind("StopCamera",t);var n,r,o,s,a,u,h,c;return function(t,l,f,p,d){t?(arguments.length<=2&&(p=l,l=i.viewport.x-i.viewport.width,f=i.viewport.y-i.viewport.height),i.trigger("StopCamera"),n=i.viewport._scale,r=n*(o=t),s=i.viewport.x,u=i.viewport.y,a=-(l-i.viewport.width/(2*r)),h=-(f-i.viewport.height/(2*r)),c=new i.easing(p,d),i.uniqueBind("UpdateFrame",e)):i.viewport.scale(1)}}(),scale:function(t){this._scale=t||1,i.trigger("InvalidateViewport"),i.trigger("ViewportScale")},mouselook:function(){function t(t){s||t.target||(i.trigger("StopCamera"),a.x=t.clientX,a.y=t.clientY,s=!0)}function e(t){if(s){u.x=t.clientX-a.x,u.y=t.clientY-a.y,a.x=t.clientX,a.y=t.clientY;var e=i.viewport;e.x+=u.x/e._scale,e.y+=u.y/e._scale,e._clamp()}}function n(t){s&&(s=!1)}var r,o=!1,s=!1,a={x:0,y:0},u={x:0,y:0};return function(s){r=i.s("Mouse"),s&&!o?(r.bind("MouseDown",t),r.bind("MouseMove",e),r.bind("MouseUp",n),o=s):!s&&o&&(r.unbind("MouseDown",t),r.unbind("MouseMove",e),r.unbind("MouseUp",n),o=s)}}(),_clamp:function(){if(this.clampToEntities){var t=i.clone(this.bounds)||i.map.boundaries();t.max.x*=this._scale,t.min.x*=this._scale,t.max.y*=this._scale,t.min.y*=this._scale,t.max.x-t.min.x>i.viewport.width?i.viewport.x<(-t.max.x+i.viewport.width)/this._scale?i.viewport.x=(-t.max.x+i.viewport.width)/this._scale:i.viewport.x>-t.min.x&&(i.viewport.x=-t.min.x):i.viewport.x=-1*(t.min.x+(t.max.x-t.min.x)/2-i.viewport.width/2),t.max.y-t.min.y>i.viewport.height?i.viewport.y<(-t.max.y+i.viewport.height)/this._scale?i.viewport.y=(-t.max.y+i.viewport.height)/this._scale:i.viewport.y>-t.min.y&&(i.viewport.y=-t.min.y):i.viewport.y=-1*(t.min.y+(t.max.y-t.min.y)/2-i.viewport.height/2)}},init:function(t,e,n){void 0===n&&void 0===e&&void 0!==t&&"number"!=typeof t&&(n=t,t=window.innerWidth,e=window.innerHeight),i.createLayer("DefaultCanvasLayer","Canvas",{z:20}),i.createLayer("DefaultDOMLayer","DOM",{z:30}),i.createLayer("DefaultWebGLLayer","WebGL",{z:10}),this._defineViewportProperties(),this._x=0,this._y=0,this._scale=1,this.bounds=null,this._width=t||window.innerWidth,this._height=e||window.innerHeight,void 0===n&&(n="cr-stage");var o;if("string"==typeof n)o=r.getElementById(n);else{if(!("undefined"!=typeof HTMLElement?n instanceof HTMLElement:n instanceof Element))throw new TypeError("stage_elem must be a string or an HTMLElement");o=n}i.stage={x:0,y:0,fullscreen:!1,elem:o||r.createElement("div")},t||e||(r.body.style.overflow="hidden",i.stage.fullscreen=!0),i.addEvent(this,window,"resize",i.viewport.reload),i.addEvent(this,window,"blur",function(){i.settings.get("autoPause")&&(i._paused||i.pause())}),i.addEvent(this,window,"focus",function(){i._paused&&i.settings.get("autoPause")&&i.pause()}),i.settings.register("stageSelectable",function(t){i.stage.elem.onselectstart=t?function(){return!0}:function(){return!1}}),i.settings.modify("stageSelectable",!1),i.settings.register("stageContextMenu",function(t){i.stage.elem.oncontextmenu=t?function(){return!0}:function(){return!1}}),i.settings.modify("stageContextMenu",!1),i.settings.register("autoPause",function(){}),i.settings.modify("autoPause",!1),o||(r.body.appendChild(i.stage.elem),i.stage.elem.id=n);var s,a=i.stage.elem.style;if(a.width=this.width+"px",a.height=this.height+"px",a.overflow="hidden",i.bind("ViewportResize",function(){i.trigger("InvalidateViewport")}),i.mobile){void 0!==typeof a.webkitTapHighlightColor&&(a.webkitTapHighlightColor="rgba(0,0,0,0)");var u=r.createElement("meta"),h=r.getElementsByTagName("head")[0];(u=r.createElement("meta")).setAttribute("name","apple-mobile-web-app-capable"),u.setAttribute("content","yes"),h.appendChild(u),i.addEvent(this,i.stage.elem,"touchmove",function(t){t.preventDefault()})}a.position="relative",s=i.domHelper.innerPosition(i.stage.elem),i.stage.x=s.x,i.stage.y=s.y,i.uniqueBind("ViewportResize",this._resize)},_resize:function(){i.stage.elem.style.width=i.viewport.width+"px",i.stage.elem.style.height=i.viewport.height+"px"},_defineViewportProperties:function(){Object.defineProperty(this,"x",{set:function(t){this.scroll("_x",t)},get:function(){return this._x},configurable:!0}),Object.defineProperty(this,"y",{set:function(t){this.scroll("_y",t)},get:function(){return this._y},configurable:!0}),Object.defineProperty(this,"width",{set:function(t){this._width=t,i.trigger("ViewportResize")},get:function(){return this._width},configurable:!0}),Object.defineProperty(this,"height",{set:function(t){this._height=t,i.trigger("ViewportResize")},get:function(){return this._height},configurable:!0})},reload:function(){var t,e=window.innerWidth,n=window.innerHeight;i.stage.fullscreen&&(this._width=e,this._height=n,i.trigger("ViewportResize")),t=i.domHelper.innerPosition(i.stage.elem),i.stage.x=t.x,i.stage.y=t.y},reset:function(){i.viewport.mouselook(!1),i.trigger("StopCamera"),i.viewport.scroll("_x",0),i.viewport.scroll("_y",0),i.viewport.scale(1)},onScreen:function(t){return i.viewport._x+t._x+t._w>0&&i.viewport._y+t._y+t._h>0&&i.viewport._x+t._x<i.viewport.width&&i.viewport._y+t._y<i.viewport.height}}})},{"../core/core.js":10}],41:[function(t,e,n){function i(t,e){this.shader=e,this.layer=t,this.context=t.context,this.draw=function(){},this.array_size=16,this.max_size=1024,this._indexArray=new Uint16Array(6*this.array_size),this._indexBuffer=t.context.createBuffer()}var r=t("../core/core.js"),o=window.document;i.prototype={initAttributes:function(t){this.attributes=t,this._attribute_table={};for(var e=0,n=0;n<t.length;n++){var i=t[n];this._attribute_table[i.name]=i,i.bytes=i.bytes||Float32Array.BYTES_PER_ELEMENT,i.type=i.type||this.context.FLOAT,i.offset=e,i.location=this.context.getAttribLocation(this.shader,i.name),this.context.enableVertexAttribArray(i.location),e+=i.width}this.stride=e,this._attributeArray=new Float32Array(4*this.array_size*this.stride),this._attributeBuffer=this.context.createBuffer(),this._registryHoles=[],this._registrySize=0},growArrays:function(t){if(!(this.array_size>=this.max_size)){var e=Math.min(t,this.max_size),n=new Float32Array(4*e*this.stride),i=new Uint16Array(6*e);n.set(this._attributeArray),i.set(this._indexArray),this._attributeArray=n,this._indexArray=i,this.array_size=e}},registerEntity:function(t){if(0===this._registryHoles.length){if(this._registrySize>=this.max_size)throw"Number of entities exceeds maximum limit.";this._registrySize>=this.array_size&&this.growArrays(2*this.array_size),t._glBufferIndex=this._registrySize,this._registrySize++}else t._glBufferIndex=this._registryHoles.pop()},unregisterEntity:function(t){"number"==typeof t._glBufferIndex&&this._registryHoles.push(t._glBufferIndex),t._glBufferIndex=null},resetRegistry:function(){this._maxElement=0,this._registryHoles.length=0},setCurrentEntity:function(t){this.ent_offset=4*t._glBufferIndex,this.ent=t},switchTo:function(){var t=this.context;t.useProgram(this.shader),t.bindBuffer(t.ARRAY_BUFFER,this._attributeBuffer);for(var e,n=this.attributes,i=0;i<n.length;i++)e=n[i],t.vertexAttribPointer(e.location,e.width,e.type,!1,this.stride*e.bytes,e.offset*e.bytes);var r=this.texture_obj;r&&null===r.unit&&this.layer.texture_manager.bindTexture(r),this.index_pointer=0},setTexture:function(t){void 0===this.texture_obj&&(t.setToProgram(this.shader,"uSampler","uTextureDimensions"),this.texture_obj=t)},addIndices:function(t){var e=this._indexArray,n=this.index_pointer;e[0+n]=0+t,e[1+n]=1+t,e[2+n]=2+t,e[3+n]=1+t,e[4+n]=2+t,e[5+n]=3+t,this.index_pointer+=6},renderBatch:function(){var t=this.context;t.bindBuffer(t.ARRAY_BUFFER,this._attributeBuffer),t.bufferData(t.ARRAY_BUFFER,this._attributeArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indexArray,t.STATIC_DRAW),t.drawElements(t.TRIANGLES,this.index_pointer,t.UNSIGNED_SHORT,0)},setViewportUniforms:function(t,e){var n=this.context;n.useProgram(this.shader),n.uniform4f(this.shader.viewport,-t._x,-t._y,t._w,t._h)},writeVector:function(t,e,n){for(var i=this._attribute_table[t],r=this.stride,o=i.offset+this.ent_offset*r,s=i.width,a=arguments.length-1,u=this._attributeArray,h=0;h<4;h++)for(var c=0;c<s;c++)u[o+r*h+c]=arguments[(s*h+c)%a+1]}},r._registerLayerTemplate("WebGL",{type:"WebGL",context:null,_compileShader:function(t,e){var n=this.context,i=n.createShader(e);if(n.shaderSource(i,t),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))throw n.getShaderInfoLog(i);return i},_makeProgram:function(t){var e=this.context,n=this._compileShader(t.fragmentCode,e.FRAGMENT_SHADER),i=this._compileShader(t.vertexCode,e.VERTEX_SHADER),r=e.createProgram();if(e.attachShader(r,i),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw"Could not initialise shaders";return r.viewport=e.getUniformLocation(r,"uViewport"),r},getProgramWrapper:function(t,e){if(void 0===this.programs[t]){var n=new i(this,this._makeProgram(e));n.name=t,n.initAttributes(e.attributeList),n.draw=e.drawCallback,n.setViewportUniforms(this._viewportRect(),this.options),this.programs[t]=n}return this.programs[t]},makeTexture:function(t,e,n){return this.texture_manager.makeTexture(t,e,n)},events:{LayerInit:"layerInit",LayerRemove:"layerRemove",RenderScene:"_render",PixelartSet:"_setPixelart",ViewportResize:"_resize"},layerInit:function(){if(!r.support.webgl)return r.trigger("NoWebGL"),void r.stop();this.programs={};var t;(t=o.createElement("canvas")).width=r.viewport.width,t.height=r.viewport.height,t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.zIndex=this.options.z,r.stage.elem.appendChild(t);var e;try{(e=t.getContext("webgl",{premultipliedalpha:!0})||t.getContext("experimental-webgl",{premultipliedalpha:!0})).viewportWidth=t.width,e.viewportHeight=t.height}catch(t){return r.trigger("NoWebGL"),void r.stop()}this.context=e,this._canvas=t,e.clearColor(0,0,0,0),e.disable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.BLEND),this.texture_manager=new r.TextureManager(e,this),this._dirtyViewport=!0},layerRemove:function(){this._canvas.parentNode.removeChild(this._canvas)},_resize:function(){var t=this._canvas;t.width=r.viewport.width,t.height=r.viewport.height;var e=this.context;e.viewportWidth=t.width,e.viewportHeight=t.height},_setPixelart:function(t){var e=this.context;this.texture_filter=t?e.NEAREST:e.LINEAR},visible_gl:[],_render:function(t){t=t||this._viewportRect();var e=this.context;e.viewport(0,0,e.viewportWidth,e.viewportHeight),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);var n=this.programs;if(this._dirtyViewport){var i=this._viewportRect();for(var o in n)n[o].setViewportUniforms(i,this.options);this._dirtyViewport=!1}var s,a=r.map.search(t),u=0,h=a.length,c=this.visible_gl;for(c.length=0,u=0;u<h;u++)(s=a[u])._visible&&s.program&&s._drawLayer===this&&c.push(s);c.sort(this._sort),h=c.length;var l=null;for(u=0;u<h;u++)l!==(s=c[u]).program&&(null!==l&&l.renderBatch(),(l=s.program).index_pointer=0,l.switchTo()),s.draw(),s._changed=!1;null!==l&&l.renderBatch()},dirty:function(t){},attach:function(t){t._drawContext=this.context},detach:function(t){t.program&&t.program.unregisterEntity(t)}})},{"../core/core.js":10}],42:[function(t,e,n){var i=t("../core/core.js");i.extend({WebGLShader:function(t,e,n,i){this.vertexCode=t,this.fragmentCode=e,this.attributeList=n,this.drawCallback=i},defaultShader:function(t,e){if(this._defaultShaders=this._defaultShaders||{},1===arguments.length)return this._defaultShaders[t];this._defaultShaders[t]=e}}),i.c("WebGL",{init:function(){this.requires("Renderable"),this._customLayer||this._attachToLayer(i.s("DefaultWebGLLayer"))},remove:function(){this._detachFromLayer()},drawVars:{type:"webgl",pos:{},ctx:null,coord:[0,0,0,0],co:{x:0,y:0,w:0,h:0}},draw:function(){if(this.ready){var t=this.drawVars.pos;t._x=this._x,t._y=this._y,t._w=this._w,t._h=this._h;var e=this.__coord||[0,0,0,0],n=this.drawVars.co;n.x=e[0],n.y=e[1],n.w=e[2],n.h=e[3],this._flipX&&(n.x=n.x+n.w,n.w=-n.w),this._flipY&&(n.y=n.y+n.h,n.h=-n.h);var i=this._drawContext;this.drawVars.gl=i;var r=this.drawVars.program=this.program;return r.setCurrentEntity(this),r.writeVector("aPosition",this._x,this._y,this._x,this._y+this._h,this._x+this._w,this._y,this._x+this._w,this._y+this._h),r.writeVector("aOrientation",this._origin.x+this._x,this._origin.y+this._y,this._rotation*Math.PI/180),r.writeVector("aLayer",this._globalZ,this._alpha),this.trigger("Draw",this.drawVars),r.addIndices(r.ent_offset),this}},_establishShader:function(t,e){this.program=this._drawLayer.getProgramWrapper(t,e),this.program.registerEntity(this),this.ready=!0}})},{"../core/core.js":10}],43:[function(t,e,n){var i=t("../core/core.js");i.extend({device:{_deviceOrientationCallback:!1,_deviceMotionCallback:!1,_normalizeDeviceOrientation:function(t){var e;window.DeviceOrientationEvent?e={tiltLR:t.gamma,tiltFB:t.beta,dir:t.alpha,motUD:null}:window.OrientationEvent&&(e={tiltLR:90*t.x,tiltFB:-90*t.y,dir:null,motUD:t.z}),i.device._deviceOrientationCallback(e)},_normalizeDeviceMotion:function(t){var e=t.accelerationIncludingGravity,n=e.z>0?1:-1,r={acceleration:e,rawAcceleration:"["+Math.round(e.x)+", "+Math.round(e.y)+", "+Math.round(e.z)+"]",facingUp:n,tiltLR:Math.round(e.x/9.81*-90),tiltFB:Math.round((e.y+9.81)/9.81*90*n)};i.device._deviceMotionCallback(r)},deviceOrientation:function(t){this._deviceOrientationCallback=t,i.support.deviceorientation&&(window.DeviceOrientationEvent?i.addEvent(this,window,"deviceorientation",this._normalizeDeviceOrientation):window.OrientationEvent&&i.addEvent(this,window,"MozOrientation",this._normalizeDeviceOrientation))},deviceMotion:function(t){this._deviceMotionCallback=t,i.support.devicemotion&&window.DeviceMotionEvent&&i.addEvent(this,window,"devicemotion",this._normalizeDeviceMotion)}}})},{"../core/core.js":10}],44:[function(t,e,n){e.exports={_events:{},addEvent:function(t,e,n,i){3===arguments.length&&(i=n,n=e,e=window.document);var r=t[0]||"",o=function(e){i.call(t,e)};this._events[r+e+n+i]||(this._events[r+e+n+i]=o,e.addEventListener(n,o,!1))},removeEvent:function(t,e,n,i){3===arguments.length&&(i=n,n=e,e=window.document);var r=t[0]||"",o=this._events[r+e+n+i];o&&(e.removeEventListener(n,o,!1),delete this._events[r+e+n+i])}}},{}],45:[function(t,e,n){var i=t("../core/core.js");i.s("Keyboard",i.extend.call(i.extend.call(new i.__eventDispatcher,{_evt:{eventName:"",key:0,which:0,originalEvent:null},prepareEvent:function(t){var e=this._evt,n=t.type;return e.eventName="keydown"===n?"KeyDown":"keyup"===n?"KeyUp":n,e.which=null!==t.charCode?t.charCode:t.keyCode,e.key=t.keyCode||t.which,e.originalEvent=t,e},triggerKeyEvent:function(t,e){i.trigger(t,e)},dispatchEvent:function(t){var e=this.prepareEvent(t);this.triggerKey(e.eventName,e)}}),i.__keyboardStateTemplate),{},!1),i.c("Keyboard",{isDown:function(t){return i.s("Keyboard").isKeyDown(t)}})},{"../core/core.js":10}],46:[function(t,e,n){var i=t("../core/core.js"),r=window.document,o=void 0!==r.onwheel?"wheel":void 0!==r.onmousewheel?"mousewheel":"DOMMouseScroll";i._preBind("Load",function(){i.addEvent(this,r.body,"mouseup",i.detectBlur),i.addEvent(i.s("Keyboard"),window,"blur",i.s("Keyboard").resetKeyDown),i.addEvent(i.s("Mouse"),window,"mouseup",i.s("Mouse").resetButtonDown),i.addEvent(i.s("Touch"),window,"touchend",i.s("Touch").resetTouchPoints),i.addEvent(i.s("Touch"),window,"touchcancel",i.s("Touch").resetTouchPoints),i.addEvent(i.s("Keyboard"),"keydown",i.s("Keyboard").processEvent),i.addEvent(i.s("Keyboard"),"keyup",i.s("Keyboard").processEvent),i.addEvent(i.s("Mouse"),i.stage.elem,"mousedown",i.s("Mouse").processEvent),i.addEvent(i.s("Mouse"),i.stage.elem,"mouseup",i.s("Mouse").processEvent),i.addEvent(i.s("Mouse"),i.stage.elem,"mousemove",i.s("Mouse").processEvent),i.addEvent(i.s("Mouse"),i.stage.elem,"click",i.s("Mouse").processEvent),i.addEvent(i.s("Mouse"),i.stage.elem,"dblclick",i.s("Mouse").processEvent),i.addEvent(this,i.stage.elem,"touchstart",this._touchDispatch),i.addEvent(this,i.stage.elem,"touchmove",this._touchDispatch),i.addEvent(this,i.stage.elem,"touchend",this._touchDispatch),i.addEvent(this,i.stage.elem,"touchcancel",this._touchDispatch),i.addEvent(this,i.stage.elem,"touchleave",this._touchDispatch),i.addEvent(i.s("MouseWheel"),i.stage.elem,o,i.s("MouseWheel").processEvent)}),i.bind("Pause",function(){i.s("Keyboard").resetKeyDown(),i.s("Mouse").resetButtonDown()}),i._preBind("CraftyStop",function(){i.s("Keyboard").resetKeyDown(),i.s("Mouse").resetButtonDown()}),i._preBind("CraftyStop",function(){i.removeEvent(this,r.body,"mouseup",i.detectBlur),i.removeEvent(i.s("Keyboard"),window,"blur",i.s("Keyboard").resetKeyDown),i.removeEvent(i.s("Mouse"),window,"mouseup",i.s("Mouse").resetButtonDown),i.removeEvent(i.s("Touch"),window,"touchend",i.s("Touch").resetTouchPoints),i.removeEvent(i.s("Touch"),window,"touchcancel",i.s("Touch").resetTouchPoints),i.removeEvent(i.s("Keyboard"),"keydown",i.s("Keyboard").processEvent),i.removeEvent(i.s("Keyboard"),"keyup",i.s("Keyboard").processEvent),i.stage&&(i.removeEvent(i.s("Mouse"),i.stage.elem,"mousedown",i.s("Mouse").processEvent),i.removeEvent(i.s("Mouse"),i.stage.elem,"mouseup",i.s("Mouse").processEvent),i.removeEvent(i.s("Mouse"),i.stage.elem,"mousemove",i.s("Mouse").processEvent),i.removeEvent(i.s("Mouse"),i.stage.elem,"click",i.s("Mouse").processEvent),i.removeEvent(i.s("Mouse"),i.stage.elem,"dblclick",i.s("Mouse").processEvent),i.removeEvent(this,i.stage.elem,"touchstart",this._touchDispatch),i.removeEvent(this,i.stage.elem,"touchmove",this._touchDispatch),i.removeEvent(this,i.stage.elem,"touchend",this._touchDispatch),i.removeEvent(this,i.stage.elem,"touchcancel",this._touchDispatch),i.removeEvent(this,i.stage.elem,"touchleave",this._touchDispatch),i.removeEvent(i.s("MouseWheel"),i.stage.elem,o,i.s("MouseWheel").processEvent))})},{"../core/core.js":10}],47:[function(t,e,n){var i=t("../core/core.js");i.s("MouseWheel",i.extend.call(new i.__eventDispatcher,{_evt:{eventName:"",direction:0,target:null,clientX:0,clientY:0,realX:0,realY:0,originalEvent:null},_mouseSystem:null,prepareEvent:function(t){var e=this._mouseSystem;e||(this._mouseSystem=e=i.s("Mouse"));var n=this._evt;return n.eventName="MouseWheelScroll",n.direction=t.detail<0||t.wheelDelta>0||t.deltaY<0?1:-1,n.clientX=void 0!==t.clientX?t.clientX:e.lastMouseEvent.clientX,n.clientY=void 0!==t.clientY?t.clientY:e.lastMouseEvent.clientY,i.translatePointerEventCoordinates(t,n),n.target=e.mouseObjs?i.findPointerEventTargetByComponent("Mouse",t):null,n.originalEvent=t,n},dispatchEvent:function(t){var e=this.prepareEvent(t);i.trigger("MouseWheelScroll",e)}}),{},!1),i.s("Mouse",i.extend.call(i.extend.call(new i.__eventDispatcher,{normedEventNames:{mousedown:"MouseDown",mouseup:"MouseUp",dblclick:"DoubleClick",click:"Click",mousemove:"MouseMove"},_evt:{eventName:"",mouseButton:-1,target:null,clientX:0,clientY:0,realX:0,realY:0,originalEvent:null},mouseObjs:0,over:null,prepareEvent:function(t){var e=this._evt,n=t.type;return e.eventName=this.normedEventNames[n]||n,void 0===t.which?e.mouseButton=t.button<2?i.mouseButtons.LEFT:4===t.button?i.mouseButtons.MIDDLE:i.mouseButtons.RIGHT:e.mouseButton=t.which<2?i.mouseButtons.LEFT:2===t.which?i.mouseButtons.MIDDLE:i.mouseButtons.RIGHT,e.clientX=t.clientX,e.clientY=t.clientY,i.translatePointerEventCoordinates(t,e),e.target=this.mouseObjs?i.findPointerEventTargetByComponent("Mouse",t):null,e.originalEvent=t,e},triggerMouseEvent:function(t,e){this.trigger(t,e);var n=this.over,i=e.target;"MouseMove"===t&&n!==i&&(n&&(e.eventName="MouseOut",e.target=n,n.trigger("MouseOut",e),e.eventName="MouseMove",e.target=i),this.over=i,i&&(e.eventName="MouseOver",i.trigger("MouseOver",e),e.eventName="MouseMove")),i&&i.trigger(t,e)},dispatchEvent:function(t){var e=this.prepareEvent(t);this.triggerMouse(e.eventName,e)}}),i.__mouseStateTemplate),{},!1),i.c("Mouse",{required:"AreaMap",init:function(){i.s("Mouse").mouseObjs++},remove:function(){i.s("Mouse").mouseObjs--}}),i.c("MouseDrag",{_dragging:!1,required:"Mouse",events:{MouseDown:"_ondown"},init:function(){this._ondown=this._ondown.bind(this),this._ondrag=this._ondrag.bind(this),this._onup=this._onup.bind(this)},_ondown:function(t){t.mouseButton===i.mouseButtons.LEFT&&this.startDrag(t)},_ondrag:function(t){if(!this._dragging||0===t.realX||0===t.realY)return!1;this.trigger("Dragging",t)},_onup:function(t){t.mouseButton===i.mouseButtons.LEFT&&this.stopDrag(t)},startDrag:function(t){if(!this._dragging)return this._dragging=!0,i.s("Mouse").bind("MouseMove",this._ondrag),i.s("Mouse").bind("MouseUp",this._onup),this.trigger("StartDrag",t||i.s("Mouse").lastMouseEvent),this},stopDrag:function(t){if(this._dragging)return this._dragging=!1,i.s("Mouse").unbind("MouseMove",this._ondrag),i.s("Mouse").unbind("MouseUp",this._onup),this.trigger("StopDrag",t||i.s("Mouse").lastMouseEvent),this}})},{"../core/core.js":10}],48:[function(t,e,n){var i=t("../core/core.js");i.extend({findPointerEventTargetByComponent:function(t,e,n){var r=e.target||e.srcElement||i.stage.elem;n=void 0!==n?n:e.clientY,e=void 0!==e.clientX?e.clientX:e;var o,s,a,u,h,c=null,l=-1/0;if("CANVAS"!==r.nodeName){for(;"string"!=typeof r.id&&-1===r.id.indexOf("ent");)r=r.parentNode;var f=i(parseInt(r.id.replace("ent",""),10));h=i.domHelper.translate(e,n,f._drawLayer),f.__c[t]&&f.isAt(h.x,h.y)&&(c=f)}if(!c)for(var p in i._drawLayers){var d=i._drawLayers[p];if(!(d._pointerEntities<=0))for(h=i.domHelper.translate(e,n,d),u=0,a=(s=i.map.unfilteredSearch({_x:h.x,_y:h.y,_w:1,_h:1})).length;u<a;++u)(o=s[u])._visible&&o._drawLayer===d&&o._globalZ>l&&o.__c[t]&&o.isAt(h.x,h.y)&&(l=o._globalZ,c=o)}return c},translatePointerEventCoordinates:function(t,e){e=e||t;var n=i.domHelper.translate(t.clientX,t.clientY,void 0,this.__pointerPos);e.realX=n.x,e.realY=n.y},__pointerPos:{x:0,y:0}}),i.c("AreaMap",{init:function(){this.has("Renderable")&&this._drawLayer&&this._drawLayer._pointerEntities++},remove:function(t){!t&&this.has("Renderable")&&this._drawLayer&&this._drawLayer._pointerEntities--},events:{LayerAttached:function(t){t._pointerEntities++},LayerDetached:function(t){t._pointerEntities--}},areaMap:function(t){if(arguments.length>1){var e=Array.prototype.slice.call(arguments,0);t=new i.polygon(e)}else t=t.constructor===Array?new i.polygon(t.slice()):t.clone();return t.shift(this._x,this._y),this.mapArea=t,this.attach(this.mapArea),this.trigger("NewAreaMap",t),this}}),i.c("Button",{init:function(){var t=!i.mobile||i.mobile&&!i.multitouch()?"Mouse":"Touch";this.requires(t)}})},{"../core/core.js":10}],49:[function(t,e,n){var i=t("../core/core.js");i.extend({multitouch:function(t){return"boolean"!=typeof t?this._multitouch:(this._multitouch=t,this)},_multitouch:!1,_touchDispatch:function(){var t,e=0,n=0;return function(r){i._multitouch?(t||(t=i.s("Touch")),t.processEvent(r)):function(t){var i,r;"touchstart"===t.type?i="mousedown":"touchmove"===t.type?i="mousemove":"touchend"===t.type?i="mouseup":"touchcancel"===t.type?i="mouseup":"touchleave"===t.type&&(i="mouseup"),t.touches&&t.touches.length?r=t.touches[0]:t.changedTouches&&t.changedTouches.length&&(r=t.changedTouches[0]);var o=document.createEvent("MouseEvent");if(o.initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,t.relatedTarget),r.target.dispatchEvent(o),"mousedown"===i)e=r.clientX,n=r.clientY;else if("mouseup"===i){var s=r.clientX-e,a=r.clientY-n;s*s+a*a<=256&&(i="click",(o=document.createEvent("MouseEvent")).initMouseEvent(i,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,t.relatedTarget),r.target.dispatchEvent(o))}}(r)}}()}),i.s("Touch",i.extend.call(i.extend.call(new i.__eventDispatcher,{normedEventNames:{touchstart:"TouchStart",touchmove:"TouchMove",touchend:"TouchEnd",touchcancel:"TouchCancel"},_evt:{eventName:"",identifier:-1,target:null,entity:null,realX:0,realY:0,originalEvent:null},touchObjs:0,overs:{},prepareEvent:function(t,e){var n=this._evt;return n.eventName=this.normedEventNames[e]||e,n.identifier=t.identifier,i.translatePointerEventCoordinates(t,n),n.target=this.touchObjs?i.findPointerEventTargetByComponent("Touch",t):null,n.entity=n.target,n},triggerTouchEvent:function(t,e){this.trigger(t,e);var n=e.identifier,i=e.target,r=this.overs[n];r&&("TouchMove"===t&&r!==i||"TouchEnd"===t||"TouchCancel"===t)&&(e.eventName="TouchOut",e.target=r,e.entity=r,r.trigger("TouchOut",e),e.eventName=t,e.target=i,e.entity=i,delete this.overs[n]),i&&i.trigger(t,e),i&&("TouchStart"===t||"TouchMove"===t&&r!==i)&&(e.eventName="TouchOver",i.trigger("TouchOver",e),e.eventName=t,this.overs[n]=i)},dispatchEvent:function(t){for(var e,n=t.changedTouches,i=0,r=n.length;i<r;i++)(e=this.prepareEvent(n[i],t.type)).originalEvent=t,this.triggerTouch(e.eventName,e)}}),i.__touchStateTemplate),{},!1),i.c("Touch",{required:"AreaMap",init:function(){i.s("Touch").touchObjs++},remove:function(){i.s("Touch").touchObjs--}})},{"../core/core.js":10}],50:[function(t,e,n){var i=t("../core/core.js");i.__eventDispatcher=function(){},i.__eventDispatcher.prototype={processEvent:function(t){return this.dispatchEvent(t),this.preventBubbling(t)},dispatchEvent:function(t){},preventBubbling:function(t){if(i.selected&&!(8===t.key||t.key>=112&&t.key<=135))return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,!(!t.target||"INPUT"!==t.target.nodeName&&"TEXTAREA"!==t.target.nodeName)||(t.preventDefault?t.preventDefault():t.returnValue=!1,!1)}},i.extend({selected:!0,detectBlur:function(t){var e=t.clientX>i.stage.x&&t.clientX<i.stage.x+i.viewport.width&&t.clientY>i.stage.y&&t.clientY<i.stage.y+i.viewport.height;!i.selected&&e&&i.trigger("CraftyFocus"),i.selected&&!e&&i.trigger("CraftyBlur"),i.selected=e}})},{"../core/core.js":10}],51:[function(t,e,n){var i=t("../core/core.js");i.extend({diamondIso:{_tile:{width:0,height:0},getTileDimensions:function(){return{w:this._tile.width,h:this._tile.height}},_map:{width:0,height:0},_origin:{x:0,y:0},_tiles:[],getTile:function(t,e,n){return this._tiles[t][e][n]},init:function(t,e,n,i,r,o){this._tile.width=parseInt(t,10),this._tile.height=parseInt(e,10)||parseInt(t,10)/2,this._tile.r=this._tile.width/this._tile.height,this._map.width=parseInt(n,10),this._map.height=parseInt(i,10)||parseInt(n,10);for(var s=0;s<n;s++){this._tiles[s]=Array();for(var a=0;a<i;a++)this._tiles[s][a]=Array()}return this.x=parseInt(r,10)||0,this.y=parseInt(o,10)||0,this.layerZLevel=n+i+1,this},place:function(t,e,n,i){var r=this.pos2px(e,n),o=t.h/this._tile.height;t.x=r.x,t.y=r.y-(o-2)*this._tile.height-this._tile.height*i,t.z=this.getZAtLoc(e,n,i);for(var s=0;s<=o-2;s++){var a=this._tiles[e][n][i+s];a&&a!==t&&a.destroy(),this._tiles[e][n][i+s]=t}return this},detachTile:function(t){for(var e=0;e<this._map.width;e++)for(var n=0;n<this._map.height;n++)for(var i=this._tiles[e][n].length,r=0;r<i;r++)if(this._tiles[e][n][r]&&t===this._tiles[e][n][r]){for(var o=t.h/this._tile.height,s=0;s<o;s++)this._tiles[e][n][r+s]=void 0;return{x:e,y:n,z:r}}return!1},centerAt:function(t,e){var n=this.pos2px(t,e);i.viewport.x=-n.x+i.viewport.width/2-this._tile.width,i.viewport.y=-n.y+i.viewport.height/2},getZAtLoc:function(t,e,n){return this.layerZLevel*n+t+e},pos2px:function(t,e){return{x:this.x+(t-e-1)*this._tile.width/2,y:this.y+(t+e)*this._tile.height/2}},px2pos:function(t,e){var n=(e-this.y)/this._tile.height,i=(t-this.x)/this._tile.width,r=n+i,o=n-i,s=r>0&&r<this._map.width,a=o>0&&o<this._map.height;if(s&&a)return{x:~~r,y:~~o}},getOverlappingTiles:function(t,e){var n=this.px2pos(t,e),i=[],r=~~n.x,o=~~n.y,s=this._map.width-r,a=this._map.height-o,u=Math.min(s,a),h=this._tiles[r][o][1];h&&i.push(h);for(var c=1;c<u;c++){var l=this._tiles[r+c][o+c][c];l&&i.push(l)}return i},polygon:function(t){t.requires("Collision");var e=[0,t.h-0-this._tile.height/2,0-this._tile.width/2,t.h-0-0,0-this._tile.width,t.h-0-this._tile.height/2,0-this._tile.width/2,t.h-0-this._tile.height];return new i.polygon(e)}}})},{"../core/core.js":10}],52:[function(t,e,n){var i=t("../core/core.js");i.extend({isometric:{_tile:{width:0,height:0},_elements:{},_pos:{x:0,y:0},_z:0,size:function(t,e){return this._tile.width=t,this._tile.height=e>0?e:t/2,this},place:function(t,e,n,r){var o=this.pos2px(t,e);return o.top-=n*(this._tile.height/2),r.x=o.left+i.viewport._x,r.y=o.top+i.viewport._y,r.z+=n,this},pos2px:function(t,e){return{left:t*this._tile.width+(1&e)*(this._tile.width/2),top:e*this._tile.height/2}},px2pos:function(t,e){return{x:-Math.ceil(-t/this._tile.width-.5*(1&e)),y:e/this._tile.height*2}},centerAt:function(t,e){if("number"==typeof t&&"number"==typeof e){var n=this.pos2px(t,e);return i.viewport._x=-n.left+i.viewport.width/2-this._tile.width/2,i.viewport._y=-n.top+i.viewport.height/2-this._tile.height/2,this}return{top:-i.viewport._y+i.viewport.height/2-this._tile.height/2,left:-i.viewport._x+i.viewport.width/2-this._tile.width/2}},area:function(){var t=this.centerAt(),e=this.px2pos(-t.left+i.viewport.width/2,-t.top+i.viewport.height/2),n=this.px2pos(-t.left-i.viewport.width/2,-t.top-i.viewport.height/2);return{x:{start:e.x,end:n.x},y:{start:e.y,end:n.y}}}}})},{"../core/core.js":10}],53:[function(t,e,n){var i=t("../core/core.js"),r=window.document;i.extend({audio:{sounds:{},supported:null,codecs:{ogg:'audio/ogg; codecs="vorbis"',wav:'audio/wav; codecs="1"',webma:'audio/webm; codecs="vorbis"',mp3:'audio/mpeg; codecs="mp3"',m4a:'audio/mp4; codecs="mp4a.40.2"'},volume:1,muted:!1,paused:!1,playCheck:null,_canPlay:function(){if(this.supported={},i.support.audio){var t,e=this.audioElement();for(var n in this.codecs)t=e.canPlayType(this.codecs[n]),this.supported[n]=""!==t&&"no"!==t}},supports:function(t){return null===this.supported&&this._canPlay(),!!this.supported[t]},audioElement:function(){return"undefined"!=typeof Audio?new Audio(""):r.createElement("audio")},create:function(t,e){var n=e.substr(e.lastIndexOf(".")+1).toLowerCase();if(!this.supports(n))return!1;var r=this.audioElement();return r.id=t,r.preload="auto",r.volume=i.audio.volume,r.src=e,i.asset(e,r),this.sounds[t]={obj:r,played:0,volume:i.audio.volume},this.sounds[t]},add:function(t,e){if(i.support.audio){var n,r;if(1===arguments.length&&"object"==typeof t)for(var o in t)for(n in t[o])if(r=i.audio.create(o,t[o][n]))break;if("string"==typeof t&&("string"==typeof e&&(r=i.audio.create(t,e)),"object"==typeof e))for(n in e)if(r=i.audio.create(t,e[n]))break;return r}},play:function(t,e,n){if(0!==e&&i.support.audio&&this.sounds[t]){var r=this.sounds[t],o=this.getOpenChannel();if(!o)return null;o.id=t,o.repeat=e;var s=o.obj;return o.volume=r.volume=r.obj.volume=n||i.audio.volume,s.volume=r.volume,s.src=r.obj.src,this.muted&&(s.volume=0),s.play(),r.played++,o.onEnd=function(){r.played<o.repeat||-1===o.repeat?(this.currentTime&&(this.currentTime=0),this.play(),r.played++):(o.active=!1,this.pause(),this.removeEventListener("ended",o.onEnd,!0),this.currentTime=0,i.trigger("SoundComplete",{id:o.id}))},s.addEventListener("ended",o.onEnd,!0),s}},maxChannels:7,setChannels:function(t){this.maxChannels=t,t<this.channels.length&&(this.channels.length=t)},channels:[],getOpenChannel:function(){for(var t=0;t<this.channels.length;t++){var e=this.channels[t];if(!1===e.active||e.obj.ended&&e.repeat<=this.sounds[e.id].played)return e.active=!0,e}if(t<this.maxChannels){var n={obj:this.audioElement(),active:!0,_is:function(t){return this.id===t&&this.active}};return this.channels.push(n),n}return null},remove:function(t){if(i.support.audio){var e,n,r=i.paths().audio;if(t)this.sounds[t]&&(n=(e=this.sounds[t]).obj.src.split("/").pop(),i.audio.stop(t),delete i.assets[r+n],delete i.assets[e.obj.src],delete i.audio.sounds[t]);else for(var o in this.sounds)n=(e=this.sounds[o]).obj.src.split("/").pop(),i.audio.stop(t),delete i.assets[r+n],delete i.assets[e.obj.src],delete i.audio.sounds[t]}},stop:function(t){if(i.support.audio){var e;for(var n in this.channels)e=this.channels[n],(!t&&e.active||e._is(t))&&(e.active=!1,e.obj.pause())}},_mute:function(t){if(i.support.audio){var e;for(var n in this.channels)(e=this.channels[n]).obj.volume=t?0:e.volume;this.muted=t}},toggleMute:function(){this.muted?this._mute(!1):this._mute(!0)},mute:function(){this._mute(!0)},unmute:function(){this._mute(!1)},pause:function(t){if(i.support.audio&&t&&this.sounds[t]){var e;for(var n in this.channels)(e=this.channels[n])._is(t)&&!e.obj.paused&&e.obj.pause()}},unpause:function(t){if(i.support.audio&&t&&this.sounds[t]){var e;for(var n in this.channels)(e=this.channels[n])._is(t)&&e.obj.paused&&e.obj.play()}},togglePause:function(t){if(i.support.audio&&t&&this.sounds[t]){var e;for(var n in this.channels)(e=this.channels[n])._is(t)&&(e.obj.paused?e.obj.play():e.obj.pause())}},isPlaying:function(t){if(!i.support.audio)return!1;for(var e in this.channels)if(this.channels[e]._is(t))return!0;return!1}}})},{"../core/core.js":10}],54:[function(t,e,n){var i=t("../core/core.js"),r=Math.PI/180;i.c("2D",{_x:0,_y:0,_w:0,_h:0,_z:0,_globalZ:null,_rotation:0,_origin:null,_mbr:null,_entry:null,_children:null,_parent:null,properties:{x:{set:function(t){this._setter2d("_x",t)},get:function(){return this._x},configurable:!0,enumerable:!0},_x:{enumerable:!1},y:{set:function(t){this._setter2d("_y",t)},get:function(){return this._y},configurable:!0,enumerable:!0},_y:{enumerable:!1},w:{set:function(t){this._setter2d("_w",t)},get:function(){return this._w},configurable:!0,enumerable:!0},_w:{enumerable:!1},h:{set:function(t){this._setter2d("_h",t)},get:function(){return this._h},configurable:!0,enumerable:!0},_h:{enumerable:!1},z:{set:function(t){this._setter2d("_z",t)},get:function(){return this._z},configurable:!0,enumerable:!0},_z:{enumerable:!1},rotation:{set:function(t){this._setter2d("_rotation",t)},get:function(){return this._rotation},configurable:!0,enumerable:!0},_rotation:{enumerable:!1},ox:{set:function(t){var e=t-this._origin.x;this._setter2d("_x",e)},get:function(){return this._x+this._origin.x},configurable:!0,enumerable:!0},oy:{set:function(t){var e=t-this._origin.y;this._setter2d("_y",e)},get:function(){return this._y+this._origin.y},configurable:!0,enumerable:!0}},init:function(){this._globalZ=this[0],this._origin={x:0,y:0},this._bx1=0,this._bx2=0,this._by1=0,this._by2=0,this._children=[],this._entry=i.map.insert(this),this.bind("Move",function(t){var e=this._cbr||this._mbr||this;this._entry.update(e),this._children.length>0&&this._cascade(t)}),this.bind("Rotate",function(t){var e=this._cbr||this._mbr||this;this._entry.update(e),this._children.length>0&&this._cascadeRotation(t)}),this.bind("Remove",function(){if(this._children){for(var t=0;t<this._children.length;t++)delete this._children[t]._parent,this._children[t].destroy&&this._children[t].destroy();this._children=[]}this._parent&&this._parent.detach(this),i.map.remove(this._entry),this.detach()})},events:{Freeze:function(){i.map.remove(this._entry)},Unfreeze:function(){this._entry=i.map.insert(this,this._entry)}},offsetBoundary:function(t,e,n,i){return 1===arguments.length&&(e=n=i=t),this._bx1=t,this._bx2=n,this._by1=e,this._by2=i,this.trigger("BoundaryOffset"),this._calculateMBR(),this},_calculateMBR:function(){var t=this._origin.x+this._x,e=this._origin.y+this._y,n=-this._rotation*r,i=this._x-this._bx1-t,o=this._x+this._w+this._bx2-t,s=this._y-this._by1-e,a=this._y+this._h+this._by2-e,u=Math.cos(n),h=Math.sin(n),c=i*(u=u<1e-10&&u>-1e-10?0:u)+s*(h=h<1e-10&&h>-1e-10?0:h),l=-i*h+s*u,f=o*u+s*h,p=-o*h+s*u,d=o*u+a*h,y=-o*h+a*u,v=i*u+a*h,g=-i*h+a*u,_=Math.floor(Math.min(c,f,d,v)+t),m=Math.floor(Math.min(l,p,y,g)+e),x=Math.ceil(Math.max(c,f,d,v)+t),w=Math.ceil(Math.max(l,p,y,g)+e);if(this._mbr?(this._mbr._x=_,this._mbr._y=m,this._mbr._w=x-_,this._mbr._h=w-m):this._mbr={_x:_,_y:m,_w:x-_,_h:w-m},this._cbr){var b=this._cbr,S=b.cx,C=b.cy,k=b.r,P=t+(S+this._x-t)*u+(C+this._y-e)*h,M=e-(S+this._x-t)*h+(C+this._y-e)*u;b._x=Math.min(P-k,_),b._y=Math.min(M-k,m),b._w=Math.max(P+k,x)-b._x,b._h=Math.max(M+k,w)-b._y}},_rotate:function(t){var e=this._rotation-t;0!==e&&(this._rotation=t,this._calculateMBR(),this.trigger("Rotate",e))},area:function(){return this._w*this._h},intersect:function(t,e,n,i){var r,o=this._mbr||this;return r="object"==typeof t?t:{_x:t,_y:e,_w:n,_h:i},o._x<r._x+r._w&&o._x+o._w>r._x&&o._y<r._y+r._h&&o._y+o._h>r._y},within:function(t,e,n,i){var r,o=this._mbr||this;return(r="object"==typeof t?t:{_x:t,_y:e,_w:n,_h:i})._x<=o._x&&r._x+r._w>=o._x+o._w&&r._y<=o._y&&r._y+r._h>=o._y+o._h},contains:function(t,e,n,i){var r,o=this._mbr||this;return(r="object"==typeof t?t:{_x:t,_y:e,_w:n,_h:i})._x>=o._x&&r._x+r._w<=o._x+o._w&&r._y>=o._y&&r._y+r._h<=o._y+o._h},pos:function(t){return t=t||{},t._x=this._x,t._y=this._y,t._w=this._w,t._h=this._h,t},mbr:function(t){return t=t||{},this._mbr?(t._x=this._mbr._x,t._y=this._mbr._y,t._w=this._mbr._w,t._h=this._mbr._h,t):this.pos(t)},isAt:function(t,e){if(this.mapArea)return this.mapArea.containsPoint(t,e);if(this.map)return this.map.containsPoint(t,e);var n=this._mbr||this;return n._x<=t&&n._x+n._w>=t&&n._y<=e&&n._y+n._h>=e},move:function(t,e){return"n"===t.charAt(0)&&(this.y-=e),"s"===t.charAt(0)&&(this.y+=e),"e"!==t&&"e"!==t.charAt(1)||(this.x+=e),"w"!==t&&"w"!==t.charAt(1)||(this.x-=e),this},shift:function(t,e,n,i){return(t||e)&&this._setPosition(this._x+t,this._y+e),n&&(this.w+=n),i&&(this.h+=i),this},_cascade:function(t){if(t)for(var e,n=0,i=this._children,r=i.length,o=this._x-t._x,s=this._y-t._y,a=this._w-t._w,u=this._h-t._h;n<r;++n)(e=i[n]).__frozen||e.shift(o,s,a,u)},_cascadeRotation:function(t){if(t){var e,n=0,i=this._children,o=i.length,s=t*r,a=Math.cos(s),u=Math.sin(s);a=-1e-10<a&&a<1e-10?0:a,u=-1e-10<u&&u<1e-10?0:u;for(var h=this._origin.x+this._x,c=this._origin.y+this._y;n<o;++n)(e=i[n]).__frozen||"rotate"in e&&e.rotate(t,h,c,a,u)}},attach:function(){for(var t,e=0,n=arguments,i=arguments.length;e<i;++e)(t=n[e])._parent&&t._parent.detach(t),t._parent=this,this._children.push(t);return this},detach:function(t){var e;if(!t){for(e=0;e<this._children.length;e++)this._children[e]._parent=null;return this._children=[],this}for(e=0;e<this._children.length;e++)this._children[e]===t&&this._children.splice(e,1);return t._parent=null,this},origin:function(t,e){if("string"==typeof t)if("centre"===t||"center"===t||-1===t.indexOf(" "))t=this._w/2,e=this._h/2;else{var n=t.split(" ");"top"===n[0]?e=0:"bottom"===n[0]?e=this._h:"middle"!==n[0]&&"center"!==n[1]&&"centre"!==n[1]||(e=this._h/2),"center"===n[1]||"centre"===n[1]||"middle"===n[1]?t=this._w/2:"left"===n[1]?t=0:"right"===n[1]&&(t=this._w)}return this._origin.x=t,this._origin.y=e,this.trigger("OriginChanged"),this},rotate:function(t,e,n,i,r){var o,s;o=(this._x+this._origin.x-e)*i+(this._y+this._origin.y-n)*r+(e-this._origin.x),s=(this._y+this._origin.y-n)*i-(this._x+this._origin.x-e)*r+(n-this._origin.y),this._setter2d("_rotation",this._rotation-t),this._setter2d("_x",o),this._setter2d("_y",s)},_setPosition:function(t,e){if(t!==this._x||e!==this._y){var n=i.rectManager._pool.copy(this),r=this._mbr;r&&(r._x-=this._x-t,r._y-=this._y-e,this._cbr&&(this._cbr._x-=this._x-t,this._cbr._y-=this._y-e)),this._x=t,this._y=e,this.trigger("Move",n),this.trigger("Invalidate"),i.rectManager._pool.recycle(n)}},_setter2d:function(t,e){if(this[t]!==e){var n,r=i.rectManager._pool.copy(this);if("_rotation"===t)this._rotate(e);else if("_x"===t||"_y"===t)(n=this._mbr)&&(n[t]-=this[t]-e,this._cbr&&(this._cbr[t]-=this[t]-e)),this[t]=e,this.trigger("Move",r);else if("_h"===t||"_w"===t){n=this._mbr;var o=this[t];this[t]=e,n&&this._calculateMBR(),"_w"===t?this.trigger("Resize",{axis:"w",amount:e-o}):"_h"===t&&this.trigger("Resize",{axis:"h",amount:e-o}),this.trigger("Move",r)}else if("_z"===t){var s=e<<0;e=e===s?s:s+1,this._globalZ=1e5*e+this[0],this[t]=e,this.trigger("Reorder")}this[t]=e,this.trigger("Invalidate"),i.rectManager._pool.recycle(r)}}}),i.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0)),this.points=t},i.polygon.prototype={containsPoint:function(t,e){var n,i,r=this.points,o=r.length/2,s=!1;for(n=0,i=o-1;n<o;i=n++)r[2*n+1]>e!=r[2*i+1]>e&&t<(r[2*i]-r[2*n])*(e-r[2*n+1])/(r[2*i+1]-r[2*n+1])+r[2*n]&&(s=!s);return s},shift:function(t,e){for(var n=0,i=this.points,r=i.length;n<r;n+=2)i[n]+=t,i[n+1]+=e},clone:function(){return new i.polygon(this.points.slice(0))},rotate:function(t,e,n,i,r){for(var o,s,a=0,u=this.points,h=u.length;a<h;a+=2)o=e+(u[a]-e)*i+(u[a+1]-n)*r,s=n-(u[a]-e)*r+(u[a+1]-n)*i,u[a]=o,u[a+1]=s},intersectRay:function(t,e){for(var n,i,r,o,s,a,u,h,c,l=this.points,f=1/0,p=t._x,d=e.x,y=t._y,v=e.y,g=0,_=l.length,m=l[_-2],x=l[_-1];g<_;g+=2)a=l[g],i=(m-p)*(c=(h=l[g+1])-x)-(x-y)*(u=a-m),o=(m-p)*v-(x-y)*d,0!==(s=d*c-v*u)?(n=i/s,(r=o/s)>=0&&r<=1&&n>=0&&n<f&&(f=n)):0!==i&&0!==o||((n=(m-p)*d+(x-y)*v)>=0&&n<f&&(f=n),(n=(a-p)*d+(h-y)*v)>=0&&n<f&&(f=n)),m=a,x=h;return f}},i.circle=function(t,e,n){this.x=t,this.y=e,this.radius=n,this.points=[];for(var i,r=0;r<16;r+=2)i=r*Math.PI/8,this.points[r]=this.x+Math.sin(i)*n,this.points[r+1]=this.y+Math.cos(i)*n},i.circle.prototype={containsPoint:function(t,e){var n=this.radius,i=this.x-t,r=this.y-e;return i*i+r*r<n*n},shift:function(t,e){this.x+=t,this.y+=e;for(var n=0,i=this.points,r=i.length;n<r;n+=2)i[n]+=t,i[n+1]+=e},rotate:function(){}},i.matrix=function(t){this.mtx=t,this.width=t[0].length,this.height=t.length},i.matrix.prototype={x:function(t){if(this.width===t.height){for(var e=[],n=0;n<this.height;n++){e[n]=[];for(var r=0;r<t.width;r++){for(var o=0,s=0;s<this.width;s++)o+=this.mtx[n][s]*t.mtx[s][r];e[n][r]=o}}return new i.matrix(e)}},e:function(t,e){return t<1||t>this.mtx.length||e<1||e>this.mtx[0].length?null:this.mtx[t-1][e-1]}}},{"../core/core.js":10}],55:[function(t,e,n){var i=t("../core/core.js"),r=Math.PI/180;i.extend({raycast:function(t,e){for(var n,r,o="obj",s=1/0,a=!0,u=2,h=arguments.length;u<h;++u)"number"===(r=typeof(n=arguments[u]))?s=n+1e-6:"string"===r?o=n:"boolean"===r&&(a=n);var c=t._x,l=t._y,f=e.x,p=e.y,d={},y=[];if(s<0){var v=null,g=1/0;i.map.traverseRay(t,e,function(n,i){if(v&&g<i)return y.push({obj:v,distance:g,x:c+g*f,y:l+g*p}),v=null,g=1/0,!0;if(n.map&&n.__c[o]&&!d[n[0]]){d[n[0]]=!0;var r=n.map.intersectRay(t,e);r<g&&(v=n,g=r)}}),v&&y.push({obj:v,distance:g,x:c+g*f,y:l+g*p})}else i.map.traverseRay(t,e,function(n,i){if(i>s)return!0;if(n.map&&n.__c[o]&&!d[n[0]]){d[n[0]]=!0;var r=n.map.intersectRay(t,e);r<s&&y.push({obj:n,distance:r,x:c+r*f,y:l+r*p})}});return a&&y.sort(function(t,e){return t.distance-e.distance}),y}}),i.c("Collision",{init:function(){this.requires("2D"),this._collisionData={},this.collision()},remove:function(){this._cbr=null,this.unbind("Resize",this._resizeMap),this.unbind("Resize",this._checkBounds)},collision:function(t){if(this.unbind("Resize",this._resizeMap),this.unbind("Resize",this._checkBounds),t){if(arguments.length>1){var e=Array.prototype.slice.call(arguments,0);t=new i.polygon(e)}else t=t.constructor===Array?new i.polygon(t.slice()):t.clone();this._findBounds(t.points)}else t=new i.polygon([0,0,this._w,0,this._w,this._h,0,this._h]),this.bind("Resize",this._resizeMap),this._cbr=null;return this.rotation&&t.rotate(this.rotation,this._origin.x,this._origin.y,Math.cos(-this.rotation*r),Math.sin(-this.rotation*r)),this.map=t,this.attach(this.map),this.map.shift(this._x,this._y),this.trigger("NewHitbox",t),this},cbr:function(t){return t=t||{},this._cbr?(t._x=this._cbr._x,t._y=this._cbr._y,t._w=this._cbr._w,t._h=this._cbr._h,t):this.mbr(t)},_findBounds:function(t){for(var e=1/0,n=-1/0,i=1/0,r=-1/0,o=t.length,s=0;s<o;s+=2)t[s]<e&&(e=t[s]),t[s]>n&&(n=t[s]),t[s+1]<i&&(i=t[s+1]),t[s+1]>r&&(r=t[s+1]);var a={cx:(e+n)/2,cy:(i+r)/2,r:Math.sqrt((n-e)*(n-e)+(r-i)*(r-i))/2};return e>=0&&i>=0&&(this._checkBounds=function(){null===this._cbr&&this._w<n||this._h<r?(this._cbr=a,this._calculateMBR()):this._cbr&&(this._cbr=null,this._calculateMBR())},this.bind("Resize",this._checkBounds)),e>=0&&i>=0&&n<=this._w&&r<=this._h?(this._cbr=null,!1):(this._cbr=a,this._calculateMBR(),!0)},_resizeMap:function(t){var e,n,i=this.rotation*r,o=this.map.points;"w"===t.axis?(i?(e=t.amount*Math.cos(i),n=t.amount*Math.sin(i)):(e=t.amount,n=0),o[2]+=e,o[3]+=n):(i?(n=t.amount*Math.cos(i),e=-t.amount*Math.sin(i)):(e=0,n=t.amount),o[6]+=e,o[7]+=n),o[4]+=e,o[5]+=n},_collisionHitDupes:[],_collisionHitResults:[],hit:function(t,e){var n=this._cbr||this._mbr||this,r=this._collisionHitResults;r.length=0;var o=(r=i.map.unfilteredSearch(n,r)).length;if(!o)return null;var s,a,u=0,h=this._collisionHitDupes;for(e=e||[],h.length=0;u<o;++u)if((a=r[u])&&(s=a[0],!h[s]&&this[0]!==s&&a.__c[t]))if(h[s]=a,a.map){var c=this._SAT(this.map,a.map);c&&(e.push(c),c.obj=a,c.type="SAT")}else i.rectManager.overlap(n,a._cbr||a._mbr||a)&&e.push({obj:a,type:"MBR"});return e.length?e:null},onHit:function(t,e,n){var i=!1;return this.bind("UpdateFrame",function(){var r=this.hit(t);r?(e.call(this,r,!i),i=!0):i&&("function"==typeof n&&n.call(this),i=!1)}),this},_createCollisionHandler:function(t,e){return function(){var n=this.hit(t);if(!0===e.occurring){if(null!==n)return;e.occurring=!1,this.trigger("HitOff",t)}else null!==n&&(e.occurring=!0,this.trigger("HitOn",n))}},checkHits:function(){var t=arguments,e=0;for(1===t.length&&(t=t[0].split(/\s*,\s*/));e<t.length;++e){var n=t[e],i=this._collisionData[n];void 0===i&&(this._collisionData[n]=i={occurring:!1,handler:null},i.handler=this._createCollisionHandler(n,i),this.bind("UpdateFrame",i.handler))}return this},ignoreHits:function(){var t,e=arguments,n=0;if(0===e.length){for(t in this._collisionData)this.unbind("UpdateFrame",t.handler);this._collisionData={}}for(1===e.length&&(e=e[0].split(/\s*,\s*/));n<e.length;++n){var i=e[n];void 0!==(t=this._collisionData[i])&&(this.unbind("UpdateFrame",t.handler),delete this._collisionData[i])}return this},resetHitChecks:function(){var t,e=arguments,n=0;if(0===e.length)for(t in this._collisionData)this._collisionData[t].occurring=!1;for(1===e.length&&(e=e[0].split(/\s*,\s*/));n<e.length;++n){var i=e[n];void 0!==(t=this._collisionData[i])&&(t.occurring=!1)}return this},_SAT:function(t,e){for(var n,i,r,o,s,a,u,h,c,l=0,f=t.points,p=e.points,d=f.length/2,y=p.length/2,v=0,g=0,_=-1/0,m=null,x=null;l<d;l++){for(c=l===d-1?0:l+1,v=-(f[2*l+1]-f[2*c+1]),g=f[2*l]-f[2*c],v/=i=Math.sqrt(v*v+g*g),g/=i,r=o=1/0,s=a=-1/0,n=0;n<d;++n)(h=f[2*n]*v+f[2*n+1]*g)>s&&(s=h),h<r&&(r=h);for(n=0;n<y;++n)(h=p[2*n]*v+p[2*n+1]*g)>a&&(a=h),h<o&&(o=h);if(r<o?(u=o-s,v=-v,g=-g):u=r-a,u>=0)return!1;u>_&&(_=u,m=v,x=g)}for(l=0;l<y;l++){for(c=l===y-1?0:l+1,v=-(p[2*l+1]-p[2*c+1]),g=p[2*l]-p[2*c],v/=i=Math.sqrt(v*v+g*g),g/=i,r=o=1/0,s=a=-1/0,n=0;n<d;++n)(h=f[2*n]*v+f[2*n+1]*g)>s&&(s=h),h<r&&(r=h);for(n=0;n<y;++n)(h=p[2*n]*v+p[2*n+1]*g)>a&&(a=h),h<o&&(o=h);if(r<o?(u=o-s,v=-v,g=-g):u=r-a,u>=0)return!1;u>_&&(_=u,m=v,x=g)}return{overlap:_,nx:m,ny:x}}})},{"../core/core.js":10}],56:[function(t,e,n){var i=t("../core/core.js");i.math={abs:function(t){return t<0?-t:t},amountOf:function(t,e,n){return e<n?(t-e)/(n-e):(t-n)/(e-n)},clamp:function(t,e,n){return t>n?n:t<e?e:t},degToRad:function(t){return t*Math.PI/180},distance:function(t,e,n,r){var o=i.math.squaredDistance(t,e,n,r);return Math.sqrt(parseFloat(o))},lerp:function(t,e,n){return t+(e-t)*n},negate:function(t){return Math.random()<t?-1:1},radToDeg:function(t){return 180*t/Math.PI},randomElementOfArray:function(t){return t[Math.floor(t.length*Math.random())]},randomInt:function(t,e){return t+Math.floor((1+e-t)*Math.random())},randomNumber:function(t,e){return t+(e-t)*Math.random()},squaredDistance:function(t,e,n,i){return(t-n)*(t-n)+(e-i)*(e-i)},withinRange:function(t,e,n){return t>=e&&t<=n}},i.math.Vector2D=function(){function t(e,n){if(e instanceof t)this.x=e.x,this.y=e.y;else if(2===arguments.length)this.x=e,this.y=n;else if(arguments.length>0)throw"Unexpected number of arguments for Vector2D()"}return t.prototype.x=0,t.prototype.y=0,t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.angleBetween=function(t){return Math.atan2(this.x*t.y-this.y*t.x,this.x*t.x+this.y*t.y)},t.prototype.angleTo=function(t){return Math.atan2(t.y-this.y,t.x-this.x)},t.prototype.clone=function(){return new t(this)},t.prototype.distance=function(t){return Math.sqrt((t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y))},t.prototype.distanceSq=function(t){return(t.x-this.x)*(t.x-this.x)+(t.y-this.y)*(t.y-this.y)},t.prototype.divide=function(t){return this.x/=t.x,this.y/=t.y,this},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},t.prototype.crossProduct=function(t){return this.x*t.y-this.y*t.x},t.prototype.equals=function(e){return e instanceof t&&this.x===e.x&&this.y===e.y},t.prototype.perpendicular=function(e){return(e=e||new t).setValues(-this.y,this.x)},t.prototype.getNormal=function(e,n){return(n=n||new t).setValues(e.y-this.y,this.x-e.x).normalize()},t.prototype.isZero=function(){return 0===this.x&&0===this.y},t.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.magnitudeSq=function(){return this.x*this.x+this.y*this.y},t.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);return 0===t?(this.x=1,this.y=0):(this.x/=t,this.y/=t),this},t.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this},t.prototype.scaleToMagnitude=function(t){var e=t/this.magnitude();return this.x*=e,this.y*=e,this},t.prototype.setValues=function(e,n){return e instanceof t?(this.x=e.x,this.y=e.y):(this.x=e,this.y=n),this},t.prototype.subtract=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.toString=function(){return"Vector2D("+this.x+", "+this.y+")"},t.prototype.translate=function(t,e){return void 0===e&&(e=t),this.x+=t,this.y+=e,this},t.tripleProduct=function(t,e,n,r){r=r||new i.math.Vector2D;var o=t.dotProduct(n),s=e.dotProduct(n);return r.setValues(e.x*o-t.x*s,e.y*o-t.y*s)},t}(),i.math.Matrix2D=function(){function t(e,n,i,r,o,s){if(e instanceof t)this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,this.f=e.f;else if(6===arguments.length)this.a=e,this.b=n,this.c=i,this.d=r,this.e=o,this.f=s;else if(arguments.length>0)throw"Unexpected number of arguments for Matrix2D()"}return t.prototype.a=1,t.prototype.b=0,t.prototype.c=0,t.prototype.d=1,t.prototype.e=0,t.prototype.f=0,t.prototype.apply=function(t){var e=t.x;return t.x=e*this.a+t.y*this.c+this.e,t.y=e*this.b+t.y*this.d+this.f,t},t.prototype.clone=function(){return new t(this)},t.prototype.combine=function(t){var e=this.a;return this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,e=this.c,this.c=e*t.a+this.d*t.c,this.d=e*t.b+this.d*t.d,e=this.e,this.e=e*t.a+this.f*t.c+t.e,this.f=e*t.b+this.f*t.d+t.f,this},t.prototype.equals=function(e){return e instanceof t&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d&&this.e===e.e&&this.f===e.f},t.prototype.determinant=function(){return this.a*this.d-this.b*this.c},t.prototype.invert=function(){var t=this.determinant();if(0!==t){var e={a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f};this.a=e.d/t,this.b=-e.b/t,this.c=-e.c/t,this.d=e.a/t,this.e=(e.c*e.f-e.e*e.d)/t,this.f=(e.e*e.b-e.a*e.f)/t}return this},t.prototype.isIdentity=function(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.e&&0===this.f},t.prototype.isInvertible=function(){return 0!==this.determinant()},t.prototype.preRotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a;return this.a=e*i-n*this.b,this.b=n*i+e*this.b,i=this.c,this.c=e*i-n*this.d,this.d=n*i+e*this.d,this},t.prototype.preScale=function(t,e){return void 0===e&&(e=t),this.a*=t,this.b*=e,this.c*=t,this.d*=e,this},t.prototype.preTranslate=function(t,e){return"number"==typeof t?(this.e+=t,this.f+=e):(this.e+=t.x,this.f+=t.y),this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),i=this.a;return this.a=e*i-n*this.b,this.b=n*i+e*this.b,i=this.c,this.c=e*i-n*this.d,this.d=n*i+e*this.d,i=this.e,this.e=e*i-n*this.f,this.f=n*i+e*this.f,this},t.prototype.scale=function(t,e){return void 0===e&&(e=t),this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this},t.prototype.setValues=function(e,n,i,r,o,s){return e instanceof t?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,this.f=e.f):(this.a=e,this.b=n,this.c=i,this.d=r,this.e=o,this.f=s),this},t.prototype.toString=function(){return"Matrix2D(["+this.a+", "+this.c+", "+this.e+"] ["+this.b+", "+this.d+", "+this.f+"] [0, 0, 1])"},t.prototype.translate=function(t,e){return"number"==typeof t?(this.e+=this.a*t+this.c*e,this.f+=this.b*t+this.d*e):(this.e+=this.a*t.x+this.c*t.y,this.f+=this.b*t.x+this.d*t.y),this},t}()},{"../core/core.js":10}],57:[function(t,e,n){var i=t("../core/core.js"),r=function(t,e,n,r){var o=e+n,s="_"+o,a={key:"",oldValue:0};r?i.defineField(t,o,function(){return this[s]},function(t){var e=this[s];t!==e&&(this[s]=t,a.key=o,a.oldValue=e,this.trigger("MotionChange",a))}):i.defineField(t,o,function(){return this[s]},function(t){}),Object.defineProperty(t,s,{value:0,writable:!0,enumerable:!1,configurable:!1})},o=function(t,e,n,r){var o=e+"x",s=e+"y",a="_"+o,u="_"+s;return n?(i.defineField(r,"x",function(){return t[a]},function(e){t[o]=e}),i.defineField(r,"y",function(){return t[u]},function(e){t[s]=e})):(i.defineField(r,"x",function(){return t[a]},function(t){}),i.defineField(r,"y",function(){return t[u]},function(t){})),Object.seal&&Object.seal(r),r};i.c("AngularMotion",{_vrotation:0,_arotation:0,_drotation:0,init:function(){this.requires("2D"),r(this,"v","rotation",!0),r(this,"a","rotation",!0),r(this,"d","rotation",!1),this.__oldRotationDirection=0,this.bind("UpdateFrame",this._angularMotionTick)},remove:function(t){this.unbind("UpdateFrame",this._angularMotionTick)},resetAngularMotion:function(){return this._drotation=0,this.vrotation=0,this.arotation=0,this},_angularMotionTick:function(t){var e=t.dt/1e3,n=this._rotation,i=this._vrotation,r=this._arotation,o=n+i*e+.5*r*e*e;this.vrotation=i+r*e;var s=this._vrotation,a=s?s<0?-1:1:0;this.__oldRotationDirection!==a&&(this.__oldRotationDirection=a,this.trigger("NewRotationDirection",a)),this._drotation=o-n,0!==this._drotation&&(this.rotation=o,this.trigger("Rotated",n))}}),i.c("Motion",{_vx:0,_vy:0,_ax:0,_ay:0,_dx:0,_dy:0,init:function(){this.requires("2D"),r(this,"v","x",!0),r(this,"v","y",!0),this._velocity=o(this,"v",!0,new i.math.Vector2D),r(this,"a","x",!0),r(this,"a","y",!0),this._acceleration=o(this,"a",!0,new i.math.Vector2D),r(this,"d","x",!1),r(this,"d","y",!1),this._motionDelta=o(this,"d",!1,new i.math.Vector2D),this.__oldDirection={x:0,y:0},this.bind("UpdateFrame",this._linearMotionTick)},remove:function(t){this.unbind("UpdateFrame",this._linearMotionTick)},resetMotion:function(){return this.vx=0,this.vy=0,this.ax=0,this.ay=0,this._dx=0,this._dy=0,this},motionDelta:function(){return this._motionDelta},velocity:function(){return this._velocity},acceleration:function(){return this._acceleration},ccdbr:function(t){var e=this._cbr||this._mbr||this,n=this._dx,i=this._dy,r=0,o=0,s=n>0?r=n:-n,a=i>0?o=i:-i;return t=t||{},t._x=e._x-r,t._y=e._y-o,t._w=e._w+s,t._h=e._h+a,t},_linearMotionTick:function(t){var e=t.dt/1e3,n=this._vx,i=this._ax,r=this._vy,o=this._ay,s=n*e+.5*i*e*e,a=r*e+.5*o*e*e;this.vx=n+i*e,this.vy=r+o*e;var u=this.__oldDirection,h=this._vx,c=h?h<0?-1:1:0,l=this._vy,f=l?l<0?-1:1:0;u.x===c&&u.y===f||(u.x=c,u.y=f,this.trigger("NewDirection",u)),this._dx=s,this._dy=a,this._setPosition(this._x+s,this._y+a)}})},{"../core/core.js":10}],58:[function(t,e,n){var i=t("../core/core.js");i.c("Supportable",{_ground:null,_groundComp:null,_preventGroundTunneling:!1,canLand:!0,init:function(){this.requires("2D"),this.__area={_x:0,_y:0,_w:0,_h:0},this.defineField("ground",function(){return this._ground},function(t){})},remove:function(t){this.unbind("UpdateFrame",this._detectGroundTick)},startGroundDetection:function(t){return t&&(this._groundComp=t),this.uniqueBind("UpdateFrame",this._detectGroundTick),this},stopGroundDetection:function(){return this.unbind("UpdateFrame",this._detectGroundTick),this},preventGroundTunneling:function(t){return void 0===t&&(t=!0),t&&this.requires("Motion"),this._preventGroundTunneling=t,this},_detectGroundTick:function(){var t,e=this._groundComp,n=this._ground,r=i.rectManager.overlap;if(this._preventGroundTunneling)t=this.ccdbr(this.__area);else{var o=this._cbr||this._mbr||this;(t=this.__area)._x=o._x,t._y=o._y,t._w=o._w,t._h=o._h}if(t._h++,n){var s=n._cbr||n._mbr||n;n.__c[e]&&i(n[0])===n&&r(s,t)||(this._ground=null,this.trigger("LiftedOffGround",n),n=null)}if(!n)for(var a,u,h=i.map.unfilteredSearch(t),c=0,l=h.length;c<l;++c)if(a=h[c],u=a._cbr||a._mbr||a,a!==this&&a.__c[e]&&r(u,t)&&(this.canLand=!0,this.trigger("CheckLanding",a),this.canLand)){this._ground=n=a,this.y=n._y-this._h,this._x>n._x+n._w?this.x=n._x+n._w-1:this._x+this._w<n._x&&(this.x=n._x-this._w+1),this.trigger("LandedOnGround",n);break}}}),i.c("GroundAttacher",{_groundAttach:function(t){t.attach(this)},_groundDetach:function(t){t.detach(this)},init:function(){this.requires("Supportable"),this.bind("LandedOnGround",this._groundAttach),this.bind("LiftedOffGround",this._groundDetach)},remove:function(t){this.unbind("LandedOnGround",this._groundAttach),this.unbind("LiftedOffGround",this._groundDetach)}}),i.c("Gravity",{_gravityConst:500,_gravityActive:!1,init:function(){this.requires("2D, Supportable, Motion"),this.bind("LiftedOffGround",this._startGravity),this.bind("LandedOnGround",this._stopGravity)},remove:function(t){this.unbind("LiftedOffGround",this._startGravity),this.unbind("LandedOnGround",this._stopGravity)},_gravityCheckLanding:function(t){this._dy<0&&(this.canLand=!1)},gravity:function(t){return this.uniqueBind("CheckLanding",this._gravityCheckLanding),this.startGroundDetection(t),this._startGravity(),this},antigravity:function(){return this._stopGravity(),this.stopGroundDetection(),this.unbind("CheckLanding",this._gravityCheckLanding),this},gravityConst:function(t){return this._gravityActive&&(this.ay-=this._gravityConst,this.ay+=t),this._gravityConst=t,this},_startGravity:function(){this._gravityActive||(this._gravityActive=!0,this.ay+=this._gravityConst)},_stopGravity:function(){this._gravityActive&&(this._gravityActive=!1,this.ay=0,this.vy=0)}})},{"../core/core.js":10}],59:[function(t,e,n){t("../core/core.js").extend({rectManager:{merge:function(t,e,n){return void 0===n&&(n={}),n._h=Math.max(t._y+t._h,e._y+e._h),n._w=Math.max(t._x+t._w,e._x+e._w),n._x=Math.min(t._x,e._x),n._y=Math.min(t._y,e._y),n._w-=n._x,n._h-=n._y,n},overlap:function(t,e){return t._x<e._x+e._w&&t._x+t._w>e._x&&t._y<e._y+e._h&&t._y+t._h>e._y},integerBounds:function(t){return t._x=Math.floor(t._x),t._y=Math.floor(t._y),t._w=Math.ceil(t._w),t._h=Math.ceil(t._h),t},mergeSet:function(t){if(t.length<2)return t;for(var e=t.length-1;e--;)this.overlap(t[e],t[e+1])&&(this.merge(t[e],t[e+1],t[e]),t.splice(e+1,1));return t},boundingRect:function(t){if(t&&t.length){var e,n,i=1,r=t.length,o=t[0];for(o=[o._x,o._y,o._x+o._w,o._y+o._h];i<r;)(n=[(e=t[i])._x,e._y,e._x+e._w,e._y+e._h])[0]<o[0]&&(o[0]=n[0]),n[1]<o[1]&&(o[1]=n[1]),n[2]>o[2]&&(o[2]=n[2]),n[3]>o[3]&&(o[3]=n[3]),i++;return n=o,o={_x:n[0],_y:n[1],_w:n[2]-n[0],_h:n[3]-n[1]}}},_pool:function(){var t=[],e=0;return{get:function(n,i,r,o){t.length<=e&&t.push({});var s=t[e++];return s._x=n,s._y=i,s._w=r,s._h=o,s},copy:function(n){t.length<=e&&t.push({});var i=t[e++];return i._x=n._x,i._y=n._y,i._w=n._w,i._h=n._h,i},recycle:function(t){e--}}}()}})},{"../core/core.js":10}],60:[function(t,e,n){function i(t,e,n){this.keys=t,this.map=n,this.obj=e}var r,o={},s=function(t){r=t||64,this.map={},this.boundsDirty=!1,this.coordBoundsDirty=!1,this.boundsHash={maxX:-1/0,maxY:-1/0,minX:1/0,minY:1/0},this.boundsCoords={maxX:-1/0,maxY:-1/0,minX:1/0,minY:1/0}};s.key=function(t,e){return t=t._cbr||t._mbr||t,e=e||{},e.x1=Math.floor(t._x/r),e.y1=Math.floor(t._y/r),e.x2=Math.floor((t._w+t._x)/r),e.y2=Math.floor((t._h+t._y)/r),e},s.hash=function(t){return t.x1+" "+t.y1+" "+t.x2+" "+t.y2},s.cellsize=function(){return r},s.prototype={insert:function(t,e){var n,r,o,a=s.key(t,e&&e.keys);for(e=e||new i(a,t,this),n=a.x1;n<=a.x2;n++)for(r=a.y1;r<=a.y2;r++)o=n<<16^r,this.map[o]||(this.map[o]=[]),this.map[o].push(t);return this.boundsDirty=!0,e},_searchHolder:[],search:function(t,e){var n,i,r,a,u=s.key(t,o),h=this._searchHolder;e=e||[],h.length=0;var c;for(n=u.x1;n<=u.x2;n++)for(i=u.y1;i<=u.y2;i++)if(a=this.map[n<<16^i])for(r=0;r<a.length;r++)h[a[r][0]]||(c=(c=h[a[r][0]]=a[r])._cbr||c._mbr||c)._x<t._x+t._w&&c._x+c._w>t._x&&c._y<t._y+t._h&&c._y+c._h>t._y&&e.push(a[r]);return e},unfilteredSearch:function(t,e){var n,i,r,a,u=s.key(t,o);for(e=e||[],n=u.x1;n<=u.x2;n++)for(i=u.y1;i<=u.y2;i++)if(a=this.map[n<<16^i])for(r=0;r<a.length;r++)e.push(a[r]);return e},remove:function(t){var e,n,i=t.keys,r=t.obj,o=0;for(o=i.x1;o<=i.x2;o++)for(e=i.y1;e<=i.y2;e++)if(n=o<<16^e,this.map[n]){var s,a=this.map[n],u=a.length;for(s=0;s<u;s++)a[s]&&a[s][0]===r[0]&&a.splice(s,1)}this.boundsDirty=!0},refresh:function(t){var e,n,i,r,o,a=t.keys,u=t.obj;for(n=a.x1;n<=a.x2;n++)for(i=a.y1;i<=a.y2;i++)if(e=this.map[n<<16^i])for(o=e.length,r=0;r<o;r++)e[r]&&e[r][0]===u[0]&&e.splice(r,1);for(s.key(u,a),n=a.x1;n<=a.x2;n++)for(i=a.y1;i<=a.y2;i++)(e=this.map[n<<16^i])||(e=this.map[n<<16^i]=[]),e.push(u);return this.boundsDirty=!0,t},boundaries:function(){this._updateBoundaries();var t=this.boundsCoords;return{min:{x:t.minX,y:t.minY},max:{x:t.maxX,y:t.maxY}}},_keyBoundaries:function(){return this._updateBoundaries(),this.boundsHash},_updateBoundaries:function(){if(this.boundsDirty||this.coordBoundsDirty){var t=this.boundsHash;this.boundsDirty&&(t.maxX=-1/0,t.maxY=-1/0,t.minX=1/0,t.minY=1/0);var e=this.boundsCoords;e.maxX=-1/0,e.maxY=-1/0,e.minX=1/0,e.minY=1/0;var n,i,r;for(var o in this.map)if((r=this.map[o]).length){var s=o>>16,a=o<<16>>16;if(a<0&&(s=~s),s>=t.maxX){t.maxX=s;for(n in r)"object"==typeof(i=r[n])&&"requires"in i&&(e.maxX=Math.max(e.maxX,i.x+i.w))}if(s<=t.minX){t.minX=s;for(n in r)"object"==typeof(i=r[n])&&"requires"in i&&(e.minX=Math.min(e.minX,i.x))}if(a>=t.maxY){t.maxY=a;for(n in r)"object"==typeof(i=r[n])&&"requires"in i&&(e.maxY=Math.max(e.maxY,i.y+i.h))}if(a<=t.minY){t.minY=a;for(n in r)"object"==typeof(i=r[n])&&"requires"in i&&(e.minY=Math.min(e.minY,i.y))}}this.boundsDirty=!1,this.coordBoundsDirty=!1}},traverseRay:function(t,e,n){var i=e.x,a=e.y;t={_x:t._x,_y:t._y,_w:0,_h:0};var u,h=this._keyBoundaries(),c=s.key(t,o),l=c.x1,f=c.y1,p=h.minX,d=h.minY,y=h.maxX,v=h.maxY,g=i>0?1:i<0?-1:0,_=a>0?1:a<0?-1:0,m=a>=0?(f+1)*r:f*r,x=-1/0,w=0,b=0,S=1/0,C=1/0;for(0!==i&&(u=1/i,S=((i>=0?(l+1)*r:l*r)-t._x)*u,w=r*g*u),0!==a&&(u=1/a,C=(m-t._y)*u,b=r*_*u);1===g&&l<p&&p!==1/0||-1===g&&l>y&&y!==-1/0||1===_&&f<d&&d!==1/0||-1===_&&f>v&&v!==-1/0;)S<C?(x=S,l+=g,S+=w):(x=C,f+=_,C+=b);for(var k;p<=l&&l<=y&&d<=f&&f<=v;){if(k=this.map[l<<16^f])for(var P=0;P<k.length;P++)if(n(k[P],x))return;S<C?(x=S,l+=g,S+=w):(x=C,f+=_,C+=b)}}},i.prototype={update:function(t){s.hash(s.key(t,o))!==s.hash(this.keys)?this.map.refresh(this):this.map.coordBoundsDirty=!0}},e.exports=s},{}]},{},[21])},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t.lib.WordArray,n=e.init;(e.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,i=[],r=0;r<e;r++)i[r>>>2]|=t[r]<<24-r%4*8;n.call(this,i,e)}else n.apply(this,arguments)}).prototype=e}}(),t.lib.WordArray})},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(){function e(t){return t<<8&4278255360|t>>>8&16711935}var n=t,i=n.lib.WordArray,r=n.enc;r.Utf16=r.Utf16BE={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r+=2){var o=e[r>>>2]>>>16-r%4*8&65535;i.push(String.fromCharCode(o))}return i.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r++)n[r>>>1]|=t.charCodeAt(r)<<16-r%2*16;return i.create(n,2*e)}};r.Utf16LE={stringify:function(t){for(var n=t.words,i=t.sigBytes,r=[],o=0;o<i;o+=2){var s=e(n[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(s))}return r.join("")},parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=e(t.charCodeAt(o)<<16-o%2*16);return i.create(r,2*n)}}}(),t.enc.Utf16})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(152))})(0,function(t){return function(){var e=t,n=e.lib.WordArray,i=e.algo,r=i.SHA256,o=i.SHA224=r.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=r._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=r._createHelper(o),e.HmacSHA224=r._createHmacHelper(o)}(),t.SHA224})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(74),n(153))})(0,function(t){return function(){var e=t,n=e.x64,i=n.Word,r=n.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new r.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),t.SHA384})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(74))})(0,function(t){return function(e){var n=t,i=n.lib,r=i.WordArray,o=i.Hasher,s=n.x64.Word,a=n.algo,u=[],h=[],c=[];(function(){for(var t=1,e=0,n=0;n<24;n++){u[t+5*e]=(n+1)*(n+2)/2%64;var i=(2*t+3*e)%5;t=e%5,e=i}for(t=0;t<5;t++)for(e=0;e<5;e++)h[t+5*e]=e+(2*t+3*e)%5*5;for(var r=1,o=0;o<24;o++){for(var a=0,l=0,f=0;f<7;f++){if(1&r){var p=(1<<f)-1;p<32?l^=1<<p:a^=1<<p-32}128&r?r=r<<1^113:r<<=1}c[o]=s.create(a,l)}})();var l=[];(function(){for(var t=0;t<25;t++)l[t]=s.create()})();var f=a.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;e<25;e++)t[e]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var n=this._state,i=this.blockSize/2,r=0;r<i;r++){var o=t[e+2*r],s=t[e+2*r+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);(D=n[r]).high^=s,D.low^=o}for(var a=0;a<24;a++){for(var f=0;f<5;f++){for(var p=0,d=0,y=0;y<5;y++){p^=(D=n[f+5*y]).high,d^=D.low}var v=l[f];v.high=p,v.low=d}for(f=0;f<5;f++){var g=l[(f+4)%5],_=l[(f+1)%5],m=_.high,x=_.low;for(p=g.high^(m<<1|x>>>31),d=g.low^(x<<1|m>>>31),y=0;y<5;y++){(D=n[f+5*y]).high^=p,D.low^=d}}for(var w=1;w<25;w++){var b=(D=n[w]).high,S=D.low,C=u[w];if(C<32)p=b<<C|S>>>32-C,d=S<<C|b>>>32-C;else p=S<<C-32|b>>>64-C,d=b<<C-32|S>>>64-C;var k=l[h[w]];k.high=p,k.low=d}var P=l[0],M=n[0];P.high=M.high,P.low=M.low;for(f=0;f<5;f++)for(y=0;y<5;y++){var D=n[w=f+5*y],T=l[w],E=l[(f+1)%5+5*y],O=l[(f+2)%5+5*y];D.high=T.high^~E.high&O.high,D.low=T.low^~E.low&O.low}D=n[0];var A=c[a];D.high^=A.high,D.low^=A.low}},_doFinalize:function(){var t=this._data,n=t.words,i=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[i>>>5]|=1<<24-i%32,n[(e.ceil((i+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,h=[],c=0;c<u;c++){var l=s[c],f=l.high,p=l.low;f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),h.push(p),h.push(f)}return new r.init(h,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),n=0;n<25;n++)e[n]=e[n].clone();return t}});n.SHA3=o._createHelper(f),n.HmacSHA3=o._createHmacHelper(f)}(Math),t.SHA3})},function(t,e,n){(function(e,i){t.exports=i(n(4))})(0,function(t){return function(e){function n(t,e,n){return t^e^n}function i(t,e,n){return t&e|~t&n}function r(t,e,n){return(t|~e)^n}function o(t,e,n){return t&n|e&~n}function s(t,e,n){return t^(e|~n)}function a(t,e){return t<<e|t>>>32-e}var u=t,h=u.lib,c=h.WordArray,l=h.Hasher,f=u.algo,p=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),d=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),y=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),v=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=c.create([0,1518500249,1859775393,2400959708,2840853838]),_=c.create([1352829926,1548603684,1836072691,2053994217,0]),m=f.RIPEMD160=l.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var u=0;u<16;u++){var h=e+u,c=t[h];t[h]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l,f,m,x,w,b,S,C,k,P,M=this._hash.words,D=g.words,T=_.words,E=p.words,O=d.words,A=y.words,j=v.words;b=l=M[0],S=f=M[1],C=m=M[2],k=x=M[3],P=w=M[4];var F;for(u=0;u<80;u+=1)F=l+t[e+E[u]]|0,F+=u<16?n(f,m,x)+D[0]:u<32?i(f,m,x)+D[1]:u<48?r(f,m,x)+D[2]:u<64?o(f,m,x)+D[3]:s(f,m,x)+D[4],F=(F=a(F|=0,A[u]))+w|0,l=w,w=x,x=a(m,10),m=f,f=F,F=b+t[e+O[u]]|0,F+=u<16?s(S,C,k)+T[0]:u<32?o(S,C,k)+T[1]:u<48?r(S,C,k)+T[2]:u<64?i(S,C,k)+T[3]:n(S,C,k)+T[4],F=(F=a(F|=0,j[u]))+P|0,b=P,P=k,k=a(C,10),C=S,S=F;F=M[1]+m+k|0,M[1]=M[2]+x+P|0,M[2]=M[3]+w+b|0,M[3]=M[4]+l+S|0,M[4]=M[0]+f+C|0,M[0]=F},_doFinalize:function(){var t=this._data,e=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;e[i>>>5]|=128<<24-i%32,e[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(e.length+1),this._process();for(var r=this._hash,o=r.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return r},clone:function(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}});u.RIPEMD160=l._createHelper(m),u.HmacRIPEMD160=l._createHmacHelper(m)}(Math),t.RIPEMD160})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(104),n(105))})(0,function(t){return function(){var e=t,n=e.lib,i=n.Base,r=n.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,u=o.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var n=this.cfg,i=a.create(n.hasher,t),o=r.create(),s=r.create([1]),u=o.words,h=s.words,c=n.keySize,l=n.iterations;u.length<c;){var f=i.update(e).finalize(s);i.reset();for(var p=f.words,d=p.length,y=f,v=1;v<l;v++){y=i.finalize(y),i.reset();for(var g=y.words,_=0;_<d;_++)p[_]^=g[_]}o.concat(f),h[0]++}return o.sigBytes=4*c,o}});e.PBKDF2=function(t,e,n){return u.create(n).compute(t,e)}}(),t.PBKDF2})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.mode.CFB=function(){function e(t,e,n,i){var r=this._iv;if(r){var o=r.slice(0);this._iv=void 0}else o=this._prevBlock;i.encryptBlock(o,0);for(var s=0;s<n;s++)t[e+s]^=o[s]}var n=t.lib.BlockCipherMode.extend();return n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize;e.call(this,t,n,r,i),this._prevBlock=t.slice(n,n+r)}}),n.Decryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,o=t.slice(n,n+r);e.call(this,t,n,r,i),this._prevBlock=o}}),n}(),t.mode.CFB})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._counter;r&&(o=this._counter=r.slice(0),this._iv=void 0);var s=o.slice(0);n.encryptBlock(s,0),o[i-1]=o[i-1]+1|0;for(var a=0;a<i;a++)t[e+a]^=s[a]}});return e.Decryptor=n,e}(),t.mode.CTR})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.mode.CTRGladman=function(){function e(t){if(255==(t>>24&255)){var e=t>>16&255,n=t>>8&255,i=255&t;255===e?(e=0,255===n?(n=0,255===i?i=0:++i):++n):++e,t=0,t+=e<<16,t+=n<<8,t+=i}else t+=1<<24;return t}var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,n){var i=this._cipher,r=i.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),function(t){0===(t[0]=e(t[0]))&&(t[1]=e(t[1]))}(s);var a=s.slice(0);i.encryptBlock(a,0);for(var u=0;u<r;u++)t[n+u]^=a[u]}});return n.Decryptor=i,n}(),t.mode.CTRGladman})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,r=this._iv,o=this._keystream;r&&(o=this._keystream=r.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var s=0;s<i;s++)t[e+s]^=o[s]}});return e.Decryptor=n,e}(),t.mode.OFB})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.pad.AnsiX923={pad:function(t,e){var n=t.sigBytes,i=4*e,r=i-n%i,o=n+r-1;t.clamp(),t.words[o>>>2]|=r<<24-o%4*8,t.sigBytes+=r},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.pad.Iso10126={pad:function(e,n){var i=4*n,r=i-e.sigBytes%i;e.concat(t.lib.WordArray.random(r-1)).concat(t.lib.WordArray.create([r<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.pad.ZeroPadding={pad:function(t,e){var n=4*e;t.clamp(),t.sigBytes+=n-(t.sigBytes%n||n)},unpad:function(t){for(var e=t.words,n=t.sigBytes-1;!(e[n>>>2]>>>24-n%4*8&255);)n--;t.sigBytes=n+1}},t.pad.ZeroPadding})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(16))})(0,function(t){return function(e){var n=t,i=n.lib.CipherParams,r=n.enc.Hex;n.format.Hex={stringify:function(t){return t.ciphertext.toString(r)},parse:function(t){var e=r.parse(t);return i.create({ciphertext:e})}}}(),t.format.Hex})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(56),n(57),n(42),n(16))})(0,function(t){return function(){var e=t,n=e.lib.BlockCipher,i=e.algo,r=[],o=[],s=[],a=[],u=[],h=[],c=[],l=[],f=[],p=[];(function(){for(var t=[],e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;var n=0,i=0;for(e=0;e<256;e++){var d=i^i<<1^i<<2^i<<3^i<<4;d=d>>>8^255&d^99,r[n]=d,o[d]=n;var y=t[n],v=t[y],g=t[v],_=257*t[d]^16843008*d;s[n]=_<<24|_>>>8,a[n]=_<<16|_>>>16,u[n]=_<<8|_>>>24,h[n]=_;_=16843009*g^65537*v^257*y^16843008*n;c[d]=_<<24|_>>>8,l[d]=_<<16|_>>>16,f[d]=_<<8|_>>>24,p[d]=_,n?(n=y^t[t[t[g^y]]],i^=t[t[i]]):n=i=1}})();var d=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var t=this._keyPriorReset=this._key,e=t.words,n=t.sigBytes/4,i=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],s=0;s<i;s++)if(s<n)o[s]=e[s];else{var a=o[s-1];s%n?n>6&&s%n==4&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=r[(a=a<<8|a>>>24)>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=d[s/n|0]<<24),o[s]=o[s-n]^a}for(var u=this._invKeySchedule=[],h=0;h<i;h++){s=i-h;if(h%4)a=o[s];else a=o[s-4];u[h]=h<4||s<=4?a:c[r[a>>>24]]^l[r[a>>>16&255]]^f[r[a>>>8&255]]^p[r[255&a]]}}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,s,a,u,h,r)},decryptBlock:function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,c,l,f,p,o);n=t[e+1];t[e+1]=t[e+3],t[e+3]=n},_doCryptBlock:function(t,e,n,i,r,o,s,a){for(var u=this._nRounds,h=t[e]^n[0],c=t[e+1]^n[1],l=t[e+2]^n[2],f=t[e+3]^n[3],p=4,d=1;d<u;d++){var y=i[h>>>24]^r[c>>>16&255]^o[l>>>8&255]^s[255&f]^n[p++],v=i[c>>>24]^r[l>>>16&255]^o[f>>>8&255]^s[255&h]^n[p++],g=i[l>>>24]^r[f>>>16&255]^o[h>>>8&255]^s[255&c]^n[p++],_=i[f>>>24]^r[h>>>16&255]^o[c>>>8&255]^s[255&l]^n[p++];h=y,c=v,l=g,f=_}y=(a[h>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&f])^n[p++],v=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^n[p++],g=(a[l>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&c])^n[p++],_=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[p++];t[e]=y,t[e+1]=v,t[e+2]=g,t[e+3]=_},keySize:8});e.AES=n._createHelper(y)}(),t.AES})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(56),n(57),n(42),n(16))})(0,function(t){return function(){function e(t,e){var n=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=n,this._lBlock^=n<<t}function n(t,e){var n=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=n,this._rBlock^=n<<t}var i=t,r=i.lib,o=r.WordArray,s=r.BlockCipher,a=i.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=s.extend({_doReset:function(){for(var t=this._key.words,e=[],n=0;n<56;n++){var i=u[n]-1;e[n]=t[i>>>5]>>>31-i%32&1}for(var r=this._subKeys=[],o=0;o<16;o++){var s=r[o]=[],a=c[o];for(n=0;n<24;n++)s[n/6|0]|=e[(h[n]-1+a)%28]<<31-n%6,s[4+(n/6|0)]|=e[28+(h[n+24]-1+a)%28]<<31-n%6;s[0]=s[0]<<1|s[0]>>>31;for(n=1;n<7;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}var l=this._invSubKeys=[];for(n=0;n<16;n++)l[n]=r[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,i,r){this._lBlock=t[i],this._rBlock=t[i+1],e.call(this,4,252645135),e.call(this,16,65535),n.call(this,2,858993459),n.call(this,8,16711935),e.call(this,1,1431655765);for(var o=0;o<16;o++){for(var s=r[o],a=this._lBlock,u=this._rBlock,h=0,c=0;c<8;c++)h|=l[c][((u^s[c])&f[c])>>>0];this._lBlock=u,this._rBlock=a^h}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,e.call(this,1,1431655765),n.call(this,8,16711935),n.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[i]=this._lBlock,t[i+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});i.DES=s._createHelper(p);var d=a.TripleDES=s.extend({_doReset:function(){var t=this._key.words;this._des1=p.createEncryptor(o.create(t.slice(0,2))),this._des2=p.createEncryptor(o.create(t.slice(2,4))),this._des3=p.createEncryptor(o.create(t.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});i.TripleDES=s._createHelper(d)}(),t.TripleDES})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(56),n(57),n(42),n(16))})(0,function(t){return function(){function e(){for(var t=this._S,e=this._i,n=this._j,i=0,r=0;r<4;r++){n=(n+t[e=(e+1)%256])%256;var o=t[e];t[e]=t[n],t[n]=o,i|=t[(t[e]+t[n])%256]<<24-8*r}return this._i=e,this._j=n,i}var n=t,i=n.lib.StreamCipher,r=n.algo,o=r.RC4=i.extend({_doReset:function(){for(var t=this._key,e=t.words,n=t.sigBytes,i=this._S=[],r=0;r<256;r++)i[r]=r;r=0;for(var o=0;r<256;r++){var s=r%n,a=e[s>>>2]>>>24-s%4*8&255;o=(o+i[r]+a)%256;var u=i[r];i[r]=i[o],i[o]=u}this._i=this._j=0},_doProcessBlock:function(t,n){t[n]^=e.call(this)},keySize:8,ivSize:0});n.RC4=i._createHelper(o);var s=r.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});n.RC4Drop=i._createHelper(s)}(),t.RC4})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(56),n(57),n(42),n(16))})(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0;for(n=0;n<8;n++){var i=t[n]+e[n],r=65535&i,a=i>>>16,u=((r*r>>>17)+r*a>>>15)+a*a,h=((4294901760&i)*i|0)+((65535&i)*i|0);s[n]=u^h}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=t,i=n.lib.StreamCipher,r=[],o=[],s=[],a=n.algo.Rabbit=i.extend({_doReset:function(){for(var t=this._key.words,n=this.cfg.iv,i=0;i<4;i++)t[i]=16711935&(t[i]<<8|t[i]>>>24)|4278255360&(t[i]<<24|t[i]>>>8);var r=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(i=0;i<4;i++)e.call(this);for(i=0;i<8;i++)o[i]^=r[i+4&7];if(n){var s=n.words,a=s[0],u=s[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),c=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),l=h>>>16|4294901760&c,f=c<<16|65535&h;o[0]^=h,o[1]^=l,o[2]^=c,o[3]^=f,o[4]^=h,o[5]^=l,o[6]^=c,o[7]^=f;for(i=0;i<4;i++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),t[n+o]^=r[o]},blockSize:4,ivSize:2});n.Rabbit=i._createHelper(a)}(),t.Rabbit})},function(t,e,n){(function(e,i,r){t.exports=i(n(4),n(56),n(57),n(42),n(16))})(0,function(t){return function(){function e(){for(var t=this._X,e=this._C,n=0;n<8;n++)o[n]=e[n];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<o[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<o[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<o[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<o[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<o[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<o[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<o[6]>>>0?1:0)|0,this._b=e[7]>>>0<o[7]>>>0?1:0;for(n=0;n<8;n++){var i=t[n]+e[n],r=65535&i,a=i>>>16,u=((r*r>>>17)+r*a>>>15)+a*a,h=((4294901760&i)*i|0)+((65535&i)*i|0);s[n]=u^h}t[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,t[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,t[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,t[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,t[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,t[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,t[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,t[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}var n=t,i=n.lib.StreamCipher,r=[],o=[],s=[],a=n.algo.RabbitLegacy=i.extend({_doReset:function(){var t=this._key.words,n=this.cfg.iv,i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],r=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var o=0;o<4;o++)e.call(this);for(o=0;o<8;o++)r[o]^=i[o+4&7];if(n){var s=n.words,a=s[0],u=s[1],h=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),c=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),l=h>>>16|4294901760&c,f=c<<16|65535&h;r[0]^=h,r[1]^=l,r[2]^=c,r[3]^=f,r[4]^=h,r[5]^=l,r[6]^=c,r[7]^=f;for(o=0;o<4;o++)e.call(this)}},_doProcessBlock:function(t,n){var i=this._X;e.call(this),r[0]=i[0]^i[5]>>>16^i[3]<<16,r[1]=i[2]^i[7]>>>16^i[5]<<16,r[2]=i[4]^i[1]>>>16^i[7]<<16,r[3]=i[6]^i[3]>>>16^i[1]<<16;for(var o=0;o<4;o++)r[o]=16711935&(r[o]<<8|r[o]>>>24)|4278255360&(r[o]<<24|r[o]>>>8),t[n+o]^=r[o]},blockSize:4,ivSize:2});n.RabbitLegacy=i._createHelper(a)}(),t.RabbitLegacy})},function(t,e,n){var i=n(58),r=n(160),o=n(77),s=r(function(t,e,n,r){i(e,o(e),t,r)});t.exports=s},function(t,e,n){var i=n(75),r=n(266),o=n(31),s=n(159),a=/^\[object .+?Constructor\]$/,u=Function.prototype,h=Object.prototype,c=u.toString,l=h.hasOwnProperty,f=RegExp("^"+c.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||r(t))&&(i(t)?f:a).test(s(t))}},function(t,e,n){var i=n(59),r=Object.prototype,o=r.hasOwnProperty,s=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=o.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=s.call(t);return i&&(e?t[a]=n:delete t[a]),r}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var i=n(267),r=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!r&&r in t}},function(t,e,n){var i=n(30)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(154),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var o=arguments,s=-1,a=r(o.length-e,0),u=Array(a);++s<a;)u[s]=o[e+s];s=-1;for(var h=Array(e+1);++s<e;)h[s]=o[s];return h[e]=n(u),i(t,this,h)}}},function(t,e,n){var i=n(271),r=n(273)(i);t.exports=r},function(t,e,n){var i=n(272),r=n(157),o=n(76),s=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:o;t.exports=s},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,i=16,r=Date.now;t.exports=function(t){var e=0,o=0;return function(){var s=r(),a=i-(s-o);if(o=s,a>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(67),r=n(60),o="[object Arguments]";t.exports=function(t){return r(t)&&i(t)==o}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(67),r=n(107),o=n(60),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&r(t.length)&&!!s[i(t)]}},function(t,e,n){(function(t){var i=n(158),r="object"==typeof e&&e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r&&i.process,a=function(){try{return s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=a}).call(e,n(109)(t))},function(t,e,n){var i=n(31),r=n(80),o=n(280),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return o(t);var e=r(t),n=[];for(var a in t)("constructor"!=a||!e&&s.call(t,a))&&n.push(a);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){var i=n(68),r=Object.prototype,o=r.hasOwnProperty;t.exports=function(t,e,n,s){return void 0===t||i(t,r[n])&&!o.call(s,n)?e:t}},function(t,e,n){var i=n(59),r=n(78),o=n(19),s=i?i.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||r(t)||!!(s&&t&&t[s])}},function(t,e,n){var i=n(81),r=n(284),o=n(335),s=n(341),a=n(111),u=n(342),h=n(76);t.exports=function(t,e,n){var c=-1;e=i(e.length?e:[h],a(r));var l=o(t,function(t,n,r){return{criteria:i(e,function(e){return e(t)}),index:++c,value:t}});return s(l,function(t,e){return u(t,e,n)})}},function(t,e,n){var i=n(285),r=n(322),o=n(76),s=n(19),a=n(332);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?s(t)?r(t[0],t[1]):i(t):a(t)}},function(t,e,n){var i=n(286),r=n(321),o=n(178);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(113),r=n(165),o=1,s=2;t.exports=function(t,e,n,a){var u=n.length,h=u,c=!a;if(null==t)return!h;for(t=Object(t);u--;){var l=n[u];if(c&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++u<h;){var f=(l=n[u])[0],p=t[f],d=l[1];if(c&&l[2]){if(void 0===p&&!(f in t))return!1}else{var y=new i;if(a)var v=a(p,d,f,t,e,y);if(!(void 0===v?r(d,p,o|s,a,y):v))return!1}}return!0}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(83),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},function(t,e,n){var i=n(83);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(83);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(83);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},function(t,e,n){var i=n(82);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(82),r=n(114),o=n(115),s=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var a=n.__data__;if(!r||a.length<s-1)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(298),r=n(82),o=n(114);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}},function(t,e,n){function i(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}var r=n(299),o=n(300),s=n(301),a=n(302),u=n(303);i.prototype.clear=r,i.prototype.delete=o,i.prototype.get=s,i.prototype.has=a,i.prototype.set=u,t.exports=i},function(t,e,n){var i=n(84);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(84),r="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return n===r?void 0:n}return o.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(84),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},function(t,e,n){var i=n(84),r="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?r:e,this}},function(t,e,n){var i=n(85);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(85);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(85);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(85);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},function(t,e,n){var i=n(113),r=n(166),o=n(313),s=n(314),a=n(117),u=n(19),h=n(79),c=n(110),l=1,f="[object Arguments]",p="[object Array]",d="[object Object]",y=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,v,g,_){var m=u(t),x=u(e),w=m?p:a(t),b=x?p:a(e),S=(w=w==f?d:w)==d,C=(b=b==f?d:b)==d,k=w==b;if(k&&h(t)){if(!h(e))return!1;m=!0,S=!1}if(k&&!S)return _||(_=new i),m||c(t)?r(t,e,n,v,g,_):o(t,e,w,n,v,g,_);if(!(n&l)){var P=S&&y.call(t,"__wrapped__"),M=C&&y.call(e,"__wrapped__");if(P||M){var D=P?t.value():t,T=M?e.value():e;return _||(_=new i),g(D,T,n,v,_)}}return!!k&&(_||(_=new i),s(t,e,n,v,g,_))}},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var i=n(59),r=n(169),o=n(68),s=n(166),a=n(170),u=n(171),h=1,c=2,l="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",y="[object Number]",v="[object RegExp]",g="[object Set]",_="[object String]",m="[object Symbol]",x="[object ArrayBuffer]",w="[object DataView]",b=i?i.prototype:void 0,S=b?b.valueOf:void 0;t.exports=function(t,e,n,i,b,C,k){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case x:return!(t.byteLength!=e.byteLength||!C(new r(t),new r(e)));case l:case f:case y:return o(+t,+e);case p:return t.name==e.name&&t.message==e.message;case v:case _:return t==e+"";case d:var P=a;case g:var M=i&h;if(P||(P=u),t.size!=e.size&&!M)return!1;var D=k.get(t);if(D)return D==e;i|=c,k.set(t,e);var T=s(P(t),P(e),i,b,C,k);return k.delete(t),T;case m:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e,n){var i=n(172),r=1,o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,a,u){var h=n&r,c=i(t),l=c.length;if(l!=i(e).length&&!h)return!1;for(var f=l;f--;){var p=c[f];if(!(h?p in e:o.call(e,p)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var y=!0;u.set(t,e),u.set(e,t);for(var v=h;++f<l;){var g=t[p=c[f]],_=e[p];if(s)var m=h?s(_,g,p,e,t,u):s(g,_,p,t,e,u);if(!(void 0===m?g===_||a(g,_,n,s,u):m)){y=!1;break}v||(v="constructor"==p)}if(y&&!v){var x=t.constructor,w=e.constructor;x!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w)&&(y=!1)}return u.delete(t),u.delete(e),y}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o}},function(t,e,n){var i=n(176)(Object.keys,Object);t.exports=i},function(t,e,n){var i=n(43)(n(30),"DataView");t.exports=i},function(t,e,n){var i=n(43)(n(30),"Promise");t.exports=i},function(t,e,n){var i=n(43)(n(30),"Set");t.exports=i},function(t,e,n){var i=n(43)(n(30),"WeakMap");t.exports=i},function(t,e,n){var i=n(177),r=n(61);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var o=e[n],s=t[o];e[n]=[o,s,i(s)]}return e}},function(t,e,n){var i=n(165),r=n(323),o=n(329),s=n(118),a=n(177),u=n(178),h=n(87),c=1,l=2;t.exports=function(t,e){return s(t)&&a(e)?u(h(t),e):function(n){var s=r(n,t);return void 0===s&&s===e?o(n,t):i(e,s,c|l)}}},function(t,e,n){var i=n(179);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},function(t,e,n){var i=/^\./,r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=n(325)(function(t){var e=[];return i.test(t)&&e.push(""),t.replace(r,function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)}),e});t.exports=s},function(t,e,n){var i=n(326),r=500;t.exports=function(t){var e=i(t,function(t){return n.size===r&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(o);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(i.Cache||r),n}var r=n(115),o="Expected a function";i.Cache=r,t.exports=i},function(t,e,n){var i=n(328);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){function i(t){if("string"==typeof t)return t;if(s(t))return o(t,i)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}var r=n(59),o=n(81),s=n(19),a=n(86),u=1/0,h=r?r.prototype:void 0,c=h?h.toString:void 0;t.exports=i},function(t,e,n){var i=n(330),r=n(331);t.exports=function(t,e){return null!=t&&r(t,e,i)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(180),r=n(78),o=n(19),s=n(108),a=n(107),u=n(87);t.exports=function(t,e,n){for(var h=-1,c=(e=i(e,t)).length,l=!1;++h<c;){var f=u(e[h]);if(!(l=null!=t&&n(t,f)))break;t=t[f]}return l||++h!=c?l:!!(c=null==t?0:t.length)&&a(c)&&s(f,c)&&(o(t)||r(t))}},function(t,e,n){var i=n(333),r=n(334),o=n(118),s=n(87);t.exports=function(t){return o(t)?i(s(t)):r(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(179);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){var i=n(336),r=n(44);t.exports=function(t,e){var n=-1,o=r(t)?Array(t.length):[];return i(t,function(t,i,r){o[++n]=e(t,i,r)}),o}},function(t,e,n){var i=n(337),r=n(340)(i);t.exports=r},function(t,e,n){var i=n(338),r=n(61);t.exports=function(t,e){return t&&i(t,e,r)}},function(t,e,n){var i=n(339)();t.exports=i},function(t,e){t.exports=function(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var u=s[t?a:++r];if(!1===n(o[u],u,o))break}return e}}},function(t,e,n){var i=n(44);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var o=n.length,s=e?o:-1,a=Object(n);(e?s--:++s<o)&&!1!==r(a[s],s,a););return n}}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var i=n(343);t.exports=function(t,e,n){for(var r=-1,o=t.criteria,s=e.criteria,a=o.length,u=n.length;++r<a;){var h=i(o[r],s[r]);if(h)return r>=u?h:h*("desc"==n[r]?-1:1)}return t.index-e.index}},function(t,e,n){var i=n(86);t.exports=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,s=i(t),a=void 0!==e,u=null===e,h=e==e,c=i(e);if(!u&&!c&&!s&&t>e||s&&a&&h&&!u&&!c||r&&a&&h||!n&&h||!o)return 1;if(!r&&!s&&!c&&t<e||c&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!h)return-1}return 0}},function(t,e,n){"use strict";(function(t){function e(t,e,n){t[e]||Object[i](t,e,{writable:!0,configurable:!0,value:n})}if(n(345),n(542),n(543),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var i="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,n(106))},function(t,e,n){n(346),n(348),n(349),n(350),n(351),n(352),n(353),n(354),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(364),n(365),n(366),n(367),n(368),n(369),n(370),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(426),n(427),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(437),n(438),n(439),n(440),n(441),n(442),n(443),n(444),n(445),n(446),n(447),n(448),n(449),n(140),n(450),n(451),n(199),n(452),n(453),n(454),n(455),n(456),n(202),n(204),n(205),n(457),n(458),n(459),n(460),n(461),n(462),n(463),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),t.exports=n(32)},function(t,e,n){"use strict";var i=n(3),r=n(20),o=n(10),s=n(0),a=n(22),u=n(40).KEY,h=n(5),c=n(88),l=n(62),f=n(46),p=n(8),d=n(182),y=n(120),v=n(347),g=n(91),_=n(2),m=n(6),x=n(24),w=n(33),b=n(45),S=n(50),C=n(185),k=n(25),P=n(11),M=n(48),D=k.f,T=P.f,E=C.f,O=i.Symbol,A=i.JSON,j=A&&A.stringify,F="prototype",B=p("_hidden"),L=p("toPrimitive"),z={}.propertyIsEnumerable,R=c("symbol-registry"),I=c("symbols"),H=c("op-symbols"),W=Object[F],q="function"==typeof O,G=i.QObject,N=!G||!G[F]||!G[F].findChild,U=o&&h(function(){return 7!=S(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=D(W,e);i&&delete W[e],T(t,e,n),i&&t!==W&&T(W,e,i)}:T,X=function(t){var e=I[t]=S(O[F]);return e._k=t,e},V=q&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},Y=function(t,e,n){return t===W&&Y(H,e,n),_(t),e=w(e,!0),_(n),r(I,e)?(n.enumerable?(r(t,B)&&t[B][e]&&(t[B][e]=!1),n=S(n,{enumerable:b(0,!1)})):(r(t,B)||T(t,B,b(1,{})),t[B][e]=!0),U(t,e,n)):T(t,e,n)},K=function(t,e){_(t);for(var n,i=v(e=x(e)),r=0,o=i.length;o>r;)Y(t,n=i[r++],e[n]);return t},Q=function(t){var e=z.call(this,t=w(t,!0));return!(this===W&&r(I,t)&&!r(H,t))&&(!(e||!r(this,t)||!r(I,t)||r(this,B)&&this[B][t])||e)},J=function(t,e){if(t=x(t),e=w(e,!0),t!==W||!r(I,e)||r(H,e)){var n=D(t,e);return!n||!r(I,e)||r(t,B)&&t[B][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(x(t)),i=[],o=0;n.length>o;)r(I,e=n[o++])||e==B||e==u||i.push(e);return i},$=function(t){for(var e,n=t===W,i=E(n?H:x(t)),o=[],s=0;i.length>s;)!r(I,e=i[s++])||n&&!r(W,e)||o.push(I[e]);return o};q||(a((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===W&&e.call(H,n),r(this,B)&&r(this[B],t)&&(this[B][t]=!1),U(this,t,b(1,n))};return o&&N&&U(W,t,{configurable:!0,set:e}),X(t)})[F],"toString",function(){return this._k}),k.f=J,P.f=Y,n(51).f=C.f=Z,n(71).f=Q,n(90).f=$,o&&!n(47)&&a(W,"propertyIsEnumerable",Q,!0),d.f=function(t){return X(p(t))}),s(s.G+s.W+s.F*!q,{Symbol:O});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=M(p.store),it=0;nt.length>it;)y(nt[it++]);s(s.S+s.F*!q,"Symbol",{for:function(t){return r(R,t+="")?R[t]:R[t]=O(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){N=!0},useSimple:function(){N=!1}}),s(s.S+s.F*!q,"Object",{create:function(t,e){return void 0===e?S(t):K(S(t),e)},defineProperty:Y,defineProperties:K,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:$}),A&&s(s.S+s.F*(!q||h(function(){var t=O();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(m(e)||void 0!==t)&&!V(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!V(e))return e}),i[1]=e,j.apply(A,i)}}),O[F][L]||n(21)(O[F],L,O[F].valueOf),l(O,"Symbol"),l(Math,"Math",!0),l(i.JSON,"JSON",!0)},function(t,e,n){var i=n(48),r=n(90),o=n(71);t.exports=function(t){var e=i(t),n=r.f;if(n)for(var s,a=n(t),u=o.f,h=0;a.length>h;)u.call(t,s=a[h++])&&e.push(s);return e}},function(t,e,n){var i=n(0);i(i.S,"Object",{create:n(50)})},function(t,e,n){var i=n(0);i(i.S+i.F*!n(10),"Object",{defineProperty:n(11).f})},function(t,e,n){var i=n(0);i(i.S+i.F*!n(10),"Object",{defineProperties:n(184)})},function(t,e,n){var i=n(24),r=n(25).f;n(36)("getOwnPropertyDescriptor",function(){return function(t,e){return r(i(t),e)}})},function(t,e,n){var i=n(14),r=n(26);n(36)("getPrototypeOf",function(){return function(t){return r(i(t))}})},function(t,e,n){var i=n(14),r=n(48);n(36)("keys",function(){return function(t){return r(i(t))}})},function(t,e,n){n(36)("getOwnPropertyNames",function(){return n(185).f})},function(t,e,n){var i=n(6),r=n(40).onFreeze;n(36)("freeze",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(6),r=n(40).onFreeze;n(36)("seal",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(6),r=n(40).onFreeze;n(36)("preventExtensions",function(t){return function(e){return t&&i(e)?t(r(e)):e}})},function(t,e,n){var i=n(6);n(36)("isFrozen",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(6);n(36)("isSealed",function(t){return function(e){return!i(e)||!!t&&t(e)}})},function(t,e,n){var i=n(6);n(36)("isExtensible",function(t){return function(e){return!!i(e)&&(!t||t(e))}})},function(t,e,n){var i=n(0);i(i.S+i.F,"Object",{assign:n(186)})},function(t,e,n){var i=n(0);i(i.S,"Object",{is:n(363)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,n){var i=n(0);i(i.S,"Object",{setPrototypeOf:n(124).set})},function(t,e,n){"use strict";var i=n(72),r={};r[n(8)("toStringTag")]="z",r+""!="[object z]"&&n(22)(Object.prototype,"toString",function(){return"[object "+i(this)+"]"},!0)},function(t,e,n){var i=n(0);i(i.P,"Function",{bind:n(187)})},function(t,e,n){var i=n(11).f,r=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in r||n(10)&&i(r,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var i=n(6),r=n(26),o=n(8)("hasInstance"),s=Function.prototype;o in s||n(11).f(s,o,{value:function(t){if("function"!=typeof this||!i(t))return!1;if(!i(this.prototype))return t instanceof this;for(;t=r(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var i=n(0),r=n(189);i(i.G+i.F*(parseInt!=r),{parseInt:r})},function(t,e,n){var i=n(0),r=n(190);i(i.G+i.F*(parseFloat!=r),{parseFloat:r})},function(t,e,n){"use strict";var i=n(3),r=n(20),o=n(28),s=n(126),a=n(33),u=n(5),h=n(51).f,c=n(25).f,l=n(11).f,f=n(63).trim,p=i.Number,d=p,y=p.prototype,v="Number"==o(n(50)(y)),g="trim"in String.prototype,_=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var n,i,r,o=(e=g?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+e}for(var s,u=e.slice(2),h=0,c=u.length;h<c;h++)if((s=u.charCodeAt(h))<48||s>r)return NaN;return parseInt(u,i)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(v?u(function(){y.valueOf.call(n)}):"Number"!=o(n))?s(new d(_(e)),n,p):_(e)};for(var m,x=n(10)?h(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)r(d,m=x[w])&&!r(p,m)&&l(p,m,c(d,m));p.prototype=y,y.constructor=p,n(22)(i,"Number",p)}},function(t,e,n){"use strict";var i=n(0),r=n(35),o=n(191),s=n(127),a=1..toFixed,u=Math.floor,h=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",l=function(t,e){for(var n=-1,i=e;++n<6;)i+=t*h[n],h[n]=i%1e7,i=u(i/1e7)},f=function(t){for(var e=6,n=0;--e>=0;)n+=h[e],h[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==h[t]){var n=String(h[t]);e=""===e?n:e+s.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2==1?d(t,e-1,n*t):d(t*t,e/2,n)};i(i.P+i.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(5)(function(){a.call({})})),"Number",{toFixed:function(t){var e,n,i,a,u=o(this,c),h=r(t),y="",v="0";if(h<0||h>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(y="-",u=-u),u>1e-21)if(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*d(2,69,1))-69,n=e<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(l(0,n),i=h;i>=7;)l(1e7,0),i-=7;for(l(d(10,i,1),0),i=e-1;i>=23;)f(1<<23),i-=23;f(1<<i),l(1,1),f(2),v=p()}else l(0,n),l(1<<-e,0),v=p()+s.call("0",h);return v=h>0?y+((a=v.length)<=h?"0."+s.call("0",h-a)+v:v.slice(0,a-h)+"."+v.slice(a-h)):y+v}})},function(t,e,n){"use strict";var i=n(0),r=n(5),o=n(191),s=1..toPrecision;i(i.P+i.F*(r(function(){return"1"!==s.call(1,void 0)})||!r(function(){s.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?s.call(e):s.call(e,t)}})},function(t,e,n){var i=n(0);i(i.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var i=n(0),r=n(3).isFinite;i(i.S,"Number",{isFinite:function(t){return"number"==typeof t&&r(t)}})},function(t,e,n){var i=n(0);i(i.S,"Number",{isInteger:n(192)})},function(t,e,n){var i=n(0);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(0),r=n(192),o=Math.abs;i(i.S,"Number",{isSafeInteger:function(t){return r(t)&&o(t)<=9007199254740991}})},function(t,e,n){var i=n(0);i(i.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var i=n(0);i(i.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var i=n(0),r=n(190);i(i.S+i.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},function(t,e,n){var i=n(0),r=n(189);i(i.S+i.F*(Number.parseInt!=r),"Number",{parseInt:r})},function(t,e,n){var i=n(0),r=n(193),o=Math.sqrt,s=Math.acosh;i(i.S+i.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+o(t-1)*o(t+1))}})},function(t,e,n){function i(t){return isFinite(t=+t)&&0!=t?t<0?-i(-t):Math.log(t+Math.sqrt(t*t+1)):t}var r=n(0),o=Math.asinh;r(r.S+r.F*!(o&&1/o(0)>0),"Math",{asinh:i})},function(t,e,n){var i=n(0),r=Math.atanh;i(i.S+i.F*!(r&&1/r(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var i=n(0),r=n(128);i(i.S,"Math",{cbrt:function(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var i=n(0);i(i.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var i=n(0),r=Math.exp;i(i.S,"Math",{cosh:function(t){return(r(t=+t)+r(-t))/2}})},function(t,e,n){var i=n(0),r=n(129);i(i.S+i.F*(r!=Math.expm1),"Math",{expm1:r})},function(t,e,n){var i=n(0);i(i.S,"Math",{fround:n(194)})},function(t,e,n){var i=n(0),r=Math.abs;i(i.S,"Math",{hypot:function(t,e){for(var n,i,o=0,s=0,a=arguments.length,u=0;s<a;)u<(n=r(arguments[s++]))?(o=o*(i=u/n)*i+1,u=n):o+=n>0?(i=n/u)*i:n;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,n){var i=n(0),r=Math.imul;i(i.S+i.F*n(5)(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function(t,e){var n=+t,i=+e,r=65535&n,o=65535&i;return 0|r*o+((65535&n>>>16)*o+r*(65535&i>>>16)<<16>>>0)}})},function(t,e,n){var i=n(0);i(i.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var i=n(0);i(i.S,"Math",{log1p:n(193)})},function(t,e,n){var i=n(0);i(i.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var i=n(0);i(i.S,"Math",{sign:n(128)})},function(t,e,n){var i=n(0),r=n(129),o=Math.exp;i(i.S+i.F*n(5)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var i=n(0),r=n(129),o=Math.exp;i(i.S,"Math",{tanh:function(t){var e=r(t=+t),n=r(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var i=n(0);i(i.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var i=n(0),r=n(49),o=String.fromCharCode,s=String.fromCodePoint;i(i.S+i.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(t){for(var e,n=[],i=arguments.length,s=0;i>s;){if(e=+arguments[s++],r(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var i=n(0),r=n(24),o=n(12);i(i.S,"String",{raw:function(t){for(var e=r(t.raw),n=o(e.length),i=arguments.length,s=[],a=0;n>a;)s.push(String(e[a++])),a<i&&s.push(String(arguments[a]));return s.join("")}})},function(t,e,n){"use strict";n(63)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var i=n(130)(!0);n(131)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(0),r=n(130)(!1);i(i.P,"String",{codePointAt:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(0),r=n(12),o=n(133),s="".endsWith;i(i.P+i.F*n(134)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,i=r(e.length),a=void 0===n?i:Math.min(r(n),i),u=String(t);return s?s.call(e,u,a):e.slice(a-u.length,a)===u}})},function(t,e,n){"use strict";var i=n(0),r=n(133);i(i.P+i.F*n(134)("includes"),"String",{includes:function(t){return!!~r(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var i=n(0);i(i.P,"String",{repeat:n(127)})},function(t,e,n){"use strict";var i=n(0),r=n(12),o=n(133),s="".startsWith;i(i.P+i.F*n(134)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),i=String(t);return s?s.call(e,i,n):e.slice(n,n+i.length)===i}})},function(t,e,n){"use strict";n(23)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(23)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(23)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(23)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(23)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(23)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(23)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(23)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(23)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(23)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(23)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(23)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(23)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var i=n(0);i(i.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var i=n(0),r=n(14),o=n(33);i(i.P+i.F*n(5)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=r(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var i=n(0),r=n(425);i(i.P+i.F*(Date.prototype.toISOString!==r),"Date",{toISOString:r})},function(t,e,n){"use strict";var i=n(5),r=Date.prototype.getTime,o=Date.prototype.toISOString,s=function(t){return t>9?t:"0"+t};t.exports=i(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!i(function(){o.call(new Date(NaN))})?function(){if(!isFinite(r.call(this)))throw RangeError("Invalid time value");var t=this.getUTCFullYear(),e=this.getUTCMilliseconds(),n=t<0?"-":t>9999?"+":"";return n+("00000"+Math.abs(t)).slice(n?-6:-4)+"-"+s(this.getUTCMonth()+1)+"-"+s(this.getUTCDate())+"T"+s(this.getUTCHours())+":"+s(this.getUTCMinutes())+":"+s(this.getUTCSeconds())+"."+(e>99?e:"0"+s(e))+"Z"}:o},function(t,e,n){var i=Date.prototype,r=i.toString,o=i.getTime;new Date(NaN)+""!="Invalid Date"&&n(22)(i,"toString",function(){var t=o.call(this);return t==t?r.call(this):"Invalid Date"})},function(t,e,n){var i=n(8)("toPrimitive"),r=Date.prototype;i in r||n(21)(r,i,n(428))},function(t,e,n){"use strict";var i=n(2),r=n(33);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return r(i(this),"number"!=t)}},function(t,e,n){var i=n(0);i(i.S,"Array",{isArray:n(91)})},function(t,e,n){"use strict";var i=n(27),r=n(0),o=n(14),s=n(195),a=n(135),u=n(12),h=n(136),c=n(137);r(r.S+r.F*!n(93)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,r,l,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,v=void 0!==y,g=0,_=c(f);if(v&&(y=i(y,d>2?arguments[2]:void 0,2)),void 0==_||p==Array&&a(_))for(n=new p(e=u(f.length));e>g;g++)h(n,g,v?y(f[g],g):f[g]);else for(l=_.call(f),n=new p;!(r=l.next()).done;g++)h(n,g,v?s(l,y,[r.value,g],!0):r.value);return n.length=g,n}})},function(t,e,n){"use strict";var i=n(0),r=n(136);i(i.S+i.F*n(5)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)r(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var i=n(0),r=n(24),o=[].join;i(i.P+i.F*(n(70)!=Object||!n(29)(o)),"Array",{join:function(t){return o.call(r(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var i=n(0),r=n(123),o=n(28),s=n(49),a=n(12),u=[].slice;i(i.P+i.F*n(5)(function(){r&&u.call(r)}),"Array",{slice:function(t,e){var n=a(this.length),i=o(this);if(e=void 0===e?n:e,"Array"==i)return u.call(this,t,e);for(var r=s(t,n),h=s(e,n),c=a(h-r),l=new Array(c),f=0;f<c;f++)l[f]="String"==i?this.charAt(r+f):this[r+f];return l}})},function(t,e,n){"use strict";var i=n(0),r=n(17),o=n(14),s=n(5),a=[].sort,u=[1,2,3];i(i.P+i.F*(s(function(){u.sort(void 0)})||!s(function(){u.sort(null)})||!n(29)(a)),"Array",{sort:function(t){return void 0===t?a.call(o(this)):a.call(o(this),r(t))}})},function(t,e,n){"use strict";var i=n(0),r=n(37)(0),o=n(29)([].forEach,!0);i(i.P+i.F*!o,"Array",{forEach:function(t){return r(this,t,arguments[1])}})},function(t,e,n){var i=n(6),r=n(91),o=n(8)("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var i=n(0),r=n(37)(1);i(i.P+i.F*!n(29)([].map,!0),"Array",{map:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(0),r=n(37)(2);i(i.P+i.F*!n(29)([].filter,!0),"Array",{filter:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(0),r=n(37)(3);i(i.P+i.F*!n(29)([].some,!0),"Array",{some:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(0),r=n(37)(4);i(i.P+i.F*!n(29)([].every,!0),"Array",{every:function(t){return r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(0),r=n(196);i(i.P+i.F*!n(29)([].reduce,!0),"Array",{reduce:function(t){return r(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var i=n(0),r=n(196);i(i.P+i.F*!n(29)([].reduceRight,!0),"Array",{reduceRight:function(t){return r(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var i=n(0),r=n(89)(!1),o=[].indexOf,s=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(s||!n(29)(o)),"Array",{indexOf:function(t){return s?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},function(t,e,n){"use strict";var i=n(0),r=n(24),o=n(35),s=n(12),a=[].lastIndexOf,u=!!a&&1/[1].lastIndexOf(1,-0)<0;i(i.P+i.F*(u||!n(29)(a)),"Array",{lastIndexOf:function(t){if(u)return a.apply(this,arguments)||0;var e=r(this),n=s(e.length),i=n-1;for(arguments.length>1&&(i=Math.min(i,o(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in e&&e[i]===t)return i||0;return-1}})},function(t,e,n){var i=n(0);i(i.P,"Array",{copyWithin:n(197)}),n(41)("copyWithin")},function(t,e,n){var i=n(0);i(i.P,"Array",{fill:n(139)}),n(41)("fill")},function(t,e,n){"use strict";var i=n(0),r=n(37)(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),i(i.P+i.F*o,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(41)("find")},function(t,e,n){"use strict";var i=n(0),r=n(37)(6),o=!0;"findIndex"in[]&&Array(1).findIndex(function(){o=!1}),i(i.P+i.F*o,"Array",{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(41)("findIndex")},function(t,e,n){n(52)("Array")},function(t,e,n){var i=n(3),r=n(126),o=n(11).f,s=n(51).f,a=n(92),u=n(94),h=i.RegExp,c=h,l=h.prototype,f=/a/g,p=/a/g,d=new h(f)!==f;if(n(10)&&(!d||n(5)(function(){return p[n(8)("match")]=!1,h(f)!=f||h(p)==p||"/a/i"!=h(f,"i")}))){h=function(t,e){var n=this instanceof h,i=a(t),o=void 0===e;return!n&&i&&t.constructor===h&&o?t:r(d?new c(i&&!o?t.source:t,e):c((i=t instanceof h)?t.source:t,i&&o?u.call(t):e),n?this:l,h)};for(var y=function(t){t in h||o(h,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},v=s(c),g=0;v.length>g;)y(v[g++]);l.constructor=h,h.prototype=l,n(22)(i,"RegExp",h)}n(52)("RegExp")},function(t,e,n){"use strict";n(199);var i=n(2),r=n(94),o=n(10),s=/./.toString,a=function(t){n(22)(RegExp.prototype,"toString",t,!0)};n(5)(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?a(function(){var t=i(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?r.call(t):void 0)}):"toString"!=s.name&&a(function(){return s.call(this)})},function(t,e,n){n(95)("match",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(95)("replace",2,function(t,e,n){return[function(i,r){"use strict";var o=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,o,r):n.call(String(o),i,r)},n]})},function(t,e,n){n(95)("search",1,function(t,e,n){return[function(n){"use strict";var i=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,i):new RegExp(n)[e](String(i))},n]})},function(t,e,n){n(95)("split",2,function(t,e,i){"use strict";var r=n(92),o=i,s=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];i=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!r(t))return o.call(n,t,e);var i,u,h,c,l,f=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,y=void 0===e?4294967295:e>>>0,v=new RegExp(t.source,p+"g");for(a||(i=new RegExp("^"+v.source+"$(?!\\s)",p));(u=v.exec(n))&&!((h=u.index+u[0].length)>d&&(f.push(n.slice(d,u.index)),!a&&u.length>1&&u[0].replace(i,function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(u[l]=void 0)}),u.length>1&&u.index<n.length&&s.apply(f,u.slice(1)),c=u[0].length,d=h,f.length>=y));)v.lastIndex===u.index&&v.lastIndex++;return d===n.length?!c&&v.test("")||f.push(""):f.push(n.slice(d)),f.length>y?f.slice(0,y):f}}else"0".split(void 0,0).length&&(i=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,r){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},i]})},function(t,e,n){"use strict";var i,r,o,s,a=n(47),u=n(3),h=n(27),c=n(72),l=n(0),f=n(6),p=n(17),d=n(53),y=n(54),v=n(96),g=n(141).set,_=n(142)(),m=n(143),x=n(200),w=n(201),b="Promise",S=u.TypeError,C=u.process,k=u.Promise,P="process"==c(C),M=function(){},D=r=m.f,T=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n(8)("species")]=function(t){t(M,M)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e}catch(t){}}(),E=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},O=function(t,e){if(!t._n){t._n=!0;var n=t._c;_(function(){for(var i=t._v,r=1==t._s,o=0,s=function(e){var n,o,s=r?e.ok:e.fail,a=e.resolve,u=e.reject,h=e.domain;try{s?(r||(2==t._h&&F(t),t._h=1),!0===s?n=i:(h&&h.enter(),n=s(i),h&&h.exit()),n===e.promise?u(S("Promise-chain cycle")):(o=E(n))?o.call(n,a,u):a(n)):u(i)}catch(t){u(t)}};n.length>o;)s(n[o++]);t._c=[],t._n=!1,e&&!t._h&&A(t)})}},A=function(t){g.call(u,function(){var e,n,i,r=t._v,o=j(t);if(o&&(e=x(function(){P?C.emit("unhandledRejection",r,t):(n=u.onunhandledrejection)?n({promise:t,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=P||j(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},j=function(t){return 1!==t._h&&0===(t._a||t._c).length},F=function(t){g.call(u,function(){var e;P?C.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},L=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=E(t))?_(function(){var i={_w:n,_d:!1};try{e.call(t,h(L,i,1),h(B,i,1))}catch(t){B.call(i,t)}}):(n._v=t,n._s=1,O(n,!1))}catch(t){B.call({_w:n,_d:!1},t)}}};T||(k=function(t){d(this,k,b,"_h"),p(t),i.call(this);try{t(h(L,this,1),h(B,this,1))}catch(t){B.call(this,t)}},(i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(55)(k.prototype,{then:function(t,e){var n=D(v(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=h(L,t,1),this.reject=h(B,t,1)},m.f=D=function(t){return t===k||t===s?new o(t):r(t)}),l(l.G+l.W+l.F*!T,{Promise:k}),n(62)(k,b),n(52)(b),s=n(32).Promise,l(l.S+l.F*!T,b,{reject:function(t){var e=D(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!T),b,{resolve:function(t){return w(a&&this===s?k:this,t)}}),l(l.S+l.F*!(T&&n(93)(function(t){k.all(t).catch(M)})),b,{all:function(t){var e=this,n=D(e),i=n.resolve,r=n.reject,o=x(function(){var n=[],o=0,s=1;y(t,!1,function(t){var a=o++,u=!1;n.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,n[a]=t,--s||i(n))},r)}),--s||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=D(e),i=n.reject,r=x(function(){y(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(206),r=n(65);n(97)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"WeakSet"),t,!0)}},i,!1,!0)},function(t,e,n){"use strict";var i=n(0),r=n(98),o=n(144),s=n(2),a=n(49),u=n(12),h=n(6),c=n(3).ArrayBuffer,l=n(96),f=o.ArrayBuffer,p=o.DataView,d=r.ABV&&c.isView,y=f.prototype.slice,v=r.VIEW;i(i.G+i.W+i.F*(c!==f),{ArrayBuffer:f}),i(i.S+i.F*!r.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||h(t)&&v in t}}),i(i.P+i.U+i.F*n(5)(function(){return!new f(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==y&&void 0===e)return y.call(s(this),t);for(var n=s(this).byteLength,i=a(t,n),r=a(void 0===e?n:e,n),o=new(l(this,f))(u(r-i)),h=new p(this),c=new p(o),d=0;i<r;)c.setUint8(d++,h.getUint8(i++));return o}}),n(52)("ArrayBuffer")},function(t,e,n){var i=n(0);i(i.G+i.W+i.F*!n(98).ABV,{DataView:n(144).DataView})},function(t,e,n){n(38)("Int8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Uint8",1,function(t){return function(e,n,i){return t(this,e,n,i)}},!0)},function(t,e,n){n(38)("Int16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Uint16",2,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Int32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Uint32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Float32",4,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){n(38)("Float64",8,function(t){return function(e,n,i){return t(this,e,n,i)}})},function(t,e,n){var i=n(0),r=n(17),o=n(2),s=(n(3).Reflect||{}).apply,a=Function.apply;i(i.S+i.F*!n(5)(function(){s(function(){})}),"Reflect",{apply:function(t,e,n){var i=r(t),u=o(n);return s?s(i,e,u):a.call(i,e,u)}})},function(t,e,n){var i=n(0),r=n(50),o=n(17),s=n(2),a=n(6),u=n(5),h=n(187),c=(n(3).Reflect||{}).construct,l=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),f=!u(function(){c(function(){})});i(i.S+i.F*(l||f),"Reflect",{construct:function(t,e){o(t),s(e);var n=arguments.length<3?t:o(arguments[2]);if(f&&!l)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(h.apply(t,i))}var u=n.prototype,p=r(a(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return a(d)?d:p}})},function(t,e,n){var i=n(11),r=n(0),o=n(2),s=n(33);r(r.S+r.F*n(5)(function(){Reflect.defineProperty(i.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=s(e,!0),o(n);try{return i.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var i=n(0),r=n(25).f,o=n(2);i(i.S,"Reflect",{deleteProperty:function(t,e){var n=r(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var i=n(0),r=n(2),o=function(t){this._t=r(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(132)(o,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),i(i.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function i(t,e){var n,a,c=arguments.length<3?t:arguments[2];return h(t)===c?t[e]:(n=r.f(t,e))?s(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:u(a=o(t))?i(a,e,c):void 0}var r=n(25),o=n(26),s=n(20),a=n(0),u=n(6),h=n(2);a(a.S,"Reflect",{get:i})},function(t,e,n){var i=n(25),r=n(0),o=n(2);r(r.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return i.f(o(t),e)}})},function(t,e,n){var i=n(0),r=n(26),o=n(2);i(i.S,"Reflect",{getPrototypeOf:function(t){return r(o(t))}})},function(t,e,n){var i=n(0);i(i.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var i=n(0),r=n(2),o=Object.isExtensible;i(i.S,"Reflect",{isExtensible:function(t){return r(t),!o||o(t)}})},function(t,e,n){var i=n(0);i(i.S,"Reflect",{ownKeys:n(208)})},function(t,e,n){var i=n(0),r=n(2),o=Object.preventExtensions;i(i.S,"Reflect",{preventExtensions:function(t){r(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function i(t,e,n){var u,f,p=arguments.length<4?t:arguments[3],d=o.f(c(t),e);if(!d){if(l(f=s(t)))return i(f,e,n,p);d=h(0)}return a(d,"value")?!(!1===d.writable||!l(p))&&(u=o.f(p,e)||h(0),u.value=n,r.f(p,e,u),!0):void 0!==d.set&&(d.set.call(p,n),!0)}var r=n(11),o=n(25),s=n(26),a=n(20),u=n(0),h=n(45),c=n(2),l=n(6);u(u.S,"Reflect",{set:i})},function(t,e,n){var i=n(0),r=n(124);r&&i(i.S,"Reflect",{setPrototypeOf:function(t,e){r.check(t,e);try{return r.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var i=n(0),r=n(89)(!0);i(i.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n(41)("includes")},function(t,e,n){"use strict";var i=n(0),r=n(209),o=n(14),s=n(12),a=n(17),u=n(138);i(i.P,"Array",{flatMap:function(t){var e,n,i=o(this);return a(t),e=s(i.length),n=u(i,0),r(n,i,i,e,0,1,t,arguments[1]),n}}),n(41)("flatMap")},function(t,e,n){"use strict";var i=n(0),r=n(209),o=n(14),s=n(12),a=n(35),u=n(138);i(i.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=s(e.length),i=u(e,0);return r(i,e,e,n,0,void 0===t?1:a(t)),i}}),n(41)("flatten")},function(t,e,n){"use strict";var i=n(0),r=n(130)(!0);i(i.P,"String",{at:function(t){return r(this,t)}})},function(t,e,n){"use strict";var i=n(0),r=n(210),o=n(145);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padStart:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var i=n(0),r=n(210),o=n(145);i(i.P+i.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(o),"String",{padEnd:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(63)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(63)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var i=n(0),r=n(34),o=n(12),s=n(92),a=n(94),u=RegExp.prototype,h=function(t,e){this._r=t,this._s=e};n(132)(h,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),i(i.P,"String",{matchAll:function(t){if(r(this),!s(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):a.call(t),i=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return i.lastIndex=o(t.lastIndex),new h(i,e)}})},function(t,e,n){n(120)("asyncIterator")},function(t,e,n){n(120)("observable")},function(t,e,n){var i=n(0),r=n(208),o=n(24),s=n(25),a=n(136);i(i.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,i=o(t),u=s.f,h=r(i),c={},l=0;h.length>l;)void 0!==(n=u(i,e=h[l++]))&&a(c,e,n);return c}})},function(t,e,n){var i=n(0),r=n(211)(!1);i(i.S,"Object",{values:function(t){return r(t)}})},function(t,e,n){var i=n(0),r=n(211)(!0);i(i.S,"Object",{entries:function(t){return r(t)}})},function(t,e,n){"use strict";var i=n(0),r=n(14),o=n(17),s=n(11);n(10)&&i(i.P+n(99),"Object",{__defineGetter__:function(t,e){s.f(r(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(0),r=n(14),o=n(17),s=n(11);n(10)&&i(i.P+n(99),"Object",{__defineSetter__:function(t,e){s.f(r(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var i=n(0),r=n(14),o=n(33),s=n(26),a=n(25).f;n(10)&&i(i.P+n(99),"Object",{__lookupGetter__:function(t){var e,n=r(this),i=o(t,!0);do{if(e=a(n,i))return e.get}while(n=s(n))}})},function(t,e,n){"use strict";var i=n(0),r=n(14),o=n(33),s=n(26),a=n(25).f;n(10)&&i(i.P+n(99),"Object",{__lookupSetter__:function(t){var e,n=r(this),i=o(t,!0);do{if(e=a(n,i))return e.set}while(n=s(n))}})},function(t,e,n){var i=n(0);i(i.P+i.R,"Map",{toJSON:n(212)("Map")})},function(t,e,n){var i=n(0);i(i.P+i.R,"Set",{toJSON:n(212)("Set")})},function(t,e,n){n(100)("Map")},function(t,e,n){n(100)("Set")},function(t,e,n){n(100)("WeakMap")},function(t,e,n){n(100)("WeakSet")},function(t,e,n){n(101)("Map")},function(t,e,n){n(101)("Set")},function(t,e,n){n(101)("WeakMap")},function(t,e,n){n(101)("WeakSet")},function(t,e,n){var i=n(0);i(i.G,{global:n(3)})},function(t,e,n){var i=n(0);i(i.S,"System",{global:n(3)})},function(t,e,n){var i=n(0),r=n(28);i(i.S,"Error",{isError:function(t){return"Error"===r(t)}})},function(t,e,n){var i=n(0);i(i.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var i=n(0);i(i.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var i=n(0),r=180/Math.PI;i(i.S,"Math",{degrees:function(t){return t*r}})},function(t,e,n){var i=n(0),r=n(214),o=n(194);i(i.S,"Math",{fscale:function(t,e,n,i,s){return o(r(t,e,n,i,s))}})},function(t,e,n){var i=n(0);i(i.S,"Math",{iaddh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)+(i>>>0)+((r&o|(r|o)&~(r+o>>>0))>>>31)|0}})},function(t,e,n){var i=n(0);i(i.S,"Math",{isubh:function(t,e,n,i){var r=t>>>0,o=n>>>0;return(e>>>0)-(i>>>0)-((~r&o|~(r^o)&r-o>>>0)>>>31)|0}})},function(t,e,n){var i=n(0);i(i.S,"Math",{imulh:function(t,e){var n=+t,i=+e,r=65535&n,o=65535&i,s=n>>16,a=i>>16,u=(s*o>>>0)+(r*o>>>16);return s*a+(u>>16)+((r*a>>>0)+(65535&u)>>16)}})},function(t,e,n){var i=n(0);i(i.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var i=n(0),r=Math.PI/180;i(i.S,"Math",{radians:function(t){return t*r}})},function(t,e,n){var i=n(0);i(i.S,"Math",{scale:n(214)})},function(t,e,n){var i=n(0);i(i.S,"Math",{umulh:function(t,e){var n=+t,i=+e,r=65535&n,o=65535&i,s=n>>>16,a=i>>>16,u=(s*o>>>0)+(r*o>>>16);return s*a+(u>>>16)+((r*a>>>0)+(65535&u)>>>16)}})},function(t,e,n){var i=n(0);i(i.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var i=n(0),r=n(32),o=n(3),s=n(96),a=n(201);i(i.P+i.R,"Promise",{finally:function(t){var e=s(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return a(e,t()).then(function(){return n})}:t,n?function(n){return a(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(0),r=n(143),o=n(200);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var i=n(39),r=n(2),o=i.key,s=i.set;i.exp({defineMetadata:function(t,e,n,i){s(t,e,r(n),o(i))}})},function(t,e,n){var i=n(39),r=n(2),o=i.key,s=i.map,a=i.store;i.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),i=s(r(e),n,!1);if(void 0===i||!i.delete(t))return!1;if(i.size)return!0;var u=a.get(e);return u.delete(n),!!u.size||a.delete(e)}})},function(t,e,n){var i=n(39),r=n(2),o=n(26),s=i.has,a=i.get,u=i.key,h=function(t,e,n){if(s(t,e,n))return a(t,e,n);var i=o(e);return null!==i?h(t,i,n):void 0};i.exp({getMetadata:function(t,e){return h(t,r(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var i=n(204),r=n(213),o=n(39),s=n(2),a=n(26),u=o.keys,h=o.key,c=function(t,e){var n=u(t,e),o=a(t);if(null===o)return n;var s=c(o,e);return s.length?n.length?r(new i(n.concat(s))):s:n};o.exp({getMetadataKeys:function(t){return c(s(t),arguments.length<2?void 0:h(arguments[1]))}})},function(t,e,n){var i=n(39),r=n(2),o=i.get,s=i.key;i.exp({getOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(39),r=n(2),o=i.keys,s=i.key;i.exp({getOwnMetadataKeys:function(t){return o(r(t),arguments.length<2?void 0:s(arguments[1]))}})},function(t,e,n){var i=n(39),r=n(2),o=n(26),s=i.has,a=i.key,u=function(t,e,n){if(s(t,e,n))return!0;var i=o(e);return null!==i&&u(t,i,n)};i.exp({hasMetadata:function(t,e){return u(t,r(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var i=n(39),r=n(2),o=i.has,s=i.key;i.exp({hasOwnMetadata:function(t,e){return o(t,r(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var i=n(39),r=n(2),o=n(17),s=i.key,a=i.set;i.exp({metadata:function(t,e){return function(n,i){a(t,e,(void 0!==i?r:o)(n),s(i))}}})},function(t,e,n){var i=n(0),r=n(142)(),o=n(3).process,s="process"==n(28)(o);i(i.G,{asap:function(t){var e=s&&o.domain;r(e?e.bind(t):t)}})},function(t,e,n){"use strict";var i=n(0),r=n(3),o=n(32),s=n(142)(),a=n(8)("observable"),u=n(17),h=n(2),c=n(53),l=n(55),f=n(21),p=n(54),d=p.RETURN,y=function(t){return null==t?void 0:u(t)},v=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},_=function(t){g(t)||(t._o=void 0,v(t))},m=function(t,e){h(t),this._c=void 0,this._o=t,t=new x(this);try{var n=e(t),i=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){i.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&v(this)};m.prototype=l({},{unsubscribe:function(){_(this)}});var x=function(t){this._s=t};x.prototype=l({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var i=y(n.next);if(i)return i.call(n,t)}catch(t){try{_(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var i=y(n.error);if(!i)throw t;t=i.call(n,t)}catch(t){try{v(e)}finally{throw t}}return v(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var i=y(n.complete);t=i?i.call(n,t):void 0}catch(t){try{v(e)}finally{throw t}}return v(e),t}}});var w=function(t){c(this,w,"Observable","_f")._f=u(t)};l(w.prototype,{subscribe:function(t){return new m(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||r.Promise)(function(n,i){u(t);var r=e.subscribe({next:function(e){try{return t(e)}catch(t){i(t),r.unsubscribe()}},error:i,complete:n})})}}),l(w,{from:function(t){var e="function"==typeof this?this:w,n=y(h(t)[a]);if(n){var i=h(n.call(t));return i.constructor===e?i:new e(function(t){return i.subscribe(t)})}return new e(function(e){var n=!1;return s(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var e=!1;return s(function(){if(!e){for(var i=0;i<n.length;++i)if(t.next(n[i]),e)return;t.complete()}}),function(){e=!0}})}}),f(w.prototype,a,function(){return this}),i(i.G,{Observable:w}),n(52)("Observable")},function(t,e,n){var i=n(3),r=n(0),o=n(145),s=[].slice,a=/MSIE .\./.test(o),u=function(t){return function(e,n){var i=arguments.length>2,r=!!i&&s.call(arguments,2);return t(i?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};r(r.G+r.B+r.F*a,{setTimeout:u(i.setTimeout),setInterval:u(i.setInterval)})},function(t,e,n){var i=n(0),r=n(141);i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},function(t,e,n){for(var i=n(140),r=n(48),o=n(22),s=n(3),a=n(21),u=n(64),h=n(8),c=h("iterator"),l=h("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(p),y=0;y<d.length;y++){var v,g=d[y],_=p[g],m=s[g],x=m&&m.prototype;if(x&&(x[c]||a(x,c,f),x[l]||a(x,l,g),u[g]=f,_))for(v in i)x[v]||o(x,v,i[v],!0)}},function(t,e,n){(function(e){!function(e){"use strict";function n(t,e,n,o){var s=e&&e.prototype instanceof r?e:r,a=Object.create(s.prototype),u=new f(o||[]);return a._invoke=function(t,e,n){var r=C;return function(o,s){if(r===P)throw new Error("Generator is already running");if(r===M){if("throw"===o)throw s;return d()}for(n.method=o,n.arg=s;;){var a=n.delegate;if(a){var u=h(a,n);if(u){if(u===D)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===C)throw r=M,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=P;var c=i(t,e,n);if("normal"===c.type){if(r=n.done?M:k,c.arg===D)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=M,n.method="throw",n.arg=c.arg)}}}(t,n,u),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function r(){}function o(){}function s(){}function a(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function n(e,r,o,s){var a=i(t[e],t,r);if("throw"!==a.type){var u=a.arg,h=u.value;return h&&"object"==typeof h&&g.call(h,"__await")?Promise.resolve(h.__await).then(function(t){n("next",t,o,s)},function(t){n("throw",t,o,s)}):Promise.resolve(h).then(function(t){u.value=t,o(u)},s)}s(a.arg)}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var r;this._invoke=function(t,e){function i(){return new Promise(function(i,r){n(t,e,i,r)})}return r=r?r.then(i,i):i()}}function h(t,e){var n=t.iterator[e.method];if(n===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,h(t,e),"throw"===e.method))return D;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return D}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,D;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,D):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,D)}function c(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function l(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function f(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(c,this),this.reset(!0)}function p(t){if(t){var e=t[m];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return i.next=i}}return{next:d}}function d(){return{value:y,done:!0}}var y,v=Object.prototype,g=v.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},m=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag",b="object"==typeof t,S=e.regeneratorRuntime;if(S)b&&(t.exports=S);else{(S=e.regeneratorRuntime=b?t.exports:{}).wrap=n;var C="suspendedStart",k="suspendedYield",P="executing",M="completed",D={},T={};T[m]=function(){return this};var E=Object.getPrototypeOf,O=E&&E(E(p([])));O&&O!==v&&g.call(O,m)&&(T=O);var A=s.prototype=r.prototype=Object.create(T);o.prototype=A.constructor=s,s.constructor=o,s[w]=o.displayName="GeneratorFunction",S.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},S.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(A),t},S.awrap=function(t){return{__await:t}},a(u.prototype),u.prototype[x]=function(){return this},S.AsyncIterator=u,S.async=function(t,e,i,r){var o=new u(n(t,e,i,r));return S.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},a(A),A[w]="Generator",A[m]=function(){return this},A.toString=function(){return"[object Generator]"},S.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},S.values=p,f.prototype={constructor:f,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(l),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){function e(e,i){return o.type="throw",o.arg=t,n.next=e,i&&(n.method="next",n.arg=y),!!i}if(this.done)throw t;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return e("end");if(r.tryLoc<=this.prev){var s=g.call(r,"catchLoc"),a=g.call(r,"finallyLoc");if(s&&a){if(this.prev<r.catchLoc)return e(r.catchLoc,!0);if(this.prev<r.finallyLoc)return e(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return e(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return e(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&g.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,D):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),D},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),l(n),D}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;l(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=y),D}}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,n(106))},function(t,e,n){n(544),t.exports=n(32).RegExp.escape},function(t,e,n){var i=n(0),r=n(545)(/[\\^$*+?.()|[\]{}]/g,"\\$&");i(i.S,"RegExp",{escape:function(t){return r(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){var i=n(547);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0};r.transform=void 0;n(216)(i,r);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(215)(void 0)).push([t.i,'/*! normalize.css v2.1.1 | MIT License | git.io/normalize */\n\n/* ==========================================================================\nHTML5 display definitions\n========================================================================== */\n\n/**\n* Correct `block` display not defined in IE 8/9.\n*/\n\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nnav,\nsection,\nsummary {\n    display: block;\n}\n\n/**\n* Correct `inline-block` display not defined in IE 8/9.\n*/\n\naudio,\ncanvas,\nvideo {\n    display: inline-block;\n}\n\n/**\n* Prevent modern browsers from displaying `audio` without controls.\n* Remove excess height in iOS 5 devices.\n*/\n\naudio:not([controls]) {\n    display: none;\n    height: 0;\n}\n\n/**\n* Address styling not present in IE 8/9.\n*/\n\n[hidden] {\n    display: none;\n}\n\n/* ==========================================================================\nBase\n========================================================================== */\n\n/**\n* 1. Prevent system color scheme\'s background color being used in Firefox, IE,\n* and Opera.\n* 2. Prevent system color scheme\'s text color being used in Firefox, IE, and\n* Opera.\n* 3. Set default font family to sans-serif.\n* 4. Prevent iOS text size adjust after orientation change, without disabling\n* user zoom.\n*/\n\nhtml {\n    background: #fff; /* 1 */\n    color: #000; /* 2 */\n    font-family: sans-serif; /* 3 */\n    -ms-text-size-adjust: 100%; /* 4 */\n    -webkit-text-size-adjust: 100%; /* 4 */\n}\n\n/**\n* Remove default margin.\n*/\n\nbody {\n    margin: 0;\n}\n\n/* ==========================================================================\nLinks\n========================================================================== */\n\n/**\n* Address `outline` inconsistency between Chrome and other browsers.\n*/\n\na:focus {\n    outline: thin dotted;\n}\n\n/**\n* Improve readability when focused and also mouse hovered in all browsers.\n*/\n\na:active,\na:hover {\n    outline: 0;\n}\n\n/* ==========================================================================\nTypography\n========================================================================== */\n\n/**\n* Address variable `h1` font-size and margin within `section` and `article`\n* contexts in Firefox 4+, Safari 5, and Chrome.\n*/\n\nh1 {\n    font-size: 2em;\n    margin: 0.67em 0;\n}\n\n/**\n* Address styling not present in IE 8/9, Safari 5, and Chrome.\n*/\n\nabbr[title] {\n    border-bottom: 1px dotted;\n}\n\n/**\n* Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome.\n*/\n\nb,\nstrong {\n    font-weight: bold;\n}\n\n/**\n* Address styling not present in Safari 5 and Chrome.\n*/\n\ndfn {\n    font-style: italic;\n}\n\n/**\n* Address differences between Firefox and other browsers.\n*/\n\nhr {\n    -moz-box-sizing: content-box;\n    box-sizing: content-box;\n    height: 0;\n}\n\n/**\n* Address styling not present in IE 8/9.\n*/\n\nmark {\n    background: #ff0;\n    color: #000;\n}\n\n/**\n* Correct font family set oddly in Safari 5 and Chrome.\n*/\n\ncode,\nkbd,\npre,\nsamp {\n    font-family: monospace, serif;\n    font-size: 1em;\n}\n\n/**\n* Improve readability of pre-formatted text in all browsers.\n*/\n\npre {\n    white-space: pre-wrap;\n}\n\n/**\n* Set consistent quote types.\n*/\n\nq {\n    quotes: "\\201C" "\\201D" "\\2018" "\\2019";\n}\n\n/**\n* Address inconsistent and variable font size in all browsers.\n*/\n\nsmall {\n    font-size: 80%;\n}\n\n/**\n* Prevent `sub` and `sup` affecting `line-height` in all browsers.\n*/\n\nsub,\nsup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n}\n\nsup {\n    top: -0.5em;\n}\n\nsub {\n    bottom: -0.25em;\n}\n\n/* ==========================================================================\nEmbedded content\n========================================================================== */\n\n/**\n* Remove border when inside `a` element in IE 8/9.\n*/\n\nimg {\n    border: 0;\n}\n\n/**\n* Correct overflow displayed oddly in IE 9.\n*/\n\nsvg:not(:root) {\n    overflow: hidden;\n}\n\n/* ==========================================================================\nFigures\n========================================================================== */\n\n/**\n* Address margin not present in IE 8/9 and Safari 5.\n*/\n\nfigure {\n    margin: 0;\n}\n\n/* ==========================================================================\nForms\n========================================================================== */\n\n/**\n* Define consistent border, margin, and padding.\n*/\n\nfieldset {\n    border: 1px solid #c0c0c0;\n    margin: 0 2px;\n    padding: 0.35em 0.625em 0.75em;\n}\n\n/**\n* 1. Correct `color` not being inherited in IE 8/9.\n* 2. Remove padding so people aren\'t caught out if they zero out fieldsets.\n*/\n\nlegend {\n    border: 0; /* 1 */\n    padding: 0; /* 2 */\n}\n\n/**\n* 1. Correct font family not being inherited in all browsers.\n* 2. Correct font size not being inherited in all browsers.\n* 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome.\n*/\n\nbutton,\ninput,\nselect,\ntextarea {\n    font-family: inherit; /* 1 */\n    font-size: 100%; /* 2 */\n    margin: 0; /* 3 */\n}\n\n/**\n* Address Firefox 4+ setting `line-height` on `input` using `!important` in\n* the UA stylesheet.\n*/\n\nbutton,\ninput {\n    line-height: normal;\n}\n\n/**\n* Address inconsistent `text-transform` inheritance for `button` and `select`.\n* All other form control elements do not inherit `text-transform` values.\n* Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+.\n* Correct `select` style inheritance in Firefox 4+ and Opera.\n*/\n\nbutton,\nselect {\n    text-transform: none;\n}\n\n/**\n* 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`\n* and `video` controls.\n* 2. Correct inability to style clickable `input` types in iOS.\n* 3. Improve usability and consistency of cursor style between image-type\n* `input` and others.\n*/\n\nbutton,\nhtml input[type="button"], /* 1 */\ninput[type="reset"],\ninput[type="submit"] {\n    -webkit-appearance: button; /* 2 */\n    cursor: pointer; /* 3 */\n}\n\n/**\n* Re-set default cursor for disabled elements.\n*/\n\nbutton[disabled],\nhtml input[disabled] {\n    cursor: default;\n}\n\n/**\n* 1. Address box sizing set to `content-box` in IE 8/9.\n* 2. Remove excess padding in IE 8/9.\n*/\n\ninput[type="checkbox"],\ninput[type="radio"] {\n    box-sizing: border-box; /* 1 */\n    padding: 0; /* 2 */\n}\n\n/**\n* 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.\n* 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome\n* (include `-moz` to future-proof).\n*/\n\ninput[type="search"] {\n    -webkit-appearance: textfield; /* 1 */\n    -moz-box-sizing: content-box;\n    -webkit-box-sizing: content-box; /* 2 */\n    box-sizing: content-box;\n}\n\n/**\n* Remove inner padding and search cancel button in Safari 5 and Chrome\n* on OS X.\n*/\n\ninput[type="search"]::-webkit-search-cancel-button,\ninput[type="search"]::-webkit-search-decoration {\n    -webkit-appearance: none;\n}\n\n/**\n* Remove inner padding and border in Firefox 4+.\n*/\n\nbutton::-moz-focus-inner,\ninput::-moz-focus-inner {\n    border: 0;\n    padding: 0;\n}\n\n/**\n* 1. Remove default vertical scrollbar in IE 8/9.\n* 2. Improve readability and alignment in all browsers.\n*/\n\ntextarea {\n    overflow: auto; /* 1 */\n    vertical-align: top; /* 2 */\n}\n\n/* ==========================================================================\nTables\n========================================================================== */\n\n/**\n* Remove most spacing between table cells.\n*/\n\ntable {\n    border-collapse: collapse;\n    border-spacing: 0;\n}\n',""])},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r))return t;var o;return o=0===r.indexOf("//")?r:0===r.indexOf("/")?n+r:i+r.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(t,e,n){var i=n(550);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0};r.transform=void 0;n(216)(i,r);i.locals&&(t.exports=i.locals)},function(t,e,n){(t.exports=n(215)(void 0)).push([t.i,"/* Put your CSS here */\nhtml,\nbody {\n  margin: 0 0;\n  background: #000;\n}\n\nhtml {\n  box-sizing: border-box;\n}\n*,\n*::before,\n*::after {\n  box-sizing: inherit;\n}\n#cr-stage {\n  image-rendering: -moz-crisp-edges;         /* Firefox */\n  image-rendering:   -o-crisp-edges;         /* Opera */\n  image-rendering: -webkit-optimize-contrast;/* Webkit (non-standard naming) */\n  image-rendering: crisp-edges;\n  -ms-interpolation-mode: nearest-neighbor;  /* IE (non-standard property) */\n\n  transform-origin: top left;\n}\nh1 {\n  font-size: 1.2em;\n}\nh2 {\n  font-size: 1.1em;\n}\nfooter {\n  color: #DDD;\n  text-align: center;\n  padding: 1em;\n\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 0.8em;\n  vertical-align: super;\n  width: 100%\n}\n.copyright {\n  vertical-align: super;\n}\n\na {\n  color: #fff;\n}\n.fullscreen #theater {\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n",""])},function(t,e,n){"use strict";n(552),n(558),n(562),n(599),n(631),n(639),n(644),n(649);var i=n(657),r=(n.n(i),n(658)),o=(n.n(r),n(659)),s=(n.n(o),n(660)),a=(n.n(s),n(661)),u=(n.n(a),n(663)),h=(n.n(u),n(664)),c=(n.n(h),n(665));n.n(c)},function(t,e,n){"use strict";var i=n(553),r=(n.n(i),n(554)),o=(n.n(r),n(555));n.n(o)},function(t,e,n){(function(t){var e;e=n(9),t.c("BulletCircle",{bulletCircle:function(t){return this.shootConfig=e(t,{burstAmount:10,angle:"random"}),this},shootRing:function(t){var n,i,r,o,s,a,u,h,c,l;if(null==t&&(t={}),h=e(t,this.shootConfig),!this.hidden||h.shootWhenHidden){for(this.lastShotAt=0,this.currentBurst+=1,(l=this.weaponOrigin||h.weaponOrigin||[this.w/2,this.h/2])[0]*=null!=(o=this.scale)?o:1,l[1]*=null!=(s=this.scale)?s:1,n=360/h.burstAmount,c=("random"===h.angle?Math.random():h.angle)*n,u=[],i=r=0,a=h.burstAmount;0<=a?r<a:r>a;i=0<=a?++r:--r)u.push(h.projectile(l[0]+this.x,l[1]+this.y,c+i*n));return u}}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("BurstShot",{remove:function(){return this.unbind("GameLoop",this._checkForShot)},burstShot:function(t){return this.shootConfig=e(t,{targetType:"PlayerControlledShip",burstCooldown:800,cooldown:200,burstAmount:10,aim:0,angle:0,angleDeviation:0}),this.currentBurst=0,this.bind("GameLoop",this._checkForShot)},_checkForShot:function(e){var n,i,r;if(null!=this.lastShotAt)if(this.lastShotAt+=e.dt,this.shootConfig.burstAmount<=this.currentBurst){if(this.lastShotAt<this.shootConfig.burstCooldown)return;this.currentBurst=0}else if(this.lastShotAt<this.shootConfig.cooldown)return;if(r=this,n=0,t(this.shootConfig.targetType).each(function(){return n=Math.atan2(r.y-this.y,r.x-this.x),n*=180/Math.PI}),(i=n)>this.shootConfig.angle+this.shootConfig.aim?i=this.shootConfig.angle+this.shootConfig.aim:i<this.shootConfig.angle-this.shootConfig.aim&&(i=this.shootConfig.angle-this.shootConfig.aim),i=i-Math.floor(this.shootConfig.angleDeviation/2)+Math.random()*this.shootConfig.angleDeviation,i=(i+360)%360,this.currentBurst<this.shootConfig.burstAmount)return this._shoot(i)},_shoot:function(t){var e,n,i,r;if(!this.hidden||this.shootConfig.shootWhenHidden)return this.lastShotAt=0,this.currentBurst+=1,r=null!=(e=this.weaponOrigin)?e:[0,0],r[0]*=null!=(n=this.scale)?n:1,r[1]*=null!=(i=this.scale)?i:1,this.shootConfig.projectile(r[0]+this.x,r[1]+this.y,t)}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e,i;e=n(9),i=n(217),t.c("ShootOnSight",{init:function(){return this.requires("Delay")},remove:function(){return this.unbind("GameLoop",this._checkForShot)},shootOnSight:function(n){var i,r,o,s;return this.shootConfig=e(n,{targetType:"PlayerControlledShip",sightAngle:10,shootWhenHidden:!1,cooldown:800}),s=null!=(i=this.weaponOrigin)?i:[0,0],s[0]*=null!=(r=this.scale)?r:1,s[1]*=null!=(o=this.scale)?o:1,null==this.muzzleFlash&&(this.muzzleFlash=t.e("Sphere").attr({x:this.x+s[0],y:this.y+s[1],alpha:0}).muzzle(),this.attach(this.muzzleFlash)),this.muzzleFlash.attr({alpha:0}),this.lastShotAt=0,this.bind("GameLoop",this._checkForShot),this.bind("Revealing",function(t){return function(){return t.muzzleFlash.attr({alpha:0})}}(this))},_checkForShot:function(e){var n,r,o;if(!(this.shooting||null!=this.lastShotAt&&(this.lastShotAt+=e.dt,this.lastShotAt<this.shootConfig.cooldown)))return n=this,o=[],t(this.shootConfig.targetType).each(function(){var t;if(t=n._determineAngle(this),Math.abs(t-n.rotation)<n.shootConfig.sightAngle)return o.push(this)}),o.length>0?(r=i(o),this._shoot(r)):void 0},_determineAngle:function(t){var e;return e=Math.atan2(this.y-t.y,this.x-t.x),e*=180/Math.PI,this.xFlipped&&(e+=180),(e+360)%360},_shoot:function(t){if(!this.hidden||this.shootConfig.shootWhenHidden)return this.shooting=!0,this.muzzleFlash.attr({alpha:1}),this.delay(function(e){return function(){var n,i,r,o,s;return e.lastShotAt=0,s=null!=(i=e.weaponOrigin)?i:[0,0],s[0]*=null!=(r=e.scale)?r:1,s[1]*=null!=(o=e.scale)?o:1,n=e._determineAngle(t),e.xFlipped&&(n+=180),n=(n+360)%360,e.shootConfig.projectile(s[0]+e.x,s[1]+e.y,n),e.muzzleFlash.attr({alpha:0}),e.shooting=!1}}(this),300)}})}).call(e,n(1).default)},function(t,e,n){var i=n(218),r=n(220);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(81);t.exports=function(t,e){return i(e,function(e){return t[e]})}},function(t,e,n){"use strict";var i=n(559),r=(n.n(i),n(560)),o=(n.n(r),n(561));n.n(o)},function(t,e,n){(function(t){t.c("Gamepad",{_gpEnterFrame:function(){var t=this._getGamepad(this._gamepadIndex);t&&t.timestamp!==this._timestamp&&(this._timestamp=t.timestamp,this._emitGamepadEvents(t))},_emitGamepadEvents:function(t){for(var e=0;e<t.buttons.length;e++)(void 0!==this._buttonsState[e]&&this._buttonsState[e]!==t.buttons[e].value||void 0===this._buttonsState[e]&&0!==t.buttons[e].value)&&this.trigger("GamepadKeyChange",{button:e,value:t.buttons[e].value,pressed:t.buttons[e].pressed}),this._buttonsState[e]=t.buttons[e].value;for(var n=0;n<t.axes.length;n++)(void 0!==this._axesState[n]&&this._axesState[n]!==t.axes[n]||void 0===this._axesState[n]&&0!==t.axes[n])&&this.trigger("GamepadAxisChange",{axis:n,value:t.axes[n]})},_getGamepad:function(){var t=null,e=navigator.getGamepads||navigator.webkitGetGamepads;return e&&(t=e.apply(navigator)[this._gamepadIndex]),t},gamepad:function(t){return this._gamepadIndex=t||0,this._timestamp=0,this._buttonsState=[],this._axesState=[],this.bind("EnterFrame",this._gpEnterFrame),this}}),t.c("GamepadMultiway",{_AXIS_THRESHOLD:.75,_AXIS_ANALOG_THRESHOLD:.1,_BUTTONS_DIRECTION:{12:-90,13:90,14:180,15:0},_AXES_DIRECTION:{0:[180,0],1:[-90,90],2:[180,0],3:[-90,90]},init:function(){this.requires("Motion, Gamepad")},_gamepadKeyChange:function(t){var e=Math.round;this.disableControls||t.button in this._BUTTONS_DIRECTION&&(1===t.value&&-1===this._buttonsPressed.indexOf(t.button)?(this.vx=e(1e3*(this.vx+this._buttons[t.button].x))/1e3,this.vy=e(1e3*(this.vy+this._buttons[t.button].y))/1e3,this._buttonsPressed.push(t.button)):0===t.value&&-1!==this._buttonsPressed.indexOf(t.button)&&(this.vx=e(1e3*(this.vx-this._buttons[t.button].x))/1e3,this.vy=e(1e3*(this.vy-this._buttons[t.button].y))/1e3,this._buttonsPressed.splice(this._buttonsPressed.indexOf(t.button),1)))},_gamepadAxisChange:function(t){this.disableControls||t.axis in this._AXES_DIRECTION&&(this._analogControl?this._analogHandling(t):this._digitalHandling(t))},_digitalHandling:function(t){var e=Math.round;if(t.value<=-this._AXIS_THRESHOLD||t.value>=this._AXIS_THRESHOLD){var n=0>t.value?0:1,i=t.axis+":"+n;if(-1!==this._axesPressed.indexOf(i))return;this.vx=e(1e3*(this.vx+this._axes[t.axis][n].x))/1e3,this.vy=e(1e3*(this.vy+this._axes[t.axis][n].y))/1e3,this._axesPressed.push(i)}else for(var r,o=0;o<this._axesPressed.length;o++)if(r=this._axesPressed[o],parseInt(r.substr(0,1),10)===t.axis){var s=r.split(":");this.vx=e(1e3*(this.vx-this._axes[t.axis][parseInt(s[1],10)].x))/1e3,this.vy=e(1e3*(this.vy-this._axes[t.axis][parseInt(s[1],10)].y))/1e3,this._axesPressed.splice(this._axesPressed.indexOf(r),1)}},_analogHandling:function(t){t.value<=-this._AXIS_ANALOG_THRESHOLD||t.value>=this._AXIS_ANALOG_THRESHOLD?(0===t.axis&&(this.vx=t.value*this._speed.x),1===t.axis&&(this.vy=t.value*this._speed.y)):(0===t.axis&&(this.vx=0),1===t.axis&&(this.vy=0))},_calcSpeed:function(t){var e=Math.sin,n=Math.cos,i=Math.PI,r=Math.round;for(var o in this._BUTTONS_DIRECTION)this._buttons[o]={x:r(1e3*n(this._BUTTONS_DIRECTION[o]*(i/180))*t.x)/1e3,y:r(1e3*e(this._BUTTONS_DIRECTION[o]*(i/180))*t.y)/1e3};for(var s in this._AXES_DIRECTION)this._axes[s]=[],this._axes[s][0]={x:r(1e3*n(this._AXES_DIRECTION[s][0]*(i/180))*t.x)/1e3,y:r(1e3*e(this._AXES_DIRECTION[s][0]*(i/180))*t.y)/1e3},this._axes[s][1]={x:r(1e3*n(this._AXES_DIRECTION[s][1]*(i/180))*t.x)/1e3,y:r(1e3*e(this._AXES_DIRECTION[s][1]*(i/180))*t.y)/1e3}},gamepadMultiway:function(t){return t=t||{},this.requires("Gamepad"),this.gamepad(t.gamepadIndex||0),this._speed={x:150,y:150},this._buttons={},this._buttonsPressed=[],this._axes={},this._axesPressed=[],this._speedOnAxes={},this._analogControl=t.analog,t.speed&&(t.speed.x&&t.speed.y?(this._speed.x=t.speed.x,this._speed.y=t.speed.y):(this._speed.x=t.speed,this._speed.y=t.speed)),this._calcSpeed(this._speed),this.bind("GamepadKeyChange",this._gamepadKeyChange),this.bind("GamepadAxisChange",this._gamepadAxisChange),this},enableControl:function(){return this.disableControls=!1,void 0!==this.disabledVelocities&&(this.vx=this.disabledVelocities.x,this.vy=this.disabledVelocities.y),this.disabledVelocities=void 0,this},disableControl:function(){return this.disableControls=!0,this.disabledVelocities={x:this.vx,y:this.vy},this.vx=0,this.vy=0,this}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.c("GamepadControls",{init:function(){return this.requires("Listener"),this.bind("RemoveComponent",function(t){if("ControlScheme"===t)return this.removeComponent("GamepadControls")}),this.emits={}},remove:function(){return this.unbind("GamepadKeyChange",this._keyHandling)},setupControls:function(t){return t.addComponent("GamepadControls").controls(this.controlMap).addComponent("ControlScheme")},controls:function(t){if(this.controlMap=t,null!=t.gamepadIndex)return this.requires("Gamepad"),this.gamepad(t.gamepadIndex),this.bind("GamepadKeyChange",this._keyHandling),this.bind("GamepadAxisChange",this._stickHandling),this},_stickHandling:function(t){var e;if(1===t.axis&&(e="vertical",t.value<-.5?this._startEmit(e,"Up"):t.value>.5?this._startEmit(e,"Down"):this._stopEmit(e)),0===t.axis)return e="horizontal",t.value<-.5?this._startEmit(e,"Left"):t.value>.5?this._startEmit(e,"Right"):this._stopEmit(e)},_startEmit:function(t,e){var n;if((null!=(n=this.emits[t])?n.value:void 0)!==e)return this._stopEmit(t),this.trigger(e),this.emits[t]={interval:setInterval(function(t){return function(){return t.trigger(e)}}(this),200),value:e}},_stopEmit:function(t){var e;return clearInterval(null!=(e=this.emits[t])?e.interval:void 0),delete this.emits[t]},_keyHandling:function(t){if(!(this.lastPressed&&this.lastPressed.getTime()>(new Date).getTime()-200))return this.lastPressed=new Date,t.button===this.controlMap.fire&&t.pressed&&this.trigger("Fire",t),t.button===this.controlMap.up&&t.pressed&&this.trigger("Up",t),t.button===this.controlMap.down&&t.pressed&&this.trigger("Down",t),t.button===this.controlMap.left&&t.pressed&&this.trigger("Left",t),t.button===this.controlMap.right&&t.pressed?this.trigger("Right",t):void 0},assignControls:function(t){return t.addComponent("GamepadMultiway").gamepadMultiway({speed:{y:500,x:500},gamepadIndex:this.controlMap.gamepadIndex,analog:!0}),this.listenTo(t,"GamepadKeyChange",function(n){return function(i){if(i.button===n.controlMap.fire&&t.shoot(i.pressed),i.button===n.controlMap.switchWeapon&&t.switchWeapon(i.pressed),i.button===n.controlMap.super&&t.superWeapon(i.pressed),i.button===n.controlMap.pause&&i.pressed)return e.togglePause()}}(this))}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t,e){t.c("KeyboardControls",{init:function(){return this.requires("Listener"),this.bind("RemoveComponent",function(t){if("ControlScheme"===t)return this.removeComponent("KeyboardControls")})},remove:function(){return this.unbind("KeyDown",this._keyHandling)},setupControls:function(t){return t.addComponent("KeyboardControls").controls(this.controlMap).addComponent("ControlScheme")},controls:function(t){return this.controlMap=t,this.bind("KeyDown",this._keyHandling),this},_keyHandling:function(t){if(t.key===this.controlMap.fire&&this.trigger("Fire",t),t.key===this.controlMap.up&&this.trigger("Up",t),t.key===this.controlMap.down&&this.trigger("Down",t),t.key===this.controlMap.left&&this.trigger("Left",t),t.key===this.controlMap.right)return this.trigger("Right",t)},assignControls:function(n){var i,r,o,s,a,u,h,c;i=this.controlMap,u={},o={up:-90,down:90,left:180,right:0};for(r in o){c=o[r],a=i[r],h=t.keys;for(s in h)h[s]===a&&(u[s]=c)}return n.addComponent("Multiway, Keyboard").multiway({y:500,x:500},u,{clamp:!0}).bind("GamePause",function(t){return t?(this.disabledBeforePause=this.disableControls,this.disableControl()):this.disabledBeforePause?void 0:this.enableControl()}),this.listenTo(n,"KeyDown",function(t){if(t.key===i.fire&&n.shoot(!0),t.key===i.switchWeapon&&n.switchWeapon(!0),t.key===i.super&&n.superWeapon(!0),t.key===i.pause)return e.togglePause()}),this.listenTo(n,"KeyUp",function(t){if(t.key===i.fire&&n.shoot(!1),t.key===i.switchWeapon&&n.switchWeapon(!1),t.key===i.super)return n.superWeapon(!1)})}})}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(563),r=(n.n(i),n(564)),o=(n.n(r),n(565)),s=(n.n(o),n(566)),a=(n.n(s),n(567)),u=(n.n(a),n(568)),h=(n.n(u),n(569)),c=(n.n(h),n(570)),l=(n.n(c),n(571)),f=(n.n(l),n(572)),p=(n.n(f),n(590)),d=(n.n(p),n(591)),y=(n.n(d),n(592)),v=(n.n(y),n(593)),g=(n.n(v),n(594)),_=(n.n(g),n(595)),m=(n.n(_),n(596)),x=(n.n(m),n(597)),w=(n.n(x),n(598));n.n(w)},function(t,e,n){(function(t){var e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t.c("BattleShip",{init:function(){var e,n,i,r,o,s,a;for(this.requires("2D, WebGL, Tween, Choreography, Solid, Collision,ViewportFixed, Hideable, Flipable, Scalable, SunBlock, WaterSplashes"),37,this.attr({w:1184,h:224,z:6,waterRadius:10,minSplashDuration:1200,defaultWaterCooldown:500,waterSplashSpeed:700,minOffset:2,splashUpwards:!1}),this._topX=0,this._bottomX=0,this._color={_red:128,_green:0,_blue:0},n=0,r=(a=["Start","TopFlat","TopFlat","CabinEnd","Cabin","Cabin","CabinStart","TopFlat","CabinEnd","Cabin","Cabin","Cabin","CabinStart","End"]).length;n<r;n++)s=a[n],this._addTopParts(s);for(i=0,o=(e=["BottomSpace","BottomFlat","BottomFlat","BottomSpace","BottomFlat","BottomSpace"]).length;i<o;i++)s=e[i],this._addBottomParts(s);return this.attach(t.e("2D, WebGL, aircraftCarrierRadar").attr({x:this.x+512,y:this.y-128,z:-10})),this.attach(t.e("2D, WebGL, aircraftCarrierAntenna").attr({x:this.x+576,y:this.y-176,z:-10}).flip("X")),this.attach(t.e("2D, WebGL, aircraftCarrierAntenna").attr({x:this.x+864,y:this.y-176,z:-10}).flip("X")),this.attach(t.e("2D, WebGL, aircraftCarrierAntenna").attr({x:this.x+960,y:this.y-176,z:-10}).flip("X")),this.hatch=t.e("carrierHatch").attr({x:this.x+320,y:this.y+28,z:-5}),this.attach(this.hatch),this.hatch2=t.e("carrierHatch").attr({x:this.x+620,y:this.y+28,z:-5}),this.attach(this.hatch2),this.attach(t.e("2D, MineCannonPlace").attr({x:this.x+82,y:this.y+28,z:15,w:15,h:2})),this.attach(t.e("2D, TurretPlace").attr({x:this.x+550,y:this.y+28,z:15,w:15,h:2})),this.attach(t.e("2D, TurretPlace").attr({x:this.x+1050,y:this.y+28,z:15,w:15,h:2})),this.collision([20,60,1184,60,1184,188,20,188])},_addTopParts:function(n){var i,r,o,s,a;return i=["CabinEnd","Cabin","CabinStart"],r=["CabinEnd","CabinStart"],s={Start:6,TopFlat:4,CabinEnd:2,Cabin:2,CabinStart:1,End:6}[n],a=0,e.call(i,n)>=0&&(a=-160),o=t.e("2D, WebGL, aircraftCarrier"+n).attr({x:this.x+this._topX,y:this.y+a,z:-13}),e.call(r,n)>=0&&o.flip("X"),e.call(i,n)>=0&&(o.addComponent("ColorEffects"),o.addComponent("SunBlock"),o.colorOverride(this._color,"partial")),this.attach(o),this._topX+=32*s},_addBottomParts:function(e){var n;return n={BottomFlat:6,BottomSpace:3}[e],this.attach(t.e("2D, WebGL, aircraftCarrier"+e).attr({x:this.x+192+this._bottomX,y:this.y+64,z:3})),this._bottomX+=32*n},open:function(t){if(e.call(t,0)>=0&&this.hatch.animate("open"),e.call(t,1)>=0)return this.hatch2.animate("open")},close:function(t){if(e.call(t,0)>=0&&this.hatch.animate("close"),e.call(t,1)>=0)return this.hatch2.animate("close")},execute:function(t){switch(t){case"open1":return this.open([0]);case"close1":return this.close([0]);case"open2":return this.open([1]);case"close2":return this.close([1]);case"open":return this.open([0,1]);case"close":return this.close([0,1])}}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Blast",{init:function(){return this.requires("2D, WebGL, explosionStart, SpriteAnimation, Horizon, Collision")},remove:function(){return this.unbind("GameLoop")},explode:function(t,e){var n,i,r;return null!=(i=t.radius)?i:20,n=(null!=(r=t.duration)?r:160)/1e3,this.attr(t),this.attr({w:4*t.radius,h:4*t.radius}),this.attr({x:this.x-this.w/2,y:this.y-this.h/2}),this.collision([.2*this.w,.2*this.h,.8*this.w,.2*this.h,.8*this.w,.8*this.h,.2*this.w,.8*this.h]),this.reel("explode",3e3*n,[[0,0],[1,0],[2,0],[3,0],[4,0],[0,1],[1,1],[2,1],[3,1],[4,1],[0,2],[1,2],[2,2],[3,2],[4,2],[0,3],[1,3]]),e&&(this.blastProps={x:this.x,y:this.y,w:this.w,h:this.h},this.bind("GameLoop",function(t){return function(n){var i;return i=e.call(t,t.blastProps,n),t.shift(i.x-t.blastProps.x,i.y-t.blastProps.y,i.w-t.blastProps.w,i.h-t.blastProps.h),t.blastProps=i}}(this))),this.bind("AnimationEnd",function(t){return function(){return t.destroy()}}(this)),this.animate("explode"),this}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.c("CameraCrew",{init:function(){return this.requires("2D, WebGL, Choreography, ViewportFixed, Collision, Hideable, helicopter, SpriteAnimation, Flipable, Scalable, Tween"),this.reel("fly",200,[[0,6,4,2],[4,6,4,2]]),this.crop(0,9,128,55),this.attr({w:128,h:55}),this.origin("center")},cameraCrew:function(){return this.animate("fly",-1),this.onHit("BackgroundBullet",function(t){var n;if(!e.paused)return this.pauseAnimation(),this.sprite(8,6),n=t[0].obj,this.trigger("Hit",this),n.destroy()}),this}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("Debris",{init:function(){return this.requires("Enemy, WebGL, Color"),this.bind("GameLoop",function(t){var e;return e=.09*t.dt,this.attr({rotation:this.rotation+e})})},debris:function(t){return null==t&&(t={}),this.attr(e(t,{w:100,h:100,health:800,defaultSpeed:100})),this.origin("center"),this.color("#303030"),this.enemy(),this},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i)}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("Drone",{init:function(){return this.requires("Enemy, standardDrone")},drone:function(n){return null==n&&(n={}),this.attr(e(n,{w:40,h:40,health:100,defaultSpeed:100})),this.origin("center"),this.collision([2,25,8,18,20,13,30,15,33,28,14,34,4,30]),this.attr({weaponOrigin:[2,25]}),this.enemy(),this.bind("Hit",function(e){return function(n){if(!1!==e.juice&&(e.shiftedX+=5),!1!==e.juice&&t.audio.play("hit",1,.5),n.projectile.has("Bullet")&&!1!==e.juice)return t.e("Blast, LaserHit").explode({x:n.projectile.x,y:n.projectile.y,radius:4,duration:50})}}(this)),this},updatedHealth:function(){if(!1!==this.juice)return this.health<200?this.sprite(2,4,2,2):this.sprite(0,4,2,2)},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i),e>0?this.flipX():this.unflipX()}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("DroneShip",{init:function(){var e,n,i,r,o;return this.requires("2D, WebGL, Tween, Choreography, Solid, Collision,ViewportFixed, Hideable, Flipable, Scalable, SunBlock, WaterSplashes"),this.attr({w:384,h:160,z:6,waterRadius:8,minSplashDuration:1700,defaultWaterCooldown:800,waterSplashSpeed:700,minOffset:2,splashUpwards:!1}),this.collision([20,50,352,50,352,128,20,128]),r=t.e("2D, WebGL, aircraftCarrierStart").attr({x:this.x,y:this.y,z:-13}),this.attach(r),i=t.e("2D, WebGL, aircraftCarrierRadar").attr({x:this.x+256,y:this.y-24,z:-12}),this.attach(i),e=t.e("2D, WebGL, aircraftCarrierEnd").attr({x:this.x+192,y:this.y,z:-13}),this.attach(e),o=t.e("2D, WebGL, aircraftCarrierStart").attr({x:this.x,y:this.y+60,z:3}).crop(0,60,192,160),this.attach(o),n=t.e("2D, WebGL, aircraftCarrierEnd").attr({x:this.x+192,y:this.y+60,z:3}).crop(0,60,192,160),this.attach(n),this.hatch=t.e("carrierHatch").attr({x:this.x+96,y:this.y+28,z:-5}),this.attach(this.hatch)},open:function(){return this.hatch.animate("open")},close:function(){return this.hatch.animate("close")},execute:function(t){switch(t){case"open":return this.open();case"close":return this.close()}}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("Helicopter",{init:function(){return this.requires("Enemy, helicopter, SpriteAnimation"),this.reel("fly",200,[[0,6,4,2],[4,6,4,2]]),this.crop(0,9,128,55),this.origin("center"),this.collision([8,5,120,5,112,35,12,47])},helicopter:function(n){var i;return null==n&&(n={}),2750,this.attr(e(n,{w:128,h:55,health:2750,maxHealth:null!=(i=n.health)?i:2750,weaponOrigin:[5,46]})),this.origin("center"),this.flip("x"),this.animate("fly",-1),this.enemy(),this.bind("Hit",function(e){return function(n){if(n.projectile.has("Bullet"))return e.shiftedX+=2,t.audio.play("hit",1,.5),t.e("Blast, LaserHit").explode({x:n.projectile.x,y:n.projectile.y,radius:4,duration:50})}}(this)),this},updatedHealth:function(){return this.health/this.maxHealth<.01?(this.pauseAnimation(),this.sprite(8,6)):this.isPlaying("fly")?void 0:this.animate("fly",-1)},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i)}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){var i;i=n(9),t.c("LargeDrone",{init:function(){return this.requires("Enemy, standardLargeDrone, SpriteAnimation")},drone:function(n){var r;return null==n&&(n={}),36e4,this.crop(0,0,90,70),this.attr(i(n,{health:36e4,maxHealth:null!=(r=n.health)?r:36e4,z:-1})),this.origin("center"),this.collision([2,36,16,15,86,2,88,4,62,15,57,46,46,66,18,66,3,47]),this.eye=t.e("2D, WebGL, eyeStart, SpriteAnimation"),this.eye.crop(0,0,20,26),this.attach(this.eye),this.eye.attr({x:2+this.x,y:18+this.y,z:1}),this.eye.reel("slow",1500,[[6,0],[7,0],[8,0],[9,0],[6,1],[7,1],[8,1],[9,1]]),this.eye.reel("medium",500,[[6,0],[7,0],[8,0],[9,0],[6,1],[7,1],[8,1],[9,1]]),this.eye.reel("fast",250,[[6,0],[7,0],[8,0],[9,0],[6,1],[7,1],[8,1],[9,1]]),this.wing=t.e("2D, WebGL, wingLoaded, SpriteAnimation"),this.wing.crop(0,0,46,21),this.attach(this.wing),this.wing.attr({x:19+this.x,y:28+this.y,z:1,h:21,w:46}),this.wing.reel("emptyWing",30,[[14,2,2,1]]),this.wing.reel("reload",500,[[6,2,2,1],[8,2,2,1],[10,2,2,1],[12,2,2,1]]),this.enemy(),this.onHit("Mine",function(t){var n,i,r,o;if(!e.paused&&!this.hidden)for(i=0,r=t.length;i<r;i++){if(n=t[i],(o=n.obj).hidden)return;if(o.z<0)return;o.absorbDamage(300)}}),this.updatedHealth(),this.bind("Hit",function(e){return function(n){if(n.projectile.has("Bullet"))return t.audio.play("hit",1,.5),t.e("Blast, LaserHit").explode({x:n.projectile.x,y:n.projectile.y,z:e.z+2,radius:4,duration:50})}}(this)),this},healthBelow:function(t){return this.health/this.maxHealth<t},updatedHealth:function(){var t;return(t=this.health/this.maxHealth)<.3?this.sprite(9,8,3,3):t<.6?this.sprite(6,8,3,3):t<.9?this.sprite(3,8,3,3):this.sprite(0,8,3,3)},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i)}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("Mine",{init:function(){return this.requires("Enemy, standardMine, SpriteAnimation"),this.reel("open",200,[[4,3],[5,3]]),this.reel("close",200,[[4,3],[3,3]]),this.reel("blink",100,[[5,3],[6,3]]),this.bind("GameLoop",function(t){var e;return e=.09*t.dt,this.attr({rotation:this.rotation+e})})},mine:function(t){return null==t&&(t={}),this.crop(4,4,25,25),this.attr(e(t,{h:25,w:25,health:100,weaponOrigin:[12,12]})),this.origin("center"),this.enemy(),this},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i)}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){var i;i=n(9),t.c("MineCannon",{init:function(){return this.requires("Enemy, Color"),this.attr({w:32,h:32}),this.color("#404040")},mineCannon:function(e){var n;return null==e&&(e={}),1750,this.attr(i(e,{health:1750,maxHealth:null!=(n=e.health)?n:1750,aimSpeed:45})),this.barrel=t.e("2D, WebGL, Color, TweenPromise, Collision"),this.barrel.attr({x:this.x-64,y:this.y-16,z:11,w:96,h:32}).color("#505050"),this.barrel.origin(this.barrel.w-16,16),this.barrel.onHit("Bullet",function(t){return function(e){return t.onProjectileHit(e)}}(this),function(t){return function(){return t.onProjectileHitEnd()}}(this)),this.barrel.onHit("Explosion",function(t){return function(e){return t.onExplosionHit(e)}}(this),function(t){return function(){return t.onProjectileHitEnd()}}(this)),this.attach(this.barrel),this.enemy(),this},updatedHealth:function(){return this.health/this.maxHealth<.01?this.barrel.attr({alpha:0}):this.barrel.attr({alpha:1})},execute:function(t,e,n){switch(t){case"aim":return this.aimAt(n.player("anyActive"))}},aimAt:function(t){var n,i;return null===(n=this.aimAngle(t))?e().delay(1e3).then(function(e){return function(){return e.aimAt(t)}}(this)):(n<-80&&(n=(n+360)%360),i=1e3*Math.abs(this.barrel.rotation-n)/this.aimSpeed,this.barrel.tweenPromise({rotation:n},i))},aimAngle:function(t){var e,n,i;return null===(i=t.ship())?null:(e=[this.barrel.x+this.barrel._origin.x,this.barrel.y+this.barrel._origin.y],n=[i.x+i.w/2,i.y+i.h/2],180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI)},get:function(t){return{xStart:this.x,yStart:this.y,angle:this.barrel.rotation}}})}).call(e,n(1).default,n(18).default)},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){function e(t,e,n,i){var r=y.resolve(t);return arguments.length<2?r:r.then(e,n,i)}function i(t){return function(){for(var e=0,n=arguments.length,i=new Array(n);e<n;++e)i[e]=arguments[e];return v(t,this,i)}}function r(t){for(var e=0,n=arguments.length-1,i=new Array(n);e<n;++e)i[e]=arguments[e+1];return v(t,this,i)}var o=n(574),s=n(576),a=n(577),u=n(578),h=n(579),c=n(580),l=n(581),f=n(582),p=n(583),d=n(221),y=[s,a,u,c,l,h,f,o,p].reduce(function(t,e){return e(t)},n(585)),v=n(223)(y);return e.promise=function(t){return new y(t)},e.resolve=y.resolve,e.reject=y.reject,e.lift=i,e.try=r,e.attempt=r,e.iterate=y.iterate,e.unfold=y.unfold,e.join=function(){return y.all(arguments)},e.all=function(t){return e(t,y.all)},e.settle=function(t){return e(t,y.settle)},e.any=i(y.any),e.some=i(y.some),e.race=i(y.race),e.map=function(t,n){return e(t,function(t){return y.map(t,n)})},e.filter=function(t,n){return e(t,function(t){return y.filter(t,n)})},e.reduce=i(y.reduce),e.reduceRight=i(y.reduceRight),e.isPromiseLike=function(t){return t&&"function"==typeof t.then},e.Promise=y,e.defer=function(){return new function(){function t(t){i._handler.resolve(t)}function e(t){i._handler.reject(t)}function n(t){i._handler.notify(t)}var i=y._defer();this.promise=i,this.resolve=t,this.reject=e,this.notify=n,this.resolver={resolve:t,reject:e,notify:n}}},e.TimeoutError=d,e}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){function e(t,e,n,r){return i.setTimer(function(){t(n,r,e)},e)}var i=n(146),r=n(221);return function(t){function n(t,n,i){e(o,t,n,i)}function o(t,e){e.resolve(t)}function s(t,e,n){var i=void 0===t?new r("timed out after "+n+"ms"):t;e.reject(i)}return t.prototype.delay=function(t){var e=this._beget();return this._handler.fold(n,t,void 0,e._handler),e},t.prototype.timeout=function(t,n){var r=this._beget(),o=r._handler,a=e(s,t,n,r._handler);return this._handler.visit(o,function(t){i.clearTimer(a),this.resolve(t)},function(t){i.clearTimer(a),this.reject(t)},o.notify),r},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e){},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){var e=n(222),i=n(223);return function(t){function n(n){var i;return n instanceof t&&(i=n._handler.join()),i&&0===i.state()||!i?s(n).then(e.fulfilled,e.rejected):(i._unreport(),e.inspect(i))}function r(t){return function(e,n,i){return o(t,void 0,[e,n,i])}}var o=i(t),s=t.resolve,a=t.all,u=Array.prototype.reduce,h=Array.prototype.reduceRight,c=Array.prototype.slice;return t.any=function(e){function n(t){c=null,this.resolve(t)}function i(t){this.resolved||(c.push(t),0==--h&&this.reject(c))}for(var r,o,s=t._defer(),a=s._handler,u=e.length>>>0,h=u,c=[],l=0;l<u;++l)if(void 0!==(o=e[l])||l in e){if((r=t._handler(o)).state()>0){a.become(r),t._visitRemaining(e,l,r);break}r.visit(a,n,i)}else--h;return 0===h&&a.reject(new RangeError("any(): array must not be empty")),s},t.some=function(e,n){function i(t){this.resolved||(c.push(t),0==--p&&(l=null,this.resolve(c)))}function r(t){this.resolved||(l.push(t),0==--o&&(c=null,this.reject(l)))}var o,s,a,u=t._defer(),h=u._handler,c=[],l=[],f=e.length>>>0,p=0;for(a=0;a<f;++a)(void 0!==(s=e[a])||a in e)&&++p;for(n=Math.max(n,0),o=p-n+1,n>(p=Math.min(n,p))?h.reject(new RangeError("some(): array must contain at least "+n+" item(s), but had "+p)):0===p&&h.resolve(c),a=0;a<f;++a)(void 0!==(s=e[a])||a in e)&&t._handler(s).visit(h,i,r,h.notify);return u},t.settle=function(t){return a(t.map(n))},t.map=function(e,n){return t._traverse(n,e)},t.filter=function(e,n){var i=c.call(e);return t._traverse(n,i).then(function(e){return function(e,n){for(var i=n.length,r=new Array(i),o=0,s=0;o<i;++o)n[o]&&(r[s++]=t._handler(e[o]).value);return r.length=s,r}(i,e)})},t.reduce=function(t,e){return arguments.length>2?u.call(t,r(e),arguments[2]):u.call(t,r(e))},t.reduceRight=function(t,e){return arguments.length>2?h.call(t,r(e),arguments[2]):h.call(t,r(e))},t.prototype.spread=function(t){return this.then(a).then(function(e){return t.apply(this,e)})},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(){throw new TypeError("catch predicate must be a function")}function e(t,e){return function(t){return t===Error||null!=t&&t.prototype instanceof Error}(e)?t instanceof e:e(t)}function n(t){return t}return function(i){function r(t,e,n,i){var r=t.call(e);return function(t){return("object"==typeof t||"function"==typeof t)&&null!==t}(r)?function(t,e,n){return o(t).then(function(){return e(n)})}(r,n,i):n(i)}var o=i.resolve,s=i.reject,a=i.prototype.catch;return i.prototype.done=function(t,e){this._handler.visit(this._handler.receiver,t,e)},i.prototype.catch=i.prototype.otherwise=function(n){return arguments.length<2?a.call(this,n):"function"!=typeof n?this.ensure(t):a.call(this,function(t,n){return function(i){return e(i,n)?t.call(this,i):s(i)}}(arguments[1],n))},i.prototype.finally=i.prototype.ensure=function(t){return"function"!=typeof t?this:this.then(function(e){return r(t,this,n,e)},function(e){return r(t,this,s,e)})},i.prototype.else=i.prototype.orElse=function(t){return this.then(void 0,function(){return t})},i.prototype.yield=function(t){return this.then(function(){return t})},i.prototype.tap=function(t){return this.then(t).yield(this)},i}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){return function(t){return t.prototype.fold=function(e,n){var i=this._beget();return this._handler.fold(function(n,i,r){t._handler(n).fold(function(t,n,i){i.resolve(e.call(this,n,t))},i,this,r)},n,i._handler.receiver,i._handler),i},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){var e=n(222).inspect;return function(t){return t.prototype.inspect=function(){return e(t._handler(this))},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){return function(t){function e(t,i,r,o){function s(o,s){return n(r(o)).then(function(){return e(t,i,r,s)})}return n(o).then(function(e){return n(i(e)).then(function(i){return i?e:n(t(e)).spread(s)})})}var n=t.resolve;return t.iterate=function(t,n,i,r){return e(function(e){return[e,t(e)]},n,i,r)},t.unfold=e,t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){return function(t){return t.prototype.progress=function(t){return this.then(void 0,void 0,t)},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){return function(t){return t.prototype.with=t.prototype.withThis=function(t){var e=this._beget(),n=e._handler;return n.receiver=t,this._handler.chain(n,t),e},t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){function e(t){throw t}function i(){}var r=n(146).setTimer,o=n(584);return function(t){function n(t){t.handled||(p.push(t),c("Potentially unhandled rejection ["+t.id+"] "+o.formatError(t.value)))}function s(t){var e=p.indexOf(t);e>=0&&(p.splice(e,1),l("Handled previous rejection ["+t.id+"] "+o.formatObject(t.value)))}function a(t,e){f.push(t,e),null===d&&(d=r(u,0))}function u(){for(d=null;f.length>0;)f.shift()(f.shift())}var h,c=i,l=i;"undefined"!=typeof console&&(h=console,c=void 0!==h.error?function(t){h.error(t)}:function(t){h.log(t)},l=void 0!==h.info?function(t){h.info(t)}:function(t){h.log(t)}),t.onPotentiallyUnhandledRejection=function(t){a(n,t)},t.onPotentiallyUnhandledRejectionHandled=function(t){a(s,t)},t.onFatalRejection=function(t){a(e,t.value)};var f=[],p=[],d=null;return t}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(t){var n=String(t);return"[object Object]"===n&&"undefined"!=typeof JSON&&(n=e(t,n)),n}function e(t,e){try{return JSON.stringify(t)}catch(t){return e}}return{formatError:function(e){var n="object"==typeof e&&null!==e&&(e.stack||e.message)?e.stack||e.message:t(e);return e instanceof Error?n:n+" (WARNING: non-Error used)"},formatObject:t,tryStringify:e}}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(t){return n(586)({scheduler:new(n(587))(n(146).asap)})}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){(function(i){var r;(function(o){"use strict";void 0===(r=function(){return function(t){function e(t,e){this._handler=t===l?e:function(t){function e(t){r.resolve(t)}function n(t){r.reject(t)}function i(t){r.notify(t)}var r=new p;try{t(e,n,i)}catch(t){n(t)}return r}(t)}function n(t){return C(t)?t:new e(l,new d(h(t)))}function r(t){return new e(l,new d(new g(t)))}function o(){return z}function s(t,n,i){function r(t,e,n){c[t]=e,0==--h&&n.become(new v(c))}for(var o,s="function"==typeof n?function(e,o,s){s.resolved||a(i,r,e,t(n,o,e),s)}:r,u=new p,h=i.length>>>0,c=new Array(h),f=0;f<i.length&&!u.resolved;++f)void 0!==(o=i[f])||f in i?a(i,s,f,o,u):--h;return 0===h&&u.become(new v(c)),new e(l,u)}function a(t,e,n,i,r){if(k(i)){var o=function(t){return C(t)?t._handler.join():c(t)}(i),s=o.state();0===s?o.fold(e,n,void 0,r):s>0?e(n,o.value,r):(r.become(o),u(t,n+1,o))}else e(n,i,r)}function u(t,e,n){for(var i=e;i<t.length;++i)(function(t,e){if(t===e)return;var n=t.state();0===n?t.visit(t,void 0,t._unreport):n<0&&t._unreport()})(h(t[i]),n)}function h(t){return C(t)?t._handler.join():k(t)?c(t):new v(t)}function c(t){try{var e=t.then;return"function"==typeof e?new y(e,t):new v(t)}catch(t){return new g(t)}}function l(){}function f(){}function p(t,n){e.createContext(this,n),this.consumers=void 0,this.receiver=t,this.handler=void 0,this.resolved=!1}function d(t){this.handler=t}function y(t,e){p.call(this),A.enqueue(new b(t,e,this))}function v(t){e.createContext(this),this.value=t}function g(t){e.createContext(this),this.id=++L,this.value=t,this.handled=!1,this.reported=!1,this._report()}function _(t,e){this.rejection=t,this.context=e}function m(t){this.rejection=t}function x(t,e){this.continuation=t,this.handler=e}function w(t,e){this.handler=e,this.value=t}function b(t,e,n){this._then=t,this.thenable=e,this.resolver=n}function S(t,e,n,i){this.f=t,this.z=e,this.c=n,this.to=i,this.resolver=B,this.receiver=this}function C(t){return t instanceof e}function k(t){return("object"==typeof t||"function"==typeof t)&&null!==t}function P(t,n,i,r){if("function"!=typeof t)return r.become(n);e.enterContext(n),function(t,e,n,i){try{i.become(h(t.call(n,e)))}catch(t){i.become(new g(t))}}(t,n.value,i,r),e.exitContext()}function M(t,n,i,r,o){if("function"!=typeof t)return o.become(i);e.enterContext(i),function(t,e,n,i,r){try{t.call(i,e,n,r)}catch(t){r.become(new g(t))}}(t,n,i.value,r,o),e.exitContext()}function D(t,e,n){try{return t(e,n)}catch(t){return r(t)}}function T(t,e){e.prototype=F(t.prototype),e.prototype.constructor=e}function E(t,e){return e}function O(){}var A=t.scheduler,j=void 0!==i&&null!==i&&"function"==typeof i.emit?function(t,e){return"unhandledRejection"===t?i.emit(t,e.value,e):i.emit(t,e)}:"undefined"!=typeof self&&function(){if("function"==typeof CustomEvent)try{return new CustomEvent("unhandledRejection")instanceof CustomEvent}catch(t){}return!1}()?function(t,e){return function(n,i){var r=new e(n,{detail:{reason:i.value,key:i},bubbles:!1,cancelable:!0});return!t.dispatchEvent(r)}}(self,CustomEvent):"undefined"!=typeof self&&function(){if("undefined"!=typeof document&&"function"==typeof document.createEvent)try{return document.createEvent("CustomEvent").initCustomEvent("eventType",!1,!0,{}),!0}catch(t){}return!1}()?function(t,e){return function(n,i){var r=e.createEvent("CustomEvent");return r.initCustomEvent(n,!1,!0,{reason:i.value,key:i}),!t.dispatchEvent(r)}}(self,document):O,F=Object.create||function(t){function e(){}return e.prototype=t,new e};e.resolve=n,e.reject=r,e.never=o,e._defer=function(){return new e(l,new p)},e._handler=h,e.prototype.then=function(t,e,n){var i=this._handler,r=i.join().state();if("function"!=typeof t&&r>0||"function"!=typeof e&&r<0)return new this.constructor(l,i);var o=this._beget(),s=o._handler;return i.chain(s,i.receiver,t,e,n),o},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype._beget=function(){return function(t,e){return new e(l,new p(t.receiver,t.join().context))}(this._handler,this.constructor)},e.all=function(t){return s(E,null,t)},e.race=function(t){return"object"!=typeof t||null===t?r(new TypeError("non-iterable passed to race()")):0===t.length?o():1===t.length?n(t[0]):function(t){var n,i,r,o=new p;for(n=0;n<t.length;++n)if(void 0!==(i=t[n])||n in t){if(0!==(r=h(i)).state()){o.become(r),u(t,n+1,r);break}r.visit(o,o.resolve,o.reject)}return new e(l,o)}(t)},e._traverse=function(t,e){return s(D,t,e)},e._visitRemaining=u,l.prototype.when=l.prototype.become=l.prototype.notify=l.prototype.fail=l.prototype._unreport=l.prototype._report=O,l.prototype._state=0,l.prototype.state=function(){return this._state},l.prototype.join=function(){for(var t=this;void 0!==t.handler;)t=t.handler;return t},l.prototype.chain=function(t,e,n,i,r){this.when({resolver:t,receiver:e,fulfilled:n,rejected:i,progress:r})},l.prototype.visit=function(t,e,n,i){this.chain(B,t,e,n,i)},l.prototype.fold=function(t,e,n,i){this.when(new S(t,e,n,i))},T(l,f),f.prototype.become=function(t){t.fail()};var B=new f;T(l,p),p.prototype._state=0,p.prototype.resolve=function(t){this.become(h(t))},p.prototype.reject=function(t){this.resolved||this.become(new g(t))},p.prototype.join=function(){if(!this.resolved)return this;for(var t=this;void 0!==t.handler;)if((t=t.handler)===this)return this.handler=new g(new TypeError("Promise cycle"));return t},p.prototype.run=function(){var t=this.consumers,e=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var n=0;n<t.length;++n)e.when(t[n])},p.prototype.become=function(t){this.resolved||(this.resolved=!0,this.handler=t,void 0!==this.consumers&&A.enqueue(this),void 0!==this.context&&t._report(this.context))},p.prototype.when=function(t){this.resolved?A.enqueue(new x(t,this.handler)):void 0===this.consumers?this.consumers=[t]:this.consumers.push(t)},p.prototype.notify=function(t){this.resolved||A.enqueue(new w(t,this))},p.prototype.fail=function(t){var e=void 0===t?this.context:t;this.resolved&&this.handler.join().fail(e)},p.prototype._report=function(t){this.resolved&&this.handler.join()._report(t)},p.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},T(l,d),d.prototype.when=function(t){A.enqueue(new x(t,this))},d.prototype._report=function(t){this.join()._report(t)},d.prototype._unreport=function(){this.join()._unreport()},T(p,y),T(l,v),v.prototype._state=1,v.prototype.fold=function(t,e,n,i){M(t,e,this,n,i)},v.prototype.when=function(t){P(t.fulfilled,this,t.receiver,t.resolver)};var L=0;T(l,g),g.prototype._state=-1,g.prototype.fold=function(t,e,n,i){i.become(this)},g.prototype.when=function(t){"function"==typeof t.rejected&&this._unreport(),P(t.rejected,this,t.receiver,t.resolver)},g.prototype._report=function(t){A.afterQueue(new _(this,t))},g.prototype._unreport=function(){this.handled||(this.handled=!0,A.afterQueue(new m(this)))},g.prototype.fail=function(t){this.reported=!0,j("unhandledRejection",this),e.onFatalRejection(this,void 0===t?this.context:t)},_.prototype.run=function(){this.rejection.handled||this.rejection.reported||(this.rejection.reported=!0,j("unhandledRejection",this.rejection)||e.onPotentiallyUnhandledRejection(this.rejection,this.context))},m.prototype.run=function(){this.rejection.reported&&(j("rejectionHandled",this.rejection)||e.onPotentiallyUnhandledRejectionHandled(this.rejection))},e.createContext=e.enterContext=e.exitContext=e.onPotentiallyUnhandledRejection=e.onPotentiallyUnhandledRejectionHandled=e.onFatalRejection=O;var z=new e(l,new l);return x.prototype.run=function(){this.handler.join().when(this.continuation)},w.prototype.run=function(){var t=this.handler.consumers;if(void 0!==t)for(var n,i=0;i<t.length;++i)(function(t,n,i,r,o){if("function"!=typeof t)return o.notify(n);e.enterContext(i),function(t,e,n,i){try{i.notify(t.call(n,e))}catch(t){i.notify(t)}}(t,n,r,o),e.exitContext()})((n=t[i]).progress,this.value,this.handler,n.receiver,n.resolver)},b.prototype.run=function(){var t=this.resolver;(function(t,e,n,i,r){try{t.call(e,n,i,r)}catch(t){i(t)}})(this._then,this.thenable,function(e){t.resolve(e)},function(e){t.reject(e)},function(e){t.notify(e)})},S.prototype.fulfilled=function(t){this.f.call(this.c,this.z,t,this.to)},S.prototype.rejected=function(t){this.to.reject(t)},S.prototype.progress=function(t){this.to.notify(t)},e}}.call(e,n,e,t))||(t.exports=r)})(n(13))}).call(e,n(147))},function(t,e,n){var i;(function(r){"use strict";void 0===(i=function(){function t(t){this._async=t,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var e=this;this.drain=function(){e._drain()}}return t.prototype.enqueue=function(t){this._queue[this._queueLen++]=t,this.run()},t.prototype.afterQueue=function(t){this._afterQueue[this._afterQueueLen++]=t,this.run()},t.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},t.prototype._drain=function(){for(var t=0;t<this._queueLen;++t)this._queue[t].run(),this._queue[t]=void 0;for(this._queueLen=0,this._running=!1,t=0;t<this._afterQueueLen;++t)this._afterQueue[t].run(),this._afterQueue[t]=void 0;this._afterQueueLen=0},t}.call(e,n,e,t))||(t.exports=i)})(n(13))},function(t,e,n){var i;n(13),void 0===(i=function(t){var e=n(224),i=e.Promise.all,r=Array.prototype.slice;return function(t){function n(t){return o.push(t),o}var o=[];return i(r.call(arguments,1)).then(function(i){return e.reduce(t,function(t,r){return e(r.apply(void 0,i),n)},o)})}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){var i;n(13),void 0===(i=function(t){var e=n(224),i=e.Promise.all,r=Array.prototype.slice;return function(t){return i(r.call(arguments,1)).then(function(n){return e.map(t,function(t){return t.apply(void 0,n)})})}}.call(e,n,e,t))||(t.exports=i)},function(t,e,n){(function(t){var e;e=n(9),t.c("OldDrone",{init:function(){return this.requires("Enemy, Color")},drone:function(t){return null==t&&(t={}),this.color("#0000FF"),this.attr(e(t,{w:40,h:40,health:200})),this.origin("center"),this.attr({weaponOrigin:[2,25]}),this.enemy(),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("OldExplosion",{init:function(){if(this.requires("2D,Tween,Delay"),this.explosionMode=window.Game.explosionMode,"block"===this.explosionMode)return this.requires("WebGL,Color")},explode:function(e){var n,i,r,o,s,a;return o=null!=(s=e.radius)?s:20,i=(null!=(a=e.duration)?a:160)/1e3,this.attr(e),r={maxParticles:13*e.radius,size:2*e.radius,sizeRandom:8,speed:e.radius/13,speedRandom:.5,lifeSpan:19,lifeSpanRandom:7,angle:0,angleRandom:360,startColour:[235,135,5,1],startColourRandom:[28,150,45,.2],endColour:[135,135,135,0],endColourRandom:[60,60,60,.1],sharpness:10,sharpnessRandom:10,spread:e.radius/2,duration:i*t.timer.FPS(),fastMode:!1,gravity:{x:0,y:0},jitter:0},this.attr({w:1,h:1}),"block"===this.explosionMode&&this.color("#FF0000"),this.tween({x:this.x-o,y:this.y-o,w:this.w+2*o,h:this.h+2*o,alpha:.2},500),this.bind("TweenEnd",function(){return this.destroy()}),"particles"===this.explosionMode&&(r.fastMode=!0,r.maxParticles=3*e.radius,r.size=e.radius),"particles"!==this.explosionMode&&null!==this.explosionMode||(n=(r.lifeSpan+r.lifeSpanRandom)*t.timer.FPS(),t.e("2D,Particles,Delay").attr({x:this.x-e.radius/2,y:this.y-e.radius/2}).particles(r).bind("ParticleEnd",function(){return this.delay(function(){return this.destroy()},n)})),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("PlayerClone",{init:function(){return this.requires("Enemy, playerShip")},playerClone:function(n){var i;return null==n&&(n={}),300,this.attr(e(n,{h:45,w:71,health:300,maxHealth:null!=(i=n.health)?i:300,weaponOrigin:[5,30]})),this.origin("center"),this.colorOverride("#808080","partial"),this.enemy(),this.bind("Hit",function(e){return function(n){if(n.projectile.has("Bullet"))return e.shiftedX+=2,t.audio.play("hit",1,.5),t.e("Blast, LaserHit").explode({x:n.projectile.x,y:n.projectile.y,radius:4,duration:50})}}(this)),this},updatedHealth:function(){var t;return t=0,this.health/this.maxHealth<.3&&(t=2),this.sprite(0,t)},updateMovementVisuals:function(t,e,n,i){return this.vx=e*(1e3/i),this.vy=n*(1e3/i)}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("PowerUp",{init:function(){return this.requires("2D, WebGL, ColorEffects, powerUpBox, SpriteAnimation, TweenPromise, Scalable, ViewportRelativeMotion"),this.reel("blink",600,[[10,1],[11,1],[12,1],[11,1]]),this.attr({w:32,h:32}),this.pickedUp=!1},remove:function(){},powerUp:function(e){var n,i,r,o;return this.settings=e,this.animate("blink",-1),n="#802020",this.settings.type&&(n={weapon:"#202080",weaponBoost:"#D06000",weaponUpgrade:"#30B030",ship:"#802020",shipUpgrade:"#30B030",shipBoost:"#D06000"}[this.settings.type]),this.colorOverride(n,"partial"),this.settings.icon?(i=t.e("2D,WebGL,ColorEffects").addComponent(this.settings.icon).colorOverride("white","partial").attr({w:22,h:22,x:this.x+5,y:this.y+5}),this.attach(i)):this.settings.marking&&(o="16px",r={x:this.x+8,y:this.y+8},2===this.settings.marking.length&&(o="9px",r={x:this.x+3,y:this.y+8}),i=t.e("2D,DOM,Text").textColor("#FFF").textFont({size:o,family:"Press Start 2P"}).text(this.settings.marking).attr(r),this.attach(i)),this.viewportRelativeMotion({speed:1}),this},pickup:function(){return this.pickedUp=!0,this.tweenPromise({scale:1.5,x:this.x-12,y:this.y-12},120).then(function(t){return function(){return t.tweenPromise({alpha:0,scale:.3,z:20,x:t.x+15,y:t.y+15},120).then(function(){return t.destroy()})}}(this))}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Projectile",{init:function(){return this.requires("2D, WebGL, ViewportFixed")},shoot:function(e,n,i){return this.attr({x:e,y:n,rotation:i}),this.bind("GameLoop",function(e){var n;if(n=e.dt*(this.speed/1e3),this.x-=Math.cos(this.rotation/180*Math.PI)*n,this.y-=Math.sin(this.rotation/180*Math.PI)*n,(this.x+this.w<-t.viewport.x||this.x>-t.viewport.x+t.viewport.width)&&this.destroy(),this.y+this.h<-t.viewport.y||this.y>-t.viewport.y+t.viewport.height)return this.destroy()}),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=n(9),t.c("Rocket",{init:function(){return this.requires("Enemy, standardRocket")},rocket:function(t){return null==t&&(t={}),this.crop(0,0,47,17),this.attr(e(t,{health:300})),this.origin("center"),this.enemy(),this},updateMovementVisuals:function(t,e,n,i){if(this.vx=e*(1e3/i),this.vy=n*(1e3/i),null!=t)return this.rotation=t}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Sun",{init:function(){var e,n,i,r;return this.requires("2D, WebGL, Collision, Choreography, ViewportFixed, sun"),this.crop(0,1,64,64),this.attr({w:20,h:20,z:-1e3}),this.origin("center"),this.glare=[],i=t.e("2D, WebGL, Glare, directGlare").crop(0,0,175,175).attr({w:3*this.w,h:3*this.h,z:90,alpha:.8,originalAlpha:.8}).origin("center"),this.attach(i),this.glare.push(i),n=t.e("2D, WebGL, Glare, bigGlare, Horizon").crop(0,0,200,200).attr({mirrored:!0,w:80,h:80,z:91,res:.9,alpha:.4,originalAlpha:.4,blur:2}).origin("center").saturationGradient(1,1),this.attach(n),this.glare.push(n),r=t.e("2D, WebGL, Glare, bigGlare, ColorEffects").crop(0,0,200,200).colorOverride("#fd6565").attr({mirrored:!0,w:10,h:10,z:92,res:.8,alpha:.6,originalAlpha:.6}).origin("center"),this.attach(r),this.glare.push(r),e=t.e("2D, WebGL, Glare, bigGlare").crop(0,0,200,200).attr({mirrored:!0,w:200,h:200,z:93,alpha:.2,res:1.1,originalAlpha:.2}).origin("center"),this.attach(e),this.glare.push(e)},sun:function(t){return this.attr(t),this.uniqueBind("GameLoop",this._updateGlare),this},remove:function(){return this.unbind("GameLoop",this._updateGlare)},_updateGlare:function(){var e,n,i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w,b,S,C,k;if(r=[0],b=this.area(),i=this.hit("SunBlock"))for(f=0,y=i.length;f<y;f++)a=(_=i[f]).obj,"SAT"===_.type?r.push(-1*_.overlap/50*b):(C=Math.max(this.x,a.x),S=Math.min(this.x+this.w,a.x+a.w)-C,k=Math.max(this.y,a.y),u=Math.min(this.y+this.h,a.y+a.h)-k,r.push(S*u));for(m=(g=1.7*Math.max.apply(Math,r))/b,g>b&&(m=1),l=t.viewport.width/2,h=t.viewport.height/2,(o=this.x+this.w/2-(-1*t.viewport.x+l))/l,(s=this.y+this.h/2-(-1*t.viewport.y+h))/h,p=0,v=(x=this.glare).length;p<v;p++)(a=x[p]).attr({alpha:a.originalAlpha*(1-m)}),a.mirrored?a.attr({x:this.x+this.w/2-a.w/2-2*o*a.res,y:this.y+this.h/2-a.h/2-2*s*a.res}):a.attr({w:5*this.w,h:5*this.h,x:this.x-2*this.w,y:this.y-2*this.h});return c=t.viewport.height-225-this.y,w=65-Math.min(Math.max(c,0),200)/200*30,e=2-Math.min(Math.max(c,0),200)/200*2,this.attr({blur:e}),this.w=w,this.h=w,d=.4+Math.max(c-150,0)/200,n=Math.min(Math.max(.4,d),1),t("cloud").each(function(){return this.attr({lightness:n})}),t("GoldenStripe").each(function(){return c<=0?this.attr({alpha:1-Math.min(Math.abs(c),20)/20,h:5}):0<c&&c<1?this.attr({alpha:1,h:5}):c<60?this.attr({alpha:1,h:Math.abs(Math.max(Math.min(c/2,40),5))}):c<120?this.attr({alpha:1-Math.min(Math.abs(c-60),60)/60,h:Math.abs(Math.max(Math.min(c/2,40),1))}):this.attr({alpha:0,h:10})})}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){var i;i=n(9),t.c("Tank",{init:function(){return this.requires("Enemy, laserTank, Delay"),this.crop(6,5,179,103)},tank:function(e){var n;return null==e&&(e={}),2750,this.attr(i(e,{w:179,h:103,health:2750,maxHealth:null!=(n=e.health)?n:2750,aimSpeed:45})),this.barrel=t.e("2D, WebGL, laserTankBarrel, TweenPromise"),this.barrel.crop(5,4,109,38),this.barrel.attr({x:this.x+54,y:this.y,z:this.z-1,w:109,h:38}),this.barrel.origin(this.barrel.w-32,32),this.charge=t.e("2D, Color, WebGL, TweenPromise"),this.charge.color("#F0F"),this.charge.attr({x:this.barrel.x-10,y:this.barrel.y+5,w:10,h:28,alpha:0}),this.charge.origin(this.charge.w-32,32),this.laser=t.e("2D, Color, WebGL, TweenPromise, Collision"),this.laser.color("#F0F"),1e3,this.laser.attr({x:this.barrel.x-1e3,y:this.barrel.y+5,w:1e3,h:28,alpha:0}),this.laser.origin(this.laser.w-10,10),this.attach(this.barrel),this.barrel.attach(this.charge),this.barrel.attach(this.laser),this.enemy(),this},updatedHealth:function(){},execute:function(t,e,n){switch(t){case"searchAim":return this.aimAt(n.player("anyActive"));case"shoot":return this.shoot()}},aimAt:function(t){var n,i;return null===(n=this.aimAngle(t))?e().delay(1e3).then(function(e){return function(){return e.aimAt(t)}}(this)):(n<-80&&(n=(n+360)%360),i=1e3*Math.abs(this.barrel.rotation-n)/this.aimSpeed,this.barrel.tweenPromise({rotation:n},i).then(function(e){return function(){if(Math.abs(e.aimAngle(t)-e.barrel.rotation)>10)return e.aimAt(t)}}(this)))},aimAngle:function(t){var e,n,i;return null===(i=t.ship())?null:(e=[this.barrel.x+this.barrel._origin.x,this.barrel.y+this.barrel._origin.y],n=[i.x+i.w/2,i.y+i.h/2],180*Math.atan2(e[1]-n[1],e[0]-n[0])/Math.PI)},shoot:function(){return 500,100,this.charge.tweenPromise({alpha:1},500).then(function(t){return function(){return t.charge.attr({alpha:0}),t.laser.addComponent("Hostile"),t.laser.attr({alpha:1}),e().delay(100).then(function(){return t.laser.removeComponent("Hostile"),t.laser.attr({alpha:0})})}}(this))}})}).call(e,n(1).default,n(18).default)},function(t,e,n){(function(t){t.c("WaterSplash",{init:function(){if(this.requires("2D,Particles,Delay"),this.explosionMode=window.Game.explosionMode,"block"===this.explosionMode)return this.requires("WebGL, Color, Tween")},waterSplash:function(e){var n,i,r;return i={maxParticles:2*e.size,size:e.size/1.5,sizeRandom:4,speed:e.size/20,speedRandom:.2,lifeSpan:e.size/3,lifeSpanRandom:7,angle:350,angleRandom:20,startColour:[40,40,170,1],startColourRandom:[0,0,0,0],endColour:[205,205,205,.1],endColourRandom:[30,30,30,.1],sharpness:10,sharpnessRandom:5,spread:e.size/3,duration:900/t.timer.FPS(),fastMode:!1,gravity:{x:0,y:.25},jitter:0},n=(i.lifeSpan+i.lifeSpanRandom)*t.timer.FPS(),"particles"===this.explosionMode&&(i.fastMode=!0),"block"!==this.explosionMode?this.attr({x:e.x,y:e.y}).particles(i).bind("ParticleEnd",function(){return this.delay(function(){return this.destroy()},n)}):(r=60,this.attr({x:e.x,y:e.y,w:30,h:0}),this.color("#FFFFFF"),this.tween({y:this.y-r,h:this.h+r,alpha:.2},500),this.bind("TweenEnd",function(){return this.destroy()})),this}})}).call(e,n(1).default)},function(t,e,n){"use strict";var i=n(600),r=(n.n(i),n(601)),o=(n.n(r),n(625)),s=(n.n(o),n(626)),a=(n.n(s),n(627)),u=(n.n(a),n(628)),h=(n.n(u),n(629)),c=(n.n(h),n(630));n.n(c)},function(t,e,n){(function(t){var e;e=n(9),t.c("Acceleration",{init:function(){return this._currentSpeed={x:0,y:0},this._targetSpeed={x:0,y:0},this._accelerate={x:.01,y:.01},this._currentAcceleration={x:0,y:0}},updateAcceleration:function(){return this._handleAcceleration("x"),this._handleAcceleration("y")},targetSpeed:function(t,n){return null==n&&(n={}),(n=e(n,{accellerate:!0})).accellerate?this._accelerate={x:.01,y:.01}:this._accelerate={x:Infinity,y:Infinity},null!=t.x&&null!=t.y?(this._targetSpeed.x=t.x,this._targetSpeed.y=t.y):(this._targetSpeed.x=t,this._targetSpeed.y=0),this},_handleAcceleration:function(t){var e;if(this._currentSpeed[t]!==this._targetSpeed[t]&&(e=1,this._currentSpeed[t]>this._targetSpeed[t]&&(e=-1),this._currentAcceleration[t]+=this._accelerate[t]*e,this._currentSpeed[t]+=this._currentAcceleration[t],!(this._currentAcceleration[t]>0&&this._currentSpeed[t]<this._targetSpeed[t]||this._currentAcceleration[t]<0&&this._currentSpeed[t]>this._targetSpeed[t])))return this._currentSpeed[t]=this._targetSpeed[t],this._currentAcceleration[t]=0}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e,i,r,o;r=n(9),i=n(73),o=n(66),e=n(623).default,t.c("Choreography",{init:function(){return this._ctypes={delay:this._executeDelay,linear:this._executeLinear,viewport:this._executeMoveIntoViewport,viewportBezier:this._executeViewportBezier}},remove:function(){if(this.unbind("GameLoop",this._choreographyTick),null!=this._currentPart)return this._currentPart=null,this._choreography=[],this.trigger("ChoreographyEnd")},choreography:function(e,n){var i,o;if(null==n&&(n={}),this.uniqueBind("GameLoop",this._choreographyTick),this._options=r(n,{repeat:0,compensateCameraSpeed:!1,skip:0}),this._options.compensateCameraSpeed&&(this.camera=t(t("ScrollWall")[0]),this._options.cameraLock={x:this.camera.x}),this._choreography=e,this._repeated=0,i=0,this._setupCPart(i),o=n.skip,this._toSkip=0,o>0){for(;i<this._choreography.length-1&&o>this._currentPart.duration;)o-=this._currentPart.duration,i+=1,this._setupCPart(i);this._toSkip=o}return this},synchChoreography:function(t){return this._choreography=i(t._choreography),this._options=t._options,this._repeated=t._repeated,this._toSkip=t._toSkip,this._currentPart=i(t._currentPart),this._currentPart.easing=i(t._currentPart.easing),this.uniqueBind("GameLoop",this._choreographyTick)},_setupCPart:function(t){var e;if(this._currentPart=null,!(t<this._choreography.length)){if(!(this._repeated<this._options.repeat||-1===this._options.repeats))return null!=this.updateMovementVisuals&&this.updateMovementVisuals(void 0,0,0,1),this._choreography=[],this.unbind("GameLoop",this._choreographyTick),void this.trigger("ChoreographyEnd");this._repeated+=1,t=0}return null!=(e=this._choreography[t]).event&&this.trigger(e.event,{entity:this,data:e.data}),this._setupPart(e,t)},_choreographyTick:function(t){var e,n,i;if(null!=this._currentPart)return n=this._currentPart.easing.value(),e=t.dt+this._toSkip,this._currentPart.easing.tick(e),this._toSkip=0,i=this._currentPart.easing.value(),this._ctypes[this._currentPart.type].apply(this,[i,n,e]),this._options.compensateCameraSpeed&&(this.x+=this.camera.x-this._options.cameraLock.x),this._currentPart.easing.complete?this._setupCPart(this._currentPart.part+1):void 0},_setupPart:function(e,n){var r,s,a,u,h;if(s=null!=(u=e.easingFn)?u:"linear",this._currentPart=o(i(e),{part:n,x:this.x,y:this.y,dx:e.x,dy:e.y,rotation:e.rotation,easing:new t.easing(null!=(h=e.duration)?h:0,s)}),e.properties){r={};for(a in e.properties)r[a]=this[a];return this._currentPart.currentProperties=r}},_executeLinear:function(t,e){var n,i,r,o,s,a;return n=t*(null!=(r=this._currentPart.dx)?r:0)-e*(null!=(o=this._currentPart.dx)?o:0),i=t*(null!=(s=this._currentPart.dy)?s:0)-e*(null!=(a=this._currentPart.dy)?a:0),this.x+=n,this.y+=i},_executeDelay:function(t){},_executeMoveIntoViewport:function(t,e,n){var i,r,o,s,a,u,h,c,l;return s=this._currentPart.dx,c=0,s&&(null==(r=this._currentPart).moveOriginX&&(r.moveOriginX=this._currentPart.x),c=(u=s-this._currentPart.moveOriginX)*t-u*e),a=this._currentPart.dy,l=0,a&&(null==(o=this._currentPart).moveOriginY&&(o.moveOriginY=this._currentPart.y),l=(h=a-this._currentPart.moveOriginY)*t-h*e),null!=this.updateMovementVisuals&&(this._currentPart.rotation?(i=Math.atan2(l,c),i=((i*=180/Math.PI)+360+180)%360):i=void 0,this.updateMovementVisuals(i,c,l,n)),this.x+=c,this.y+=l},_executeViewportBezier:function(t,n,i){var r,o,s,a,u,h,c,l,f,p,d,y;if(r=new e,null==this._currentPart.bPath){if(c=this._currentPart.path,null!=this._lastBezierPathPoint&&this._currentPart.continuePath&&c.unshift({x:this._lastBezierPathPoint.x,y:this._lastBezierPathPoint.y}),this._currentPart.bPath=r.buildPathFrom(c),null!=this._lastBezierPathPoint&&this._currentPart.continuePath){for(this._currentPart.bPath.curves.shift(),p=0,u=0,h=(d=this._currentPart.bPath.curves).length;u<h;u++)p+=d[u].distance;this._currentPart.bPath.distance=p,this._lastBezierPathPoint=null}this._lastBezierPathPoint=this._currentPart.path[this._currentPart.path.length-2]}return l=r.pointOnPath(this._currentPart.bPath,t),f=r.pointOnPath(this._currentPart.bPath,n),null==this.shiftedX&&(this.shiftedX=0),o=this.shiftedX,this.shiftedX=Math.max(0,this.shiftedX-.5),s=l.x-f.x+(this.shiftedX-o),a=l.y-f.y,this._currentPart.rotation&&(y=r.angleOnPath(this._currentPart.bPath,t)),null!=this.updateMovementVisuals?this.updateMovementVisuals(y,s,a,i):null!=y&&(this.rotation=y),this.x+=s,this.y+=a}})}).call(e,n(1).default)},function(t,e,n){function i(t,e,n,O,A,j){var F,B=e&S,L=e&C,z=e&k;if(n&&(F=A?n(t,O,A,j):n(t)),void 0!==F)return F;if(!w(t))return t;var R=m(t);if(R){if(F=v(t),!B)return c(t,F)}else{var I=y(t),H=I==M||I==D;if(x(t))return h(t,B);if(I==T||I==P||H&&!A){if(F=L||H?{}:_(t),!B)return L?f(t,u(F,t)):l(t,a(F,t))}else{if(!E[I])return A?t:{};F=g(t,I,i,B)}}j||(j=new r);var W=j.get(t);if(W)return W;j.set(t,F);var q=z?L?d:p:L?keysIn:b,G=R?void 0:q(t);return o(G||t,function(r,o){G&&(r=t[o=r]),s(F,o,i(r,e,n,o,t,j))}),F}var r=n(113),o=n(603),s=n(155),a=n(604),u=n(605),h=n(606),c=n(225),l=n(607),f=n(608),p=n(172),d=n(609),y=n(117),v=n(610),g=n(611),_=n(620),m=n(19),x=n(79),w=n(31),b=n(61),S=1,C=2,k=4,P="[object Arguments]",M="[object Function]",D="[object GeneratorFunction]",T="[object Object]",E={};E[P]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[T]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[M]=E["[object WeakMap]"]=!1,t.exports=i},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){var i=n(58),r=n(61);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){var i=n(58),r=n(77);t.exports=function(t,e){return t&&i(e,r(e),t)}},function(t,e,n){(function(t){var i=n(30),r="object"==typeof e&&e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===r?i.Buffer:void 0,a=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}}).call(e,n(109)(t))},function(t,e,n){var i=n(58),r=n(116);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(58),r=n(226);t.exports=function(t,e){return i(t,r(t),e)}},function(t,e,n){var i=n(173),r=n(226),o=n(77);t.exports=function(t){return i(t,o,r)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,i=t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(i.index=t.index,i.input=t.input),i}},function(t,e,n){var i=n(148),r=n(612),o=n(613),s=n(615),a=n(616),u=n(618),h=n(619),c="[object Boolean]",l="[object Date]",f="[object Map]",p="[object Number]",d="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",_="[object ArrayBuffer]",m="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",b="[object Int8Array]",S="[object Int16Array]",C="[object Int32Array]",k="[object Uint8Array]",P="[object Uint8ClampedArray]",M="[object Uint16Array]",D="[object Uint32Array]";t.exports=function(t,e,n,T){var E=t.constructor;switch(e){case _:return i(t);case c:case l:return new E(+t);case m:return r(t,T);case x:case w:case b:case S:case C:case k:case P:case M:case D:return h(t,T);case f:return o(t,T,n);case p:case v:return new E(t);case d:return s(t);case y:return a(t,T,n);case g:return u(t)}}},function(t,e,n){var i=n(148);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var i=n(614),r=n(228),o=n(170),s=1;t.exports=function(t,e,n){var a=e?n(o(t),s):o(t);return r(a,i,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.set(e[0],e[1]),t}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var i=n(617),r=n(228),o=n(171),s=1;t.exports=function(t,e,n){var a=e?n(o(t),s):o(t);return r(a,i,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.add(e),t}},function(t,e,n){var i=n(59),r=i?i.prototype:void 0,o=r?r.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,n){var i=n(148);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var i=n(621),r=n(227),o=n(80);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:i(r(t))}},function(t,e,n){var i=n(31),r=Object.create,o=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},function(t,e,n){var i=n(58),r=n(160),o=n(77),s=r(function(t,e){i(e,o(e),t)});t.exports=s},function(t,e,n){var i;n(624),i=function(){function t(){}return t.prototype.scalePoints=function(t,e){var n,i,r,o,s,a,u,h;for(s=e.origin,h=e.scale,o={x:t[0].x*h.x-s.x,y:t[0].y*h.y-s.y},u=[],n=i=0,r=t.length;i<r;n=++i)a=t[n],u.push({x:a.x*h.x-o.x,y:a.y*h.y-o.y});return u},t.prototype.buildPathFrom=function(t){var e,n,i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m;for(g={distance:0,curves:[]},u=(d=this.getCurveControlPoints(t))[0],_=d[1],3,h=c=0,y=t.length-1;0<=y?c<y:c>y;h=0<=y?++c:--c){for(e=t[h],n=t[h+1],i=u[h],o=[n,_[h],i,e],r=0,f=jsBezier.pointOnCurve(o,0),h=l=m=1/3,v=m;v>0?l<=1:l>=1;h=l+=v)p=jsBezier.pointOnCurve(o,h),s=Math.abs(f.x-p.x),a=Math.abs(f.y-p.y),r+=Math.sqrt(Math.pow(s,2)+Math.pow(a,2)),f=p;g.distance+=r,g.curves.push({distance:r,points:o})}return g},t.prototype.pointOnPath=function(t,e){var n,i,r,o,s;return o=this.getCurveAndLocation(t,e),i=o[0],s=o[1],n=o[2],r=jsBezier.pointOnCurve(i.points,s),r.c=n,r},t.prototype.angleOnPath=function(t,e){var n,i,r;return i=this.pointOnPath(t,Math.min(e,.99)),r=this.pointOnPath(t,Math.min(e+.01,1)),n=Math.atan2(i.y-r.y,i.x-r.x),((n*=180/Math.PI)+360)%360},t.prototype.getCurveAndLocation=function(t,e){var n,i,r,o,s,a,u;for(n=0,a=((r=0)+(i=t.curves[n]).distance)/t.distance;e>a;)n+=1,a=((r+=i.distance)+(i=t.curves[n]).distance)/t.distance;return o=i.distance/t.distance,s=r/t.distance,u=(e-s)/o,[i,u,n]},t.prototype.getCurveControlPoints=function(t){var e,n,i,r,o,s,a,u,h;if((r=t.length-1)<1)return[];if(1===r)return e=[{x:(2*t[0].x+t[1].x)/3,y:(2*t[0].y+t[1].y)/3}],a=[{x:2*e[0].x-t[0].x,y:2*e[0].y-t[0].y}],[e,a];for((s=function(){var e,i,o;for(o=[],n=e=1,i=r-1;1<=i?e<i:e>i;n=1<=i?++e:--e)o.push(4*t[n].x+2*t[n+1].x);return o}()).unshift(t[0].x+2*t[1].x),s.push((8*t[r-1].x+t[r].x)/2),u=this.getFirstControlPoints(s),(s=function(){var e,i,o;for(o=[],n=e=1,i=r-1;1<=i?e<i:e>i;n=1<=i?++e:--e)o.push(4*t[n].y+2*t[n+1].y);return o}()).unshift(t[0].y+2*t[1].y),s.push((8*t[r-1].y+t[r].y)/2),h=this.getFirstControlPoints(s),e=[],a=[],n=i=0,o=r;0<=o?i<o:i>o;n=0<=o?++i:--i)e.push({x:u[n],y:h[n]}),n<r-1?a.push({x:2*t[n+1].x-u[n+1],y:2*t[n+1].y-h[n+1]}):a.push({x:(t[r].x+u[r-1])/2,y:(t[r].y+h[r-1])/2});return[e,a]},t.prototype.getFirstControlPoints=function(t){var e,n,i,r,o,s,a,u,h;for(o=t.length,u=[null],e=2,(h=[]).push(t[0]/e),n=i=1,s=o;1<=s?i<s:i>s;n=1<=s?++i:--i)u.push(1/e),e=n<o-1?4:3.5,e-=u[n],h.push((t[n]-h[n-1])/e);for(n=r=1,a=o;1<=a?r<a:r>a;n=1<=a?++r:--r)h[o-n-1]-=u[o-n]*h[o-n];return h},t}(),t.exports={default:i}},function(t,e,n){(function(){void 0===Math.sgn&&(Math.sgn=function(t){return 0==t?0:t>0?1:-1});var t=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},n=function(t,e){return t.x*e.x+t.y*e.y},i=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},r=function(t,e){return{x:t.x*e,y:t.y*e}},o=Math.pow(2,-65),s=function(e,n){for(var r=[],o=a(e,n),s=n.length-1,h=u(o,2*s-1,r,0),c=t(e,n[0]),l=i(c),p=0,d=0;d<h;d++){c=t(e,f(n,s,r[d],null,null));var y=i(c);y<l&&(l=y,p=r[d])}return c=t(e,n[s]),(y=i(c))<l&&(l=y,p=1),{location:p,distance:l}},a=function(e,i){for(var o=i.length-1,s=2*o-1,a=[],u=[],h=[],c=[],l=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],f=0;f<=o;f++)a[f]=t(i[f],e);for(f=0;f<=o-1;f++)u[f]=t(i[f+1],i[f]),u[f]=r(u[f],3);for(var p=0;p<=o-1;p++)for(var d=0;d<=o;d++)h[p]||(h[p]=[]),h[p][d]=n(u[p],a[d]);for(f=0;f<=s;f++)c[f]||(c[f]=[]),c[f].y=0,c[f].x=parseFloat(f)/s;for(var y=o,v=o-1,g=0;g<=y+v;g++){var _=Math.max(0,g-v),m=Math.min(g,y);for(f=_;f<=m;f++)j=g-f,c[f+j].y+=h[j][f]*l[j][f]}return c},u=function(t,e,n,i){var r,o,s=[],a=[],p=[],d=[];switch(h(t,e)){case 0:return 0;case 1:if(i>=64)return n[0]=(t[0].x+t[e].x)/2,1;if(c(t,e))return n[0]=l(t,e),1}f(t,e,.5,s,a),r=u(s,e,p,i+1),o=u(a,e,d,i+1);for(var y=0;y<r;y++)n[y]=p[y];for(y=0;y<o;y++)n[y+r]=d[y];return r+o},h=function(t,e){var n,i,r=0;n=i=Math.sgn(t[0].y);for(var o=1;o<=e;o++)(n=Math.sgn(t[o].y))!=i&&r++,i=n;return r},c=function(t,e){var n,i,r,s,a,u,h,c,l,f,p,d;a=t[0].y-t[e].y,u=t[e].x-t[0].x,h=t[0].x*t[e].y-t[e].x*t[0].y;for(var y=max_distance_below=0,v=1;v<e;v++){var g=a*t[v].x+u*t[v].y+h;g>y?y=g:g<max_distance_below&&(max_distance_below=g)}return 0,1,0,f=a,p=u,d=h-y,c=0*p-1*f,l=1/c,n=(1*d-0*p)*l,f=a,p=u,d=h-max_distance_below,c=0*p-1*f,l=1/c,i=(1*d-0*p)*l,r=Math.min(n,i),s=Math.max(n,i),s-r<o?1:0},l=function(t,e){var n=t[e].x-t[0].x,i=t[e].y-t[0].y,r=t[0].x-0;return 0+1*((n*(t[0].y-0)-i*r)*(1/(0*n-1*i)))},f=function(t,e,n,i,r){for(var o=[[]],s=0;s<=e;s++)o[0][s]=t[s];for(var a=1;a<=e;a++)for(s=0;s<=e-a;s++)o[a]||(o[a]=[]),o[a][s]||(o[a][s]={}),o[a][s].x=(1-n)*o[a-1][s].x+n*o[a-1][s+1].x,o[a][s].y=(1-n)*o[a-1][s].y+n*o[a-1][s+1].y;if(null!=i)for(s=0;s<=e;s++)i[s]=o[s][0];if(null!=r)for(s=0;s<=e;s++)r[s]=o[e-s][s];return o[e][0]},p={},d=function(t){var e=p[t];if(!e){var n=function(t){return function(e){return t}},i=function(){return function(t){return t}},r=function(){return function(t){return 1-t}},o=function(t){return function(e){for(var n=1,i=0;i<t.length;i++)n*=t[i](e);return n}};(e=[]).push(new function(){return function(e){return Math.pow(e,t)}});for(var s=1;s<t;s++){for(var a=[new n(t)],u=0;u<t-s;u++)a.push(new i);for(u=0;u<s;u++)a.push(new r);e.push(new o(a))}e.push(new function(){return function(e){return Math.pow(1-e,t)}}),p[t]=e}return e},y=function(t,e){for(var n=d(t.length-1),i=0,r=0,o=0;o<t.length;o++)i+=t[o].x*n[o](e),r+=t[o].y*n[o](e);return{x:i,y:r}},v=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},g=function(t){return t[0].x==t[1].x&&t[0].y==t[1].y},_=function(t,e,n){if(g(t))return{point:t[0],location:e};for(var i=y(t,e),r=0,o=e,s=n>0?1:-1,a=null;r<Math.abs(n);)a=y(t,o+=.005*s),r+=v(a,i),i=a;return{point:a,location:o}},m=function(t,e){var n=y(t,e),i=y(t.slice(0,t.length-1),e),r=i.y-n.y,o=i.x-n.x;return 0==r?1/0:Math.atan(r/o)},x=this.jsBezier={distanceFromCurve:s,gradientAtPoint:m,gradientAtPointAlongCurveFrom:function(t,e,n){var i=_(t,e,n);return i.location>1&&(i.location=1),i.location<0&&(i.location=0),m(t,i.location)},nearestPointOnCurve:function(t,e){var n=s(t,e);return{point:f(e,e.length-1,n.location,null,null),location:n.location}},pointOnCurve:y,pointAlongCurveFrom:function(t,e,n){return _(t,e,n).point},perpendicularToCurveAt:function(t,e,n,i){var r=_(t,e,i=null==i?0:i),o=m(t,r.location),s=Math.atan(-1/o),a=n/2*Math.sin(s),u=n/2*Math.cos(s);return[{x:r.point.x+u,y:r.point.y+a},{x:r.point.x-u,y:r.point.y-a}]},locationAlongCurveFrom:function(t,e,n){return _(t,e,n).location},getLength:function(t){if(g(t))return 0;for(var e=y(t,0),n=0,i=0,r=null;i<1;)r=y(t,i+=.005),n+=v(r,e),e=r;return n},version:"0.9.0"};e.jsBezier=x}).call("undefined"!=typeof window?window:this)},function(t,e,n){(function(t){t.c("ColorFade",{colorFade:function(t,e,n){var i,r;return this.bottomColors=e,this.topColors=n,this.duration=t.duration,r=t.skip,this.v=0,this.v+=null!=(i=Math.max(r,0))?i:0,this.bind("GameLoop",this._recolor)},remove:function(){return this.unbind("GameLoop",this._recolor)},_recolor:function(e){var n,i,r;return this.v+=e.dt,(i=this.v/this.duration)<0&&(i=0),i>=1&&(this.unbind("GameLoop",this._recolor),this.trigger("ColorFadeFinished"),i=1),n=this._buildColor(i,this.bottomColors),r=this._buildColor(i,this.topColors),t.trigger("BackgroundColor",n),t.background(n),this.bottomColor(n),this.topColor(r)},_buildColor:function(t,e){var n,i,r,o,s,a;return o=1/(e.length-1),i=Math.floor(t/o),n=e[i],a=null!=(s=e[i+1])?s:n,r=(t-i*o)/o,this._mix(r,n,a)},_mix:function(t,e,n){var i,r,o,s,a;return r=this._strToColor(e),a=this._strToColor(n),i={r:Math.round(r.r*(1-t)+a.r*t),g:Math.round(r.g*(1-t)+a.g*t),b:Math.round(r.b*(1-t)+a.b*t)},"#"+function(){var t;t=[];for(s in i)o=i[s],t.push(("0"+o.toString(16)).slice(-2));return t}().join("")},_strToColor:function(t){return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16)}}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Delta2D",{required:"2D",properties:{dx:{set:function(t){this.shift(t-this._dx,0),this._dx=t},get:function(){return this._dx},enumerable:!0,configurable:!1},_dx:{value:0,writable:!0,enumerable:!1,configurable:!1},dy:{set:function(t){this.shift(0,t-this._dy),this._dy=t},get:function(){return this._dy},enumerable:!0,configurable:!1},_dy:{value:0,writable:!0,enumerable:!1,configurable:!1}}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Listener",{init:function(){return this.listeners=[]},remove:function(){var t,e,n,i,r,o,s,a;for(a=[],n=0,i=(o=this.listeners).length;n<i;n++)r=(s=o[n]).object,e=s.event,t=s.callback,a.push(r.unbind(e,t));return a},listenTo:function(t,e,n,i){var r;return null==i&&(i=this),r=function(){return n.apply(i,arguments)},this.listeners.push({object:t,event:e,callback:r}),t.bind(e,r)}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("TweenPromise",{init(){this.requires("Tween")},tweenPromise(...t){return new Promise(e=>{this.one("TweenEnd",e),this.tween(...t)})}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("ViewportFixed",{init:function(){},remove:function(){}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e;e=function(t,e){return t*(e-(.225-.225*e))},t.c("ViewportRelativeMotion",{viewportRelativeMotion:function(n){var i,r,o,s,a,u,h;return u=n.x,h=n.y,o=n.offsetY,s=n.speed,this._speed=s,null!=u&&null!=h&&(this._startLocation={x:u,y:h},a=t.viewport.width/4,i=u+(u-a)*(this._speed-1)-a*(this._speed-1)+(this.dx||0),r=h+e(o,this._speed)-(this.dy||0),this.attr({x:Math.floor(i),y:Math.floor(r)})),this.motion=t.bind("CameraMove",function(t){return function(n){var i,r;return i=n.dx,r=n.dy,u=-i*t._speed,h=-e(r,t._speed),t.shift(u,h)}}(this)),this},remove:function(){return t.unbind("CameraMove",this.motion)}})}).call(e,n(1).default)},function(t,e,n){"use strict";var i=n(632),r=(n.n(i),n(633)),o=(n.n(r),n(634)),s=(n.n(o),n(635)),a=(n.n(s),n(636)),u=(n.n(a),n(637)),h=(n.n(u),n(638));n.n(h)},function(t,e,n){(function(t){t.c("ControlScheme",{init:function(){return this.has("Cheats")||this.addComponent("Cheats"),this.trigger("Activated"),t.trigger("PlayerActivated")},remove:function(){return this.has("Cheats")&&this.removeComponent("Cheats"),this.trigger("Deactivated"),t.trigger("PlayerDeactivated")}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("InventoryWeapons",{init:function(){},stats:function(t){var e,n,i,r,o,s,a;return null==t&&(t={}),null!=t.primary&&(this.primaryWeapon.stats=t.primary.stats,this.primaryWeapon._determineWeaponSettings()),a={},a.primary={stats:null!=(e=null!=(n=this.primaryWeapon)?n.stats:void 0)?e:{},boosts:null!=(i=null!=(r=this.primaryWeapon)?r.boosts:void 0)?i:{},boostTimings:null!=(o=null!=(s=this.primaryWeapon)?s.boostTimings:void 0)?o:{}},a},installItem:function(t){var e,n;if(null!=t){if("weapon"===t.type){if(this.hasItem(t.contains))return;if(this.items.push(t),"lasers"===t.contains)return this._installPrimary("RapidWeaponLaser"),!0;if("oldlasers"===t.contains)return this._installPrimary("OldWeaponLaser"),!0;if("diagonals"===t.contains)return this._installPrimary("RapidDiagonalLaser"),!0}if("ship"===(n=t.type)||"shipBoost"===n||"shipUpgrade"===n){if("life"===t.contains)return this.scoreText("Extra life!"),!0;if("healthb"===t.contains)return this.scoreText("Full health!"),!0;if("healthu"===t.contains)return this.scoreText("Health upgrade!"),!0;if("points"===t.contains)return this.scoreText("+500 points!"),!0;if("xp"===t.contains)return"function"==typeof(e=this.primaryWeapon).addXP&&e.addXP(1e3),!0}return"weaponUpgrade"===t.type?(this.primaryWeapon.upgrade(t.contains),!0):"weaponBoost"===t.type?(this.primaryWeapon.boost(t.contains),!0):void 0}}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Player",{init:function(){return this.reset()},reset:function(){if(this.softReset(),this.has("ControlScheme"))return this.removeComponent("ControlScheme")},softReset:function(){return this.stats={shotsFired:0,shotsHit:0,enemiesKilled:0,bonus:0},this.attr({lives:3,health:5,maxHealth:5,points:0})},loseHealth:function(t){return this.health-=t,this.trigger("UpdateHealth",{health:this.health})},loseLife:function(){if(this.lives>0)return this.lives-=1,this.health=this.maxHealth,this.trigger("UpdateLives",{lives:this.lives}),this.lives<=0?t.trigger("PlayerDied",this):void 0},gainLife:function(){return this.lives+=1,this.trigger("UpdateLives",{lives:this.lives})},healthUpgrade:function(){return this.maxHealth+=1,this.health=this.maxHealth,this.trigger("UpdateHealth",{maxHealth:this.maxHealth,health:this.health})},healthBoost:function(){return this.health=this.maxHealth,this.trigger("UpdateHealth",{health:this.health})},eligibleForExtraLife:function(){if(this.lastExtraLifeThreshold||(this.lastExtraLifeThreshold=0),this.points-this.lastExtraLifeThreshold>=15e3)return!0},rewardExtraLife:function(){return this.lastExtraLifeThreshold=this.points},addPoints:function(t,e){if(this.lives>0)return e&&t>0&&this.ship.scoreText("+"+t,{location:e,attach:!1,duration:200,distance:30,delay:10}),this.points+=t,this.trigger("UpdatePoints",{points:this.points})}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("PlayerAssignable",{init:function(){return this._attachControllerAssignTrigger(),this.preferredPlayer=null},_assignControls:function(){var t;if(null!=(t=this._preferredplayer()||this._firstUnassignedPlayer()))return this.preferredPlayer=t.getId(),this.setupControls(t),t.one("Deactivated",function(t){return function(){return t._attachControllerAssignTrigger()}}(this));this._attachControllerAssignTrigger()},_attachControllerAssignTrigger:function(){return this.one("Fire",this._assignControls)},_preferredplayer:function(e){var n;if(null!==this.preferredPlayer&&!(n=t(this.preferredPlayer)).has("ControlScheme"))return n},_firstUnassignedPlayer:function(){var e,n,i,r,o;for(e=0,n=(o=t("Player")).length;e<n;e++)if(r=o[e],!(i=t(r)).has("ControlScheme"))return i}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.c("PlayerControlledCube",{init:function(){return this.requires("2D, WebGL, Color, Listener, Collision, SunBlock, PlayerControlledShip, Acceleration, InventoryWeapons"),this.attr({w:40,h:40}),this.bind("Moved",function(t){var e;if(this.hit("Edge")||this.hit("Solid"))return e={},e[t.axis]=t.oldValue,this.attr(e)}),this.primaryWeapon=void 0,this.primaryWeapons=[],this.secondaryWeapon=void 0,this.superUsed=0,this.weaponsEnabled=!0,this.currentRenderedSpeed=0},start:function(){return this.addComponent("Invincible").invincibleDuration(2e3),this.onHit("Enemy",function(t){var n,i,r;if(!e.paused&&!this.has("Invincible")){for(n=!1,i=0,r=t.length;i<r;i++)t[i].obj.hidden||(n=!0);return n?this.trigger("Hit"):void 0}}),this.onHit("PowerUp",function(t){var n,i,r,o;if(!e.paused){for(o=[],n=0,i=t.length;n<i;n++)r=t[n],this.pickUp(r.obj),o.push(this.trigger("PowerUp",r.obj));return o}}),this.bind("Hit",function(){return this.trigger("Destroyed",this)}),this.bind("CameraPan",function(t){var e,n;return e=t.dx,n=t.dy,this.shift(-e,-n)}),this.bind("GameLoop",function(t){var e,n;if(e=this._currentSpeed.x/1e3*t.dt,n=this._currentSpeed.y/1e3*t.dt,this.updateAcceleration(),(this.hit("Edge")||this.hit("Solid"))&&(this.x-=e,this.y-=n),this.hit("Edge")||this.hit("Solid"))return this.trigger("Hit")}),this},forcedSpeed:function(t,e){return this.targetSpeed(t,e)},shoot:function(t){if(this.weaponsEnabled)return null!=this.primaryWeapon&&this.primaryWeapon.shoot(t),null!=this.secondaryWeapon?this.secondaryWeapon.shoot(t):void 0},switchWeapon:function(t){var e,n;if(t)return e=(this.currentPrimary+1)%this.primaryWeapons.length,null!=(n=this.primaryWeapon)&&n.uninstall(),this.primaryWeapon=this.primaryWeapons[e],this.primaryWeapon.install(this),this.currentPrimary=e},superWeapon:function(t){if(t)return this.superUsed+=1},pickUp:function(t){if(t.settings.contains,this.installItem(t.settings))return this.trigger("PowerUp",t.settings),t.pickup()},clearItems:function(){var t,e,n,i;for(null!=(n=this.primaryWeapon)&&n.uninstall(),this.primaryWeapon=null,t=0,e=(i=this.primaryWeapons).length;t<e;t++)i[t].destroy();return this.primaryWeapons=[],this.items=[]},_installPrimary:function(e){var n,i;return(i=t.e(e)).install(this),null!=(n=this.primaryWeapon)&&n.uninstall(),this.primaryWeapon=i,this.listenTo(i,"levelUp",function(t){return function(e){return t.scoreText("L +"+e)}}(this)),this.primaryWeapons.push(i),this.currentPrimary=this.primaryWeapons.length-1},hasItem:function(t){return null==this.items&&(this.items=[]),~this.items.indexOf(t)},scoreText:function(e){return t.e("Text, DOM, 2D, Tween").textColor("#FFFFFF").text(e).attr({x:this.x,y:this.y-10,z:990,w:100}).textFont({size:"10px",weight:"bold",family:"Press Start 2P"}).tween({y:this.y-40,alpha:.5},1e3).one("TweenEnd",function(){return this.destroy()})}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){t.c("PlayerInfo",{init:function(){return this.requires("2D, Listener"),this.boosts={},this.visible=!0},playerInfo:function(e,n){return this.player=n,this.score=t.e("2D, Text, UILayerDOM").attr({w:220,h:20,x:e,y:10,z:200}).textFont({size:"10px",family:"Press Start 2P"}),this.player.has("Color")&&this.score.textColor(this.player.color()),this.lives=t.e("2D, Text, UILayerDOM").attr({w:220,h:20,x:e,y:30,z:200}).textFont({size:"10px",family:"Press Start 2P"}),this.health=t.e("2D, Text, UILayerDOM").attr({w:220,h:20,x:e+70,y:28,z:200}).textFont({size:"10px",family:"Press Start 2P"}),this.heart=t.e("2D, ColorEffects, heart, UILayerWebGL").attr({w:16,h:16,x:e-2,y:26,z:200}).colorOverride(n.color(),"partial"),this.player.has("Color")&&(this.lives.textColor(n.color()),this.health.textColor(n.color())),this.updatePlayerInfo(),this.createBoostsVisuals(e),this.listenTo(n,"UpdateLives",this.updatePlayerInfo),this.listenTo(n,"UpdatePoints",this.updatePlayerInfo),this.listenTo(n,"UpdateHealth",this.updatePlayerInfo),this.listenTo(n,"Activated",this.updatePlayerInfo),this.listenTo(n,"Deactivated",this.updatePlayerInfo),this.listenTo(n,"GameLoop",function(t){return function(e){return t.updateBoostInfo(),t.updateHealthInfo(e)}}(this)),this},setVisibility:function(t){return this.visible=t},createBoostsVisuals:function(e){var n;return n=this.player.color(),this.boosts.speedb=t.e("2D, UILayerWebGL, speedBoost, ColorEffects").attr({w:16,h:16}).attr({x:e,y:45,z:200}).colorOverride(n,"partial"),this.boosts.rapidb=t.e("2D, UILayerWebGL, rapidFireBoost, ColorEffects").attr({w:16,h:16}).attr({x:e+20,y:44,z:200}).colorOverride(n,"partial"),this.boosts.aimb=t.e("2D, UILayerWebGL, aimBoost, ColorEffects").attr({w:16,h:16}).attr({x:e+40,y:44,z:200}).colorOverride(n,"partial"),this.boosts.damageb=t.e("2D, UILayerWebGL, damageBoost, ColorEffects").attr({w:16,h:16}).attr({x:e+50,y:44,z:200}).colorOverride(n,"partial")},updateBoostInfo:function(){var t,e,n,i,r,o,s;i=this.boosts;for(n in i)i[n].attr({alpha:0});if(this.player.has("ControlScheme")&&!1!==this.visibile&&null!=this.player.ship){r=this.player.ship.stats().primary.boostTimings,o=[];for(e in r)t=1,(s=r[e])<2e3&&Math.floor(s/200)%2==0&&(t=0),o.push(this.boosts[e].attr({alpha:t}));return o}},updateHealthInfo:function(t){var e;if(this.health.attr({alpha:0}),this.player.has("ControlScheme")&&!1!==this.visibile)return null!=this.player.ship?(e=1,this.player.health<1&&Math.floor(t.inGameTime/200)%2==0&&(e=0),this.health.attr({alpha:e})):void 0},updatePlayerInfo:function(){var t,e,n,i,r,o;if(this.player.has("ControlScheme")?this.score.text("Score: "+this.player.points):this.score.text(this.player.name),this.player.has("ControlScheme"))return 0===this.player.lives?(this.lives.text("Game Over"),this.heart.attr({alpha:0,visible:!1}),this.health.attr({alpha:0,visible:!1})):(!0===this.visibile&&this.heart.attr({alpha:1}),this.heart.attr({visible:!0}),Infinity===(o=this.player.lives-1)&&(o="Demo mode"),this.lives.text("&nbsp;  "+o),e=Array(Math.max(1,this.player.health)).fill("▩").join(""),!0===this.visibile&&this.health.attr({alpha:1}),this.health.text(e));this.lives.text("Press fire to start!"),this.heart.attr({alpha:0,visible:!1}),this.health.attr({alpha:0,visible:!1}),i=this.boosts,r=[];for(n in i)t=i[n],r.push(t.attr({alpha:0}));return r}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){var i;i=n(9),t.c("PlayerSpaceship",{init:function(){return this.requires("2D, WebGL, playerShip, ColorEffects, Listener, Collision, SunBlock, WaterSplashes, PlayerControlledShip, Acceleration, InventoryWeapons"),this.attr({w:71,h:45}),this.collision([21,13,56,13,66,32,35,32]),this.bind("Move",function(t){var e;if(this.hit("Edge")||this.hit("Solid"))return e=this.motionDelta(),this.shift(-e.x,-e.y)}),this.primaryWeapon=void 0,this.primaryWeapons=[],this.secondaryWeapon=void 0,this.superUsed=0,this.weaponsEnabled=!0,this.currentRenderedSpeed=0,this.flip("X")},updateMovementVisuals:function(t,e,n,i){var r;return r=Math.max(e*(1e3/i),0),this._updateFlyingSpeed(r,i)},_updateFlyingSpeed:function(t,e){var n,i,r;return n=t<30?t/2:15+t/400*100,this.currentRenderedSpeed>n?this.currentRenderedSpeed-=12:this.currentRenderedSpeed<n&&(this.currentRenderedSpeed+=12),this.currentRenderedSpeed<0&&(this.currentRenderedSpeed=0),r=10+this.currentRenderedSpeed,i=Math.min(r/3,15),this.backFire.attr({x:this.x-r+9,y:this.y+20-Math.floor(i/2),w:r,h:i})},start:function(){var n,i,r,o,s,a,u;for(this.backFire=t.e("2D, WebGL, shipEngineFire, ColorEffects").crop(28,0,68,29),this.backFire.timing=0,68,10,this.backFire.attr({x:this.x-68,y:this.y+20-Math.floor(5),w:68,h:10,alpha:.8,z:this.z-1}),this.attach(this.backFire),i={},n={_red:255,_green:255,_blue:255},t.assignColor(this.playerColor,i),o=0,s=(u=["_red","_green","_blue"]).length;o<s;o++)a=(i[r=u[o]]+n[r]+n[r])/3,i[r]=a;return this.backFire.colorOverride(i),this.addComponent("Invincible").invincibleDuration(1500),this.setDetectionOffset(60,0),this.onHit("Hostile",function(t){var n,i,r,o,s;if(!e.paused&&!this.has("Invincible")){for(r=!1,n=0,o=0,s=t.length;o<s;o++)(i=t[o]).obj.damage&&i.obj.damage>n&&!i.obj.hidden&&(n=i.obj.damage,r=!0);return r?this.trigger("Hit",{damage:n}):void 0}}),this.onHit("PowerUp",function(t){var n,i,r,o;if(!e.paused){for(o=[],n=0,i=t.length;n<i;n++)(r=t[n]).obj.pickedUp?o.push(void 0):o.push(this.pickUp(r.obj));return o}}),this.bind("Hit",function(){return this.addComponent("Invincible").invincibleDuration(2e3),t.e("Blast, Explosion").explode({x:this.x+this.w/2,y:this.y+this.h/2,radius:this.w/3}),t.audio.play("explosion"),t("ScrollWall").get(0).addTrauma(.3)}),this.bind("Die",function(){return t.e("Blast, Explosion").explode({x:this.x+this.w/2,y:this.y+this.h/2,radius:this.w}),t.audio.play("explosion"),t("ScrollWall").get(0).addTrauma(.3),this.trigger("Destroyed",this)}),this.bind("CameraPan",function(t){var e,n;return e=t.dx,n=t.dy,this.shift(-e,-n)}),this.bind("GameLoop",function(t){var e,n,i,r,o,s,a,u;if(!this.has("AnimationMode"))return e=this._currentSpeed.x/1e3*t.dt,n=this._currentSpeed.y/1e3*t.dt,a=this._currentSpeed.x+this.vx,u=this._currentSpeed.y+this.vy,this.updateAcceleration(),o=this.rotation,i=u/40,r=o,o<i?r+=1:o>i&&(r-=1),this.rotation=r,(this.hit("Edge")||this.hit("Solid"))&&(r=o),this.rotation=0,this._updateFlyingSpeed(a,t.dt),this.rotation=r,(this.hit("Edge")||this.hit("Solid"))&&(this.x-=e,this.y-=n),this.hit("Edge")||this.hit("Solid")?this.trigger("Hit",{damage:1e3}):void 0;0===(null!=(s=this._choreography)?s.length:void 0)&&this._updateFlyingSpeed(this._currentSpeed.x,t.dt)}),this},forcedSpeed:function(t,e){return null==e&&(e={}),this.targetSpeed(t,e)},shoot:function(t){if(this.weaponsEnabled)return null!=this.primaryWeapon&&this.primaryWeapon.shoot(t),null!=this.secondaryWeapon?this.secondaryWeapon.shoot(t):void 0},switchWeapon:function(t){var e,n;if(t)return e=(this.currentPrimary+1)%this.primaryWeapons.length,null!=(n=this.primaryWeapon)&&n.uninstall(),this.primaryWeapon=this.primaryWeapons[e],this.primaryWeapon.install(this),this.currentPrimary=e},superWeapon:function(t){if(t)return this.superUsed+=1},pickUp:function(e){if(e.settings.contains,this.installItem(e.settings))return t.audio.play("powerup"),this.trigger("PowerUp",e.settings),e.pickup()},clearItems:function(){var t,e,n,i;for(null!=(n=this.primaryWeapon)&&n.uninstall(),t=0,e=(i=this.primaryWeapons).length;t<e;t++)i[t].destroy();return this.primaryWeapons=[],this.items=[]},_installPrimary:function(e){var n,i;return(i=t.e(e)).install(this),null!=(n=this.primaryWeapon)&&n.uninstall(),this.primaryWeapon=i,this.listenTo(i,"levelUp",function(t){return function(e){var n;return n={damage:"Damage",rapid:"RapidFire",aim:"AimAssist",speed:"BulletSpeed"},t.scoreText(n[e.aspect]+" +"+e.level)}}(this)),this.listenTo(i,"boost",function(t){return function(e){var n;return n={damageb:"Damage",rapidb:"RapidFire",aimb:"AimAssist",speedb:"BulletSpeed"},t.scoreText(n[e.aspect]+" Boost!")}}(this)),this.listenTo(i,"boostExpired",function(t){return function(e){var n;return n={damageb:"Damage",rapidb:"RapidFire",aimb:"AimAssist",speedb:"BulletSpeed"},t.scoreText(n[e.aspect]+" Boost expired",{positive:!1})}}(this)),this.primaryWeapons.push(i),this.currentPrimary=this.primaryWeapons.length-1},hasItem:function(t){var e,n,i;for(null==this.items&&(this.items=[]),e=0,n=(i=this.items).length;e<n;e++)if(i[e].contains===t)return!0;return!1},scoreText:function(e,n){var r,o;return null==n&&(n={}),n=i(n,{positive:!0,location:{x:this.x,y:this.y},attach:!0,duration:1e3,distance:70,delay:400}),(r="function"==typeof n.location?n.location():void 0)&&(r={x:r.x,y:r.y}),null==r&&(r=n.location),o=t.e("Text, DOM, 2D, Tween, Delay").textColor(n.positive?"#DDD":"#F00").text(e).attr({x:r.x,y:r.y-10,z:990,w:250,alpha:.75}).textFont({size:"10px",weight:"bold",family:"Press Start 2P"}),n.attach?this.attach(o):o.addComponent("ViewportFixed"),o.delay(function(t){return function(){return n.attach&&t.detach(o),o.tween({rotation:0,y:o.y-n.distance,alpha:.5},n.duration,"easeInQuad"),o.one("TweenEnd",function(){return o.destroy()})}}(this),n.delay)}})}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(640),r=(n.n(i),n(641)),o=(n.n(r),n(642)),s=(n.n(o),n(643));n.n(s)},function(t,e,n){(function(t){var e;e=n(31),t.c("ColorEffects",{colorDesaturation:function(e){var n;return null==e?this:(n={},t.assignColor(e,n),this.attr({desaturationColor:n}),this.trigger("Invalidate"),this)},colorOverride:function(n,i){var r;return null==i&&(i="all"),null==n?this:(r={},e(n)?r=n:t.assignColor(n,r),this.attr({overrideColor:r,overrideColorMode:i}),this.trigger("Invalidate"),this)},clearColorOverride:function(){return this.attr({overrideColor:null,overrideColorMode:"all"}),this.trigger("Invalidate"),this},saturationGradient:function(t,e){return this.attr({topDesaturation:t,bottomDesaturation:e}),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e,n,i;i="attribute vec2 aPosition;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec4 aColor;\nattribute vec4 aDesaturation;\nattribute vec2 aGradient;\n\nvarying lowp vec4 vColor;\nvarying lowp vec4 vDesaturation;\nvarying lowp vec2 vGradient;\nvarying lowp vec2 vLayer;\nuniform  vec4 uViewport;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n\n  vColor = aColor;\n  vDesaturation = aDesaturation;\n  vGradient = aGradient;\n  vLayer = aLayer;\n}",n="precision mediump float;\nvarying lowp vec4 vColor;\nvarying lowp vec2 vGradient;\nvarying lowp vec4 vDesaturation;\nvarying lowp vec2 vLayer;\nvoid main(void) {\n\n  //gl_FragColor = vec4(vColor.rgb*vColor.a*vLayer.y, vColor.a*vLayer.y);\n\n  mediump float mixFactor = vGradient.x;\n\n  mediump float lightness = (0.2126*vColor.r + 0.7152*vColor.g + 0.0722*vColor.b);\n  mediump float lightnessBase = (0.2126*vDesaturation.r + 0.7152*vDesaturation.g + 0.0722*vDesaturation.b);\n  mediump vec4 baseColor = vec4(vDesaturation.rgb, vColor.a) * (1.0 + (lightness - lightnessBase));\n  mediump vec4 mixColor = vec4(\n    (baseColor.rgba * mixFactor) + (vColor.rgba * (1.0 - mixFactor))\n  );\n\n  gl_FragColor = vec4(\n    mixColor.rgb * vColor.a * vLayer.y,\n    vColor.a * vLayer.y\n  );\n}",e=[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aColor",width:4},{name:"aDesaturation",width:4},{name:"aGradient",width:2}],t.defaultShader("Color",new t.WebGLShader(i,n,e,function(t,e){var n,i,r,o,s,a,u,h;return i=null!=(r=e.desaturationColor)?r:{_red:0,_green:0,_blue:0},t.program.writeVector("aColor",e._red/255,e._green/255,e._blue/255,e._strength),t.program.writeVector("aDesaturation",i._red/255,i._green/255,i._blue/255,1),u=null!=(o=e.scale)?o:1,h=null!=(s=e.topDesaturation)?s:0,n=null!=(a=e.bottomDesaturation)?a:0,t.program.writeVector("aGradient",h+1.15*(1-u),n+1.15*(1-u))}))}).call(e,n(1).default)},function(t,e,n){(function(t){var e,n,i,r=[].slice;i="attribute vec2 aPosition;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec4 aColor;\n\nvarying lowp vec4 vColor;\nvarying lowp vec2 vLayer;\nuniform  vec4 uViewport;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n\n  vColor = aColor;\n  vLayer = aLayer;\n}",n="precision mediump float;\nvarying lowp vec4 vColor;\nvarying lowp vec2 vLayer;\nvoid main(void) {\n  gl_FragColor = vec4(vColor.rgb*vColor.a*vLayer.y, vColor.a*vLayer.y);\n}",e=[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aColor",width:4}],t.extend({defaultGradientShader:function(r){return 0===arguments.length?(void 0===this._defaultGradientShader&&(this._defaultGradientShader=new t.WebGLShader(i,n,e,function(t){})),this._defaultGradientShader):this._defaultGradientShader=r}}),t.c("Gradient",{init:function(){return this._topColor={_red:0,_green:0,_blue:0,_strength:1},this._bottomColor={_red:0,_green:0,_blue:0,_strength:1},this.ready=!0,this.bind("Draw",this._drawGradient),this.has("WebGL")&&this._establishShader("Gradient",t.defaultGradientShader()),this.trigger("Invalidate")},remove:function(){return this.unbind("Draw",this._drawGradient),this.has("DOM")&&(this._element.style.backgroundColor="transparent"),this.trigger("Invalidate")},_drawGradient:function(t){if("webgl"===t.type)return t.program.writeVector("aColor",this._topColor._red/255,this._topColor._green/255,this._topColor._blue/255,this._topColor._strength,this._bottomColor._red/255,this._bottomColor._green/255,this._bottomColor._blue/255,this._bottomColor._strength)},topColor:function(t){return 0===arguments.length?this._topColor:this._setColor.apply(this,[this._topColor].concat(r.call(arguments)))},bottomColor:function(t){return 0===arguments.length?this._bottomColor:this._setColor.apply(this,[this._bottomColor].concat(r.call(arguments)))},_setColor:function(e,n){return arguments.length>=4?(e._red=arguments[1],e._green=arguments[2],e._blue=arguments[3],"number"==typeof arguments[4]&&(e._strength=arguments[4])):(t.assignColor(n,e),"number"==typeof arguments[2]&&(e._strength=arguments[2])),this.trigger("Invalidate"),this}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){var n,i,r;r="attribute vec2 aPosition;\nattribute vec4 aSpriteDimensions;\nattribute vec3 aOrientation;\nattribute vec2 aLayer;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec4 aOverrideColor;\nattribute vec4 aGradient;\n\nvarying mediump vec3 vTextureCoord;\nvarying lowp vec4 vColor;\nvarying lowp vec4 vOverrideColor;\nvarying lowp vec4 vGradient;\nvarying lowp vec4 vSpriteDimensions;\n\nuniform vec4 uViewport;\nuniform mediump vec2 uTextureDimensions;\n\nmat4 viewportScale = mat4(2.0 / uViewport.z, 0, 0, 0,    0, -2.0 / uViewport.w, 0,0,    0, 0,1,0,    -1,+1,0,1);\nvec4 viewportTranslation = vec4(uViewport.xy, 0, 0);\n\nvoid main() {\n  vec2 pos = aPosition;\n  vec2 entityOrigin = aOrientation.xy;\n  mat2 entityRotationMatrix = mat2(cos(aOrientation.z), sin(aOrientation.z), -sin(aOrientation.z), cos(aOrientation.z));\n\n  pos = entityRotationMatrix * (pos - entityOrigin) + entityOrigin ;\n  gl_Position = viewportScale * (viewportTranslation + vec4(pos, 1.0/(1.0+exp(aLayer.x) ), 1) );\n  vTextureCoord = vec3(aTextureCoord, aLayer.y);\n  vColor = aColor;\n  vOverrideColor = aOverrideColor;\n  vGradient = aGradient;\n  vSpriteDimensions = aSpriteDimensions;\n}",i="precision mediump float;\nvarying mediump vec3 vTextureCoord;\nvarying mediump vec4 vColor;\nvarying mediump vec4 vOverrideColor;\nvarying mediump vec4 vGradient;\nvarying mediump vec4 vSpriteDimensions;\n\nuniform sampler2D uSampler;\nuniform mediump vec2 uTextureDimensions;\n\nfloat random(vec3 scale, float seed) {\n  // use the fragment position for a different seed per-pixel\n  return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvec3 rgb2hsv(vec3 c) {\n  vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n  vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);\n  vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);\n  //vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n  //vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n  float d = q.x - min(q.w, q.y);\n  float e = 1.0e-10;\n  return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\nvec3 hsv2rgb(vec3 c) {\n  vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n\nvoid main() {\n  highp vec2 coord =   vTextureCoord.xy / uTextureDimensions;\n  float blur = vGradient.z;\n\n  if ((vGradient.a >= 0.0) && (vTextureCoord.y >= vGradient.a)) {\n    gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    return;\n  }\n\n  mediump vec4 texelColor = texture2D(uSampler, coord);\n\n  if (blur > 0.0) {\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++) {\n      float percent = (t + offset - 0.5) / 30.0;\n      float weight = 1.0 - abs(percent);\n      vec4 sample = texture2D(uSampler, coord + (blur * percent) / uTextureDimensions);\n      // switch to pre-multiplied alpha to correctly blur transparent images\n      sample.rgb *= sample.a;\n\n      color += sample * weight;\n      total += weight;\n    }\n\n    texelColor = color / total;\n    texelColor.rgb /= texelColor.a + 0.00001;\n  }\n\n  mediump float yCoord = (vTextureCoord.y - vSpriteDimensions.y) / vSpriteDimensions.a;\n  mediump float mixFactor = (vGradient.x * (1.0 - yCoord)) + (vGradient.y * yCoord);\n\n  mediump float lightness = (0.2126*texelColor.r + 0.7152*texelColor.g + 0.0722*texelColor.b);\n  if (vOverrideColor.a == 1.0) {\n    texelColor = vec4(vOverrideColor.rgb * (lightness * 1.3), texelColor.a);\n  }\n  if (vOverrideColor.a == 2.0) {\n    vec3 texelHSV = rgb2hsv(texelColor.rgb);\n    if ((texelHSV.x < .84) && (texelHSV.x > .82)) {\n      vec3 overrideHSV = rgb2hsv(vOverrideColor.rgb);\n      texelHSV.x = overrideHSV.x;\n      texelHSV.y *= overrideHSV.y;\n      texelHSV.z *= overrideHSV.z;\n      vec3 texelRGB = hsv2rgb(texelHSV);\n      texelColor = vec4(texelRGB.rgb, texelColor.a);\n    }\n  }\n\n  mediump float lightnessBase = (0.2126*vColor.r + 0.7152*vColor.g + 0.0722*vColor.b);\n  mediump vec4 baseColor = vec4(vColor.rgb, texelColor.a) * (1.0 + (lightness - lightnessBase));\n  mediump vec4 mixColor = vec4(\n    (baseColor.rgba * mixFactor) + (texelColor.rgba * (1.0 - mixFactor))\n  );\n\n  if (vColor.a > 1.0) {\n    mixColor.rgb = vColor.rgb;\n  }\n\n  gl_FragColor = vec4(\n    mixColor.rgb * vColor.a * texelColor.a * vTextureCoord.z,\n    texelColor.a * vTextureCoord.z\n  );\n}",n=[{name:"aPosition",width:2},{name:"aOrientation",width:3},{name:"aLayer",width:2},{name:"aTextureCoord",width:2},{name:"aColor",width:4},{name:"aOverrideColor",width:4},{name:"aGradient",width:4},{name:"aSpriteDimensions",width:4}],t.defaultShader("Sprite",new t.WebGLShader(r,i,n,function(t,n){var i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w;return s=t.co,t.program.writeVector("aTextureCoord",s.x,s.y,s.x,s.y+s.h,s.x+s.w,s.y,s.x+s.w,s.y+s.h),t.program.writeVector("aSpriteDimensions",s.x,s.y,s.w,s.h),a=null!=(f=n.desaturationColor)?f:{_red:0,_green:0,_blue:0},c=null!=(p=n.overrideColor)?p:{_red:0,_green:0,_blue:0},h=null!=(d=n.lightness)?d:1,m=n.hidden&&null!=(y=n.scale)?y:1,r=null!=(v=n.blur)?v:0,x=null!=(g=n.topDesaturation)?g:0,i=null!=(_=n.bottomDesaturation)?_:0,w=x+1.15*(1-m),o=i+1.15*(1-m),n.hitFlash&&(a=n.hitFlash,w=3,o=3),!1===e.webGLMode&&(w=0,o=0,n.has("cloud")&&(h=1)),t.program.writeVector("aColor",a._red/255,a._green/255,a._blue/255,h),l=0,null!=n.overrideColor&&(l=1),"partial"===n.overrideColorMode&&(l=2),t.program.writeVector("aOverrideColor",c._red/255,c._green/255,c._blue/255,l),u=n.hideAt?Math.max(0,s.y+(n.hideAt-n.y)/n.h*s.h):-1,t.program.writeVector("aGradient",w,o,r,u)}))}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(645),r=(n.n(i),n(646)),o=(n.n(r),n(647)),s=(n.n(o),n(648));n.n(s)},function(t,e,n){(function(t){t.c("Flipable",{flipX:function(){var t,e,n,i,r,o;if(!this.xFlipped){this.xFlipped=!0;try{for("function"==typeof this.flip&&this.flip("X"),n=0,i=(r=this._children).length;n<i;n++)o=(t=r[n]).x-this.x,"function"==typeof t.attr&&t.attr({x:this.x+this.w-t.w-o}),"function"==typeof t.flip&&t.flip("X")}catch(t){e=t,console.log(e)}return this._mirrorCollision(),this._mirrorRotationPoints(),this._mirrorWeaponOrigin(),this}},unflipX:function(){var t,e,n,i,r,o;if(this.xFlipped){this.xFlipped=!1;try{for("function"==typeof this.unflip&&this.unflip("X"),n=0,i=(r=this._children).length;n<i;n++)t=r[n],o=this.x+this.w-(t.x+t.w),"function"==typeof t.attr&&t.attr({x:this.x+o}),"function"==typeof t.unflip&&t.unflip("X")}catch(t){e=t,console.log(e)}return this._mirrorCollision(),this._mirrorRotationPoints(),this._mirrorWeaponOrigin(),this}},_mirrorCollision:function(){var t,e,n,i,r,o,s;if(this.map.points){for(s=[],e=n=0,i=(o=this.map.points).length;n<i;e=++n)r=o[e],e%2==0?(t=r-this.x,s.push(this.map.points[e]=this.x+(this.w-t))):s.push(void 0);return s}},_mirrorRotationPoints:function(){var t,e,n,i,r;for(this._origin.x=this.w-this._origin.x,r=[],e=0,n=(i=this._children).length;e<n;e++)null!=(t=i[e]).origin&&(t._origin.x=t.w-t._origin.x),r.push(t.rotation=(360-t.rotation+360)%360);return r},_mirrorWeaponOrigin:function(){if(null!=this.weaponOrigin)return this.weaponOrigin=[this.w-this.weaponOrigin[0],this.weaponOrigin[1]]}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Hideable",{init:function(){return this.requires("ColorEffects"),this.hidden=!1},sendToBackground:function(t,e){var n,i,r,o,s;for(this._originalZ=this.z,this.attr({scale:t,z:e}),i=0,r=(o=this._children).length;i<r;i++)null!=(n=o[i]).attr&&(s=n.z-this._originalZ,n.attr({z:e+s}));return this.hidden||this.trigger("Hiding",this),this.hidden=!0},hide:function(t,e){var n,i,r,o,s,a,u;if(this.hideMarker=t,this.hidden=!0,e.below&&this.has("Sprite")&&0===this.rotation)for(this.hideAt=e.below,i=0,o=(a=this._children).length;i<o;i++)"function"==typeof(n=a[i]).attr&&n.attr({hideAt:e.below});else for(this.attr({alpha:0}),r=0,s=(u=this._children).length;r<s;r++)"function"==typeof(n=u[r]).attr&&n.attr({alpha:0});return this.trigger("Hiding",this),this},reveal:function(){var t,e,n,i,r,o,s,a,u,h;for(null!=(o=this.hideMarker)&&o.destroy(),this.hidden=!1,null!=(s=this.scale)?s:1,1,e=0,i=(a=this._children).length;e<i;e++)null!=(t=a[e]).attr&&(h=t.z-this.z,t.attr({z:this._originalZ+h}));for(this.attr({scale:1,alpha:1,z:this._originalZ,hideAt:null}),n=0,r=(u=this._children).length;n<r;n++)"function"==typeof(t=u[n]).attr&&t.attr({alpha:1,hideAt:null});return this.trigger("Revealing",this)},remove:function(){var t;return null!=(t=this.hideMarker)?t.destroy():void 0}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Scalable",{_scale:1,_Scalable_property_definitions:{scale:{set:function(t){return this._updateScale(t)},get:function(){return this._scale},configurable:!0,enumerable:!0},_scale:{enumerable:!1}},init:function(){return this._defineScalableProperties(),this._scale=1},remove:function(){},_defineScalableProperties:function(){var t,e,n,i;n=this._Scalable_property_definitions,i=[];for(e in n)t=n[e],i.push(Object.defineProperty(this,e,t));return i},_updateScale:function(t){var e,n,i,r,o,s,a,u,h,c,l,f,p,d,y,v,g;for(u=this._scale,this._scale=t,h=this.w,a=this.h,this.w=this.w/u*t,this.h=this.h/u*t,i=0,o=(f=this._children).length;i<o;i++)y=(e=f[i]).x-this.x,v=e.y-this.y,"function"==typeof e.attr&&e.attr({x:this.x+y/u*t,y:this.y+v/u*t,w:(e.w+h-this.w)/u*t,h:(e.h+a-this.h)/u*t});if(null!=(null!=(p=this.map)?p.points:void 0)){for(g=[],n=r=0,s=(d=this.map.points).length;r<s;n=++r)l=d[n],c=n%2==0?this.x:this.y,g.push(this.map.points[n]=c+(l-c)/u*t);return g}}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.c("WaterSplashes",{init:function(){return this.bind("GameLoop",this._waterSplashes),this.cooldown=0,null==this.defaultWaterCooldown&&(this.defaultWaterCooldown=70),null==this.waterRadius&&(this.waterRadius=5),null==this.minSplashDuration&&(this.minSplashDuration=210),this.detectionOffset=0,this.minOffset=-10,null==this.waterAlpha&&(this.waterAlpha=.6),this.splashUpwards=!1},remove:function(){return this.unbind("GameLoop",this._waterSplashes)},setDetectionOffset:function(t,e){return this.detectionOffset=t,this.minOffset=null!=e?e:-10,this},_waterSplashes:function(n){var i,r,o,s,a,u,h,c,l,f,p,d,y;if(null==e.explosionMode){if(this.cooldown-=n.dt,p=t.s("SeaLevel").getSeaLevel(this.scale),this.y+this.h+this.detectionOffset>p&&this.y<p&&this.cooldown<=0)for(d=null!=(h=this.waterSplashSpeed)?h:this.defaultSpeed,this.cooldown=this.defaultWaterCooldown,y=1,this._lastWaterY!==this.y&&this.splashUpwards&&(y=(d-20)/30),y*=null!=(c=this.scale)?c:1,i=45,u=0,r=o=0,l=this.w/i;0<=l?o<l:o>l;r=0<=l?++o:--o)for(s=0,f=Math.min(y,3);0<=f?s<f:s>f;0<=f?++s:--s)u+=1,a=Math.random(),t.e("Blast, ViewportRelativeMotion").colorOverride("#FFFFFF").viewportRelativeMotion({speed:1}).explode({upwards:u%2==0?y:0,x:this.x+r*i+a*i,y:p+this.minOffset,z:this.z+3,duration:this.minSplashDuration+100*Math.random(),radius:this.waterRadius,topDesaturation:this.topDesaturation,bottomDesaturation:this.bottomDesaturation,alpha:this.waterAlpha,gravity:.2},function(t,e){var n;return n=e.dt/1e3,this.attr({gravity:this.gravity+15*n,alpha:Math.max(.1,this.alpha-Math.random()*(1.5*n))}),{y:Math.min(t.y-Math.random()*this.upwards*50*n+this.gravity,p-10),x:t.x+(-.5+a)*Math.random()*200*n,w:t.w+15*n,h:t.h+15*n}});return this._lastWaterY=this.y}}})}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(650),r=(n.n(i),n(651)),o=(n.n(r),n(652)),s=(n.n(o),n(653)),a=(n.n(s),n(654)),u=(n.n(a),n(655)),h=(n.n(u),n(656));n.n(h)},function(t,e,n){(function(t,e){t.c("Bullet",{init:function(){return this.requires("2D, WebGL, sphere1, Collision, ColorEffects"),this.crop(6,21,18,7),this.collision([0,0,18,0,18,7,0,7])},updateCollision:function(t,e){return this.collision([0,0,t,0,t,e,0,e]),this},fire:function(n){var i,r,o,s,a,u,h;for(r={},i={_red:255,_green:255,_blue:255},t.assignColor(n.ship.playerColor,r),s=0,a=(h=["_red","_green","_blue"]).length;s<a;s++)u=(r[o=h[s]]+i[o]+i[o])/3,r[o]=u;return this.colorOverride(r),this.attr({damage:n.damage,speed:n.speed,rotation:n.direction,ship:n.ship}).bind("GameLoop",function(t){return function(e){var i;if(i=e.dt*(t.speed/1e3),t.x+=Math.cos(n.direction/180*Math.PI)*i,t.y+=Math.sin(n.direction/180*Math.PI)*i,t.x>t._maxXforViewPort()&&t.destroy(),t._minXforViewPort()>t.x&&t.destroy(),t._minYforViewPort()>t.y&&t.destroy(),t.y>t._maxYforViewPort())return t.destroy()}}(this)).onHit("Solid",function(){if(!e.paused)return this.destroy()}),this},_maxXforViewPort:function(){return 10+(-t.viewport._x+t.viewport._width/t.viewport._scale)},_minXforViewPort:function(){return-t.viewport._x-10},_maxYforViewPort:function(){return 10+(-t.viewport._y+t.viewport._height/t.viewport._scale)},_minYforViewPort:function(){return-t.viewport._y-10}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t,e){var n=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t.c("Cheats",{init:function(){return this.addCheat("Freddie",["Up","Up","Down","Down","Left","Right","Left","Right","Fire"],function(e){return function(){var n,i;if(n=!1,i=e.ship,t("Freddy").each(function(){if(this.ship===i)return n=!0}),!n)return t.e("Freddy").freddy({protect:e.ship})}}(this)),this._listenInput()},remove:function(){var t,e,n,i,r;for(r=[],n=0,i=(e=["Up","Down","Left","Right","Fire"]).length;n<i;n++)t=e[n],r.push(this.unbind(t));return r},addCheat:function(t,e,n){return null==this.cheats&&(this.cheats=[]),this.cheats.push({name:t,sequence:e,method:n,index:0})},_listenInput:function(){var t,e,n,i,r;for(r=[],n=0,i=(e=["Up","Down","Left","Right","Fire"]).length;n<i;n++)t=e[n],r.push(function(t){return function(e){return t.bind(e,function(){var n,i,r,o,s;for(s=[],i=0,r=(o=t.cheats).length;i<r;i++)(n=o[i]).sequence[n.index]===e?(n.index+=1,n.index===n.sequence.length?s.push(n.method()):s.push(void 0)):s.push(n.index=0);return s})}}(this)(t));return r}}),t.c("Freddy",{init:function(){return this.requires("2D, WebGL, freddie, Scalable, ColorEffects, Collision")},remove:function(){return this.unbind("GameLoop",this._move)},freddy:function(i){var r,o;return this.ship=i.protect,this.ship.scoreText("Help me Freddie!"),"function"==typeof this.colorOverride&&this.colorOverride(this.ship.playerColor,"partial"),this.attr({scale:.5,z:this.ship.z+5}),r=Math.floor(this.w/2),o=Math.floor(this.h/2),15,15,this.collision([-15,-15,r,-30,this.w+15,-15,this.w+30,o,this.w+15,this.h+15,r,this.h+30,-15,this.h+15,-30,o]),this.ship.addComponent("Invincible").invincibleDuration(-1),this.attr({x:-100,y:.5*t.viewport.height}),this.circlePos=180,this.eaten=0,this.hFlash=0,this.shooting=0,this.ship.bind("Remove",function(t){return function(){return t.destroy()}}(this)),this.bind("GameLoop",this._move),this.onHit("Hostile",function(t){return function(i){var r,o,s,a,u,h,c,l,f;if(!e.paused){for(a=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)r=i[t],n.push(r.obj[0]);return n}(),null==t.previousCols&&(t.previousCols=[]),c=function(){var t,e,i;for(i=[],t=0,e=a.length;t<e;t++)s=a[t],n.call(this.previousCols,s)<0&&i.push(s);return i}.call(t),t.previousCols=a,f=[],u=0,h=i.length;u<h;u++)l=(r=i[u]).obj[0],n.call(c,l)>=0&&((o=r.obj).hidden||o.invincible||(t.attr({hitFlash:{_red:255,_green:255,_blue:0}}),t.hFlash=5,null!=o.absorbDamage&&o.absorbDamage(500),o.has("Projectile")&&o.destroy(),t.eaten+=1,f.push(t.scale=Math.min(.5+.01*t.eaten,1))));return f}}}(this),function(t){return function(){return t.previousCols=[]}}(this))},_move:function(e){var n,i,r,o,s,a,u,h,c;if(i=8e3,u=this.ship._targetSpeed.x+300,80,55,i-=Math.min(800*t("Enemy").length,i-1e3),a=360/i*e.dt,this.circlePos=(this.circlePos+a+360)%360,s=.0174532925*this.circlePos,h=this.ship.x+10+Math.floor(this.ship.w/2)-Math.floor(this.w/2)+80*Math.cos(s),c=this.ship.y+Math.floor(this.ship.h/2)-Math.floor(this.h/2)+55*Math.sin(s),r=u*(e.dt/1e3),this.hFlash>0&&(this.hFlash-=1,0===this.hFlash&&this.attr({hitFlash:!1})),this.eaten>50&&t("Enemy").length>0){if(this.shooting+=1,this.shooting%5==0)for(n=o=0;o<360;n=o+=30)t.e("Bullet").attr({w:8,h:8,x:this.x+Math.floor(this.w/2),y:this.y+Math.floor(this.h/2),z:1,rotation:n}).fire({origin:this,speed:this.ship._currentSpeed.x+400,damage:400,direction:n});this.shooting>200&&(this.eaten=0,this.scale=.5,this.shooting=0)}return this.x>h?this.x-=Math.min(r,this.x-h):this.x+=Math.min(r,h-this.x),this.y>c?this.y-=Math.min(r,this.y-c):this.y+=Math.min(r,c-this.y)}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){t.c("OldWeaponLaser",{init:function(){return this.requires("2D,WebGL,Color"),this.color("#808080"),this.attr({w:30,h:5})},remove:function(){},install:function(t){return this.ship=t,this.xp=0,this.level=this.determineLevel(this.xp),this.attr({x:this.ship.x+10,y:this.ship.y+15,z:this.ship.z+1,alpha:0}),this.ship.attach(this)},uninstall:function(){return this.attr({alpha:0})},addXP:function(t){var e;if(this.xp+=t,e=this.level,this.level=this.determineLevel(this.xp),e!==this.level)return this.trigger("levelUp",this.level)},determineLevel:function(t){var e,n,i,r,o,s;for(o=0,i=0,e=0,n=(r=[1e3,3e3,12e3,96e3]).length;e<n;e++)t>=(o+=r[e])&&(i+=1);return(t-(null!=(s=r[i-1])?s:0))/r[i],i},shoot:function(e){var n;if(e)return n=function(){switch(this.level){case 0:return{w:4,speed:270,h:4};case 1:case 2:case 3:return{w:8,speed:320,h:6};case 4:return{w:10,speed:320,h:6}}}.call(this),t.e("Bullet").attr({x:this.x+this.w,y:this.y+this.h/2-n.h/2,w:n.w,h:n.h}).fire({origin:this,damage:100,speed:this.ship._currentSpeed.x+n.speed,direction:0}).bind("HitTarget",function(t){return function(e){return t.addXP(1),t.ship.trigger("BulletHit",e)}}(this)).bind("DestroyTarget",function(t){return function(e){return t.addXP(5),t.ship.trigger("BulletDestroyedTarget",e)}}(this))},_determineWeaponSettings:function(){}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("RapidDiagonalLaser",{init:function(){return this.requires("2D,WebGL,Color"),this.color("#d08080"),this.attr({w:30,h:5}),this.xp=0,this.lastShot=0,this.shotsFired=0,this.burstCount=Infinity,this.frontFire=!0},remove:function(){return this.unbind("GameLoop",this._autoFire)},install:function(t){return this.ship=t,this.level=this.determineLevel(this.xp),this.attr({x:this.ship.x+20,y:this.ship.y+30,z:this.ship.z+1,alpha:0}),this.ship.attach(this),this.shooting=!1,this._determineCooldown(),this.bind("GameLoop",this._autoFire)},uninstall:function(){return this.attr({alpha:0}),this.unbind("GameLoop",this._autoFire)},addXP:function(t){var e;if(this.xp+=t,e=this.level,this.level=this.determineLevel(this.xp),e!==this.level)return this._determineCooldown(),this.trigger("levelUp",this.level)},_determineCooldown:function(){return this.cooldown=function(){switch(this.level){case 0:return 200;case 1:return 150;case 2:case 3:return 75}}.call(this)},determineLevel:function(t){var e,n,i,r,o,s;for(o=0,i=0,e=0,n=(r=[1500,6e3,24e3,96e3]).length;e<n;e++)t>=(o+=r[e])&&(i+=1);return(t-(null!=(s=r[i-1])?s:0))/r[i],i},shoot:function(t){return t?this.shooting=!0:(this.shooting=!1,this.shotsFired=0,this.lastShot=500)},_autoFire:function(e){var n,i,r,o;if(this.lastShot+=e.dt,this.shooting&&(n=this.shotsFired<this.burstCount,this.ship.weaponsEnabled&&n))return this.lastShot>this.cooldown?(i=function(){switch(this.level){case 0:return 5;case 1:return 7;case 2:case 3:return 12}}.call(this),o=this.shotsFired%2==0?1:-1,r=1.5*Math.random(),this._createAngleBullet(0+r*o),r=1.5*Math.random(),this._createAngleBullet(i+r*o),r=1.5*Math.random(),this._createAngleBullet(r*o-i),t.audio.play("shoot",1,.1),this.frontFire=!this.frontFire,this.lastShot=0,this.shotsFired+=1):void 0},_createAngleBullet:function(e){var n;return n=function(){switch(this.level){case 0:return{w:5,speed:550,h:5};case 1:return{w:6,speed:555,h:5};case 2:return{w:8,speed:560,h:5};case 3:return{w:10,speed:565,h:5}}}.call(this),t.e("Bullet").attr({x:this.x+this.w,y:this.y+this.h/2-n.h/2+1,w:n.w,h:n.h,rotation:e}).fire({origin:this,damage:100,speed:this.ship._currentSpeed.x+n.speed,direction:e}).bind("HitTarget",function(t){return function(e){return t.addXP(1),t.ship.trigger("BulletHit",e)}}(this)).bind("DestroyTarget",function(t){return function(e){return t.addXP(5),t.ship.trigger("BulletDestroyedTarget",e)}}(this))}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("RapidWeaponLaser",{init:function(){return this.requires("2D,WebGL,muzzleFlash,ColorEffects"),this.attr({w:40,h:24}),this.stats={rapid:0,damage:0,aim:0,speed:0},this.boosts={},this.boostTimings={},this.lastShot=0,this.shotsFired=0,this.burstCount=Infinity,this.frontFire=!0},remove:function(){return this.unbind("GameLoop",this._autoFire)},install:function(e){var n,i,r,o,s,a,u;for(this.ship=e,i={},n={_red:255,_green:255,_blue:255},t.assignColor(this.ship.playerColor,i),o=0,s=(u=["_red","_green","_blue"]).length;o<s;o++)a=(i[r=u[o]]+n[r]+n[r])/3,i[r]=a;return this.colorOverride(i),this.attr({x:this.ship.x+38,y:this.ship.y+22,z:this.ship.z+1,alpha:0}),this.ship.attach(this),this.shooting=!1,this._determineWeaponSettings(),this.bind("GameLoop",this._autoFire)},uninstall:function(){return this.attr({alpha:0}),this.unbind("GameLoop",this._autoFire)},upgrade:function(t){return this.stats[t]+=1,this._determineWeaponSettings(),this.trigger("levelUp",{aspect:t,level:this.stats[t]})},boost:function(t){return this.boosts[t]=10,this.boostTimings[t]=15e3,this._determineWeaponSettings(),this.trigger("boost",{aspect:t})},_determineWeaponSettings:function(){var t,e,n;return this.cooldown=135-7*(this.boosts.rapidb||this.stats.rapid),this.damage=100+50*(this.boosts.damageb||this.stats.damage),this.aimAngle=0+6*(this.boosts.aimb||this.stats.aim),this.aimDistance=Math.min(40+50*(this.boosts.aimb||this.stats.aim),500),this.speed=750+70*(this.boosts.speedb||this.stats.speed),e=function(){var e,i;e=this.stats,i=[];for(t in e)n=e[t],"damage"!==t&&i.push(n);return i}.call(this),this.overallLevel=Math.min.apply(Math,e)},shoot:function(t){return t?(this.shooting=!0,this.attr({alpha:0})):(this.shooting=!1,this._clearPicked(),this.shotsFired=0,this.lastShot=500)},_autoFire:function(e){var n,i,r,o;this.lastShot+=e.dt,r=this.boostTimings;for(i in r)o=r[i],this.boostTimings[i]-=e.dt,o<0&&(delete this.boostTimings[i],delete this.boosts[i],this._determineWeaponSettings(),this.trigger("boostExpired",{aspect:i}));if(this.lastShot>=30&&this.attr({alpha:0}),this.shooting&&(n=this.shotsFired<this.burstCount,this.ship.weaponsEnabled&&n))return this.lastShot>this.cooldown?(this.frontFire?(this._createFrontBullet(),this.attr({alpha:1})):this._createBackBullet(),t.audio.play("shoot",1,.05),this.frontFire=!this.frontFire,this.lastShot=0,this.shotsFired+=1):void 0},_createFrontBullet:function(){var e,n;return e={w:Math.floor(this.speed/25),speed:this.speed,h:10+this.overallLevel,o:this.overallLevel},n={x:this.x+this.w,y:this.y+this.h/2-e.h/2+10+e.o},t.e("Bullet").attr({w:e.w,h:e.h,x:n.x,y:n.y,z:1}).updateCollision(e.w,e.h).fire({ship:this.ship,damage:this.damage,speed:this.ship._currentSpeed.x+e.speed,direction:this._bulletDirection(n)})},_createBackBullet:function(){var e,n;return e={w:Math.floor(this.speed/35),speed:this.speed,h:9+this.overallLevel,o:this.overallLevel},n={x:this.x+this.w,y:this.y+this.h/2-e.h/2-10-e.o},t.e("Bullet").attr({w:e.w,h:e.h,x:n.x,y:n.y,z:-1}).updateCollision(e.w,e.h).fire({ship:this.ship,damage:this.damage,speed:this.ship._currentSpeed.x+e.speed,direction:this._bulletDirection(n)})},_bulletDirection:function(t){var e,n,i,r,o,s,a;return(s=this._targetEnemy(t))?(r=Math.sqrt(Math.pow(Math.abs(t.x-s.x),2)+Math.pow(Math.abs(t.y-s.y),2)),a=r/(this.speed+this.ship._currentSpeed.x),o={x:s.x+Math.floor(s.w/2)+s.vx*a,y:s.y+Math.floor(s.h/2)+s.vy*a},n=Math.atan2(o.y-t.y,o.x-t.x),n*=180/Math.PI,-this.aimAngle<n&&n<this.aimAngle?(null==this.currentShot&&(this.currentShot=0),i=Math.abs(this.currentShot-n),e=2,i>10&&(e=4),i>15&&(e=8),i>40&&(e=25),i>90&&(e=50),this.currentShot<n?this.currentShot+=e:this.currentShot-=e,this.currentShot):(this._clearPicked(),this.currentShot=0,0)):(this._clearPicked(),this.currentShot=0,0)},_targetEnemy:function(e){var n,i,r,o,s,a,u;if(this.pickedEntity)return this.pickedEntity;for(a=[],t("Enemy").each(function(){if(!this.hidden)return a.push({x:this.x,y:this.y+this.h/2,e:this})}),this.pickedEntity=null,u=Infinity,r=0,s=a.length;r<s;r++)o=a[r],n=Math.atan2(o.y-e.y,o.x-e.x),n*=180/Math.PI,i=Math.abs(e.x-o.x)+Math.abs(e.y-o.y),-this.aimAngle<n&&n<this.aimAngle&&i<u&&(u=i,this.pickedEntity=o.e);return this.pickedEntity&&(this.pickedEntity.one("Remove",function(t){return function(){return t._clearPicked()}}(this)),this.pickedEntity.one("Hiding",function(t){return function(){return t._clearPicked()}}(this))),this.pickedEntity},_clearPicked:function(){return this.pickedEntity&&(this.pickedEntity.unbind("Remove",this._clearPicked),this.pickedEntity.unbind("Hiding",this._clearPicked)),this.pickedEntity=null}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("Sphere",{init:function(){return this.requires("2D, WebGL, sphere1, SpriteAnimation"),this.crop(5,4,7,7),this.attr({w:7,h:7,speed:300}),this.reel("blink",150,[[7,3,1,1],[8,3,1,1]])},blink:function(){return this.animate("blink",-1),this},muzzle:function(){return this.sprite(8,3),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){t.c("WeaponLaser",{init:function(){return this.requires("2D,WebGL,Color"),this.color("#808080"),this.attr({w:30,h:5})},remove:function(){},install:function(t){return this.ship=t,this.xp=0,this.level=this.determineLevel(this.xp),this.attr({x:this.ship.x+10,y:this.ship.y+15,z:this.ship.z+1}),this.ship.attach(this)},addXP:function(t){var e;if(this.xp+=t,e=this.level,this.level=this.determineLevel(this.xp),e!==this.level)return this.trigger("levelUp",this.level)},determineLevel:function(t){var e,n,i,r,o,s;for(o=0,i=0,e=0,n=(r=[150,600,2400,9600]).length;e<n;e++)t>=(o+=r[e])&&(i+=1);return(t-(null!=(s=r[i-1])?s:0))/r[i],i},shoot:function(e){var n;if(e)return n=function(){switch(this.level){case 0:return{w:6,speed:350,h:3};case 1:return{w:10,speed:355,h:4};case 2:return{w:14,speed:360,h:5};case 3:return{w:18,speed:365,h:5}}}.call(this),t.e("Bullet").attr({x:this.x+this.w,y:this.y+this.h/2-n.h/2,w:n.w,h:n.h}).fire({origin:this,damage:100,speed:this.ship._currentSpeed.x+n.speed,direction:0}).bind("HitTarget",function(t){return function(){return t.addXP(1),t.ship.trigger("BulletHit")}}(this)).bind("DestroyTarget",function(t){return function(){return t.addXP(5),t.ship.trigger("BulletDestroyedTarget")}}(this))}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};t.c("BigText",{init(){this.requires("2D, Text, Tween, Delay, UILayerDOM")},bigText(n,i={}){const r={fadeIn:{enter:t=>new Promise(e=>{t[0].one("TweenEnd",e),t.forEach(t=>t.tween({alpha:1},3e3))}),wait:t=>new Promise(e=>t[0].delay(e,3e3,0)),leave:t=>new Promise(e=>{t[0].one("TweenEnd",e),t.forEach(t=>t.tween({viewportY:t.viewportY+100,alpha:0},1500))})},blink:{enter:t=>(t.forEach(t=>t.attr({alpha:1})),Promise.resolve()),wait:t=>new Promise(e=>t[0].delay(()=>t.forEach(t=>t.attr({alpha:(t.alpha+1)%2})),i.blink_speed,2*(i.blink_amount-1)+1,e)),leave:t=>(t.forEach(t=>t.attr({alpha:0})),Promise.resolve())}},o=[this];if(null!=(i=e({color:"#EEEEEE",mode:"fadeIn",super:null,blink_amount:3,blink_speed:1e3},i)).super){const e=t.e("2D, Text, Tween, UILayerDOM").attr({w:t.viewport.width,z:1,alpha:0}).textAlign("center").text(i.super).attr({x:this.x,y:200,z:-1}).textColor(i.color).textFont({size:"16px",weight:"bold",family:"Press Start 2P"});o.push(e)}this.attr({w:t.viewport.width,z:1,alpha:0}).textAlign("center").text(n).attr({x:this.x,y:240,z:-1}).textColor(i.color).textFont({size:"30px",weight:"bold",family:"Press Start 2P"});const s=r[i.mode];return s.enter(o).then(()=>s.wait(o).then(()=>s.leave(o).then(()=>o.forEach(t=>t.destroy()))))}})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.c("DebugInfo",{init(){let n=0,i=0,r=0,o=0,s=0,a=0;this.requires("2D, Text, Tween, Delay, UILayerDOM"),this.attr({x:0,y:20,w:t.viewport.width-30,z:1}).textAlign("right").textColor("#FFFFFF").textFont({size:"6px",family:"Press Start 2P"}),this.bind("MeasureFrameTime",t=>{t>r&&(r=t),5<t&&s++,n=t}),this.bind("MeasureRenderTime",t=>{t>o&&(o=t),5<t&&a++,i=t}),this.bind("EnterFrame",u=>{var h=Math.round;this.text(`T: ${h(e.gameTime/1e3)}s `+`RT: ${i}ms `+`SRT: ${o}ms (${a}) `+`FT: ${n}ms `+`SFT: ${r}ms (${s}) `+`E: ${t("*").length} `+`FPS: ${h(1e3/u.dt)}`)})},capture(e){t.log(e,this.text())}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t,e){var i;i=n(9),t.c("Enemy",{init:function(){return this.requires("2D, WebGL, Collision, Tween, Choreography, ViewportFixed, Hideable, Flipable, Scalable, SunBlock, Hostile"),this.attr({pointsOnHit:10,pointsOnDestroy:50,damage:2}),this.invincible=!1},onProjectileHit:function(t){var n;if(!e.paused&&!this.hidden)return n=t[0].obj,this.invincible||(!1!==this.juice&&this.attr({hitFlash:{_red:255,_green:255,_blue:0}}),this.absorbDamage(n),this.trigger("Hit",{entity:this,projectile:n})),n.destroy()},onProjectileHitEnd:function(){return this.attr({hitFlash:!1})},onExplosionHit:function(t){var n,i,r,o;if(!e.paused&&!this.hidden&&!this.invincible){for(r=[],n=0,i=t.length;n<i;n++)(o=t[n].obj).damage>0?(this.trigger("Hit",{entity:this,projectile:o}),!1!==this.juice&&this.attr({hitFlash:{_red:255,_green:255,_blue:128}}),this.absorbDamage(o),r.push(o.damage=0)):r.push(void 0);return r}},enemy:function(e){return null==e&&(e={}),e=i(e,{projectile:"Bullet"}),t.trigger("EnemySpawned",this),this.onHit(e.projectile,function(t){return function(e){return t.onProjectileHit(e)}}(this),function(t){return function(){return t.onProjectileHitEnd()}}(this)),this.onHit("Explosion",function(t){return function(e){return t.onExplosionHit(e)}}(this),function(t){return function(){return t.onProjectileHitEnd()}}(this)),this},absorbDamage:function(e){var n,i,r,o,s;if(null!=e)return o=this.x+this.w/2,s=this.y+this.h/2,n={pointsOnHit:this.pointsOnHit,pointsOnDestroy:this.pointsOnDestroy,location:{x:o,y:s}},this.health-=e.damage,"function"==typeof this.updatedHealth&&this.updatedHealth(),this.health<=0?(t.trigger("EnemyDestroyed",this),this.trigger("Destroyed",this),this.destroy(),null!=(i=e.ship)&&i.trigger("DestroyTarget",n),this.deathCause=e.ship):null!=(r=e.ship)?r.trigger("HitTarget",n):void 0}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){t.c("Invincible",{init(){this.requires("Delay"),this.blinkOn=!0},_blink(){this.blinkOn=!this.blinkOn,this.alpha=this.blinkOn?.5:1},remove(){this.cancelDelay(this._blink),this.alpha=1},invincibleDuration(t){return this.delay(this._blink,250,-1),-1!==t&&this.delay(()=>this.removeComponent("Invincible"),t,0),this}})}).call(e,n(1).default)},function(t,e,n){(function(t){var e,i;e=n(662).Noise,i=new e(Math.random()),t.c("ScrollWall",{init:function(){return this.requires("2D, Edge, Collision, Acceleration"),this.trauma=0,this.time=0,this.attr({x:0,y:0,w:2,h:t.viewport.height,speed:{x:0,y:0},viewHeight:0}),this.wallEnd=t.e("2D, ScrollFront, Edge").attr({x:-(t.viewport.x-t.viewport.width)-3,y:0,h:t.viewport.height,w:12}),this.attach(this.wallEnd),this.wallTop=t.e("2D, Edge, Collision").attr({x:0,y:40,h:2,w:t.viewport.width}),this.attach(this.wallTop),this.wallBottom=t.e("2D, Edge, Collision").attr({x:0,y:t.viewport.height-2,h:2,w:t.viewport.width}),this.attach(this.wallBottom),this.bind("GameLoop",function(e){var n,r,o,s,a,u,h,c,l,f,p;return u=this._currentSpeed.x,h=this._currentSpeed.y,this.updateAcceleration(),a=Math.pow(this.trauma,2),this.trauma=Math.max(0,this.trauma-.001*e.dt),c=0,f=0,a>0&&(n=40,r=30,this.time+=e.dt,l=i.perlin2(.1,this.time/(360*(3-this.trauma))),p=i.perlin2(this.time/(360*(3-this.trauma)),.3),c=0+Math.round(n*a*l),f=0+Math.round(r*a*p)),t.viewport.x=c,t.viewport.y=f,o=u/1e3*e.dt,s=h/1e3*e.dt,this.viewHeight+=s,t.trigger("CameraMove",{dx:o,dy:s})})},addTrauma:function(t){return this.trauma=Math.min(1,this.trauma+t)},scrollWall:function(t,e){return null==e&&(e={}),this.targetSpeed(t,e)},setAllowPushing:function(t){this.allowPushing=t},off:function(){return this.wallEnd.removeComponent("Edge"),this.unbind("GameLoop")},remove:function(){return this.unbind("GameLoop")}})}).call(e,n(1).default)},function(t,e,n){(function(t){function e(t){function e(t,e,n){this.x=t,this.y=e,this.z=n}e.prototype.dot2=function(t,e){return this.x*t+this.y*e},e.prototype.dot3=function(t,e,n){return this.x*t+this.y*e+this.z*n},this.grad3=[new e(1,1,0),new e(-1,1,0),new e(1,-1,0),new e(-1,-1,0),new e(1,0,1),new e(-1,0,1),new e(1,0,-1),new e(-1,0,-1),new e(0,1,1),new e(0,-1,1),new e(0,1,-1),new e(0,-1,-1)],this.p=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.perm=new Array(512),this.gradP=new Array(512),this.seed(t||0)}function n(t){return t*t*t*(t*(6*t-15)+10)}function i(t,e,n){return(1-n)*t+n*e}e.prototype.seed=function(t){t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(var e=this.p,n=0;n<256;n++){var i;i=1&n?e[n]^255&t:e[n]^t>>8&255;var r=this.perm,o=this.gradP;r[n]=r[n+256]=i,o[n]=o[n+256]=this.grad3[i%12]}};var r=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6;e.prototype.simplex2=function(t,e){var n,i,s,a,u,h=(t+e)*r,c=Math.floor(t+h),l=Math.floor(e+h),f=(c+l)*o,p=t-c+f,d=e-l+f;p>d?(a=1,u=0):(a=0,u=1);var y=p-a+o,v=d-u+o,g=p-1+2*o,_=d-1+2*o;c&=255,l&=255;var m=this.perm,x=this.gradP,w=x[c+m[l]],b=x[c+a+m[l+u]],S=x[c+1+m[l+1]],C=.5-p*p-d*d;n=C<0?0:(C*=C)*C*w.dot2(p,d);var k=.5-y*y-v*v;i=k<0?0:(k*=k)*k*b.dot2(y,v);var P=.5-g*g-_*_;return s=P<0?0:(P*=P)*P*S.dot2(g,_),70*(n+i+s)},e.prototype.simplex3=function(t,e,n){var i,r,o,s,a,u,h,c,l,f,p=(t+e+n)*(1/3),d=Math.floor(t+p),y=Math.floor(e+p),v=Math.floor(n+p),g=(d+y+v)*(1/6),_=t-d+g,m=e-y+g,x=n-v+g;_>=m?m>=x?(a=1,u=0,h=0,c=1,l=1,f=0):_>=x?(a=1,u=0,h=0,c=1,l=0,f=1):(a=0,u=0,h=1,c=1,l=0,f=1):m<x?(a=0,u=0,h=1,c=0,l=1,f=1):_<x?(a=0,u=1,h=0,c=0,l=1,f=1):(a=0,u=1,h=0,c=1,l=1,f=0);var w=_-a+1/6,b=m-u+1/6,S=x-h+1/6,C=_-c+1/6*2,k=m-l+1/6*2,P=x-f+1/6*2,M=_-1+.5,D=m-1+.5,T=x-1+.5;d&=255,y&=255,v&=255;var E=this.perm,O=this.gradP,A=O[d+E[y+E[v]]],j=O[d+a+E[y+u+E[v+h]]],F=O[d+c+E[y+l+E[v+f]]],B=O[d+1+E[y+1+E[v+1]]],L=.5-_*_-m*m-x*x;i=L<0?0:(L*=L)*L*A.dot3(_,m,x);var z=.5-w*w-b*b-S*S;r=z<0?0:(z*=z)*z*j.dot3(w,b,S);var R=.5-C*C-k*k-P*P;o=R<0?0:(R*=R)*R*F.dot3(C,k,P);var I=.5-M*M-D*D-T*T;return s=I<0?0:(I*=I)*I*B.dot3(M,D,T),32*(i+r+o+s)},e.prototype.perlin2=function(t,e){var r=Math.floor(t),o=Math.floor(e);t-=r,e-=o,r&=255,o&=255;var s=this.perm,a=this.gradP,u=a[r+s[o]].dot2(t,e),h=a[r+s[o+1]].dot2(t,e-1),c=a[r+1+s[o]].dot2(t-1,e),l=a[r+1+s[o+1]].dot2(t-1,e-1),f=n(t);return i(i(u,c,f),i(h,l,f),n(e))},e.prototype.perlin3=function(t,e,r){var o=Math.floor(t),s=Math.floor(e),a=Math.floor(r);t-=o,e-=s,r-=a,o&=255,s&=255,a&=255;var u=this.perm,h=this.gradP,c=h[o+u[s+u[a]]].dot3(t,e,r),l=h[o+u[s+u[a+1]]].dot3(t,e,r-1),f=h[o+u[s+1+u[a]]].dot3(t,e-1,r),p=h[o+u[s+1+u[a+1]]].dot3(t,e-1,r-1),d=h[o+1+u[s+u[a]]].dot3(t-1,e,r),y=h[o+1+u[s+u[a+1]]].dot3(t-1,e,r-1),v=h[o+1+u[s+1+u[a]]].dot3(t-1,e-1,r),g=h[o+1+u[s+1+u[a+1]]].dot3(t-1,e-1,r-1),_=n(t),m=n(e),x=n(r);return i(i(i(c,d,_),i(l,y,_),x),i(i(f,v,_),i(p,g,_),x),m)},t.Noise=e})(t.exports)},function(t,e,n){(function(t,e){t.c("ShipSpawnable",{init:function(){return this.requires("Listener"),this.bind("Activated",this.spawnShip)},remove:function(){return this.unbind("Activated",this.spawnShip)},spawnPosition:function(t){return this.spawnPosition=t,null==this.spawnPosition&&(this.spawnPosition=function(){return{x:x,y:y}}),this},spawnShip:function(n){var i,r,o;if(null==n&&(n={}),this.has("ControlScheme")&&this.lives>0)return(o=this.spawnPosition()).x<10&&(o.x=10),null!=this.ship&&(o={x:this.ship.x,y:this.ship.y},this.ship.destroy(),this.ship=null),this.ship=t.e(this.level.getShipType()).attr({x:o.x,y:o.y,z:this.z,playerNumber:this.playerNumber}),this.ship.playerColor=this.color(),"function"==typeof(i=this.ship).colorOverride&&i.colorOverride(this.color(),"partial"),this.has("Color")&&"function"==typeof(r=this.ship).color&&r.color(this.color()),this._updateShipSprite(),this.has("ControlScheme")&&this.assignControls(this.ship),this.listenTo(this.ship,"HitTarget",function(t){var e,n;if(this.stats.shotsHit+=1,e=null!=(n=t.pointsOnHit)?n:0,null!=t)return this.addPoints(e,t.location)}),this.listenTo(this.ship,"DestroyTarget",function(t){var e,n,i;if(this.stats.enemiesKilled+=1,e=(null!=(n=t.pointsOnDestroy)?n:0)+(null!=(i=t.pointsOnHit)?i:0),null!=t)return this.addPoints(e,t.location)}),this.listenTo(this.ship,"BonusPoints",function(t){return this.addPoints(t.points,t.location)}),this.listenTo(this.ship,"PowerUp",function(t){var e;return"ship"!==(e=t.type)&&"shipBoost"!==e&&"shipUpgrade"!==e||("life"===t.contains&&this.gainLife(),"healthu"===t.contains&&this.healthUpgrade(),"healthb"===t.contains&&this.healthBoost(),"points"===t.contains&&this.addPoints(500)),this.addPoints(20),this._updateShipSprite()}),this.listenTo(this.ship,"Shoot",function(){return this.stats.shotsFired+=1}),this.trigger("ShipSpawned",this.ship),t.trigger("ShipSpawned",this.ship),this.ship.stats(n),this.ship.start(),this.listenTo(this.ship,"Hit",function(t){if(this.loseHealth(t.damage),this._updateShipSprite(),this.health<0)return this.ship.trigger("Die")}),this.listenTo(this.ship,"Destroyed",function(){return this.ship.destroy(),n=this.ship.stats(),this.ship=null,e.setGameSpeed(.3),t.e("Delay, TimeManager").delay(function(){return e.setGameSpeed(.1)},500,0).delay(function(){return e.setGameSpeed(.4)},1200,0).delay(function(){return e.setGameSpeed(.7)},1600,0).delay(function(t){return function(){return t.loseLife(),e.setGameSpeed(1),t.spawnShip(n)}}(this),2e3,0,function(){return this.destroy()})}),this},_updateShipSprite:function(){var t;if(this.ship.has("Sprite"))return t=0,this.health/this.maxHealth<.3&&(t=2),this.ship.sprite(0,t)}})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t,e){t.c("TextInput",{init:function(){return this.requires("2D, DOM, Text")},remove:function(){},textInput:function(n,i){var r,o;return this.defer=e.defer(),o="A  ",r=0,this.text(o),n.bind("Up",function(t){return function(){return o=t._updateText(o,r,1),t.text(o)}}(this)),n.bind("Down",function(t){return function(){return o=t._updateText(o,r,-1),t.text(o)}}(this)),n.bind("Left",function(t){return function(){return r=Math.max(r-1,0),t._updateCursor(r)}}(this)),n.bind("Right",function(t){return function(){return r=Math.min(r+1,i-1),t._updateCursor(r)}}(this)),n.bind("Fire",function(t){return function(){var e;if(e=r,r=Math.min(r+1,i-1),t._updateCursor(r),r===e&&r===i-1)return n.unbind("Up"),n.unbind("Down"),n.unbind("Left"),n.unbind("Right"),n.unbind("Fire"),t.defer.resolve(o)}}(this)),this.cursor=t.e("2D, DOM, Text").attr({x:this.x,y:this.y,w:this.w}).text("_  ").textColor("#0000FF").textAlign("left").textFont({size:"20px",weight:"bold",family:"Press Start 2P"}),this.attach(this.cursor),this.defer.promise},_updateCursor:function(t){var e;return e=Array(t+1).join("&nbsp;")+"_",this.cursor.text(e)},_updateText:function(t,e,n){var i,r,o,s;return i="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890-_.=!$& ",r=t[e],o=i.indexOf(r)+i.length,s=i[(o+n)%i.length],t.slice(0,e)+s+t.slice(e+1)}})}).call(e,n(1).default,n(18).default)},function(t,e,n){(function(t,e){t.c("Horizon",{init(){this.requires("ColorEffects"),this.colorDesaturation(e.backgroundColor)}})}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(667);n.n(i)},function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};e.PauseMenu=function(){function i(){this._handleFire=n(this._handleFire,this),this._handleDown=n(this._handleDown,this),this._handleUp=n(this._handleUp,this),t.bind("GamePause",function(t){return function(e){return e?(t.createMenu(),t.showPlayers()):t.remove()}}(this))}return i.prototype.createMenu=function(){return this._buildMenu([{text:"Resume",execute:function(){return e.togglePause()}},{text:function(){return t.audio.muted?"Sound [off]":"Sound [on]"},execute:function(){return t.audio.toggleMute(),e.changeSettings({sound:!t.audio.muted})}},{text:"Restart",execute:function(){return e.togglePause(),e.resetCredits(),t("Player").each(function(){return this.softReset()}),t.enterScene("Game")}},{text:"Quit",execute:function(){return e.togglePause(),t("Player").each(function(){return this.reset()}),t.enterScene("Intro")}}])},i.prototype._buildMenu=function(e){var n,i,r,o,s,a,u,h,c,l;for(this.options=e,o=t.e("2D, DOM, Color, PauseMenu").attr({x:.35*t.viewport.width,y:.3*t.viewport.height,w:.3*t.viewport.width,h:32*(this.options.length+2),z:100,alpha:.5}).color("#000000"),l=t.e("2D, DOM, Text").attr({x:o.x,y:o.y+20,w:o.w,z:110}).text("Game Paused").textColor("#D0D0D0").textAlign("center").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}),o.attach(l),n=i=0,r=(u=this.options).length;i<r;n=++i)a=u[n],s=t.e("2D, DOM, Text").attr({x:o.x+60,y:o.y+50+35*n,w:o.w-60,z:110}).text(null!=(h="function"==typeof a.text?a.text():void 0)?h:a.text).textColor("#D0D0D0").textAlign("left").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}),o.attach(s),a.entity=s;return this.selected=0,this.selectionChar=t.e("2D, DOM, Text").attr({x:o.x+20,w:40,z:110}).text(">").textColor("#0000FF").textAlign("left").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}),o.attach(this.selectionChar),this.updateSelection(),c=this,t("Player").each(function(){return this.bind("Up",c._handleUp),this.bind("Down",c._handleDown),this.bind("Fire",c._handleFire)})},i.prototype._handleUp=function(){return this.selected=(this.options.length+this.selected-1)%this.options.length,this.updateSelection()},i.prototype._handleDown=function(){return this.selected=(this.options.length+this.selected+1)%this.options.length,this.updateSelection()},i.prototype.updateSelection=function(){return this.selectionChar.attr({y:this.options[this.selected].entity.y})},i.prototype._handleFire=function(){return setTimeout(function(t){return function(){var e,n;return(n=t.options[t.selected]).execute(),n.entity.text(null!=(e="function"==typeof n.text?n.text():void 0)?e:n.text)}}(this))},i.prototype.showPlayers=function(){return t("Player").each(function(){var e,n,i,r,o,s,a,u,h,c,l,f;if(this.ship){for(f=.05,2===this.playerNumber&&(f=.7),"function"==typeof(e=t.e("2D, WebGL, playerShip, ColorEffects, PauseMenu").attr({w:71,h:45,x:(f+.07)*t.viewport.width,y:.3*t.viewport.height+20,z:101}).flip("X")).colorOverride&&e.colorOverride(this.color(),"partial"),c=["Score: "+this.points,"Lives: "+(this.lives-1),"","&nbsp;&nbsp; Speed: &nbsp;&nbsp;&nbsp;&nbsp;+"+this.ship.primaryWeapon.stats.speed,"&nbsp;&nbsp; RapidFire: +"+this.ship.primaryWeapon.stats.rapid,"&nbsp;&nbsp; AimAssist: +"+this.ship.primaryWeapon.stats.aim,"&nbsp;&nbsp; Damage: &nbsp;&nbsp;&nbsp;+"+this.ship.primaryWeapon.stats.damage],l=t.e("2D, WebGL, Color, PauseMenu").attr({x:f*t.viewport.width,y:.3*t.viewport.height,w:.25*t.viewport.width,h:20*(c.length+5),z:100,alpha:.3}).color("#000"),a=[],n=r=0,o=c.length;r<o;n=++r)s=c[n],h=t.e("2D, DOM, Text").attr({x:l.x+20,y:l.y+85+20*n,w:l.w-60,z:110}).text(s).textColor("#D0D0D0").textAlign("left").textFont({size:"8px",weight:"bold",family:"Press Start 2P"}),l.attach(h),2<n&&n<7?(u=["speedBoost","rapidFireBoost","aimBoost","damageBoost"],i=t.e("2D, WebGL, ColorEffects, PauseMenu").addComponent(u[n-3]).attr({x:l.x+20,y:l.y+82+20*n,w:12,h:12,z:110}).colorOverride("white","partial"),a.push(l.attach(i))):a.push(void 0);return a}})},i.prototype.remove=function(){var e;return e=this,t("Player").each(function(){return this.unbind("Up",e._handleUp),this.unbind("Down",e._handleDown),this.unbind("Fire",e._handleFire)}),t("PauseMenu").each(function(){return this.destroy()})},i}()}).call(e,n(1).default,n(7).default)},function(t,e,n){"use strict";var i=n(669),r=(n.n(i),n(680));n.n(r)},function(t,e,n){(function(t,e,i){var r,o,s,a,u,h=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;a=n(66),u=n(149).default,s=n(671),o=n(672).default,u.defineElement("cloud",function(){var e,n,i,r,o,s,a,u;if(s=Math.random(),e=4*Math.random(),s>.2&&(u=20*Math.random()+30,a=20*Math.random()+125,r=10*Math.random()+50,n=t.e("2D, WebGL, cloud, Hideable, Horizon").attr({z:-300,w:a,h:r,topDesaturation:.6,bottomDesaturation:.6,alpha:.8*Math.random()+.2,lightness:.4,blur:e}),Math.random()<.7&&(n=n.flip("X")),this.addBackground(300+300*Math.random(),u,n,.375)),s<.6)return o=.2*Math.random()+.15,u=230-150*o,a=10*Math.random()+70-20*o,r=5*Math.random()+20-10*o,i=t.e("2D, WebGL, cloud, Hideable, Horizon").attr({z:-570,w:a,h:r,topDesaturation:1-o,bottomDesaturation:1-o,alpha:.8*Math.random()+.2,lightness:.4,blur:e}),Math.random()<.2&&(i=i.flip("X")),this.addBackground(360+300*Math.random(),u,i,o)}),u.defineElement("waterHorizon",function(){var n,i;return i=t.e("2D, WebGL, waterHorizon, SunBlock, Horizon, ColorEffects").attr({z:-600,w:257}).colorDesaturation(e.backgroundColor).saturationGradient(1,.2),!1===e.webGLMode&&i.attr({lightness:.6}),this.addBackground(0,this.level.visibleHeight-225,i,.25),n=t.e("2D, WebGL, Gradient, GoldenStripe").topColor("#DDDD00").bottomColor("#DDDD00",!1!==e.webGLMode?0:1).attr({z:-599,w:.25*this.delta.x,h:1,alpha:0}),this.addBackground(0,this.level.visibleHeight-225,n,.25)}),u.defineElement("water",function(){var n;return n=t.e("2D, WebGL, waterMiddle, Horizon").crop(1,0,511,192).attr({z:-500,w:513}).colorDesaturation(e.backgroundColor).saturationGradient(.7,-.4),!1===e.webGLMode&&n.attr({lightness:.8}),this.addBackground(0,this.level.visibleHeight-150,n,.5),this.level.registerWaveTween("OceanWavesMiddle",5500,"easeInOutQuad",function(e,n){return 5,20,192,t("waterMiddle").each(function(){return n?(this.dy=5*e,this.h=192-20*e):(this.dy=5-5*e,this.h=172+20*e)})})}),u.defineElement("waterFront",function(){var e,n,i;return e=65,this.add(0,this.level.visibleHeight-45,t.e("2D, Solid").attr({w:this.delta.x,h:45})),n=t.e("2D, Delta2D, WebGL, waterFront1, Wave1").attr({z:-20}).crop(0,1,512,95),this.add(0,this.level.visibleHeight-e,n),i=t.e("2D, Delta2D, WebGL, waterFront2, Wave2"),n.attach(i),i.attr({z:-20,x:n.x+n.w,y:n.y}).crop(0,1,512,95),this.level.registerWaveTween("OceanWaves",6e3,"easeInOutQuad",function(n,i){var r,o,s;return r=50,o=40,8,s=513,e=125,t("Wave1").each(function(){var t,a,u;return a=s+n*r,u=8*n,t=e-n*o,i||(a=s+r-n*r,u=8-8*n,t=e-o+n*o),a-this.w,this.attr({dy:u,w:a,h:t})}),t("Wave2").each(function(){var t,a,u;return i?(a=s-n*r,t=e-n*o):(a=s-r+n*r,t=e-o+n*o),u=s-a,this.attr({dx:u,w:a,h:t})}),t("WaveFront").each(function(){var t,a,u;return s=1200,r=120,e=200,o=80,i?(a=s+n*r,u=8*n,t=e-n*o):(a=s+r-n*r,u=8-8*n,t=e-o+n*o),this.shift(0,u-this.waveY,a-this.w,t-this.h),this.waveY=u})})}),u.defineElement("cityHorizon",function(n){var i;return this.addElement("waterHorizon"),(i="start"===n?t.e("2D, WebGL, coastStart, SunBlock, Horizon"):t.e("2D, WebGL, coast, SunBlock, Horizon")).colorDesaturation(e.backgroundColor).saturationGradient(.9,.8).crop(1,0,255,32).attr({z:-598,w:256}),this.addBackground(0,this.level.visibleHeight-225-16,i,.25)}),u.defineElement("cityDistance",function(n){var i;return i=t.e("2D, WebGL, cityDistance, SunBlock, Horizon").colorDesaturation(e.backgroundColor).saturationGradient(.9,.6).crop(1,1,255,223).attr({z:-598,w:256}),this.addBackground(0,this.level.visibleHeight-225-16,i,.25)}),u.defineElement("city",function(){var n,i,r,o;return n=t.e("2D, WebGL, cityLayer2, Collision, SunBlock, Horizon, Flipable").attr({z:-505}).collision([4,29,72,29,72,118,4,118]).colorDesaturation(e.backgroundColor).saturationGradient(.6,.6),this.addBackground(0,this.level.visibleHeight-350,n,.375),(o=t.e("2D, WebGL, city, Collision, SunBlock, Horizon").colorDesaturation(e.backgroundColor).saturationGradient(.4,.4).crop(0,0,511,288).attr({z:-305,w:513})).collision([35,155,35,10,130,10,160,155]),(i=t.e("2D, Collision, SunBlock")).attr({w:o.w,h:o.h}),i.collision([190,155,170,80,210,10,280,10,280,155]),(r=t.e("2D, Collision, SunBlock")).attr({w:o.w,h:o.h}),r.collision([370,155,370,40,505,40,505,155]),this.addBackground(0,this.level.visibleHeight-310,o,.5),this.addBackground(0,this.level.visibleHeight-310,i,.5),this.addBackground(0,this.level.visibleHeight-310,r,.5)}),u.defineElement("cityFrontTop",function(){var e,n,i,r;for((e=t.e("2D, WebGL, bigBuildingTop, ColorEffects, RiggedExplosion").attr({z:-20}).crop(1,1,446,192)).colorOverride("#001fff","partial"),this.add(0,this.level.visibleHeight-1200,e),i=r=0;r<3;i=++r)(n=t.e("2D, WebGL, bigBuildingLayer, ColorEffects").attr({z:-20}).crop(1,0,446,128)).attr({x:e.x,y:e.y+e.h+i*n.h}),e.attach(n);return e.bind("BigExplosion",function(){var e,n,i,r;if(!this.buildingExploded&&this.x+this.w>-t.viewport.x&&this.x<-t.viewport.x+t.viewport.width){for(t.e("2D, WebGL, glass, Tween").attr({x:this.x,y:this.y+40,z:this.z+5}).bind("TweenEnd",function(){return this.destroy()}).tween({y:this.y+500},3e3,"easeInQuad"),t.e("2D, WebGL, glass, Tween").attr({x:this.x+200,y:this.y+60,z:this.z+5}).bind("TweenEnd",function(){return this.destroy()}).tween({y:this.y+500},3e3,"easeInQuad"),t.e("2D, WebGL, glass, Tween").attr({x:this.x,y:this.y+180,z:this.z+5}).bind("TweenEnd",function(){return this.destroy()}).tween({y:this.y+500},3e3,"easeInQuad"),t.e("2D, WebGL, glass, Tween").attr({x:this.x+180,y:this.y+200,z:this.z+5}).bind("TweenEnd",function(){return this.destroy()}).tween({y:this.y+500},3e3,"easeInQuad"),this.sprite(30,13),n=0,i=(r=this._children).length;n<i;n++)(e=r[n]).has("bigBuildingLayer")&&e.sprite(30,19);return this.buildingExploded=!0}})}),u.defineElement("cityFront",function(e,n,i){var r,o,s,a,u,h,c;for(null==e&&(e=6),null==n&&(n=0),null==i&&(i="bigBuildingBottom"),(r=t.e("2D, WebGL, bigBuildingTop, Collision, SunBlock, ColorEffects").attr({z:-20}).crop(1,1,446,192)).colorOverride("#001fff","partial"),s=128*(e+2.5),r.collision([32,80,160,16,416,16,416,s,32,s]),this.add(n,this.level.visibleHeight-s-16,r),u=h=0,c=e;0<=c?h<c:h>c;u=0<=c?++h:--h)(a=t.e("2D, WebGL, bigBuildingLayer, ColorEffects").attr({z:-20}).crop(1,0,446,128)).attr({x:r.x,y:r.y+r.h+u*a.h}),r.attach(a);return(o=t.e("2D, WebGL, "+i+", ColorEffects").attr({z:-20}).crop(1,1,446,184)).attr({x:r.x,y:r.y+r.h+128*e}),r.attach(o)}),u.defineElement("cityFrontBlur",function(){return this.addBackground(200,this.level.visibleHeight-1350,t.e("2D, WebGL, bigBuildingTop").crop(1,1,446,192).attr({w:768,h:288,z:50,lightness:.4}),1.5)}),u.defineElement("city-bridge",function(){var n,i;return n=t.e("2D, WebGL, cityLayer2, Collision, SunBlock, Horizon").collision([4,29,72,29,72,118,4,118]).colorDesaturation(e.backgroundColor).saturationGradient(.6,.6).attr({z:-505}),this.addBackground(0,this.level.visibleHeight-350,n,.375),(i=t.e("2D, WebGL, cityBridge, Collision, Horizon").colorDesaturation(e.backgroundColor).saturationGradient(.4,.4).crop(0,0,511,160).attr({z:-305,w:513})).collision([35,155,35,0,130,0,130,155]),this.addBackground(0,this.level.visibleHeight-182,i,.5)}),u.defineElement("cityStart",function(){var n;return(n=t.e("2D, WebGL, cityStart, Collision, SunBlock, Horizon").attr({z:-305}).colorDesaturation(e.backgroundColor).saturationGradient(.4,.4)).collision([215,155,215,60,300,60,300,10,500,10,500,155]),this.addBackground(0,this.level.visibleHeight-310,n,.5)}),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,o),e.prototype.assets=function(){var t;return{sprites:(t={},t[""+s]={tile:32,tileh:32,map:{waterHorizon:[0,17,8,5],waterMiddle:[32,0,16,6],waterFront1:[0,29,16,3],waterFront2:[16,29,16,3],coastStart:[8,18,8,1],coast:[8,17,8,1],cityBridge:[0,24,16,5],cityStart:[0,0,16,9],city:[16,0,16,9],cityLayer2:[0,9,12,8],cityDistance:[32,6,8,7],cityDistanceBaseBottom:[32,9,8,4],cityDistanceBaseTop:[40,6,8,7],bigBuildingTop:[16,13,16,6],bigBuildingBrokenTop:[30,13,16,6],bigBuildingLayer:[16,19,16,4],bigBuildingBottom:[16,23,16,6],bigBuildingBottom2:[30,23,16,6],glass:[12,9,4,3],cloud:[16,9,8,3],shadow:[16,12,2,1],bridgeDeck:[0,32,16,6],damagedBridgeDeck:[0,48,16,6],bridgePillar:[36,29,6,17],bridgePillarBroken:[42,29,6,17],bigGlare:[0,38,7,7],sun:[0,22,2,2],directGlare:[7,38,6,6],aircraftCarrierEnd:[30,43,6,5],aircraftCarrierStart:[13,43,6,5],aircraftCarrierBottomFlat:[19,45,6,3],aircraftCarrierBottomSpace:[25,45,4,3],aircraftCarrierTopFlat:[26,43,4,2],aircraftCarrierOpenHatch:[31,40,5,1],aircraftCarrierCabinEnd:[24,38,2,7],aircraftCarrierCabin:[22,38,2,7],aircraftCarrierCabinRadar:[20,38,2,7],aircraftCarrierCabinStart:[19,38,1,7],aircraftCarrierRadar:[26,38,2,2],aircraftCarrierAntenna:[29,38,2,3],boxes:[28,39,1,1],boxesFalling:[28,38,1,1]}},t)}},e}(),t.c("carrierHatch",{init:function(){return this.requires("2D, WebGL, aircraftCarrierOpenHatch, SpriteAnimation"),this.attr({z:-10}),this.crop(0,2,160,32),this.reel("open",600,[[31,40],[31,38],[31,39]]),this.reel("close",600,[[31,39],[31,38],[31,40]])}}),u.defineBlock(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,r),n.prototype.name="City.Intro",n.prototype.delta={x:1024,y:0},n.prototype.autoNext="Ocean",n.prototype.generate=function(){var e,i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w,b;for(n.__super__.generate.apply(this,arguments),this.addElement("waterFront"),i=t.e("2D, BoxesLocation, WebGL, Color").color("FF0000"),this.add(550,this.level.visibleHeight-360+224,i),i=t.e("2D, BoxesLocation, WebGL, Color").color("0000FF"),this.add(614,this.level.visibleHeight-360+224,i),i=t.e("2D, WebGL, boxes").attr({z:-8}),this.add(622,this.level.visibleHeight-340+160,i),this.outside=t.e("2D, WebGL").attr({w:800,h:128}),this.add(0,this.level.visibleHeight-330+224,this.outside),l=t.e("2D, WebGL, aircraftCarrierEnd").attr({z:-13}),this.add(704,this.level.visibleHeight-330+160,l),b=t.e("2D, WebGL, WaterSplashes").attr({z:30,w:800,h:160,alpha:.3}).attr({waterRadius:8,minSplashDuration:1700,defaultWaterCooldown:800,waterSplashSpeed:700,minOffset:2,splashUpwards:!1}),this.add(0,this.level.visibleHeight-330+160,b),g=t.e("carrierHatch"),this.add(260,this.level.visibleHeight-330+192,g),_=t.e("carrierHatch"),this.add(60,this.level.visibleHeight-330+192,_),p=d=0;d<=3;p=++d)r=t.e("2D, WebGL, aircraftCarrierBottomFlat").attr({z:20}),this.add(6*p*32-64,this.level.visibleHeight-330+224,r);for(y=0,v=(x=[4,5]).length;y<v;y++)p=x[y],w=t.e("2D, WebGL, aircraftCarrierTopFlat").attr({z:-13}),this.add(4*p*32-64,this.level.visibleHeight-330+160,w);return w=t.e("2D, WebGL, aircraftCarrierTopFlat").attr({z:-13}),this.add(-32,this.level.visibleHeight-330+160,w),(u=t.e("2D, WebGL, aircraftCarrierCabinEnd, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(384,this.level.visibleHeight-330,u),(a=t.e("2D, WebGL, aircraftCarrierCabin, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(320,this.level.visibleHeight-330,a),(s=t.e("2D, WebGL, aircraftCarrierCabinRadar, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(256,this.level.visibleHeight-330,s),m=t.e("2D, WebGL, aircraftCarrierRadar").attr({z:-11}),this.add(192,this.level.visibleHeight-330+22,m),e=t.e("2D, WebGL, aircraftCarrierAntenna").attr({z:-11}),this.add(288,this.level.visibleHeight-318-32,e),(o=t.e("2D, WebGL, aircraftCarrierCabin, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(128,this.level.visibleHeight-330,o),(h=t.e("2D, WebGL, aircraftCarrierCabinRadar, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(192,this.level.visibleHeight-330,h),(c=t.e("2D, WebGL, aircraftCarrierCabinStart, ColorEffects").attr({z:-13})).colorOverride({_red:255,_green:255,_blue:255},"partial"),this.add(96,this.level.visibleHeight-330,c),this.addElement("water"),this.addElement("waterHorizon"),f=t.e("2D, WebGL, waterFront1, WaveFront").attr({z:30,w:this.delta.x+.5*t.viewport.width+1,h:200,lightness:.5}).crop(0,1,512,95),this.addBackground(0,this.level.visibleHeight-18,f,1.25),f.waveY=0,this.addElement("cloud")},n.prototype.enter=function(){var e,i,r,o;return n.__super__.enter.apply(this,arguments),this.speed=this.level._forcedSpeed,this.level.panCamera({y:120},0),this.level.setForcedSpeed(0),i=[{type:"delay",duration:1e3},{type:"delay",duration:600,event:"openHatch"},{type:"linear",y:-80,duration:800,easingFn:"easeInOutQuad"},{event:"lift",type:"linear",x:70,y:-10,easingFn:"easeInQuad",duration:600},{type:"delay",duration:1,event:"unlock"},{type:"delay",duration:1,event:"go"}],e=this,o=null,r=function(t){if(o&&o.has("Choreography"))return t.attr({x:o.x-200,y:o.y}),o.disableControls&&t.disableControl(),t.addComponent("Choreography"),t.synchChoreography(o),t.one("ChoreographyEnd",function(){return this.removeComponent("Choreography",!1)}),t.one("unlock",function(){return this.enableControl(),this.weaponsEnabled=!0}),t.weaponsEnabled=o.weaponsEnabled},this.bind("ShipSpawned",r),t("PlayerControlledShip").each(function(n){return 0!==n?r(this):(o=this,this.addComponent("Choreography"),this.attr({x:300-200*n,y:t.viewport.height-50-this.h}),this.disableControl(),this.weaponsEnabled=!1,this.choreography(i),this.one("ChoreographyEnd",function(t){return function(){return t.removeComponent("Choreography","no"),e.unbind("ShipSpawned")}}(this)),this.one("unlock",function(){return this.enableControl(),this.weaponsEnabled=!0}),this.one("openHatch",function(){return t("carrierHatch").each(function(){return this.animate("open")})}),this.one("lift",function(){return e.outside.addComponent("Solid"),t("carrierHatch").each(function(){return this.animate("close")}),t("aircraftCarrierBottomFlat").each(function(){return this.attr({z:-13})}),e.level.panCamera({y:-120},2500)}),this.one("go",function(){return e.level.setForcedSpeed(e.speed,{accelerate:!1})}))})},n}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.Ocean",e.prototype.delta={x:1024,y:0},e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cloud"),this.addElement("cloud"),this.addElement("waterHorizon"),this.addElement("water"),this.addElement("waterFront")},e}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.CoastStart",e.prototype.delta={x:1024,y:0},e.prototype.autoNext="Coast",e.prototype.autoPrevious="Ocean",e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cloud"),this.addElement("cityHorizon","start"),this.addElement("water"),this.addElement("waterFront")},e}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.Coast",e.prototype.delta={x:1024,y:0},e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("waterFront"),this.addElement("cityHorizon"),this.addElement("water"),this.addElement("cloud")},e}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.BayStart",e.prototype.delta={x:1024,y:0},e.prototype.autoNext="Bay",e.prototype.autoPrevious="Coast",e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cloud"),this.addElement("cityHorizon"),this.addElement("water"),this.addElement("waterFront"),this.addElement("cityStart")},e}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.Bay",e.prototype.delta={x:1024,y:0},e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cloud"),this.addElement("waterFront"),this.addElement("water"),this.addElement("cityHorizon"),this.addElement("city")},e}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.BayFull",e.prototype.delta={x:1024,y:0},e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cloud"),this.addElement("waterFront"),this.addElement("water"),this.addElement("cityDistance"),this.addElement("city")},e}()),u.defineBlock(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,r),n.prototype.name="City.UnderBridge",n.prototype.delta={x:1024,y:0},n.prototype.autoNext="BayFull",n.prototype.generate=function(){var e,r,o,s;return n.__super__.generate.apply(this,arguments),this.notifyOffsetX=-100,this.addElement("waterFront",{lightness:.8}),this.addElement("water"),this.addElement("cityDistance"),this.addElement("city-bridge"),t.viewport.width,1.1*t.viewport.height,this.addBackground(0,335,this.deck(.55,!1,{w:550,z:-280}),.55),this.addBackground(0,295,this.deck(.45,!0,{w:600,z:-270}),.6),this.addBackground(0,255,this.deck(.35,!1,{w:650,z:-260}),.65),this.addBackground(40,290,this.pillar(.35,{h:200,z:-261}),.65),this.addBackground(870,290,this.pillarX(.35,{h:200,z:-261}),.65),this.addBackground(0,205,this.deck(.25,!0,{w:700,z:-50}),.7),this.addBackground(0,155,this.deck(.15,!1,{w:750,z:-40}),.75),this.addBackground(10,180,this.pillar(0,{h:350,z:-31}),.8),this.addBackground(830,180,this.pillarX(0,{h:350,z:-31}),.8),this.addBackground(0,95,this.deck(.05,!0,{w:800,z:-30}),.8),this.addBackground(0,20,this.deck(0,!1,{w:900,z:-20}).addComponent("BackDeck"),.9),r=t.e("2D, Solid, Collision, BridgeCeiling").attr({w:1e3,h:30}).origin("middle middle"),this.addBackground(0,-60,r,1),e=this.deck(0,!0,{w:1e3,z:-10}).addComponent("MainDeck"),this.addBackground(0,-60,e,1),this.addBackground(0,-180,this.deck(0,!1,{w:1200,z:100,lightness:.6,blur:0}).addComponent("FrontDeck"),1.2),o=this.pillar(0,{h:750,z:80,lightness:.6,blur:0}).addComponent("TiltPillarLeft"),s=this.pillarX(0,{h:750,z:80,lightness:.6,blur:0}).addComponent("TiltPillarRight"),this.addBackground(-20,-60,o,1.2),this.addBackground(834,-60,s,1.2),this.bind("BridgeDamage",{once:!0},function(n){var i,a,u;return u=function(e){var n;return(n=t(e)).get(n.length-1)},i=u("FrontDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),e=u("MainDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),a=u("BackDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),i.half.sprite(16,32),e.half.sprite(16,32),a.half.sprite(16,32),o=u("TiltPillarLeft").addComponent("TweenPromise","Delta2D").sprite(42,29),s=u("TiltPillarRight").addComponent("TweenPromise","Delta2D").sprite(42,29),r=u("BridgeCeiling").addComponent("TweenPromise","Delta2D")}),this.bind("BridgeCollapse",{once:!0},function(n){var a,u,h;return h=function(e){var n;return(n=t(e)).get(n.length-1)},a=h("FrontDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),e=h("MainDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),u=h("BackDeck").addComponent("TweenPromise","Delta2D").sprite(16,32),a.half.sprite(16,32),e.half.sprite(16,32),u.half.sprite(16,32),o=h("TiltPillarLeft").addComponent("TweenPromise","Delta2D").sprite(42,29),s=h("TiltPillarRight").addComponent("TweenPromise","Delta2D").sprite(42,29),r=h("BridgeCeiling").addComponent("TweenPromise","Delta2D"),i.sequence([function(){return i.parallel([function(){return n.setForcedSpeed(75,{accelerate:!0})},function(){return a.tweenPromise({rotation:-12,dy:a.dy+100},4e3,"easeInQuad")},function(){return e.tweenPromise({rotation:-10,dy:e.dy+100},4e3,"easeInQuad")},function(){return r.tweenPromise({rotation:-10,dy:r.dy+100},4e3,"easeInQuad")},function(){return u.tweenPromise({rotation:-7,dy:u.dy+100},4e3,"easeInQuad")},function(){return o.tweenPromise({rotation:-7,dy:o.dy+100},3e3,"easeInQuad")},function(){return s.tweenPromise({rotation:7},3e3,"easeInQuad")}])},function(){return i.parallel([function(){return n.setForcedSpeed(300,{accelerate:!0})},function(){return a.tweenPromise({dy:a.dy+400},4e3,"easeInQuad")},function(){return e.tweenPromise({dy:e.dy+430},4e3,"easeInQuad")},function(){return r.tweenPromise({dy:r.dy+430},4e3,"easeInQuad")},function(){return u.tweenPromise({dy:u.dy+400},4e3,"easeInQuad")},function(){return o.tweenPromise({rotation:-27,dy:o.dy+300},3e3,"easeInQuad")},function(){return s.tweenPromise({rotation:27,dy:s.dy+200},3e3,"easeInQuad")}])}])})},n.prototype.leave=function(){return n.__super__.leave.apply(this,arguments),this.unbind("BridgeDamage"),this.unbind("BridgeCollapse")},n.prototype.deck=function(e,n,i){var r,o,s;return 1024/180,i.h=i.w/(1024/180),r=n?"#2ba04c":"#b15a5a",s=t.e("2D, WebGL, bridgeDeck, Horizon, SunBlock, SpriteAnimation").crop(0,2,511,180).attr(a(i,{w:i.w/2})).saturationGradient(e,e).colorOverride(r,"partial"),(o=t.e("2D, WebGL, bridgeDeck, Horizon, SunBlock, SpriteAnimation").crop(0,2,511,180).saturationGradient(e,e).flip("X").colorOverride(r,"partial")).attr(a(i,{x:s.x+s.w,y:s.y,z:s.z,w:s.w,h:s.h})),s.half=o,s.attach(o),s.origin(s.h/2,2*s.w),s},n.prototype.pillar=function(e,n){return 180/534,n.w=n.h*(180/534),n.h=n.h,t.e("2D, WebGL, bridgePillar, Horizon, SunBlock").crop(2,0,180,534).attr(n).saturationGradient(e,e)},n.prototype.pillarX=function(t,e){return this.pillar(t,e).flip("X")},n}()),u.defineBlock(function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,r),e.prototype.name="City.Skyline",e.prototype.delta={x:1024,y:0},e.prototype.generate=function(){return e.__super__.generate.apply(this,arguments),this.addElement("cityFrontTop"),this.addElement("cityFrontBlur"),this.addElement("water"),this.addElement("cityDistance"),this.addElement("city")},e}()),u.defineBlock(function(n){function i(){return i.__super__.constructor.apply(this,arguments)}return h(i,r),i.prototype.name="City.SkylineBase",i.prototype.delta={x:1024,y:0},i.prototype.autoNext="Skyline2",i.prototype.generate=function(){var n,r,o;return i.__super__.generate.apply(this,arguments),this.addElement("cityFront"),o=600,n=t.e("2D, WebGL, cityDistanceBaseTop, SunBlock, Horizon").colorDesaturation(e.backgroundColor).saturationGradient(.9,.6).crop(1,1,255,223).attr({z:-598,w:256}),this.addBackground(0,this.level.visibleHeight-225-16-127,n,.25),r=t.e("2D, WebGL, cityDistanceBaseBottom, MiliBase, SunBlock, Horizon").colorDesaturation(e.backgroundColor).saturationGradient(.9,.6).crop(1,1,255,127).attr({z:-598,w:256}),this.addBackground(0,this.level.visibleHeight-225-16+96,r,.25),this.addElement("city"),o=700,this.add(0,this.level.visibleHeight-100,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:o,z:-10}).color("#505050"))},i}()),u.defineBlock(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,r),n.prototype.name="City.Skyline2",n.prototype.delta={x:1024,y:0},n.prototype.generate=function(){var e;return n.__super__.generate.apply(this,arguments),this.addElement("cityFront"),this.addElement("cityFront",4,512,"bigBuildingBottom2"),this.addElement("water"),this.addElement("cityDistance"),this.addElement("city"),160,this.add(0,this.level.visibleHeight-100,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:160,z:-25}).color("#555")),10,this.add(0,this.level.visibleHeight-100+160,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:10,z:-25}).color("#777")),e=400,this.add(0,this.level.visibleHeight-100+160+10,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:e,z:-25}).color("#333")),e=40,this.add(0,this.level.visibleHeight+170-e,t.e("2D, Solid").attr({w:this.delta.x,h:e,z:2}))},n}()),u.defineBlock(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,o),n.prototype.name="City.TrainTunnel",n.prototype.delta={x:1024,y:0},n.prototype.generate=function(){var e;return n.__super__.generate.apply(this,arguments),e=150,this.add(0,this.level.visibleHeight-100,t.e("2D, WebGL, Color, SunBlock, Solid").attr({w:this.delta.x,h:e,z:-10}).color("#505050")),400,this.add(0,this.level.visibleHeight-100+e,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:400,z:-10}).color("#202020")),e=150,this.add(0,this.level.visibleHeight-100+e+400,t.e("2D, WebGL, Color, Solid, SunBlock").attr({w:this.delta.x,h:e+400,z:-10}).color("#505050"))},n}()),u.defineBlock(function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return h(n,o),n.prototype.name="City.SmallerTrainTunnel",n.prototype.delta={x:1024,y:0},n.prototype.generate=function(){return n.__super__.generate.apply(this,arguments),250,this.add(0,this.level.visibleHeight-100,t.e("2D, WebGL, Color, SunBlock, Solid").attr({w:this.delta.x,h:250,z:-10}).color("#505050")),300,this.add(0,this.level.visibleHeight-100+250,t.e("2D, WebGL, Color, SunBlock").attr({w:this.delta.x,h:300,z:-10}).color("#202020")),350,this.add(0,this.level.visibleHeight-100+250+300,t.e("2D, WebGL, Color, Solid, SunBlock").attr({w:this.delta.x,h:350,z:-10}).color("#505050"))},n}())}).call(e,n(1).default,n(7).default,n(18).default)},function(t,e,n){(function(e,i){var r,o,s,a,u=function(t,e){return function(){return t.apply(e,arguments)}},h=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};s=n(9),a=n(229),o=n(73),r=function(){function t(t,n){this.generator=t,this.data=null!=n?n:{},this._waveTicks=u(this._waveTicks,this),this.blocks=[],this.bufferLength=3*e.viewport.width,this.generationPosition={x:0,y:40},this.sceneryEvents=[],this.visibleHeight=e.viewport.height-this.generationPosition.y,this.shipType="PlayerSpaceship",this.namespace=this.data.namespace,this.currentScenery=this.data.startScenery}return t.prototype.setScenery=function(t){return this._loadAssetsForScenery(t).then(function(e){return function(){return e.currentScenery=t,e._setupLevelScenery()}}(this))},t.prototype._loadAssetsForScenery=function(t){var e,n;return n=this.namespace+"."+t,(e=this.generator.buildingBlocks[n]).prototype.loadAssets().then(function(t){return function(){var n,r,o;if(r=[],(o=e.prototype.autoPrevious)&&r.push(function(){return t._loadAssetsForScenery(o)}),(n=e.prototype.autoNext)&&r.push(function(){return t._loadAssetsForScenery(n)}),r.length>0)return i.sequence(r)}}(this))},t.prototype.start=function(){return this.active=!0,e.viewport.x=0,e.viewport.y=0,this._controlsEnabled=!0,this.setForcedSpeed(1),this.setWeaponsEnabled(!0),this._scrollWall=e.e("ScrollWall").attr({x:0,y:0}),this._playersActive=!1,e.bind("EnemySpawned",function(t){return function(){var e;return null==(e=t.data).enemiesSpawned&&(e.enemiesSpawned=0),t.data.enemiesSpawned+=1}}(this)),e.e("2D, UILayerDOM, Text, LevelTitle").attr({w:250,h:20}).attr({x:e.viewport.width-250,y:10,z:2}).textFont({size:"10px",family:"Press Start 2P"}).textColor("#A0A0A0").text(""),this._setupLevelScenery(),e.bind("PlayerDied",function(t){return function(){var n;if(n=!1,e("Player ControlScheme").each(function(){if(this.lives>0)return n=!0}),!n)return t.stop(),e.trigger("GameOver")}}(this)),e.bind("GameLoop",this._waveTicks)},t.prototype._waveTicks=function(t){var e,n,i,r;null==this._registeredWaveTweens&&(this._registeredWaveTweens={}),n=this._registeredWaveTweens,i=[];for(e in n)r=n[e],i.push(r.tick(t.dt));return i},t.prototype.registerWaveTween=function(t,n,i,r){var o;return null==this._registeredWaveTweens&&(this._registeredWaveTweens={}),null!=(o=this._registeredWaveTweens)[t]?o[t]:o[t]=new(function(){function t(t){var n,i;this.name=t.name,n=t.duration,i=t.easing,this.callback=t.callback,this.ease=new e.easing(n,i),this.ease.repeat(3)}return t.prototype.tick=function(t){var e,n;return this.ease.tick(t),n=this.ease.value(),1===this.ease.loops&&this.ease.repeat(3),e=this.ease.loops%2==1,this.callback(n,e)},t}())({name:t,duration:n,easing:i,callback:r})},t.prototype._setupLevelScenery=function(){var t,n,i,r;if(null!=this.currentScenery&&0===this.blocks.length){for(this._placePlayerShips(),this._seedPreceedingGeometry(),this._update(),n=0,i=(r=this.blocks).length;n<i;n++)(t=r[n]).x<640&&t.enter();return e.bind("CameraMove",function(t){return function(e){var n,i;if(n=e.dx,i=e.dy,t.generationPosition.x-=n,t.generationPosition.y-=i,t.generationPosition.x<t.bufferLength)return t._update()}}(this)),e.uniqueBind("LeaveBlock",function(t){return function(e){var n;return(n=t.blocks.indexOf(e))>0&&t._handleSceneryEvents(t.blocks[n-1],"leave"),t._handleSceneryEvents(e,"inScreen"),t._cleanupBuildBlocks()}}(this)),e.uniqueBind("EnterBlock",function(t){return function(e){var n;return(n=t.blocks.indexOf(e))>0&&t._handleSceneryEvents(t.blocks[n-1],"outScreen"),t._handleSceneryEvents(e,"enter")}}(this)),e.uniqueBind("PlayerEnterBlock",function(t){return function(e){var n;return(n=t.blocks.indexOf(e))>0&&t._handleSceneryEvents(t.blocks[n-1],"playerLeave"),t._handleSceneryEvents(e,"playerEnter")}}(this))}},t.prototype._handleSceneryEvents=function(t,e){var n,i,r,o,s;if(null!=t){for(t[e](),s=[],r=i=(o=this.sceneryEvents).length-1;i>=0;r=i+=-1)n=o[r],t.name===this.namespace+"."+n.sceneryType&&e===n.eventType?(n.callback.apply(this),s.push(this.sceneryEvents.splice(r,1))):s.push(void 0);return s}},t.prototype.notifyScenery=function(t,e,n){return this.sceneryEvents.push({eventType:t,sceneryType:e,callback:n})},t.prototype._placePlayerShips=function(){var t,n;return t={spawnPosition:{x:100,y:200},spawnOffset:{x:-50,y:0},title:""},n=s(this.data,t),e.one("ShipSpawned",function(t){return function(){return t._playersActive=!0,t._scrollWall.scrollWall(t._forcedSpeed)}}(this)),e("Player").each(function(t){var i;return i=function(){var t;return t=o(n.spawnPosition),e("PlayerControlledShip").each(function(){return t.x=this.x+n.spawnOffset.x+e.viewport.x,t.y=this.y+n.spawnOffset.y+e.viewport.y}),t},this.addComponent("ShipSpawnable").spawnPosition(i),e.e("PlayerInfo").playerInfo(30+t*(.3*e.viewport.width),this)}),e.bind("ShipSpawned",function(t){return function(e){var n,i,r,o,s,a;if(e.forcedSpeed(t._forcedSpeed,{accellerate:!1}),e.weaponsEnabled=t._weaponsEnabled[e.playerNumber],t._controlsEnabled||e.disableControl(),null!=t.playerStartWeapons){for(e.clearItems(),a=[],n=0,o=(s=t.playerStartWeapons).length;n<o;n++)i=s[n],r=t.inventory(i),a.push(e.installItem(r));return a}}}(this)),e("Player ControlScheme").each(function(){return this.spawnShip()})},t.prototype.inventory=function(t){return this.invItems||(this.invItems={}),this.invItems[t]},t.prototype.inventoryAdd=function(t,e,n){var i;return this.invItems||(this.invItems={}),(i=this.invItems)[e]||(i[e]=s(n,{type:t,contains:e}))},t.prototype.getShipType=function(){return this.shipType},t.prototype.setShipType=function(t){return this.shipType=t,e("Player ControlScheme").each(function(){if(null!=this.ship)return this.spawnShip()})},t.prototype.setForcedSpeed=function(t,n){var i,r;return n=s(n,{accellerate:!0}),this._forcedSpeed?(null!=(i=t.x)?i:t)-(null!=(r=this._forcedSpeed.x)?r:this._forcedSpeed):0,this._forcedSpeed=t,this._playersActive&&this._scrollWall.scrollWall(this._forcedSpeed,n),e("PlayerControlledShip").each(function(){return this.forcedSpeed(t,n)})},t.prototype.addTrauma=function(t){return this._scrollWall.addTrauma(t)},t.prototype.setHeight=function(t){return 0===this.blocks.length?(this.generationPosition.y-=t,this._scrollWall.viewHeight+=t):(this._scrollWall.viewHeight+=t,e.trigger("CameraMove",{dx:0,dy:t}))},t.prototype.panCamera=function(t,n){var i,r;return r=0,(i=e.e("TweenPromise").attr({y:0})).bind("GameLoop",function(t){return function(){var n;return n=i.y-r,r=i.y,t._scrollWall.viewHeight+=n,e.trigger("CameraMove",{dx:0,dy:n}),e.trigger("CameraPan",{dx:0,dy:n})}}(this)),i.tweenPromise({y:t.y},n,"easeInOutQuad").then(function(){return i.destroy()})},t.prototype.setWeaponsEnabled=function(t,n){var i,r,o;for((null==n||a(n))&&(n=[1,2]),null==this._weaponsEnabled&&(this._weaponsEnabled={}),i=0,r=n.length;i<r;i++)o=n[i],this._weaponsEnabled[o]=t;return e("PlayerControlledShip").each(function(){var e;if(e=this.playerNumber,h.call(n,e)>=0)return this.weaponsEnabled=t})},t.prototype.getComponentOffset=function(){return{x:this._scrollWall.x,y:this._scrollWall.y}},t.prototype.addComponent=function(t,e,n){var i,r,o;if(null==n&&(n=null),null!=(i=this.blocks[null!=(o=this.currentBlockIndex)?o:0]))return null==n&&(n=this.getComponentOffset()),r={x:e.x+n.x-i.x,y:e.y+n.y-i.y},i.add(r.x,r.y,t)},t.prototype.stop=function(){var t,n,i,r,o;for(this.active=!1,e.unbind("LeaveBlock"),e.unbind("EnterBlock"),e.unbind("ShipSpawned"),e.unbind("CameraMove"),e.unbind("GameLoop",this._waveTicks),o=[],n=0,i=(r=this.blocks).length;n<i;n++)t=r[n],o.push(null!=t?t.clean():void 0);return o},t.prototype.verify=function(){if(!this.active)throw new Error("sequence mismatch")},t.prototype._update=function(){var t,e,n;for(e=this.bufferLength,t=0,10,n=[];this.generationPosition.x<e&&t<10;)this._generateLevel(),n.push(t+=1);return n},t.prototype._generateLevel=function(){var t,e,n;if(e=this.namespace+"."+this.currentScenery,this._addBlockToLevel(e,{}),t=this.generator.buildingBlocks[e],n=t.prototype.autoNext)return this.currentScenery=n},t.prototype._addBlockToLevel=function(t,e){var n,i;return i=this.generator.buildingBlocks[t],n=new i(this,this.generator,e),this.blocks.push(n),n.build(this.generationPosition),this.generationPosition={x:n.x+n.delta.x,y:n.y+n.delta.y}},t.prototype._insertBlockToLevel=function(t,e){var n,i;if(null==(i=this.generator.buildingBlocks[t]))throw new Error(t+" not found");return n=new i(this,this.generator,e),this.blocks.unshift(n),this.generationPosition={x:this.generationPosition.x-n.delta.x,y:this.generationPosition.y-n.delta.y},n.build(this.generationPosition)},t.prototype._cleanupBuildBlocks=function(){var t,e;for(t=this.blocks[0],e=[];t.canCleanup();)this.blocks.shift().clean(),e.push(t=this.blocks[0]);return e},t.prototype._seedPreceedingGeometry=function(){var t,e,n,i,r;return e=this.namespace+"."+this.currentScenery,t=this.generator.buildingBlocks[e],(n=t.prototype.autoNext)&&(e=this.namespace+"."+n),(r=t.prototype.autoPrevious)&&(e=this.namespace+"."+r),i=o(this.generationPosition),this._insertBlockToLevel(e,{}),this._insertBlockToLevel(e,{}),this._insertBlockToLevel(e,{}),this.generationPosition=i},t.prototype.loadAssets=function(t){return this.generator.loadAssets(t)},t.prototype.setStartWeapons=function(t){this.playerStartWeapons=t},t}(),t.exports={default:r}}).call(e,n(1).default,n(18).default)},function(t,e,n){t.exports=n.p+"assets/efac2482072c2eb22aa946a5eec0d36d.png"},function(t,e,n){(function(e,i){var r,o,s,a=[].slice;o=n(75),s=n(673),r=function(){function t(t,e,n){this.level=t,this.generator=e,this.settings=n,this.createdElements=[],this.createdBindings=[]}return t.prototype.screenHeight=480,t.prototype.loadAssets=function(){var t,n;return null==(n="function"==typeof this.assets?this.assets():void 0)?e():(t=e.defer(),i.load(n,function(){return t.resolve()}),t.promise)},t.prototype.build=function(t){if(!this.generated)return null==this.x&&(this.x=t.x),null==this.y&&(this.y=t.y),this.notifyOffsetX=0,this.generated=!0,this.generate(),this._notifyEnterFunction(this.notifyOffsetX)},t.prototype._notifyEnterFunction=function(t){var e;return e=this,i.e("2D, Collision, ViewportRelativeMotion").attr({w:10,h:800}).viewportRelativeMotion({x:this.x+t,y:40,offsetY:this.y-40,speed:1}).onHit("ScrollFront",function(){if(!this.triggeredFront)return i.trigger("EnterBlock",e),this.triggeredFront=!0}).onHit("PlayerControlledShip",function(){if(!this.triggeredPlayerFront)return i.trigger("PlayerEnterBlock",e),this.triggeredPlayerFront=!0}).onHit("ScrollWall",function(){return i.trigger("LeaveBlock",e),this.destroy()})},t.prototype.generate=function(){var t;return null!=(t=this.settings.generate)?t.apply(this):void 0},t.prototype.enter=function(){var t;return null!=(t=this.settings.enter)?t.apply(this):void 0},t.prototype.playerEnter=function(){var t;return null!=(t=this.settings.playerEnter)?t.apply(this):void 0},t.prototype.playerLeave=function(){var t;return null!=(t=this.settings.playerLeave)?t.apply(this):void 0},t.prototype.inScreen=function(){var t;return null!=(t=this.settings.inScreen)?t.apply(this):void 0},t.prototype.outScreen=function(){var t;return null!=(t=this.settings.outScreen)?t.apply(this):void 0},t.prototype.leave=function(){var t;return null!=(t=this.settings.leave)?t.apply(this):void 0},t.prototype.clean=function(){var t,e,n,r,o,s,a;for(e=0,r=(s=this.createdElements).length;e<r;e++)s[e].destroy();for(this.createdElements=[],n=0,o=(a=this.createdBindings).length;n<o;n++)t=a[n],i.unbind(t.event,t.callback);return this.createdBindings=[]},t.prototype.add=function(t,e,n){return n.addComponent("ViewportRelativeMotion").viewportRelativeMotion({x:this.x+t,y:e+40,offsetY:this.y-40,speed:1}),this.createdElements.push(n)},t.prototype.addBackground=function(t,e,n,i){return n.addComponent("ViewportRelativeMotion").viewportRelativeMotion({x:this.x+t,y:e+40,offsetY:this.y-40,speed:i}),this.createdElements.push(n)},t.prototype.addElement=function(){var t,e;return e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],this.generator.elements[e].apply(this,t)},t.prototype.bind=function(t,e,n){return o(e)&&void 0===n&&(n=e,e={}),n=!0===e.once?i.one(t,n):i.bind(t,n),this.createdBindings.push({event:t,callback:n})},t.prototype.unbind=function(t){var e,n,r,o,u;for(u=[],n=0,r=(o=this.createdBindings).length;n<r;n++)(e=o[n]).event===t&&(u.push(e),i.unbind(e.event,e.callback));return this.createdBindings=s.apply(null,[this.createdBindings].concat(a.call(u)))},t.prototype.canCleanup=function(){var t,e,n,r,o;for(t=-1*i.viewport._x,n=0,r=(o=this.createdElements).length;n<r;n++)if((e=o[n]).x+e.w>=t)return!1;return!0},t}(),t.exports={default:r}}).call(e,n(18).default,n(1).default)},function(t,e,n){var i=n(230),r=n(69),o=n(231),s=r(function(t,e){return o(t)?i(t,e):[]});t.exports=s},function(t,e,n){var i=n(675);t.exports=function(t,e){return!(null==t||!t.length)&&i(t,e,0)>-1}},function(t,e,n){var i=n(676),r=n(677),o=n(678);t.exports=function(t,e,n){return e==e?o(t,e,n):i(t,r,n)}},function(t,e){t.exports=function(t,e,n,i){for(var r=t.length,o=n+(i?1:-1);i?o--:++o<r;)if(e(t[o],o,t))return o;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},function(t,e){t.exports=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},function(t,e,n){var i,r,o,s,a,u,h,c,l;h=n(149).default,i=n(681),r=n(682),c=n(683),o=n(684),s=n(685),a=n(686),u=n(687),l=n(688),h.defineAssets("explosion",{contents:["explosion"],spriteMap:r,sprites:{all:{tile:96,tileh:96,map:{explosionStart:[0,0]}}},audio:{explosion:[o],shoot:[a],hit:[s],powerup:[l],laugh:[u]}}),h.defineAssets("player",{contents:["playerShip","shipEngineFire","mine","drone","rocket","helicopter","largeDrone","laserTank"],spriteMap:i,sprites:{all:{tile:32,tileh:32,map:{playerShip:[0,0,3,2],playerShipDamaged:[0,2,3,2],muzzleFlash:[10,0,1,1],shipEngineFire:[3,0,3,1],freddie:[3,1,3,2],standardMine:[3,3,1,1],standardDrone:[0,4,2,2],standardRocket:[4,4,2,1],helicopter:[0,6,4,2],heliDamaged:[8,6,4,2],standardLargeDrone:[0,8,3,3],eyeStart:[6,0,1,1],wingLoaded:[12,2,2,1],rapidFireBoost:[11,0,1,1],speedBoost:[12,0,1,1],damageBoost:[13,0,1,1],aimBoost:[14,0,1,1],heart:[13,1,1,1],star:[14,1,1,1],powerUpBox:[10,1,1,1],sphere1:[7,3,1,1],laserTank:[0,11,6,3],laserTankBarrel:[6,11,4,2]}}}}),h.defineAssets("portraits",{contents:["general"],spriteMap:c,sprites:{all:{tile:32,tileh:32,map:{pGeneral:[0,0,4,4],pPilot:[0,4,4,4]}}}})},function(t,e,n){t.exports=n.p+"assets/a04a8fa4bad190408f73d57c0fb74d70.png"},function(t,e,n){t.exports=n.p+"assets/5b2a46fcdad11e3e731e2df7648fd86c.png"},function(t,e,n){t.exports=n.p+"assets/d2ad577067ef844ef5b25a2b6be10e6c.png"},function(t,e,n){t.exports=n.p+"assets/22054d72913c004361c11214587ba79e.ogg"},function(t,e,n){t.exports=n.p+"assets/e39e0c1ad8aa61b66e600f5c44285872.ogg"},function(t,e,n){t.exports=n.p+"assets/98b6ce0c6192392dec84a82a8abac4e2.ogg"},function(t,e,n){t.exports=n.p+"assets/b5690998e5965f0dc01faa0bd41ca470.ogg"},function(t,e,n){t.exports=n.p+"assets/c0e68d85304d657458eca6483ad9993a.ogg"},function(t,e,n){"use strict";var i=n(690),r=(n.n(i),n(713)),o=(n.n(r),n(714)),s=(n.n(o),n(716)),a=(n.n(s),n(717));n.n(a)},function(t,e,n){(function(t,e,i){var r,o,s,a;r=n(691).default,s=n(149).default,o=null,a=null,t.defineScene("Game",function(n){var u,h,c,l,f,p,d,y;return null==n&&(n={}),e.backgroundColor=null,o=s.createLevel(),t.createLayer("UILayerDOM","DOM",{scaleResponse:0,yResponse:0,xResponse:0,z:40}),t.createLayer("UILayerWebGL","WebGL",{scaleResponse:0,yResponse:0,xResponse:0,z:35}),t.createLayer("StaticBackground","WebGL",{scaleResponse:0,yResponse:0,xResponse:0,z:0}),t.e("BigText, LoadingText").bigText("Loading"),y=s.loadAssets(["explosion"]).then(function(){var e,n;return e=i.defer(),n=t.e("WebGL, explosion"),setTimeout(function(){return n.destroy(),e.resolve()},100),e.promise}),o.start(),t("Player").each(function(){return this.level=o}),l={startAtCheckpoint:null!=(f=n.checkpoint)?f:0},d=null!=(p=null!=n?n.script:void 0)?p:r,n.checkpoint?(c="Checkpoint "+n.checkpoint,"function"==typeof window.ga&&window.ga("send","event","Game","CheckpointStart",c)):(c="Begin","function"==typeof window.ga&&window.ga("send","event","Game","Start",c)),h=function(e,n){if(null!=e)return(a=new e(o)).run(n).then(function(){return t.trigger("ScriptFinished",a)}).catch(function(t){if("sequence mismatch"!==t.message)throw t});console.error("Script is not defined")},u=0,t.bind("ScriptFinished",function(e){var n;return n=Math.max(0,e.startAtCheckpoint-e.currentCheckpoint),u+=e.currentCheckpoint,e.nextScript?h(e.nextScript,{startAtCheckpoint:n}):(e.gotoGameOver&&t.enterScene("GameOver",{gameCompleted:!0}),console.log("End of content!"))}),y.then(function(){return t("LoadingText").destroy(),h(d,l)}),t.bind("GameOver",function(){return window.ga("send","event","Game","End","Checkpoint "+a.currentCheckpoint),t.enterScene("GameOver",{checkpoint:u+a.currentCheckpoint,script:d})}),new e.PauseMenu},function(){return a.end(),o.stop(),t("Player").each(function(){return this.removeComponent("ShipSpawnable")}),t.unbind("GameOver"),t.unbind("ScriptFinished"),t.unbind("GamePause")})}).call(e,n(1).default,n(7).default,n(18).default)},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w,b,S={}.hasOwnProperty;n(66),h=n(15).LazerScript,x=n(102),m=x.Swirler,f=x.Shooter,r=x.CrewShooters,g=x.Stalker,w=n(103),d=w.Stage1BossRocketStrike,y=w.Stage1BossStage1,b=n(150),_=b.StartOfDawn,o=b.DayBreak,c=b.Morning,i=n(702).default,s=n(703).default,a=n(704).default,u=n(235).default,l=n(705).default,v=n(708).default,p=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)S.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,h),n.prototype.nextScript=v,n.prototype.assets=function(){return this.loadAssets("explosion","playerShip","general")},n.prototype.execute=function(){return e.e("DebugInfo"),this.inventoryAdd("weapon","lasers",{marking:"L"}),this.inventoryAdd("ship","life",{marking:"❤",icon:"heart"}),this.inventoryAdd("shipUpgrade","healthu",{marking:"❤",icon:"heart"}),this.inventoryAdd("shipBoost","healthb",{marking:"❤",icon:"heart"}),this.inventoryAdd("ship","points",{marking:"P",icon:"star"}),this.inventoryAdd("weaponUpgrade","rapid",{marking:"RF",icon:"rapidFireBoost"}),this.inventoryAdd("weaponUpgrade","damage",{marking:"D",icon:"damageBoost"}),this.inventoryAdd("weaponUpgrade","aim",{marking:"A",icon:"aimBoost"}),this.inventoryAdd("weaponUpgrade","speed",{marking:"S",icon:"speedBoost"}),this.inventoryAdd("weaponBoost","rapidb",{marking:"RF",icon:"rapidFireBoost"}),this.inventoryAdd("weaponBoost","aimb",{marking:"A",icon:"aimBoost"}),this.inventoryAdd("weaponBoost","speedb",{marking:"S",icon:"speedBoost"}),this.inventoryAdd("weaponBoost","damageb",{marking:"D",icon:"damageBoost"}),this.sequence(this.setPowerupPool("rapidb","speed","points","rapidb"),this.introText(),this.sunRise(0),this.tutorial(),this.setPowerupPool("aimb","speedb","rapidb","speed","aim","rapid"),this.droneTakeover(),this.sunRise(1),this.oceanFighting(),this.setPowerupPool("aim","speedb","rapidb","rapid","rapidb","aimb"),this.midStageBossFight(),this.cityBay(),this.setPowerupPool("speed","rapid","aim","speed","rapid","aim"),this.endStageBossfight())},n.prototype.introText=function(){return this.sequence(this.setWeapons(["lasers"]),this.setSpeed(200,{accellerate:!1}),this.setScenery("Intro"),this.async(this.placeSquad(i)),this.async(this.placeSquad(a,{amount:2,delay:0,options:{attach:"BoxesLocation"}})),this.if(function(){return this.player(1).active&&this.player(2).active},this.say("General","Time to get the last 2 ships to the factory\nto install the AI controlled defence systems",{noise:"low"}),this.say("General","Time to get the last ship to the factory\nto install the AI controlled defence systems",{noise:"low"})))},n.prototype.tutorial=function(){return this.sequence(this.setScenery("Ocean"),this.say("General","We send some drones for some last manual target practice",{noise:"low"}),this.setSpeed(200),this.parallel(this.showText("Get Ready",{color:"#00FF00",mode:"blink",blink_amount:6,blink_speed:100}),this.say("John","Let's go!")),this.parallel(this.gainHeight(150,{duration:4e3}),this.repeat(2,this.sequence(this.placeSquad(m,{amount:4,delay:250,drop:"pool"}),this.wait(1e3)))),this.say("General","Great job, now get the ship to the defence factory in the city\nWe will send some more target practice",{noise:"low"}),this.placeSquad(f,{amount:5,delay:200,drop:"pool"}))},n.prototype.droneTakeover=function(){return this.sequence(this.parallel(this.say("John","What are those drones doing there!?"),this.placeSquad(r,{amount:4,delay:600,drop:"pool"})),this.say("General","They do not respond to our commands anymore!\nOur defence AI has been hacked!",{noise:"low"}),this.async(this.chapterTitle(1,"Hacked")))},n.prototype.oceanFighting=function(){return this.sequence(this.checkpoint(this.checkpointStart("Ocean",0)),this.parallel(this.sequence(this.wait(2e3),this.say("General","We're under attack!?!",{noise:"low"})),this.swirlAttacks()),this.swirlAttacks(),this.parallel(this.gainHeight(-150,{duration:4e3}),this.wait(2e3),this.sequence(this.stalkerShootout(),this.droneShip(),this.stalkerShootout())))},n.prototype.midStageBossFight=function(){return this.sequence(this.checkpoint(this.checkpointStart("CoastStart",1)),this.mineSwarm(),this.droneShip(),this.sunRise(2),this.mineSwarm(),this.parallel(this.say("John","Enemy Navy Mothership approaching! Stay alert!"),this.placeSquad(r,{amount:4,delay:250,drop:"pool"})),this.shipBossFight(),this.setScenery("BayStart"),this.underWaterAttacks())},n.prototype.shipBossFight=function(){return this.sequence(this.checkpoint(this.checkpointStart("Ocean",1)),this.parallel(this.say("John","Time to show these monkeys who's boss"),this.sequence(this.wait(3e4),this.setScenery("CoastStart"),this.wait(5e3)),this.placeSquad(l),this.placeSquad(r,{amount:5,delay:2500})))},n.prototype.cityBay=function(){return this.sequence(this.checkpoint(this.checkpointStart("Bay",2)),this.setScenery("UnderBridge"),this.parallel(this.placeSquad(g,{drop:"pool"}),this.mineSwarm({direction:"left"})),this.sequence(this.stalkerShootout(),this.parallel(this.placeSquad(g,{drop:"pool"}),this.mineSwarm({direction:"left"}))))},n.prototype.endStageBossfight=function(){return this.sequence(this.checkpoint(this.checkpointStart("BayFull",2)),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"pool",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"pool",inFrontOf:this.player(2)}))),this.mineSwarm({direction:"left"}),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"pool",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"pool",inFrontOf:this.player(2)}))),this.parallel(this.mineSwarm(),this.sequence(this.wait(5e3),this.setScenery("UnderBridge"))),this.async(this.showText("Warning!",{color:"#FF0000",mode:"blink",blink_amount:6,blink_speed:100})),this.while(this.waitForScenery("UnderBridge",{event:"enter"}),this.waitingRocketStrike()),this.setSpeed(75),this.waitForScenery("UnderBridge",{event:"inScreen"}),this.setSpeed(0),this.checkpoint(this.checkpointStart("UnderBridge",2)),this.placeSquad(y),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"healthu",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"healthu",inFrontOf:this.player(2)}))),this.setSpeed(200),this.wait(500),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"rapidb",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"rapidb",inFrontOf:this.player(2)}))),this.wait(500),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"speedb",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"speedb",inFrontOf:this.player(2)}))))},n.prototype.waitingRocketStrike=function(){return this.sequence(this.placeSquad(d,{amount:6,delay:150,options:{gridConfig:{x:{start:1.1,steps:1,stepSize:.05},y:{start:.125,steps:12,stepSize:.05}}}}),this.wait(200))},n.prototype.swirlAttacks=function(){return this.attackWaves(this.parallel(this.repeat(2,this.placeSquad(m,{amount:4,delay:250,options:{shootOnSight:!0}})),this.repeat(2,this.placeSquad(f,{amount:4,delay:250,options:{shootOnSight:!0}}))),{drop:"pool"})},n.prototype.underWaterAttacks=function(){return this.sequence(this.placeSquad(g,{drop:"pool"}),this.repeat(2,this.stalkerShootout()))},n.prototype.sunRise=function(t){var e;return null==t&&(t=0),e=function(){switch(t){case 0:return _;case 1:return o;case 2:return c}}(),this.async(this.runScript(e))},n.prototype.mineSwarm=function(t){var e;return null==t&&(t={direction:"right"}),this.placeSquad(u,{amount:10,delay:100,options:{gridConfig:{x:{start:.2,steps:8,stepSize:.1},y:{start:.125,steps:6,stepSize:.1}},points:null==(e=t.points)||e,direction:t.direction}})},n.prototype.droneShip=function(){return this.placeSquad(s,{drop:"pool"})},n.prototype.stalkerShootout=function(){return this.parallel(this.placeSquad(g,{drop:"pool"}),this.attackWaves(this.parallel(this.placeSquad(f,{amount:4,delay:250,options:{shootOnSight:!0}}),this.placeSquad(m,{amount:4,delay:250,options:{shootOnSight:!0}})),{drop:"pool"}))},n.prototype.checkpointStart=function(t,e){return this.sequence(this.setScenery(t),this.sunRise(e),this.wait(2e3))},n}(),t.exports={default:p}}).call(e,n(1).default)},function(t,e,n){(function(e,n){var i,r=[].slice;i={_verify:function(t){if(t!==this.currentSequence)throw new Error("sequence mismatch");return this.level.verify()},_skippingToCheckpoint:function(){return null!=this.startAtCheckpoint&&this.currentCheckpoint<this.startAtCheckpoint},sequence:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],function(n){return function(i){return n._verify(i),e.sequence(t,i)}}(this)},parallel:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],function(n){return function(i){return n._verify(i),e.parallel(t,i)}}(this)},if:function(t,e,n){return function(i){return function(r){return i._verify(r),t.apply(i)?e(r):"function"==typeof n?n(r):void 0}}(this)},while:function(t,n){return function(i){return function(r){var o;return i._verify(r),i._skippingToCheckpoint()?e():(void 0===n&&(n=t,t=function(){return e.defer().promise}),o=!1,t(r).catch(function(t){if("sequence mismatch"!==t.message)throw t}).finally(function(){return o=!0}),e.iterate(function(){return 1},function(){return o},function(){return n(r)},1))}}(this)},repeat:function(t,n){return function(i){return function(r){return i._verify(r),i._skippingToCheckpoint()?e():void 0===n?i.while(t)(r):0!==t?e(n(r)).then(function(){return i.repeat(t-1,n)(r)}):void 0}}(this)},choose:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],function(e){return function(n){var i;return e._verify(n),i=Math.floor(Math.random()*t.length),t[i](n)}}(this)},runScript:function(){var t,n;return n=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],function(i){return function(r){var o;return i._verify(r),i._skippingToCheckpoint()?e():(o=new n(i.level)).run.apply(o,t)}}(this)},async:function(t){return function(n){return function(i){if(n._verify(i),n._skippingToCheckpoint())return e();t(i)}}(this)},wait:function(t){return function(i){return function(r){var o,s,a,u,h;return i._verify(r),i._skippingToCheckpoint()?e():(o=e.defer(),s=Math.max(null!=(h="function"==typeof t?t():void 0)?h:t,0),u=Math.floor(s/40),a=i,n.e("Delay").delay(function(){var t;try{return a._verify(r)}catch(e){return t=e,o.reject(t),this.destroy()}},40,u,function(){return o.resolve(),this.destroy()}),o.promise)}}(this)},endSequence:function(){return function(t){return function(e){throw t._verify(e),new Error("sequence mismatch")}}(this)},checkpoint:function(t){return function(n){return function(i){return n._verify(i),n.currentCheckpoint+=1,n._skippingToCheckpoint()?e():n.currentCheckpoint===n.startAtCheckpoint&&null!=t?t(i):window.ga("send","event","Game","Checkpoint "+n.currentCheckpoint)}}(this)}},t.exports={default:i}}).call(e,n(18).default,n(1).default)},function(t,e,n){(function(e,i,r){var o,s,a,u,h,c,l,f,p=[].slice;u=n(73),c=n(217),f=n(232),h=n(9),a=n(234).default,s=n(697).default,l=n(698).say,o={placeSquad:function(t,n){return null==n&&(n={}),function(r){return function(o){var c,l,f,p,d,y;return r._verify(o),r._skippingToCheckpoint()?e():(y=new a,n=u(n),f=h({synchronizer:y},n.options),n=h({},n,{amount:1,delay:1e3}),null!=f.gridConfig&&(f.grid=new s(f.gridConfig)),n.options=f,d=function(){var e,i,r;for(r=[],c=e=0,i=n.amount;0<=i?e<i:e>i;c=0<=i?++e:--e)r.push(y.registerEntity(new t(this.level)));return r}.call(r),l=e(!0),null!=(null!=(p=d[0])?p.assets:void 0)&&(l=d[0].assets(u(n.options))(o)),l.then(function(){var t,s;return t=function(){var t,e,i;for(i=[],c=t=0,e=d.length;t<e;c=++t)s=d[c],i.push(function(t){return function(e,i){return t.wait(i*n.delay)(o).then(function(){var r;return t._verify(o),r=u(n.options),r.index=i,e.run(r)})}}(this)(s,c));return i}.call(r),e.all(t).then(function(t){var e,s,a,u,h,c,l,f,p,d;for(r.attackWaveResults=(r.attackWaveResults||[]).concat(t),s=!0,l=null,c=null,u=0,f=t.length;u<f;u++)e=(d=t[u]).alive,h=d.killedAt,p=d.location,e?s=!1:(null==c&&(c=h),null==l&&(l=p),h.getTime()>c.getTime()&&(c=h,l=p));if(s&&l&&(a={x:l.x-i.viewport.x,y:l.y-i.viewport.y},n.drop))return r.drop({item:n.drop,location:a})(o)})}))}}(this)},attackWaves:function(t,n){return null==n&&(n={}),function(r){return function(o){return r._verify(o),r._skippingToCheckpoint()?e():(r.attackWaveResults=[],t(o).then(function(){var t,e,s,a,u,h,c,l,f,p,d;for(e=!0,c=null,h=null,a=0,l=(p=r.attackWaveResults).length;a<l;a++)t=(d=p[a]).alive,u=d.killedAt,f=d.location,t?e=!1:(null==h&&(h=u),null==c&&(c=f),u.getTime()>h.getTime()&&(h=u,c=f));if(e&&c&&(s={x:c.x-i.viewport.x,y:c.y-i.viewport.y},n.drop))return r.drop({item:n.drop,location:s})(o)}))}}(this)},say:function(t,n,i){return null==i&&(i={}),function(r){return function(o){return r._verify(o),r._skippingToCheckpoint()?e():(null==n&&(n=t,t=void 0),i=h(i,{speaker:t,noise:"none",bottom:r.level.visibleHeight}),l(t,n,i))}}(this)},drop:function(t){return function(n){return function(r){var o,s,a,u,h,c;if(n._verify(r),n._skippingToCheckpoint())return e();if(u=n.inventory(t.item),a=function(t){return i.e("PowerUp").attr(t).powerUp(u)},!u)return console.warn("Item ",t.item," is not known"),e();if(h=t.inFrontOf)if(h.ship())a({z:-1,x:i.viewport.width,y:h.ship().y+i.viewport.y});else if(!h.gameOver)return s=e.defer(),h.entity.one("ShipSpawned",function(t){return a({z:-1,x:i.viewport.width,y:t.y+i.viewport.y}),s.resolve()}),s.promise;return(c=t.location)?((o="function"==typeof c?c():void 0)?(o.x-=i.viewport.x,o.y-=i.viewport.y):o=c,a({x:o.x,y:o.y,z:-1})):void 0}}(this)},player:function(t){var e,n,r;return r={},e=[],i("Player").each(function(){return r[this.name]={name:this.name,entity:this,active:!1,gameOver:!1,has:function(t){var e;return null!=(e=this.ship())?e.hasItem(t):void 0},ship:function(){var t,e;return t=this,e=null,i("Player ControlScheme").each(function(){if(this.name===t.name)return e=this.ship}),e}}}),i("Player ControlScheme").each(function(){return r[this.name].active=!0,this.lives>0?e.push(this.name):(r[this.name].active=!1,r[this.name].gameOver=!0)}),n="anyActive"===t?c(e):"Player "+t,r[n]},setScenery:function(t){return function(n){return function(i){return n._verify(i),n._skippingToCheckpoint()?e():n.level.setScenery(t)}}(this)},waitForScenery:function(t,n){return null==n&&(n={}),function(i){return function(r){var o;return i._verify(r),n=h(n,{event:"enter"}),i._skippingToCheckpoint()?e():(o=e.defer(),i.level.notifyScenery(n.event,t,function(){return o.resolve()}),o.promise)}}(this)},gainHeight:function(t,n){return function(r){return function(o){var s,a,u,h,c,l,f;return r._verify(o),u=n.duration,r._skippingToCheckpoint()||0===u?r.level.setHeight(-t):(a=e.defer(),f=t/u*1e3,s=null!=(c=null!=(l=r.level._forcedSpeed)?l.x:void 0)?c:r.level._forcedSpeed,r.level.setForcedSpeed({x:s,y:-f},{accellerate:!1}),h=r.level,i.e("Delay").delay(function(){return h.setForcedSpeed(s,{accellerate:!1}),a.resolve()},u),a.promise)}}(this)},setSpeed:function(t,e){return null==e&&(e={}),function(n){return function(i){return n._verify(i),e=h(e,{accellerate:!0}),n.level.setForcedSpeed(t,e)}}(this)},disableWeapons:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],function(e){return function(n){return e._verify(n),e.level.setWeaponsEnabled(!1,t)}}(this)},enableWeapons:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],function(e){return function(n){return e._verify(n),e.level.setWeaponsEnabled(!0,t)}}(this)},blast:function(t,e,n){return null==e&&(e={}),function(r){return function(o){var s,a,u,c,l;if(r._verify(o),a=t(),c=a.x,l=a.y,c-=i.viewport.x,l-=i.viewport.y,e=null!=(u="function"==typeof e?e():void 0)?u:e,e=h({x:c,y:l},e,{damage:0,radius:20,duration:160,viewportFixed:!0,z:5,topDesaturation:0,bottomDesaturation:0,lightness:1,alpha:1}),s=i.e("Blast, Explosion").explode(e,n),!1===e.viewportFixed&&(s.addComponent("ViewportRelativeMotion"),s.viewportRelativeMotion({speed:1})),l>r._getSeaLevel()-60&&1===e.lightness&&(s.addComponent("WaterSplashes"),s.attr({waterSplashSpeed:500,defaultWaterCooldown:450}),s.setDetectionOffset(40,0)),e.damage)return s.ship=r.entity.deathCause,s.addComponent("Hostile")}}(this)},loadAssets:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],function(e){return function(n){return e.level.loadAssets(t)}}(this)},updateTitle:function(t){return function(e){return function(n){return e._verify(n),i("LevelTitle").text(t)}}(this)},chapterTitle:function(t,n){return function(r){return function(o){return r._verify(o),i("LevelTitle").text(t+": "+n),r._skippingToCheckpoint()?e():i.e("BigText").bigText(n,{super:"Chapter "+t+":"})}}(this)},showText:function(t,n){return null==n&&(n={}),function(r){return function(o){return r._verify(o),r._skippingToCheckpoint()?e():i.e("BigText").bigText(t,n)}}(this)},pickTarget:function(t,e){return null==e&&(e=null),function(n){return function(r){var o,s;if(o=function(t){var n;return 0===(n=i(t)).length?null:null===e?n.get(Math.floor(Math.random()*n.length)):n.get(e)},s=function(e){return n.target={x:e.x,y:e.y},i.one("ShipSpawned",function(e){return n.target=o(t),n.target.one("Destroyed",s)})},n.target=o(t),"PlayerControlledShip"===t&&n.target)return n.target.one("Destroyed",s)}}(this)},lockTarget:function(){return function(t){return function(e){return t.target={x:t.target.x,y:t.target.y}}}(this)},targetLocation:function(t){return null==t&&(t={}),function(e){return function(){var n,r,o,s,a,u,h,c,l,f;return null!=t.x&&-1<(o=t.x)&&o<2&&(t.x*=i.viewport.width),null!=t.y&&-1<(s=t.y)&&s<2&&(t.y*=i.viewport.height),n=t.x||(null!=(a=e.target)?a.x:void 0),r=t.y||(null!=(u=e.target)?u.y:void 0),n&&r?{x:(null!=(h=t.x)?h:e.target.x+i.viewport.x)+(null!=(c=t.offsetX)?c:0),y:(null!=(l=t.y)?l:e.target.y+i.viewport.y)+(null!=(f=t.offsetY)?f:0)}:null}}(this)},changeSeaLevel:function(t){return function(e){return function(n){var r;return e._verify(n),e.level.sealevelOffset=-t,r=e.level,i.s("SeaLevel").setOffset(r.sealevelOffset)}}(this)},panCamera:function(t,e){return function(n){return function(i){return n._verify(i),n.level.panCamera(t,e)}}(this)},addMinorScreenshake:function(){return function(t){return function(e){return t._verify(e),t.level.addTrauma(.2)}}(this)},slowMotionMoment:function(){return function(t){return function(e){return t._verify(e),new Promise(function(t){return r.setGameSpeed(.3),i.e("Delay, TimeManager").delay(function(){return r.setGameSpeed(.1)},500,0).delay(function(){return r.setGameSpeed(.3)},1500,0).delay(function(){return r.setGameSpeed(1),this.destroy(),t()},2e3,0)})}}(this)},addMajorScreenshake:function(){return function(t){return function(e){return t._verify(e),t.level.addTrauma(.5)}}(this)},screenFlash:function(t,n){return null==n&&(n={}),function(i){return function(r){var o,s;return i._verify(r),n=h(n,{duration:200,pauses:400,color:"#FF0000",alpha:1}),s=i._fader(),o=e.defer(),s.attr({alpha:0}).color(n.color).delay(function(){return this.attr({alpha:n.alpha}),this.delay(function(){return this.attr({alpha:0})},n.duration)},n.pauses,t,function(){return this.attr({alpha:0}),o.resolve()}),o.promise}}(this)},setWeapons:function(t){return function(e){return function(n){var r;return e._verify(n),r=e,i("PlayerControlledShip").each(function(){var e,n,i,o,s;for(this.clearItems(),s=[],i=0,o=t.length;i<o;i++)e=t[i],n=r.inventory(e),s.push(this.installItem(n));return s}),e.level.setStartWeapons(t)}}(this)},inventory:function(t){return"pool"===t&&i("Player").each(function(){if(this.eligibleForExtraLife()&&"pool"===t)return t="life",this.rewardExtraLife()}),"pool"===t&&(t=(this.powerupPool||[]).pop()||"points"),this.level.inventory(t)},inventoryAdd:function(t,e,n){return this.level.inventoryAdd(t,e,n)},setPowerupPool:function(){var t;return t=1<=arguments.length?p.call(arguments,0):[],function(e){return function(n){return e._verify(n),e.powerupPool=f(t)}}(this)},hideHud:function(t){return null==t&&(t={}),t=h(t,{visible:!1}),this.toggleHud(t)},showHud:function(t){return null==t&&(t={}),t=h(t,{visible:!0}),this.toggleHud(t)},toggleHud:function(t){return null==t&&(t={}),function(e){return function(n){return e._verify(n),t=h(t,{duration:1e3}),i("UILayerDOM, UILayerWebGL").each(function(){return this.addComponent("Tween"),this.visible&&t.visible?this.tween({alpha:1},t.duration):this.tween({alpha:0},t.duration)}),e.wait(t.duration)(n).then(function(){return i("PlayerInfo").each(function(){return this.setVisibility(t.visible)})})}}(this)},setShipType:function(t){return function(e){return function(n){return e._verify(n),e.level.setShipType(t)}}(this)},endGame:function(){return function(t){return function(e){return t._verify(e),t.gotoGameOver=!0}}(this)},disableControls:function(){return function(t){return function(e){return t._verify(e),i("PlayerControlledShip").each(function(){return this.disableControl()})}}(this)},screenFadeOut:function(){return function(t){return function(n){var i,r;return t._verify(n),r=t._fader(),i=e.defer(),r.attr({alpha:0}).color("#000000").tween({alpha:1},4e3).bind("TweenEnd",function(){return i.resolve()}),i.promise}}(this)},screenFadeIn:function(){return function(t){return function(n){var i,r;return t._verify(n),r=t._fader(),i=e.defer(),r.attr({alpha:1}).color("#000000").tween({alpha:0},4e3).bind("TweenEnd",function(){return this.destroy(),i.resolve()}),i.promise}}(this)},cancelBullets:function(t,e){return function(n){return function(r){return n._verify(r),null==e&&(e=function(t){return!0}),i(t).each(function(){if(e(this))return this.destroy()})}}(this)},_fader:function(){var t;return null==(t=i("ScreenFader").get(0))&&(t=i.e("2D, UILayerDOM, Color, Tween, ScreenFader, Delay")),t.attr({x:0,y:0,z:1e3}).attr({w:i.viewport.width,h:i.viewport.height}),t}},t.exports={default:o}}).call(e,n(18).default,n(1).default,n(7).default)},function(t,e,n){var i=n(225),r=n(233);t.exports=function(t){return r(i(t))}},function(t,e,n){var i=n(233),r=n(220);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(230),r=n(164),o=n(69),s=n(231),a=o(function(t,e){return s(t)?i(t,r(e,1,s,!0)):[]});t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),r=n.n(i),o=n(232),s=n.n(o);e.default=class{constructor(t){const e=r()({},t,{x:{},y:{},initial:[]});e.x=r()(e.x,{start:0,steps:0,stepSize:1,avoid:[]}),e.y=r()(e.y,{start:0,steps:0,stepSize:1,avoid:[]});const n=this.coordList(e.x),i=this.coordList(e.y),o=e.initial;for(let t of i)for(let e of n)o.push({x:e,y:t});this.freeCoords=s()(o)}coordList(t){const e="function"==typeof t.avoid?t.avoid():t.avoid,n="function"==typeof t.start?t.start():t.start;return Array(t.steps).fill().map((e,i)=>n+i*t.stepSize).filter((t,n)=>!e.includes(n))}getLocation(){return this.freeCoords.pop()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){e.say=((e,n,i)=>new Promise(r=>{t("Dialog").each(function(){this.trigger("Abort"),this.destroy()});const o=n.split("\n"),s={General:{n:"pGeneral",l:[0,0]},John:{n:"pPilot",l:[0,4]}}[e],a=.8*t.viewport.width,u=Math.max(s?4:0,o.length+1+(e?1:0)),h=t.e("2D, UILayerWebGL, Color, Tween, Dialog").attr({w:a,h:20*u,alpha:.7}).color("#000000").attr({x:50,y:i.bottom-20*u,z:100});h.bind("Abort",r);const c=s?100:0;if(s){const e=t.e("2D, UILayerWebGL, SpriteAnimation").addComponent(s.n).sprite(s.l,4,4).attr({x:h.x+5,y:h.y-20,z:h.z+1,w:96,h:96}).reel("talk",400,[s.l,[s.l[0]+4,s.l[1]]]).animate("talk",6*o.length);h.attach(e),"none"!==i.noise&&s&&(e.addComponent("Delay"),e.delay(()=>e.attr({alpha:.6+.3*Math.random()}),150,-1))}let l=15;if(e){const n=t.e("2D, UILayerDOM, Text").attr({w:a-20,x:h.x+10+c,y:h.y+10,z:101,alpha:1}).text(e).textColor("#707070").textFont({size:"10px",weight:"bold",family:"Press Start 2P"});h.attach(n),l=30}o.forEach((e,n)=>{h.attach(t.e("2D, UILayerDOM, Text").attr({w:a-20,x:h.x+10+c,y:h.y+l+20*n,z:101}).text(e).textColor("#909090").textFont({size:"10px",weight:"bold",family:"Press Start 2P"}))});const f=o.join(" ").split(" ").length;t.e("Dialog, Delay").delay(function(){r(),t("Dialog").each(function(){this.destroy()})},1500*Math.ceil(f/5),0)}))}.call(e,n(1).default)},function(t,e,n){(function(e,i,r){var o,s,a,u,h,c,l=[].slice;a=n(9),h=n(75),c=n(31),u=n(66),s=n(73),o={bindSequence:function(t,n,i){var r;if(null!=n)return null==i&&(i=function(){return!0}),r=function(o){return function(){var s,a,u;if(s=1<=arguments.length?l.call(arguments,0):[],i.apply(null,s))return o.entity.unbind(t,r),a=function(t){return o.alternatePath=null,e(n.apply(o,s)(t)).catch(function(){return o.alternatePath})},o.currentSequence=u=Math.random(),o.alternatePath=a(u)}}(this),this.entity.bind(t,r)},sendToBackground:function(t,e){return function(n){return function(i){return n._verify(i),n.entity.sendToBackground(t,e)}}(this)},reveal:function(){return function(t){return function(e){return t._verify(e),t.entity.reveal()}}(this)},animate:function(t,e,n){return function(i){return function(r){return i._verify(r),n?i.entity[n].animate(t,e):i.entity.animate(t,e)}}(this)},scale:function(t,n){return null==n&&(n={}),function(i){return function(r){var o,s,u,h;return i._verify(r),u=null!=(h=i.entity.scale)?h:1,n=a(n,{duration:1e3*Math.abs(t-u)}),s=e.defer(),o=function(){return defer.resolve()},i.entity.tween({scale:t},n.duration).one("TweenEnd",function(){return this.unbind("Remove",o),s.resolve()}),s.promise}}(this)},movePath:function(t,n){return null==n&&(n={}),function(r){return function(o){var s,u,h,c,l,f,p,d,y,v,g,_,m,x,w,b;return r._verify(o),r.enemy.alive||null!=r.decoyingEntity?(n=a(n,{rotate:!0,skip:0,speed:r.entity.defaultSpeed,continuePath:!1,easing:"linear",autoAccellerate:!0}),(y=[].concat(t)).unshift([r.entity.x,r.entity.y]),g=y[0],l=0,h=function(){var t,e,n;for(n=[],t=0,e=y.length;t<e;t++)d=y[t],(x="function"==typeof d?d():void 0)?(w=x.x,b=x.y):(w=d[0],b=d[1]),-1<w&&w<2&&(w*=i.viewport.width),-1<b&&b<2&&(b*=i.viewport.height),v=[w,b],_=g[0],m=g[1],s=Math.abs(w-_),u=Math.abs(b-m),c=Math.sqrt(Math.pow(s,2)+Math.pow(u,2)),l+=c,g=v,n.push({x:w,y:b});return n}(),p=l/n.speed*1e3,f=e.defer(),r.entity.choreography([{type:"viewportBezier",rotation:n.rotate,continuePath:n.continuePath,path:h,duration:p,easingFn:n.easing}],{skip:n.skip}).one("ChoreographyEnd",function(){return f.resolve()}),f.promise):e.resolve()}}(this)},_isFloat:function(t){return t===+t&&t!==(0|t)},moveTo:function(t,e){return null==e&&(e={}),function(n){return function(r){var o,l,f,p,d,y,v,g,_;if(n._verify(r),!n.enemy.alive&&null==n.decoyingEntity)return Promise.resolve();if("string"==typeof t&&(g=i(t).get(0),l=a(e,{offsetX:0,offsetY:0}),t={x:g.x+l.offsetX,y:g.y+l.offsetY}),v=null!=(f="function"==typeof t?t():void 0)?f:t,h(v))return Promise.resolve();if(u(v,e),null!=v.x&&-2<(p=v.x)&&p<2&&(v.x*=i.viewport.width),null!=v.y&&-2<(d=v.y)&&d<2&&(v.y*=i.viewport.height),!c(t))throw new Error("location invalid");return y=n._getSeaLevel(),"air"===n.enemy.moveState?null!=v.y&&v.y+n.entity.h>y?(o=s(v),o.y=y-n.entity.h,n._moveAir(o).then(function(){if(n.enemy.moveState="water",n.enemy.alive||null!=n.decoyingEntity)return n._setupWaterSpot(),n._moveWater(v)})):n._moveAir(v):"water"===n.enemy.moveState?null!=v.y&&v.y+n.entity.h<y?(_=s(v),_.y=y-n.entity.h,n._moveWater(_).then(function(){if(n.enemy.moveState="air",n.enemy.alive||null!=n.decoyingEntity)return n._removeWaterSpot(),n._moveAir(v)})):n._moveWater(v):void 0}}(this)},moveThrough:function(t,e){return function(n){return function(i){var r,o,s,u,h,c,l,f,p,d,y;return n._verify(i),d=n.entity.x,y=n.entity.y,(l="function"==typeof t?t():void 0)?(f=l.x,p=l.y):(f=t[0],p=t[1]),null!=f&&null!=p?(r=f-d,o=p-y):(r=-1,o=0),c=Math.atan2(o,r),s=1e3*Math.cos(c)+d,u=1e3*Math.sin(c)+y,h=a({x:s,y:u},e,{rotation:!0}),n.moveTo(h)(i)}}(this)},_setupWaterSpot:function(){var t;return t=null!=r.explosionMode?i.e("2D, WebGL, Color, Choreography, Tween").color("#000040").attr({w:this.entity.w+10,x:this.entity.x-5,y:this.entity.y+this.entity.h,h:20,alpha:.7,z:this.entity.z-1}):i.e("2D, WebGL, shadow, Choreography, Tween").attr({w:this.entity.w+10,x:this.entity.x-5,y:this._getSeaLevel()-10,h:20,z:this.entity.z-1}),null!=r.explosionMode&&this._waterSplash(),this.entity.addComponent("WaterSplashes"),this.entity.has("ViewportFixed")&&t.addComponent("ViewportFixed"),this.entity.hide(t,{below:this._getSeaLevel()})},_removeWaterSpot:function(){return this.entity.reveal(),null!=r.explosionMode?this._waterSplash():this.entity.removeComponent("WaterSplashes")},_waterSplash:function(){var t;return t=e.defer(),i.e("WaterSplash").waterSplash({x:this.entity.x,y:this._getSeaLevel(),size:this.entity.w}).one("ParticleEnd",function(){return t.resolve()}),t.promise},_moveWater:function(t){var n,i,r,o,s,u,h,c,l,f,p,d,y,v,g;if(n={speed:this.entity.defaultSpeed},this.entity.has("ViewportFixed")&&(n.x=this.entity.x,n.y=this.entity.y),y=this._getSeaLevel(),t=a(t,n),v={w:1.2*this.entity.w,h:this.entity.w/3,alpha:.6},700,l={w:.3*this.entity.w,h:5,alpha:.2},o=null!=t.x?Math.abs(t.x-this.entity.hideMarker.x):0,s=null!=t.y?Math.abs(t.y-this.entity.hideMarker.y):0,r=Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),h=r/t.speed*1e3,null!=t.y){g=Math.max(0,Math.min(t.y-this.entity.h,700)-y)/(700-y),u={};for(c in v)p=v[c],u[c]=(1-g)*p+g*l[c];this.entity.hideMarker.tween(u,h)}return i=e.defer(),f=null!=(d=null!=u?u.h:void 0)?d:this.entity.hideMarker.h,this.entity.hideMarker.choreography([{type:"viewport",x:t.x+this.entity.w/2-this.entity.hideMarker.w/2,y:y-f/2,maxSpeed:t.speed,duration:h}]).one("ChoreographyEnd",function(){return i.resolve()}),e.all([i.promise,this._moveAir(t)])},_getSeaLevel:function(){return i.s("SeaLevel").getSeaLevel(this.entity.scale)},_moveAir:function(t){var e,n,i,r;return e={speed:this.entity.defaultSpeed},this.entity.has("ViewportFixed")&&(e.x=this.entity.x,e.y=this.entity.y),t=a(t,e),i=null!=t.x?Math.abs(t.x-this.entity.x):0,r=null!=t.y?Math.abs(t.y-this.entity.y):0,0===(n=Math.sqrt(Math.pow(i,2)+Math.pow(r,2)))?Promise.resolve():new Promise(function(e){return function(i){var r,o;return r=null!=(o=t.easing)?o:"linear",e.entity.choreography([{type:"viewport",x:t.x,y:t.y,rotation:t.rotation,easingFn:r,maxSpeed:t.speed,duration:n/t.speed*1e3}]).one("ChoreographyEnd",function(){return i()})}}(this))},rotate:function(t,n){return function(i){return function(r){var o,s;return i._verify(r),s=e.defer(),o=function(){return s.resolve()},i.entity.one("Remove",o),i.entity.tween({rotation:t},n).one("TweenEnd",function(){return this.unbind("Remove",o),s.resolve()}),s.promise}}(this)},synchronizeOn:function(t){return function(e){return function(n){return e.synchronizer.synchronizeOn(t,e)}}(this)},squadOnce:function(t,e){return function(n){return function(i){if(n._verify(i),n.synchronizer.allowOnce(t))return e(i)}}(this)},setLocation:function(t){return function(e){return function(n){var r,o,s,a;return o=null!=(r="function"==typeof t?t():void 0)?r:t,s=o.x,a=o.y,(e._isFloat(s)||-1<s&&s<2)&&(s*=i.viewport.width),(e._isFloat(a)||-1<a&&a<2)&&(a*=i.viewport.height),e.entity.attr({x:s,y:a})}}(this)},location:function(t){return null==t&&(t={}),function(e){return function(){var n,i,r,o,s,a;return null!=e.decoyingEntity?{x:e.entity.x+e.entity.w/2+(null!=(n=t.offsetX)?n:0),y:e.entity.y+e.entity.h/2+(null!=(i=t.offsetY)?i:0)}:{x:(null!=(r=e.enemy.location.x)?r:e.entity.x+e.entity.w/2)+(null!=(o=t.offsetX)?o:0),y:(null!=(s=e.enemy.location.y)?s:e.entity.y+e.entity.h/2)+(null!=(a=t.offsetY)?a:0)}}}(this)},get:function(t){return function(e){return function(){return e.entity.get(t)}}(this)},invincible:function(t){return function(e){return function(n){return e._verify(n),e.entity.invincible=t}}(this)},turnAround:function(){return function(t){return function(e){var n;return t._verify(e),null==t.turned&&(t.turned=null!=(n=t.entity.xFlipped)&&n),t.turned=!t.turned,t.turned?t.entity.flipX():t.entity.unflipX()}}(this)},deathDecoy:function(){return function(t){return function(e){var n,r,o,s;return t._verify(e),t.decoy=t.spawn(t.options),t.options.attach?(n=i(t.options.attach).get(t.options.index),t.decoy.removeComponent("ViewportFixed"),n.attach(t.decoy),t.decoy.attr({x:n.x,y:n.y,z:n.z,invincible:!0,health:1,defaultSpeed:t.entity.defaultSpeed})):(o=(r=t.location()()).x,s=r.y,t.decoy.attr({x:o,y:s,invincible:!0,health:1,defaultSpeed:t.entity.defaultSpeed})),t.decoy.has("BurstShot")&&t.decoy.removeComponent("BurstShot"),t.decoy.has("Hostile")&&t.decoy.removeComponent("Hostile"),t.decoy.updatedHealth(),t.entity.xFlipped?t.decoy.flipX():t.decoy.unflipX(),t.decoyingEntity=t.entity,t.entity=t.decoy}}(this)},endDecoy:function(){return function(t){return function(e){var n;return null!=(n=t.decoy)&&n.destroy(),t.decoy=null,t.entity=t.decoyingEntity,t.decoyingEntity=void 0}}(this)},leaveAnimation:function(t){return function(n){return function(i){if(n._verify(i),n._skippingToCheckpoint())return e();n.entity.addComponent("KeepAlive"),t(i).then(function(){if(n.enemy.alive)return n.entity.destroy()})}}(this)},action:function(t,n){return function(i){return function(r){return i._verify(r),i._skippingToCheckpoint()?e():e(i.entity.execute(t,n,i))}}(this)}},t.exports={default:o}}).call(e,n(18).default,n(1).default,n(7).default)},function(t,e,n){(function(e,n,i){var r;r={backgroundColorFade:function(t,r,o){return function(s){return function(a){var u,h;return e.background(r[0]),e.bind("BackgroundColor",s._colorHorizon),e.trigger("BackgroundColor",r[0]),u=n.defer(),e("Sky").get(0).colorFade({duration:t.duration,skip:null!=(h=t.skip)?h:0},r,o).bind("ColorFadeFinished",function(){var t;return t=r[r.length-1],i.backgroundColor=t,e("Horizon").each(function(){return this.colorDesaturation(t)}),e.unbind("BackgroundColor",this._colorHorizon),u.resolve()}),u.promise}}(this)},_colorHorizon:function(t){if(i.backgroundColor!==t)return i.backgroundColor=t,e("Horizon").each(function(){return this.colorDesaturation(t)})}},t.exports={default:r}}).call(e,n(1).default,n(18).default,n(7).default)},function(t,e,n){(function(e){var i,r;r=n(9),i={oldExplosion:function(t,n){return null==n&&(n={}),function(i){return function(o){var s,a,u,h;if(i._verify(o),a=t(),u=a.x,h=a.y,n=r({x:u,y:h},n,{damage:0,radius:20,duration:160,z:5,alpha:1}),s=e.e("OldExplosion").explode(n),n.damage)return s.addComponent("Hostile")}}(this)},smallExplosion:function(t){return null==t&&(t={}),!1===(t=r(t,{juice:!0,offsetX:0,offsetY:0})).juice?this.blast(this.location()):this.parallel(this.blast(this.location({offsetX:t.offsetX,offsetY:t.offsetY}),{alpha:.85}),function(){return e.audio.play("explosion",1,.25)})},smokePrint:function(t){return null==t&&(t={}),!1===(t=r(t,{juice:!0,offsetX:0,offsetY:0})).juice?this.blast(this.location()):this.blast(this.location({offsetX:t.offsetX,offsetY:t.offsetY}),function(t){return function(){return{viewportFixed:!1,alpha:.3,z:t.entity.z-3,lightness:.1,duration:200}}}(this))},bigExplosion:function(t){return null==t&&(t={}),!1===(t=r(t,{juice:!0,offsetX:0,offsetY:0,damage:300})).juice?this.blast(this.location(),{damage:t.damage,radius:40}):this.parallel(this.addMinorScreenshake(),function(){return e.audio.play("explosion")},this.blast(this.location({offsetX:t.offsetX,offsetY:t.offsetY}),{damage:t.damage,radius:40}))}},t.exports={default:i}}).call(e,n(1).default)},function(t,e,n){(function(e,i){var r,o,s={}.hasOwnProperty;o=n(15).EntityScript,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,o),n.prototype.assets=function(){return this.loadAssets("helicopter")},n.prototype.spawn=function(t){return e.e("CameraCrew, Horizon").attr({x:.2*e.viewport.width,y:.15*e.viewport.height,defaultSpeed:100,topDesaturation:.3,bottomDesaturation:.3}).cameraCrew()},n.prototype.execute=function(){return this.entity.colorDesaturation(i.backgroundColor),this.bindSequence("Hit",this.crash),this.sequence(this.sendToBackground(.85,-1),this.setLocation({x:.45,y:.4}),this.moveTo({x:-.3,speed:200}),this.turnAround(),this.wait(200),this.sendToBackground(.5,-200),this.moveTo({x:.22,y:.45}),this.repeat(this.sequence(this.parallel(this.scale(.7,{duration:4e3}),this.moveTo({x:.36,y:.47,speed:25,easing:"easeInOutQuad"})),this.parallel(this.scale(.5,{duration:4e3}),this.moveTo({x:.22,y:.5,speed:25,easing:"easeInOutQuad"})))))},n.prototype.crash=function(){return this.sequence(this.parallel(this.addMajorScreenshake(),this.blast(this.location(),{duration:480,z:-199,topDesaturation:.3,bottomDesaturation:.3}),this.slowMotionMoment(),function(){return e.audio.play("explosion")}),function(t){return function(){return t.entity.flip("Y")}}(this),this.turnAround(),this.while(this.movePath([[.62,.68]],{speed:150}),this.sequence(this.blast(this.location({offSetX:0,offsetY:10}),{radius:10,duration:480,z:-199,topDesaturation:.3,bottomDesaturation:.3,lightness:.2,alpha:.5}),this.blast(this.location({offsetX:10,offsetY:25}),{radius:5,duration:180,z:-199,topDesaturation:.3,bottomDesaturation:.3}),this.wait(100))),this.moveTo({y:1.1}))},n}(),t.exports={default:r}}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(e){var i,r,o,s={}.hasOwnProperty;r=n(15).EntityScript,o=n(102).ShipDrone,i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,r),n.prototype.spawn=function(t){var n;return e.e("DroneShip").attr({x:e.viewport.width+180,y:450,defaultSpeed:null!=(n=t.speed)?n:350})},n.prototype.execute=function(){return this.sequence(this.moveTo({x:.02}),this.action("open"),this.wait(1e3),this.parallel(this.placeSquad(o,{amount:5,drop:"pool",delay:500,options:{shootOnSight:!0}}),this.sequence(this.wait(3e3),this.action("close"),this.moveTo({x:-.5}))))},n}(),t.exports={default:i}}).call(e,n(1).default)},function(t,e,n){(function(e,i){var r,o,s={}.hasOwnProperty;r=n(15).EntityScript,o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,r),n.prototype.spawn=function(t){return this.options=null!=t?t:{},e.e("2D, WebGL, Tween, boxes, Collision, Choreography, Hideable").attr({z:23,defaultSpeed:150}).onHit("PlayerControlledShip",function(t){if(!i.paused)return this.trigger("Knock",t[0].obj)})},n.prototype.execute=function(){return this.bindSequence("Knock",this.knockedOff),this.wait(2e4)},n.prototype.knockedOff=function(t){return t.trigger("BonusPoints",{points:25,location:this.location()}),this.parallel(function(t){return function(){return t.entity.sprite(28,38)}}(this),this.moveTo({y:1.25}),this.rotate(90,1500))},n}(),t.exports={default:o}}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(e){var i,r,o,s,a,u,h,c,l={}.hasOwnProperty;i=n(15).EntityScript,r=n(706).default,h=n(707).TurretInActive,c=n(102),u=c.Swirler,a=c.Shooter,c.CrewShooters,c.Stalker,o=c.ScraperFlyer,s=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)l.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.spawn=function(t){var n;return e.e("BattleShip").attr({x:e.viewport.width+180,y:400,defaultSpeed:null!=(n=t.speed)?n:45})},n.prototype.execute=function(){return this.sequence(this.parallel(this.placeSquad(r,{options:{attach:"MineCannonPlace"}}),this.placeSquad(h,{amount:2,delay:0,options:{attach:"TurretPlace"}}),this.moveTo({x:.8})),this.wait(500),this.parallel(this.moveTo({x:-1.5}),this.placeSquad(o,{amount:4,delay:500,options:{x:20,y:-20}}),this.sequence(this.wait(8e3),this.placeSquad(a,{amount:3,delay:250,options:{x:20,y:300}})),this.wait(8e3),this.sequence(this.placeSquad(u,{amount:4,delay:400}),this.wait(6e3),this.parallel(this.action("open1"),this.placeSquad(a,{amount:5,delay:200,options:{x:525,y:e.viewport.height+100}}),this.sequence(this.wait(3e3),this.action("close1"),this.moveTo({x:-.5})),this.sequence(this.wait(3e3),this.action("open2"),this.moveTo({x:-.1}))))))},n}(),t.exports={default:s}}).call(e,n(1).default)},function(t,e,n){(function(e){var i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=n(15).EntityScript,o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,r),n.prototype.spawn=function(t){return e.e("MineCannon, KeepAlive").mineCannon()},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.invincible(!0),this.wait(1e3),this.invincible(!1),this.repeat(this.sequence(this.async(this.placeSquad(i,{amount:5,delay:1500,options:{location:this.get("barrelEnd")}})),this.wait(3e3),this.action("aim"),this.wait(3e3),this.action("aim"),this.wait(3e3),this.action("aim"))))},n.prototype.onKilled=function(){return this.leaveAnimation(this.sequence(this.deathDecoy(),this.bigExplosion(),this.wait(400),this.bigExplosion(),this.wait(1e4),this.endDecoy()))},n}(),i=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return s(n,r),n.prototype.spawn=function(t){var n,i,r;return r=t.location(),n=function(t,e,n){var i,r,o;return i=Math.PI/180*t,r=e.x-Math.cos(i)*n,o=e.y-Math.sin(i)*n,{x:r,y:o}},i=n(r.angle,{x:r.xStart,y:r.yStart},300),this.locationInfo={startX:r.xStart,startY:r.yStart,endX:i.x,endY:i.y},e.e("Mine").mine({x:this.locationInfo.startX,y:this.locationInfo.startY,z:10,defaultSpeed:200})},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.parallel(this.movePath([[this.locationInfo.startX,this.locationInfo.startY],[this.locationInfo.endX,this.locationInfo.endY],[this.locationInfo.endX-400,.9]],{rotate:!1,speed:600}),this.sequence(this.wait(100),this.blast(this.location()))),this.pickTarget("PlayerControlledShip"),this.moveTo({y:1.1,easing:"easeInQuad"}),function(t){return function(){return t.entity.attr({z:0})}}(this),this.moveTo(this.targetLocation(),{y:1.01,easing:"easeInOutQuad"}),this.moveTo(this.targetLocation({x:null})),this.animate("open"),this.wait(200),this.animate("blink",-1),this.wait(1e3),function(t){return function(){return t.entity.absorbDamage({damage:t.entity.health})}}(this),this.endSequence())},n.prototype.onKilled=function(){return this.bigExplosion()},n}(),t.exports={default:o}}).call(e,n(1).default)},function(t,e,n){(function(e){var i,r,o={}.hasOwnProperty;i=n(15).EntityScript,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.spawn=function(t){return e.e("MineCannon, KeepAlive").mineCannon()},n.prototype.execute=function(){return this.invincible(!0)},n}(),t.exports={TurretInActive:r}}).call(e,n(1).default)},function(t,e,n){var i,r,o,s,a,u,h,c,l,f,p,d,y,v,g,_,m,x,w,b={}.hasOwnProperty;_=n(66),r=n(15).LazerScript,m=n(103),c=m.Stage1BossLeaving,l=m.Stage1BossPopup,f=m.Stage1BossRocketStrike,x=n(102),u=x.ScraperFlyer,v=x.Swirler,h=x.Shooter,y=x.Stalker,w=n(150),s=w.Noon,o=w.Morning,n(235).default,a=n(709).default,i=n(236).default,d=n(710).default,i=n(236).default,g=n(712).default,p=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)b.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,r),e.prototype.nextScript=d,e.prototype.assets=function(){return this.loadAssets("explosion")},e.prototype.execute=function(){return this.sequence(this.checkpoint(this.checkpointMidStage("BayFull",4e5)),this.say("General","Hunt him down! We need that AI control back!",{noise:"low"}),this.chapterTitle(2,"City"),this.setSpeed(200),this.showText("Get Ready",{color:"#00FF00",mode:"blink",blink_amount:3,blink_speed:300}),this.bossfightReward(),this.skylineFighting(),this.highSkylineFighting(),this.if(function(){return this.player(1).active&&!this.player(2).active},this.sequence(this.say("John","I'll try to find another way in!"),this.say("General","There are rumours about an underground entrance",{noise:"low"}),this.say("John","Ok I'll check it out"))),this.if(function(){return!this.player(1).active&&this.player(2).active},this.sequence(this.say("Jim","I'll use the underground tunnels!"),this.say("General","How do you know about those...\nthat's classified info!",{noise:"low"}))),this.if(function(){return this.player(1).active&&this.player(2).active},this.sequence(this.say("John","We'll try to find another way in!"),this.say("Jim","We can use the underground tunnels!"),this.say("General","How do you know about those...\nthat's classified info!",{noise:"low"}))),this.setScenery("Skyline2"),this.parallel(this.gainHeight(-1300,{duration:3e4}),this.placeSquad(i,{amount:3,delay:6e3})),this.checkpoint(this.checkpointStreets("Skyline2")),this.placeSquad(g),this.placeSquad(i),this.wait(8e3))},e.prototype.checkpointStreets=function(t){return this.sequence(this.setScenery(t),this.async(this.runScript(s,{skipTo:6e5})),this.wait(6e3))},e.prototype.bossfightReward=function(){return this.sequence(this.setPowerupPool("rapidb","speedb","aimb","speed","rapidb"),this.parallel(this.sequence(this.wait(4e3),this.gainHeight(800,{duration:14e3})),this.sequence(this.stalkerShootout(),this.setScenery("Skyline"),this.placeSquad(h,{amount:8,delay:500,drop:"pool",options:{shootOnSight:!0}}),this.attackWaves(this.parallel(this.placeSquad(h,{amount:8,delay:500,options:{shootOnSight:!0}}),this.placeSquad(v,{amount:8,delay:500,options:{shootOnSight:!0}})),{drop:"pool"}))))},e.prototype.skylineFighting=function(){return this.sequence(this.setSpeed(100),this.checkpoint(this.checkpointMidStage("Skyline",45e4)),this.changeSeaLevel(500),this.setPowerupPool("damageb","damage","aimb","rapidb","damage","damageb"),this.attackWaves(this.parallel(this.placeSquad(u,{amount:8,delay:500}),this.placeSquad(h,{amount:8,delay:500,options:{shootOnSight:!0}})),{drop:"pool"}),this.sunRise(),this.parallel(this.attackWaves(this.parallel(this.placeSquad(u,{amount:8,delay:500}),this.placeSquad(h,{amount:8,delay:500,options:{shootOnSight:!0}})),{drop:"pool"}),this.cloneEncounter()),this.placeSquad(l),this.setScenery("Skyline"),this.parallel(this.attackWaves(this.sequence(this.placeSquad(u,{amount:6,delay:500}),this.placeSquad(u,{amount:8,delay:500})),{drop:"pool"}),this.sequence(this.wait(3e3),this.placeSquad(h,{amount:4,delay:750,drop:"pool",options:{shootOnSight:!0}}),this.placeSquad(i,{drop:"pool"}))))},e.prototype.highSkylineFighting=function(){return this.sequence(this.parallel(this.placeSquad(l),this.cloneEncounter()),this.gainHeight(300,{duration:4e3}),this.checkpoint(this.checkpointEndStage("Skyline",5e5)),this.parallel(this.repeat(2,this.cloneEncounter()),this.placeSquad(i,{drop:"pool",amount:2,delay:5e3})),this.async(this.showText("Warning!",{color:"#FF0000",mode:"blink"})),this.setScenery("SkylineBase"),this.while(this.wait(3e3),this.waitingRocketStrike()),this.placeSquad(c),this.say("General","He is going to the military complex!\nBut we cant get through those shields now...",{noise:"low"}))},e.prototype.cloneEncounter=function(){return this.attackWaves(this.parallel(this.sequence(this.wait(4e3),this.placeSquad(a,{options:{from:"top"}})),this.placeSquad(a,{options:{from:"bottom"}})),{drop:"pool"})},e.prototype.checkpointMidStage=function(t,e){return this.sequence(this.setScenery(t),this.async(this.runScript(o,{speed:1})),this.wait(2e3))},e.prototype.checkpointEndStage=function(t,e){return this.sequence(this.setScenery(t),this.sunRise({skipTo:e}),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"damage",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"damage",inFrontOf:this.player(2)}))),this.wait(2e3),this.parallel(this.if(function(){return this.player(1).active},this.drop({item:"rapid",inFrontOf:this.player(1)})),this.if(function(){return this.player(2).active},this.drop({item:"speed",inFrontOf:this.player(2)}))))},e.prototype.sunRise=function(t){return null==t&&(t={skipTo:0}),this.async(this.runScript(s,_({speed:1},t)))},e.prototype.stalkerShootout=function(){return this.parallel(this.placeSquad(y,{drop:"pool"}),this.attackWaves(this.parallel(this.placeSquad(h,{amount:8,delay:500,options:{shootOnSight:!0}}),this.placeSquad(v,{amount:8,delay:500,options:{shootOnSight:!0}})),{drop:"pool"}))},e.prototype.waitingRocketStrike=function(){return this.sequence(this.placeSquad(f,{amount:6,delay:150,options:{gridConfig:{x:{start:1.1,steps:1,stepSize:.05},y:{start:.125,steps:12,stepSize:.05}}}}),this.wait(200))},e}(),t.exports={default:p}},function(t,e,n){(function(e){var i,r,o,s,a,u={}.hasOwnProperty;i=n(15).EntityScript,a=n(103),o=a.Stage1BossAimedRocket,s=a.Stage1BossBombRaid,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.assets=function(){return this.loadAssets("playerShip")},n.prototype.spawn=function(t){var n,i,r;return this.dir=null!=(i=t.from)?i:"top",(n=e.e("PlayerClone").attr({x:e.viewport.width+40,y:.1*e.viewport.height,defaultSpeed:null!=(r=t.speed)?r:280}).playerClone({pointsOnHit:25,pointsOnDestroy:125})).addComponent("ShootOnSight").shootOnSight({cooldown:150,sightAngle:20,projectile:function(t,n,i){return e.e("Sphere, Hostile, Projectile").attr({w:9,h:9,speed:600,damage:1}).blink().shoot(t,n,i)}}),n},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.while(this.flightPathTop(),this.sequence(this.dropBombs(),this.wait(300))),this.turnAround(),this.while(this.flightPathBack(),this.sequence(this.dropBombs(),this.wait(300))),this.turnAround(),this.while(this.flightPathTop(),this.sequence(this.dropBombs(),this.wait(300))))},n.prototype.flightPathTop=function(){return this.moveTo({x:-.1,y:.2})},n.prototype.flightPathBack=function(){return this.moveTo({x:1.01,y:.1})},n.prototype.onKilled=function(){return this.sequence(this.deathDecoy(),this.smallExplosion({offsetX:20,offsetY:30}),this.wait(50),this.smallExplosion({offsetX:40,offsetY:20}),this.wait(50),this.smallExplosion({offsetX:-50,offsetY:-10}),this.wait(20),this.endDecoy(),this.bigExplosion({damage:0}))},n.prototype.dropBombs=function(){return this.async(this.placeSquad(s,{options:{location:this.location(),armed:!1,scale:.75}}))},n.prototype.fireRockets=function(t){var e;return e=o,this.sequence(this.async(this.placeSquad(e,{options:{z:5,offsetX:0,offsetY:50,scale:.75,cooldown:20,health:100,location:this.location()}})),this.async(this.placeSquad(e,{options:{z:-5,offsetX:0,offsetY:-50,cooldown:20,scale:.75,health:100,location:this.location()}})))},n}(),t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){var i,r,o,s={}.hasOwnProperty;r=n(711).default,i=n(15).LazerScript,o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,i),e.prototype.assets=function(){return this.loadAssets("explosion")},e.prototype.execute=function(){return this.sequence(this.parallel(this.sequence(this.disableControls(),this.disableWeapons(),this.placeSquad(r,{amount:2,delay:1e3})),this.sequence(this.say("This is it for now!\nMore content coming soon!"),this.say("Thanks for playing!\nThe heroes will return..."))),this.screenFadeOut(),this.endGame())},e}(),t.exports={default:o}},function(t,e,n){(function(e){var i,r,o={}.hasOwnProperty;i=n(15).EntityScript,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.spawn=function(t){var n;return n=void 0,e("PlayerControlledShip").each(function(){if(this.playerNumber===t.index+1)return n=this}),null!=n&&n.addComponent("Tween","Choreography","ViewportFixed","AnimationMode"),n},n.prototype.execute=function(){return this.sequence(this.rotate(0,200),this.moveTo({x:.2,y:.45+.1*this.options.index,speed:100,easing:"easeInOutQuad"}),this.synchronizeOn("waveOff"),this.wait(2e3),this.wait(300*this.options.index),this.moveTo({x:1.1,y:.45+.1*this.options.index,speed:500,easing:"easeInQuad"}))},n}(),t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){(function(e){var i,r,o={}.hasOwnProperty;i=n(15).EntityScript,r=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.spawn=function(t){return e.e("Tank").attr({x:e.viewport.width+40,y:400,defaultSpeed:30,weaponOrigin:[30,0]}).tank()},n.prototype.execute=function(){return this.bindSequence("Destroyed",this.onKilled),this.sequence(this.moveTo({x:.2,speed:120}),this.action("searchAim"),this.while(this.sequence(this.wait(200),this.moveTo({x:.8}),this.wait(4e3),this.moveTo({x:-.2})),this.sequence(this.action("shoot"),this.wait(1e3),this.action("searchAim"))))},n.prototype.onKilled=function(){return this.leaveAnimation(this.sequence(this.deathDecoy(),this.bigExplosion(),this.wait(200),this.bigExplosion(),function(t){return function(){return t.entity.removeComponent("ViewportFixed"),t.entity.attr({lightness:.3}),t.entity.barrel.attr({lightness:.3})}}(this),this.wait(1e4),this.endDecoy()))},n}(),t.exports={default:r}}).call(e,n(1).default)},function(t,e,n){(function(t,e,i){var r,o,s;o=n(73),s=n(163),r=n(151),t.defineScene("GameOver",function(n){var a,u,h,c,l,f;return t.background("#000"),t.viewport.x=0,t.viewport.y=0,f=t.viewport.width,u=t.viewport.height,l="Game Over",n.gameCompleted&&(l="Congratulations"),t.e("2D, DOM, Text").attr({x:0,y:.2*u,w:f}).text(l).textColor("#FF0000").textAlign("center").textFont({size:"50px",weight:"bold",family:"Press Start 2P"}),c=function(e){return function(){var n,i,o,s,a,c,l,p;for(n=null,i=o=0,a=h.length;o<a;i=++o)(l=h[i]).player===e.player&&(n=i);if(p=e.name+": "+e.points,n<10&&(p+=" - "+function(){switch(n){case 0:return"ACE";case 1:return"2nd";case 2:return"3rd";default:return n+1+"th"}}()),t.e("2D, DOM, Text").attr({x:0,y:.45*u+45*e.index,w:f}).text(p).textColor(e.color).textAlign("center").textFont({size:"20px",weight:"bold",family:"Press Start 2P"}),n<10)return c=t.e("2D, DOM, Text").attr({x:.25*f,y:.45*u+45*(e.index+1),w:f}).text("Enter name: ").textColor(e.color).textAlign("left").textFont({size:"20px",weight:"bold",family:"Press Start 2P"}),(s=t.e("TextInput").attr({x:.6*f,y:.45*u+45*(e.index+1),w:f}).textColor(e.color).textAlign("left").textFont({size:"20px",weight:"bold",family:"Press Start 2P"})).textInput(e.player,3).then(function(t){var n,i,o,a,u;return u=function(){var t,e,n,i;return(e=localStorage.getItem("SPDLZR"))?(n=e.slice(0,20),t=e.slice(20),l=r.AES.decrypt(t,n),(i=l.toString(r.enc.Utf8)).length>1?JSON.parse(i):[]):[]},(a=u()).push({initials:t,score:e.points,time:(new Date).getTime()}),n=JSON.stringify(a),o=r.AES.encrypt(n,"secret").toString().slice(8,28),i=r.AES.encrypt(n,o).toString(),localStorage.setItem("SPDLZR",o+i),c.destroy(),s.destroy()})}},a=[],h=o(e.highscores()),t("Player ControlScheme").each(function(t){return null,h.push({initials:null,player:this,score:this.points}),a.push(c({index:t,name:this.name,points:this.points,player:this,color:this.color()})),window.ga("send","event","Game","Score",void 0,this.points)}),h=s(h,"score").reverse(),i.sequence(a).then(function(){return t.e("Delay").delay(function(){var i,r,o;return e.credits>0&&!n.gameCompleted?(o=10,l=1===e.credits?"1 Credit left":e.credits+" Credits left",t.e("2D, DOM, Text").attr({x:0,y:.8*u,w:f}).textColor("#FF0000").textAlign("center").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}).text(l),i=t.e("2D, DOM, Text").attr({x:0,y:.8*u+30,w:f}).textColor("#FF0000").textAlign("center").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}),r="Press fire to continue",i.text(r+" "+("00"+o).slice(-2)),this.delay(function(){return o-=1,i.text(r+" "+("00"+o).slice(-2))},1e3,o,function(){return t.enterScene("Scores")}),t("Player").each(function(){return this.reset(),this.one("Activated",function(){return e.credits-=1,t.enterScene("Game",n)})})):this.delay(function(){return t.enterScene("Scores")},5e3)},2e3,0)})},function(){return t("Delay").each(function(){return this.destroy()}),t("Player").each(function(){return this.unbind("Activated")})})}).call(e,n(1).default,n(7).default,n(18).default)},function(t,e,n){(function(t,e){n(715).default,t.defineScene("Intro",function(){var n,i,r;return e.resetCredits(),t.background("#000000"),t.viewport.x=0,t.viewport.y=0,r=t.viewport.width,i=t.viewport.height,.15,t.e("2D, DOM, Text, Tween, Delay").attr({x:.35*r,y:.4*i,w:400}).text("Speedlazer").textColor("#0000ff").textFont({size:"40px",weight:"bold",family:"Press Start 2P"}).delay(function(){return this.tween({x:.65*r-400},2e3),this.one("TweenEnd",function(){return this.tween({x:.35*r},2e3)})},4e3,-1),t.e("2D, DOM, Text, Tween, Delay").attr({x:.5*r-150,y:.6*i,w:300}).text("Press fire to start!").textColor("#FF0000").textFont({size:"15px",weight:"bold",family:"Press Start 2P"}).delay(function(){return this.tween({alpha:.5},1e3),this.one("TweenEnd",function(){return this.tween({alpha:1},1e3)})},2e3,-1),n=e.highscores()[0],t.e("2D, DOM, Text").attr({x:0,y:.85*i,w:r}).text("HI SCORE: "+n.score+" "+n.initials).textColor("#FFFF00").textAlign("center").textFont({size:"10px",weight:"bold",family:"Press Start 2P"}),t("Player").each(function(){return this.reset(),this.one("Activated",function(){return t.enterScene("Game")})}),t.e("Delay").delay(function(){return t.enterScene("Scores")},2e4)},function(){return t("Delay").each(function(){return this.destroy()}),t("Player").each(function(){return this.unbind("Activated")})})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(e){var i,r,o,s={}.hasOwnProperty;i=n(15).LazerScript,r=n(150).StartOfDawn,o=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(n,i),n.prototype.assets=function(){return this.loadAssets("playerShip")},n.prototype.execute=function(){return this.inventoryAdd("weapon","lasers",{marking:"L"}),this.inventoryAdd("ship","points",{marking:"P",icon:"star"}),e.e("DebugInfo"),this.sequence(this.setWeapons(["lasers"]),this.setScenery("Ocean"),this.setSpeed(0),this.panCamera({y:120},0),this.wait(1500),this.panCamera({y:-120},4e3),this.wait(1500),this.setSpeed(300),this.wait(15e3),this.gainHeight(20,{duration:1e3}),this.wait(5e3),this.gainHeight(60,{duration:4e3}),this.wait(1e4),this.gainHeight(-140,{duration:4e3}),this.async(this.runScript(r,{speed:1})))},n}(),t.exports={default:o}}).call(e,n(1).default)},function(t,e,n){(function(t){t.defineScene("New",function(){})}).call(e,n(1).default)},function(t,e,n){(function(t,e){t.defineScene("Scores",function(){var n,i,r,o;return e.resetCredits(),t.background("#000000"),t.viewport.x=0,t.viewport.y=0,o=t.viewport.width,n=t.viewport.height,t.e("2D, DOM, Text").attr({x:0,y:.1*n,w:o}).text("Highscores").textColor("#FFFF00").textAlign("center").textFont({size:"40px",weight:"bold",family:"Press Start 2P"}),r=e.highscores(),i=0,t.e("Delay").delay(function(){var e,s,a;if(e=r[i])return s=function(){switch(i){case 0:return"ACE";case 1:return"2nd";case 2:return"3rd";default:return i+1+"th"}}(),a=function(){switch(i){case 0:return"20px";case 1:case 2:return"18px";default:return"15px"}}(),t.e("2D, DOM, Text").attr({x:0,y:.25*n+36*i,w:o}).text(s+"  "+e.score+" "+e.initials).textColor("#FFFF00").textAlign("center").textFont({size:a,weight:"bold",family:"Press Start 2P"}),i+=1},500,9),t("Player").each(function(){return this.reset(),this.one("Activated",function(){return t.enterScene("Game")})}),t.e("Delay").delay(function(){return t.enterScene("Intro")},2e4)},function(){return t("Delay").each(function(){return this.destroy()}),t("Player").each(function(){return this.unbind("Activated")})})}).call(e,n(1).default,n(7).default)},function(t,e,n){(function(t){t.s("SeaLevel",{init(){this.offset=0},getSeaLevel(e=1){const n=t("ScrollWall").get(0).viewHeight;return t.viewport.height-20-n-this.offset-(1-e)*(200-2.5*n)},setOffset(t){this.offset=t}})}).call(e,n(1).default)},function(t,e){(function(){"use strict";var e="undefined"!=typeof window&&void 0!==window.document?window.document:{},n=void 0!==t&&t.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,r=n.length,o={};i<r;i++)if((t=n[i])&&t[1]in e){for(i=0;i<t.length;i++)o[n[0][i]]=t[i];return o}return!1}(),o={change:r.fullscreenchange,error:r.fullscreenerror},s={request:function(t){var n=r.requestFullscreen;t=t||e.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?t[n]():t[n](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){e[r.exitFullscreen]()},toggle:function(t){this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(t,n){var i=o[t];i&&e.addEventListener(i,n,!1)},off:function(t,n){var i=o[t];i&&e.removeEventListener(i,n,!1)},raw:r};r?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(e[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return e[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(e[r.fullscreenEnabled])}}}),n?t.exports=s:window.screenfull=s):n?t.exports=!1:window.screenfull=!1})()}]);
//# sourceMappingURL=game.591e635047d0abcbd4e1.js.map